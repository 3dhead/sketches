<!doctype html><html lang=en><meta charset=UTF-8><meta name=viewport content="width=device-width,shrink-to-fit=0,user-scalable=no,minimum-scale=1,maximum-scale=1"><title>2019.03.07-21.10.24.js</title><style>html{width:100%;height:100%;display:flex;justify-content:center;align-items:center;flex-direction:column}body{width:100%;height:100%;display:flex;justify-content:center;align-items:center;flex-direction:row;margin:0}canvas{margin:auto;display:block;box-shadow:0 2px 12px -2px rgba(0,0,0,.15)}</style><body><script>!function(){return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[a]={exports:{}};e[a][0].call(f.exports,function(t){return i(e[a][1][t]||t)},f,f.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}}()({1:[function(t,e,n){"use strict";e.exports=function(t,e){t=t||document.body,e=e||{};var n=[.01,Infinity];"distanceLimits"in e&&(n[0]=e.distanceLimits[0],n[1]=e.distanceLimits[1]);"zoomMin"in e&&(n[0]=e.zoomMin);"zoomMax"in e&&(n[1]=e.zoomMax);var c=i({center:e.center||[0,0,0],up:e.up||[0,1,0],eye:e.eye||[0,0,10],mode:e.mode||"orbit",distanceLimits:n}),f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=0,h=t.clientWidth,p=t.clientHeight,d={view:c,element:t,delay:e.delay||16,rotateSpeed:e.rotateSpeed||1,zoomSpeed:e.zoomSpeed||1,translateSpeed:e.translateSpeed||1,flipX:!!e.flipX,flipY:!!e.flipY,modes:c.modes,tick:function(){var e=r(),n=this.delay;c.idle(e-n),c.flush(e-(100+2*n));var i=e-2*n;c.recalcMatrix(i);for(var o=!0,a=c.computedMatrix,s=0;s<16;++s)o=o&&f[s]===a[s],f[s]=a[s];var u=t.clientWidth===h&&t.clientHeight===p;return h=t.clientWidth,p=t.clientHeight,o?!u:(l=Math.exp(c.computedRadius[0]),!0)},lookAt:function(t,e,n){c.lookAt(c.lastT(),t,e,n)},rotate:function(t,e,n){c.rotate(c.lastT(),t,e,n)},pan:function(t,e,n){c.pan(c.lastT(),t,e,n)},translate:function(t,e,n){c.translate(c.lastT(),t,e,n)}};Object.defineProperties(d,{matrix:{get:function(){return c.computedMatrix},set:function(t){return c.setMatrix(c.lastT(),t),c.computedMatrix},enumerable:!0},mode:{get:function(){return c.getMode()},set:function(t){return c.setMode(t),c.getMode()},enumerable:!0},center:{get:function(){return c.computedCenter},set:function(t){return c.lookAt(c.lastT(),t),c.computedCenter},enumerable:!0},eye:{get:function(){return c.computedEye},set:function(t){return c.lookAt(c.lastT(),null,t),c.computedEye},enumerable:!0},up:{get:function(){return c.computedUp},set:function(t){return c.lookAt(c.lastT(),null,null,t),c.computedUp},enumerable:!0},distance:{get:function(){return l},set:function(t){return c.setDistance(c.lastT(),t),t},enumerable:!0},distanceLimits:{get:function(){return c.getDistanceLimits(n)},set:function(t){return c.setDistanceLimits(t),t},enumerable:!0}}),t.addEventListener("contextmenu",function(t){return t.preventDefault(),!1});var m=0,v=0,g={shift:!1,control:!1,alt:!1,meta:!1};function b(e,n,i,o){var a=1/t.clientHeight,s=a*(n-m),u=a*(i-v),f=d.flipX?1:-1,h=d.flipY?1:-1,p=Math.PI*d.rotateSpeed,b=r();if(1&e)o.shift?c.rotate(b,0,0,-s*p):c.rotate(b,f*p*s,-h*p*u,0);else if(2&e)c.pan(b,-d.translateSpeed*s*l,d.translateSpeed*u*l,0);else if(4&e){var y=d.zoomSpeed*u/window.innerHeight*(b-c.lastT())*50;c.pan(b,0,0,l*(Math.exp(y)-1))}m=n,v=i,g=o}return o(t,b),t.addEventListener("touchstart",function(e){var n=s(e.changedTouches[0],t);b(0,n[0],n[1],g),b(1,n[0],n[1],g),e.preventDefault()},!!u&&{passive:!1}),t.addEventListener("touchmove",function(e){var n=s(e.changedTouches[0],t);b(1,n[0],n[1],g),e.preventDefault()},!!u&&{passive:!1}),t.addEventListener("touchend",function(e){s(e.changedTouches[0],t),b(0,m,v,g),e.preventDefault()},!!u&&{passive:!1}),a(t,function(t,e,n){var i=d.flipX?1:-1,o=d.flipY?1:-1,a=r();if(Math.abs(t)>Math.abs(e))c.rotate(a,0,0,-t*i*Math.PI*d.rotateSpeed/window.innerWidth);else{var s=d.zoomSpeed*o*e/window.innerHeight*(a-c.lastT())/100;c.pan(a,0,0,l*(Math.exp(s)-1))}},!0),d};var r=t("right-now"),i=t("3d-view"),o=t("mouse-change"),a=t("mouse-wheel"),s=t("mouse-event-offset"),u=t("has-passive-events")},{"3d-view":2,"has-passive-events":121,"mouse-change":154,"mouse-event-offset":155,"mouse-wheel":157,"right-now":173}],2:[function(t,e,n){"use strict";e.exports=function(t){var e=(t=t||{}).eye||[0,0,1],n=t.center||[0,0,0],s=t.up||[0,1,0],u=t.distanceLimits||[0,Infinity],c=t.mode||"turntable",f=r(),l=i(),h=o();return f.setDistanceLimits(u[0],u[1]),f.lookAt(0,e,n,s),l.setDistanceLimits(u[0],u[1]),l.lookAt(0,e,n,s),h.setDistanceLimits(u[0],u[1]),h.lookAt(0,e,n,s),new a({turntable:f,orbit:l,matrix:h},c)};var r=t("turntable-camera-controller"),i=t("orbit-camera-controller"),o=t("matrix-camera-controller");function a(t,e){this._controllerNames=Object.keys(t),this._controllerList=this._controllerNames.map(function(e){return t[e]}),this._mode=e,this._active=t[e],this._active||(this._mode="turntable",this._active=t.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var s=a.prototype;[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]].forEach(function(t){for(var e=t[0],n=[],r=0;r<t[1];++r)n.push("a"+r);var i="var cc=this._controllerList;for(var i=0;i<cc.length;++i){cc[i]."+t[0]+"("+n.join()+")}";s[e]=Function.apply(null,n.concat(i))}),s.recalcMatrix=function(t){this._active.recalcMatrix(t)},s.getDistance=function(t){return this._active.getDistance(t)},s.getDistanceLimits=function(t){return this._active.getDistanceLimits(t)},s.lastT=function(){return this._active.lastT()},s.setMode=function(t){if(t!==this._mode){var e=this._controllerNames.indexOf(t);if(!(e<0)){var n=this._active,r=this._controllerList[e],i=Math.max(n.lastT(),r.lastT());n.recalcMatrix(i),r.setMatrix(i,n.computedMatrix),this._active=r,this._mode=t,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},s.getMode=function(){return this._mode}},{"matrix-camera-controller":152,"orbit-camera-controller":161,"turntable-camera-controller":178}],3:[function(t,e,n){"use strict";var r=Math.abs,i=Math.min;function o(t,e,n,a){var s=r(t-e);return null==n&&(n=o.DBL_EPSILON),null==a&&(a=n),s<=n||(s<=a*i(r(t),r(e))||t===e)}o.FLT_EPSILON=1.1920929e-7,o.DBL_EPSILON=2.220446049250313e-16,e.exports=o},{}],4:[function(t,e,n){"use strict";n.byteLength=function(t){var e=c(t),n=e[1];return 3*(e[0]+n)/4-n},n.toByteArray=function(t){for(var e,n=c(t),r=n[0],a=n[1],s=new o(function(t,e,n){return 3*(e+n)/4-n}(0,r,a)),u=0,f=a>0?r-4:r,l=0;l<f;l+=4)e=i[t.charCodeAt(l)]<<18|i[t.charCodeAt(l+1)]<<12|i[t.charCodeAt(l+2)]<<6|i[t.charCodeAt(l+3)],s[u++]=e>>16&255,s[u++]=e>>8&255,s[u++]=255&e;2===a&&(e=i[t.charCodeAt(l)]<<2|i[t.charCodeAt(l+1)]>>4,s[u++]=255&e);1===a&&(e=i[t.charCodeAt(l)]<<10|i[t.charCodeAt(l+1)]<<4|i[t.charCodeAt(l+2)]>>2,s[u++]=e>>8&255,s[u++]=255&e);return s},n.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(f(t,a,a+16383>s?s:a+16383));1===i?o.push(r[(e=t[n-1])>>2]+r[e<<4&63]+"=="):2===i&&o.push(r[(e=(t[n-2]<<8)+t[n-1])>>10]+r[e>>4&63]+r[e<<2&63]+"=");return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function f(t,e,n){for(var i,o=[],a=e;a<n;a+=3)o.push(r[(i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]))>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],5:[function(t,e,n){"use strict";function r(t,e,n,r,i,o){var a=["function ",t,"(a,l,h,",r.join(","),"){",o?"":"var i=",n?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",i?".get(m)":"[m]"];return o?e.indexOf("c")<0?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):a.push(";if(",e,"){i=m;"),a.push(n?"l=m+1}else{h=m-1}":"h=m-1}else{l=m+1}"),a.push("}"),a.push(o?"return -1};":"return i};"),a.join("")}function i(t,e,n,i){return new Function([r("A","x"+t+"y",e,["y"],!1,i),r("B","x"+t+"y",e,["y"],!0,i),r("P","c(x,y)"+t+"0",e,["y","c"],!1,i),r("Q","c(x,y)"+t+"0",e,["y","c"],!0,i),"function dispatchBsearch",n,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",n].join(""))()}e.exports={ge:i(">=",!1,"GE"),gt:i(">",!1,"GT"),lt:i("<",!0,"LT"),le:i("<=",!0,"LE"),eq:i("-",!0,"EQ",!0)}},{}],6:[function(t,e,n){(function(e){"use strict";var r=t("base64-js"),i=t("ieee754");n.Buffer=e,n.SlowBuffer=function(t){+t!=t&&(t=0);return e.alloc(+t)},n.INSPECT_MAX_BYTES=50;var o=2147483647;function a(t){if(t>o)throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=new Uint8Array(t);return n.__proto__=e.prototype,n}function e(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return c(t)}return s(t,e,n)}function s(t,n,r){if("string"==typeof t)return function(t,n){"string"==typeof n&&""!==n||(n="utf8");if(!e.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var r=0|h(t,n),i=a(r),o=i.write(t,n);o!==r&&(i=i.slice(0,o));return i}(t,n);if(ArrayBuffer.isView(t))return f(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(B(t,ArrayBuffer)||t&&B(t.buffer,ArrayBuffer))return function(t,n,r){if(n<0||t.byteLength<n)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<n+(r||0))throw new RangeError('"length" is outside of buffer bounds');var i;i=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);return i.__proto__=e.prototype,i}(t,n,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=t.valueOf&&t.valueOf();if(null!=i&&i!==t)return e.from(i,n,r);var o=function(t){if(e.isBuffer(t)){var n=0|l(t.length),r=a(n);return 0===r.length?r:(t.copy(r,0,0,n),r)}if(void 0!==t.length)return"number"!=typeof t.length||z(t.length)?a(0):f(t);if("Buffer"===t.type&&Array.isArray(t.data))return f(t.data)}(t);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return e.from(t[Symbol.toPrimitive]("string"),n,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function c(t){return u(t),a(t<0?0:0|l(t))}function f(t){for(var e=t.length<0?0:0|l(t.length),n=a(e),r=0;r<e;r+=1)n[r]=255&t[r];return n}function l(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function h(t,n){if(e.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||B(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;for(var o=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return I(t).length;default:if(o)return i?-1:F(t).length;n=(""+n).toLowerCase(),o=!0}}function p(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function d(t,n,r,i,o){if(0===t.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),z(r=+r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof n&&(n=e.from(n,i)),e.isBuffer(n))return 0===n.length?-1:m(t,n,r,i,o);if("number"==typeof n)return n&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,n,r):Uint8Array.prototype.lastIndexOf.call(t,n,r):m(t,[n],r,i,o);throw new TypeError("val must be string, number or Buffer")}function m(t,e,n,r,i){var o,a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var f=-1;for(o=n;o<s;o++)if(c(t,o)===c(e,-1===f?0:o-f)){if(-1===f&&(f=o),o-f+1===u)return f*a}else-1!==f&&(o-=o-f),f=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var l=!0,h=0;h<u;h++)if(c(t,o+h)!==c(e,h)){l=!1;break}if(l)return o}return-1}function v(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(z(s))return a;t[n+a]=s}return a}function g(t,e,n,r){return N(F(e,t.length-n),t,n,r)}function b(t,e,n,r){return N(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function y(t,e,n,r){return b(t,e,n,r)}function x(t,e,n,r){return N(I(e),t,n,r)}function w(t,e,n,r){return N(function(t,e){for(var n,r,i=[],o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),r=n>>8,i.push(n%256),i.push(r);return i}(e,t.length-n),t,n,r)}function _(t,e,n){return r.fromByteArray(0===e&&n===t.length?t:t.slice(e,n))}function M(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,u,c=t[i],f=null,l=c>239?4:c>223?3:c>191?2:1;if(i+l<=n)switch(l){case 1:c<128&&(f=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(f=u);break;case 3:a=t[i+2],128==(192&(o=t[i+1]))&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(f=u);break;case 4:a=t[i+2],s=t[i+3],128==(192&(o=t[i+1]))&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(f=u)}null===f?(f=65533,l=1):f>65535&&(r.push((f-=65536)>>>10&1023|55296),f=56320|1023&f),r.push(f),i+=l}return function(t){var e=t.length;if(e<=A)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=A));return n}(r)}n.kMaxLength=o,(e.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192,e.from=function(t,e,n){return s(t,e,n)},e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,e.alloc=function(t,e,n){return function(t,e,n){return u(t),t<=0?a(t):void 0!==e?"string"==typeof n?a(t).fill(e,n):a(t).fill(e):a(t)}(t,e,n)},e.allocUnsafe=function(t){return c(t)},e.allocUnsafeSlow=function(t){return c(t)},e.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==e.prototype},e.compare=function(t,n){if(B(t,Uint8Array)&&(t=e.from(t,t.offset,t.byteLength)),B(n,Uint8Array)&&(n=e.from(n,n.offset,n.byteLength)),!e.isBuffer(t)||!e.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===n)return 0;for(var r=t.length,i=n.length,o=0,a=Math.min(r,i);o<a;++o)if(t[o]!==n[o]){r=t[o],i=n[o];break}return r<i?-1:i<r?1:0},e.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,n){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return e.alloc(0);var r;if(void 0===n)for(n=0,r=0;r<t.length;++r)n+=t[r].length;var i=e.allocUnsafe(n),o=0;for(r=0;r<t.length;++r){var a=t[r];if(B(a,Uint8Array)&&(a=e.from(a)),!e.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,o),o+=a.length}return i},e.byteLength=h,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)p(this,e,e+1);return this},e.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)p(this,e,e+3),p(this,e+1,e+2);return this},e.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)p(this,e,e+7),p(this,e+1,e+6),p(this,e+2,e+5),p(this,e+3,e+4);return this},e.prototype.toLocaleString=e.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?M(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return S(this,e,n);case"utf8":case"utf-8":return M(this,e,n);case"ascii":return E(this,e,n);case"latin1":case"binary":return k(this,e,n);case"base64":return _(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===e.compare(this,t)},e.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},e.prototype.compare=function(t,n,r,i,o){if(B(t,Uint8Array)&&(t=e.from(t,t.offset,t.byteLength)),!e.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===n&&(n=0),void 0===r&&(r=t?t.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),n<0||r>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&n>=r)return 0;if(i>=o)return-1;if(n>=r)return 1;if(this===t)return 0;for(var a=(o>>>=0)-(i>>>=0),s=(r>>>=0)-(n>>>=0),u=Math.min(a,s),c=this.slice(i,o),f=t.slice(n,r),l=0;l<u;++l)if(c[l]!==f[l]){a=c[l],s=f[l];break}return a<s?-1:s<a?1:0},e.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},e.prototype.indexOf=function(t,e,n){return d(this,t,e,n,!0)},e.prototype.lastIndexOf=function(t,e,n){return d(this,t,e,n,!1)},e.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return v(this,t,e,n);case"utf8":case"utf-8":return g(this,t,e,n);case"ascii":return b(this,t,e,n);case"latin1":case"binary":return y(this,t,e,n);case"base64":return x(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function E(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function k(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function S(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=D(t[o]);return i}function T(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function R(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function C(t,n,r,i,o,a){if(!e.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>o||n<a)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}function O(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(t,e,n,r,o){return e=+e,n>>>=0,o||O(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function P(t,e,n,r,o){return e=+e,n>>>=0,o||O(t,0,n,8),i.write(t,e,n,r,52,8),n+8}e.prototype.slice=function(t,n){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(n=void 0===n?r:~~n)<0?(n+=r)<0&&(n=0):n>r&&(n=r),n<t&&(n=t);var i=this.subarray(t,n);return i.__proto__=e.prototype,i},e.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||R(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},e.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||R(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},e.prototype.readUInt8=function(t,e){return t>>>=0,e||R(t,1,this.length),this[t]},e.prototype.readUInt16LE=function(t,e){return t>>>=0,e||R(t,2,this.length),this[t]|this[t+1]<<8},e.prototype.readUInt16BE=function(t,e){return t>>>=0,e||R(t,2,this.length),this[t]<<8|this[t+1]},e.prototype.readUInt32LE=function(t,e){return t>>>=0,e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},e.prototype.readUInt32BE=function(t,e){return t>>>=0,e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},e.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||R(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},e.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||R(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},e.prototype.readInt8=function(t,e){return t>>>=0,e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},e.prototype.readInt16LE=function(t,e){t>>>=0,e||R(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt16BE=function(t,e){t>>>=0,e||R(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt32LE=function(t,e){return t>>>=0,e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},e.prototype.readInt32BE=function(t,e){return t>>>=0,e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},e.prototype.readFloatLE=function(t,e){return t>>>=0,e||R(t,4,this.length),i.read(this,t,!0,23,4)},e.prototype.readFloatBE=function(t,e){return t>>>=0,e||R(t,4,this.length),i.read(this,t,!1,23,4)},e.prototype.readDoubleLE=function(t,e){return t>>>=0,e||R(t,8,this.length),i.read(this,t,!0,52,8)},e.prototype.readDoubleBE=function(t,e){return t>>>=0,e||R(t,8,this.length),i.read(this,t,!1,52,8)},e.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e>>>=0,n>>>=0,r)||C(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},e.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e>>>=0,n>>>=0,r)||C(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},e.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||C(this,t,e,1,255,0),this[e]=255&t,e+1},e.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||C(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},e.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||C(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},e.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||C(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},e.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||C(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},e.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);C(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},e.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);C(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},e.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||C(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},e.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||C(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},e.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||C(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},e.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||C(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},e.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||C(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},e.prototype.writeFloatLE=function(t,e,n){return j(this,t,e,!0,n)},e.prototype.writeFloatBE=function(t,e,n){return j(this,t,e,!1,n)},e.prototype.writeDoubleLE=function(t,e,n){return P(this,t,e,!0,n)},e.prototype.writeDoubleBE=function(t,e,n){return P(this,t,e,!1,n)},e.prototype.copy=function(t,n,r,i){if(!e.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),n>=t.length&&(n=t.length),n||(n=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===t.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-n<i-r&&(i=t.length-n+r);var o=i-r;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(n,r,i);else if(this===t&&r<n&&n<i)for(var a=o-1;a>=0;--a)t[a+n]=this[a+r];else Uint8Array.prototype.set.call(t,this.subarray(r,i),n);return o},e.prototype.fill=function(t,n,r,i){if("string"==typeof t){if("string"==typeof n?(i=n,n=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!e.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===t.length){var o=t.charCodeAt(0);("utf8"===i&&o<128||"latin1"===i)&&(t=o)}}else"number"==typeof t&&(t&=255);if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;var a;if(n>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(a=n;a<r;++a)this[a]=t;else{var s=e.isBuffer(t)?t:e.from(t,i),u=s.length;if(0===u)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(a=0;a<r-n;++a)this[a+n]=s[a%u]}return this};var L=/[^+/0-9A-Za-z-_]/g;function D(t){return t<16?"0"+t.toString(16):t.toString(16)}function F(t,e){var n;e=e||Infinity;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function I(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(L,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function N(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function B(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function z(t){return t!=t}}).call(this,t("buffer").Buffer)},{"base64-js":4,buffer:6,ieee754:123}],7:[function(t,e,n){e.exports=function(t){"string"==typeof t&&(t=[t]);for(var e=[].slice.call(arguments,1),n=[],r=0;r<t.length-1;r++)n.push(t[r],e[r]||"");return n.push(t[r]),n.join("")}},{}],8:[function(t,e,n){var r=t("./lib/css-color"),i=t("./lib/css-color-names.json"),o=t("./lib/relative-luminance"),a=t("./lib/hsl"),s=t("./lib/hex-to-rgba"),u=t("./lib/rgba-to-hex");e.exports.parse=r.parse,e.exports.style=r.style,e.exports.names=i,e.exports.relativeLuminance=function(t){var n=e.exports.parse(t);return n?o(n.rgb):null},e.exports.contrastRatio=function(t,n){var r=e.exports.relativeLuminance(t),i=e.exports.relativeLuminance(n);return null==r||null==i?null:(Math.max(r,i)+.05)/(Math.min(r,i)+.05)},e.exports.offsetHSL=function(t,n,r,i){var o=e.exports.parse(t);return o?(o.hsla[0]+=n||0,o.hsla[1]=Math.max(0,Math.min(100,o.hsla[1]+(r||0))),o.hsla[2]=Math.max(0,Math.min(100,o.hsla[2]+(i||0))),e.exports.parse({hsla:o.hsla})):null},e.exports.blend=function(t,n,r){var i=e.exports.parse(t),o=e.exports.parse(n);if(null==i||null==o)return null;var a=i.rgba,s=o.rgba,u=(r="number"==typeof r&&isFinite(r)?r:1)*s[3];if(u>=1)return o;for(var c=0;c<3;c++)s[c]=s[c]*u+a[c]*(a[3]*(1-u));return s[3]=Math.max(0,Math.min(1,u+a[3]*(1-u))),e.exports.parse(s)},e.exports.hexToRGBA=s,e.exports.RGBAToHex=u,e.exports.RGBAToHSLA=a.RGBAToHSLA,e.exports.HSLAToRGBA=a.HSLAToRGBA},{"./lib/css-color":14,"./lib/css-color-names.json":13,"./lib/hex-to-rgba":15,"./lib/hsl":16,"./lib/relative-luminance":17,"./lib/rgba-to-hex":18}],9:[function(t,e,n){var r=t("lineclip");e.exports.clipSegmentToCircle=t("./lib/clip/clip-segment-to-circle"),e.exports.clipLineToCircle=t("./lib/clip/clip-line-to-circle"),e.exports.clipPolylinesToBox=function(t,e,n,i){if(!Array.isArray(e)||2!==e.length&&4!==e.length)throw new Error("Expected box to either be format [ minPoint, maxPoint ] or [ minX, minY, maxX, maxY ]");if(2===e.length){var o=e[0],a=e[1];e=[o[0],o[1],a[0],a[1]]}return i=!1!==i,(n=Boolean(n))?t.map(function(t){var n=r.polygon(t,e);return i&&n.length>2&&n.push(n[0]),n}).filter(function(t){return t.length>0}):t.map(function(t){return r.polyline(t,e)}).reduce(function(t,e){return t.concat(e)},[])},e.exports.createHatchLines=function(t,e,n,r){if(!Array.isArray(t)||2!==t.length&&4!==t.length)throw new Error("Expected box to either be format [ minPoint, maxPoint ] or [ minX, minY, maxX, maxY ]");if(2===t.length){var i=t[0],o=t[1];t=[i[0],i[1],o[0],o[1]]}null==e&&(e=-Math.PI/4);null==n&&(n=.5);null==r&&(r=[]);if(0===(n=Math.abs(n)))throw new Error("cannot use a spacing of zero as it will run an infinite loop!");var a=t[0],s=t[1],u=t[2],c=t[3],f=u-a,l=c-s;if(0===f||0===l)return r;var h=Math.sqrt(f*f+l*l)/2,p=Math.PI/2-e,d=Math.cos(p),m=Math.sin(p),v=a+f/2,g=s+l/2,b=-h;for(;b<=h;){var y=v+b*d+h*m,x=g+b*m-h*d,w=v+b*d-h*m,_=g+b*m+h*d;b+=n,y<a&&w<a||y>u&&w>u||(x<s&&_<s||x>c&&_>c||r.push([[y,x],[w,_]]))}return r}},{"./lib/clip/clip-line-to-circle":11,"./lib/clip/clip-segment-to-circle":12,lineclip:129}],10:[function(t,e,n){e.exports={random:t("./random"),math:t("./math"),penplot:t("./penplot.js"),geometry:t("./geometry.js"),shader:t("./shader.js"),color:t("./color.js")}},{"./color.js":8,"./geometry.js":9,"./math":20,"./penplot.js":21,"./random":22,"./shader.js":23}],11:[function(t,e,n){var r=t("almost-equal");function i(t){return t*t}e.exports=function(t,e,n,o,a){null==a&&(a=[]);var s,u=i(e[0]-t[0])+i(e[1]-t[1]),c=2*((e[0]-t[0])*(t[0]-n[0])+(e[1]-t[1])*(t[1]-n[1])),f=i(n[0])+i(n[1])+i(t[0])+i(t[1])-2*(n[0]*t[0]+n[1]*t[1])-i(o),l=c*c-4*u*f;if(l<0)return!1;if(r(l,0))return a.push([t[0]+(s=-c/(2*u))*(e[0]-t[0]),t[1]+s*(e[1]-t[1])]),!0;if(l>0){var h=Math.sqrt(l);return a.push([t[0]+(s=(-c+h)/(2*u))*(e[0]-t[0]),t[1]+s*(e[1]-t[1])]),a.push([t[0]+(s=(-c-h)/(2*u))*(e[0]-t[0]),t[1]+s*(e[1]-t[1])]),!0}return null}},{"almost-equal":3}],12:[function(t,e,n){var r=t("almost-equal");function i(t,e,n,r,i){return(o=n-t)*o+(a=r-e)*a<=i*i;var o,a}function o(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function a(t,e,n,r,i){var a=i/o(t,e,n,r);return[t+a*(n-t),e+a*(r-e)]}e.exports=function(t,e,n,s,u){return function(t,e,n,s,u,c,f,l){null==l&&(l=[]);var h,p,d,m,v,g=i(t,e,u,c,f),b=i(n,s,u,c,f);if(g&&b)return l.push([t,e]),l.push([n,s]),!0;if(g||b){d=function(t,e,n,r,i,o){var a=n-t,s=r-e,u=(a*(i-t)+s*(o-e))/(a*a+s*s);return[t+u*a,e+u*s]}(t,e,n,s,u,c),h=o(m=d[0],v=d[1],u,c),p=Math.sqrt(f*f-h*h);var y=g?[t,e]:[n,s],x=g?a(m,v,n,s,p):a(m,v,t,e,p);return r(y[0],x[0])&&r(y[1],x[1])?(l.push(y),!0):(l.push(y),l.push(x),!0)}return d=function(t,e,n,r,i,o){var a=n-t,s=r-e,u=a*(i-t)+s*(o-e);if(u<=0)return[t,e];var c=a*a+s*s;if(c<=u)return[n,r];var f=u/c;return[t+f*a,e+f*s]}(t,e,n,s,u,c),v=d[1],!(r(t,m=d[0])&&r(e,v)||r(n,m)&&r(s,v))&&(!((h=o(m,v,u,c))>f)&&(r(h,f)?(l.push([m,v]),!0):r(h,0)?(l.push(a(u,c,t,e,f)),l.push(a(u,c,n,s,f)),!0):(p=Math.sqrt(f*f-h*h),l.push(a(m,v,t,e,p)),l.push(a(m,v,n,s,p)),!0)))}(t[0],t[1],e[0],e[1],n[0],n[1],s,u)}},{"almost-equal":3}],13:[function(t,e,n){e.exports={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}},{}],14:[function(t,e,n){var r=t("./css-color-names.json"),i=t("./hsl"),o=t("./hex-to-rgba"),a=t("./rgba-to-hex"),s=t("./wrap");function u(t){if("string"!=typeof t)throw new TypeError("Color parsing must be performed on a string parameter");var e,n,u;if((t=t.toLowerCase())in r?t=r[t]:"transparent"===t&&(t="#00000000"),/^#[a-f0-9]+$/.test(t))e=o(t),u=a(e),n=i.RGBAToHSLA(e);else{var c=/^((?:rgb|hsl)a?)\s*\(([^)]*)\)/.exec(t);if(!c)return null;var f=c[1].replace(/a$/,""),l=c[2].replace(/^\s+|\s+$/g,"").split(/\s*,\s*/).map(function(t,e){return e<=2?Math.round(parseFloat(t)||0):("number"==typeof(t=parseFloat(t))&&isFinite(t)||(t=1),t)});void 0!==l[3]&&isFinite(l[3])||(l[3]=1),"rgb"===f?(n=i.RGBAToHSLA(l),e=l):"hsl"===f&&(e=i.HSLAToRGBA(l),l[0]=s(l[0],0,360),n=l),u=a(e)}return e||u||n?{hex:u,alpha:e[3],rgb:e.slice(0,3),rgba:e,hsl:n.slice(0,3),hsla:n}:null}function c(t,e,n,r){return t=Math.max(0,Math.min(255,Math.round(t))),e=Math.max(0,Math.min(255,Math.round(e))),n=Math.max(0,Math.min(255,Math.round(n))),1!==r&&isFinite(r)&&void 0!==r?"rgba("+[t,e,n,r=Math.max(0,Math.min(1,r))].join(", ")+")":"rgb("+[t,e,n].join(", ")+")"}function f(t,e,n,r){return t=s(t,0,360),t=Math.max(0,Math.min(360,Math.round(t))),e=Math.max(0,Math.min(100,Math.round(e))),n=Math.max(0,Math.min(100,Math.round(n))),1!==r&&isFinite(r)&&void 0!==r?"hsla("+[t,e,n,r=Math.max(0,Math.min(1,r))].join(", ")+")":"hsl("+[t,e,n].join(", ")+")"}e.exports.parse=function(t){if("string"==typeof t)return u(t);if(Array.isArray(t)&&t.length>=3){var e=c(t[0],t[1],t[2],t[3]);return u(e)}var n;if(t&&"object"==typeof t&&(t.hex?n=t.hex:t.rgba?n=c(t.rgba[0],t.rgba[1],t.rgba[2],t.rgba[3]):t.hsla?n=f(t.hsla[0],t.hsla[1],t.hsla[2],t.hsla[3]):t.rgb?n=c(t.rgb[0],t.rgb[1],t.rgb[2]):t.hsl&&(n=f(t.hsl[0],t.hsl[1],t.hsl[2])),n))return u(n);return null},e.exports.style=function(t){var n=e.exports.parse(t);if(n){var r=n.rgba;return c(r[0],r[1],r[2],r[3])}return null}},{"./css-color-names.json":13,"./hex-to-rgba":15,"./hsl":16,"./rgba-to-hex":18,"./wrap":19}],15:[function(t,e,n){e.exports=function(t){if("string"!=typeof t)throw new TypeError("Hex code parsing must be performed on a string parameter");if(t=t.toLowerCase(),!/^#[a-f0-9]+$/.test(t))return null;var e=t.replace(/^#/,""),n=1;8===e.length&&(n=parseInt(e.slice(6,8),16)/255,e=e.slice(0,6));4===e.length&&(n=parseInt(e.slice(3,4).repeat(2),16)/255,e=e.slice(0,3));3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var r=parseInt(e,16);return[r>>16,r>>8&255,255&r,n]}},{}],16:[function(t,e,n){var r=t("float-hsl2rgb"),i=t("float-rgb2hsl"),o=t("./wrap");e.exports.RGBAToHSLA=function(t){var e=i([t[0]/255,t[1]/255,t[2]/255]);return[Math.max(0,Math.min(360,Math.round(360*e[0]))),Math.max(0,Math.min(100,Math.round(100*e[1]))),Math.max(0,Math.min(100,Math.round(100*e[2]))),t[3]]},e.exports.HSLAToRGBA=function(t){var e=o(t[0],0,360),n=r([e/360,t[1]/100,t[2]/100]);return[Math.max(0,Math.min(255,Math.round(255*n[0]))),Math.max(0,Math.min(255,Math.round(255*n[1]))),Math.max(0,Math.min(255,Math.round(255*n[2]))),t[3]]}},{"./wrap":19,"float-hsl2rgb":34,"float-rgb2hsl":35}],17:[function(t,e,n){var r=.2126,i=.7152,o=.0722,a=1/12.92;function s(t){return Math.pow((t+.055)/1.055,2.4)}e.exports=function(t){var e=t[0]/255,n=t[1]/255,u=t[2]/255,c=e<=.03928?e*a:s(e),f=n<=.03928?n*a:s(n),l=u<=.03928?u*a:s(u);return c*r+f*i+l*o}},{}],18:[function(t,e,n){e.exports=function(t){if(!t||!Array.isArray(t))throw new TypeError("Must specify an array to convert into a hex code");var e=Math.max(0,Math.min(255,Math.round(t[0]||0))),n=Math.max(0,Math.min(255,Math.round(t[1]||0))),r=Math.max(0,Math.min(255,Math.round(t[2]||0))),i=t[3];void 0!==i&&isFinite(i)||(i=1);var o=Math.max(0,Math.min(255,Math.round(255*i))),a=255===o?"":(256|o).toString(16).slice(1);return"#"+((r|n<<8|e<<16|1<<24).toString(16).slice(1)+a)}},{}],19:[function(t,e,n){e.exports=function(t,e,n){if("number"!=typeof e||"number"!=typeof n)throw new TypeError('Must specify "to" and "from" arguments as numbers');if(e>n){var r=e;e=n,n=r}var i=n-e;if(0===i)return n;return t-i*Math.floor((t-e)/i)}},{}],20:[function(t,e,n){var r=t("defined"),i=t("./lib/wrap"),o=Number.EPSILON;function a(t,e,n){return e<n?t<e?e:t>n?n:t:t<n?n:t>e?e:t}function s(t,e,n){return t*(1-n)+e*n}function u(t,e,n){return Math.abs(t-e)<o?0:(n-t)/(e-t)}function c(t,e){return e=r(e,0),"number"==typeof t&&isFinite(t)?t:e}function f(t){if("number"!=typeof t)throw new TypeError("Expected dims argument");return function(e,n){var i;n=r(n,0),null==e?i=n:"number"==typeof e&&isFinite(e)&&(i=e);var o,a=[];if(null==i)for(o=0;o<t;o++)a[o]=c(e[o],n);else for(o=0;o<t;o++)a[o]=i;return a}}function l(t,e,n,r){if(r=r||[],t.length!==e.length)throw new TypeError("min and max array are expected to have the same length");for(var i=0;i<t.length;i++)r[i]=s(t[i],e[i],n);return r}function h(t,e){if("number"!=typeof(t=r(t,0)))throw new TypeError("Expected n argument to be a number");for(var n=[],i=0;i<t;i++)n.push(e);return n}function p(t,e){return(t%e+e)%e}function d(t,e,n,r){return s(t,e,1-Math.exp(-n*r))}e.exports={mod:p,fract:function(t){return t-Math.floor(t)},sign:function(t){return t>0?1:t<0?-1:0},degToRad:function(t){return t*Math.PI/180},radToDeg:function(t){return 180*t/Math.PI},wrap:i,pingPong:function(t,e){return t=p(t,2*e),e-Math.abs(t-e)},linspace:function(t,e){if("number"!=typeof(t=r(t,0)))throw new TypeError("Expected n argument to be a number");"boolean"==typeof(e=e||{})&&(e={endpoint:!0});var n=r(e.offset,0);return e.endpoint?h(t).map(function(e,r){return t<=1?0:(r+n)/(t-1)}):h(t).map(function(e,r){return(r+n)/t})},lerp:s,lerpArray:l,inverseLerp:u,lerpFrames:function(t,e,n){e=a(e,0,1);var r=t.length-1,i=e*r,o=Math.floor(i),u=i-o,c=Math.min(o+1,r),f=t[o%t.length],h=t[c%t.length];if("number"==typeof f&&"number"==typeof h)return s(f,h,u);if(Array.isArray(f)&&Array.isArray(h))return l(f,h,u,n);throw new TypeError("Mismatch in value type of two array elements: "+o+" and "+c)},clamp:a,clamp01:function(t){return a(t,0,1)},smoothstep:function(t,e,n){var r=a(u(t,e,n),0,1);return r*r*(3-2*r)},damp:d,dampArray:function(t,e,n,r,i){i=i||[];for(var o=0;o<t.length;o++)i[o]=d(t[o],e[o],n,r);return i},mapRange:function(t,e,n,r,i,a){if(Math.abs(e-n)<o)return r;var s=(t-e)/(n-e)*(i-r)+r;return a&&(i<r?s<i?s=i:s>r&&(s=r):s>i?s=i:s<r&&(s=r)),s},expand2D:f(2),expand3D:f(3),expand4D:f(4)}},{"./lib/wrap":19,defined:32}],21:[function(t,e,n){var r=t("defined"),i=t("convert-length");e.exports.polylinesToSVG=function(t,e){var n=(e=e||{}).width,o=e.height;if(void 0===n||void 0===o)throw new Error('Must specify "width" and "height" options');var a=e.units||"px",s=[],u={roundPixel:!1,precision:r(e.precision,5),pixelsPerInch:90};t.forEach(function(t){t.forEach(function(t,e){var n=0===e?"M":"L",r=i(t[0],a,"px",u).toString(),o=i(t[1],a,"px",u).toString();s.push(n+r+" "+o)})});var c=s.join(" "),f=i(n,a,"px",u).toString(),l=i(o,a,"px",u).toString(),h=e.fillStyle||"none",p=e.strokeStyle||"black",d=e.lineWidth;return void 0===d&&(d=i(.03,"cm",a,u).toString()),['<?xml version="1.0" standalone="no"?>','  <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','      "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">','  <svg width="'+n+a+'" height="'+o+a+'"','      xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+f+" "+l+'">',"    <g>",'      <path d="'+c+'" fill="'+h+'" stroke="'+p+'" stroke-width="'+d+a+'" />',"    </g>","</svg>"].join("\n")},e.exports.renderPolylines=function(t,n){var r=(n=n||{}).context;if(!r)throw new Error('Must specify "context" options');var o=n.units||"px",a=n.width,s=n.height;if(void 0===a||void 0===s)throw new Error('Must specify "width" and "height" options');var u=n.lineWidth;return void 0===u&&(u=i(.03,"cm",o,{roundPixel:!1,pixelsPerInch:90})),r.clearRect(0,0,a,s),r.fillStyle=n.background||"white",r.fillRect(0,0,a,s),t.forEach(function(t){r.beginPath(),t.forEach(function(t){r.lineTo(t[0],t[1])}),r.strokeStyle=n.foreground||n.strokeStyle||"black",r.lineWidth=u,r.lineJoin=n.lineJoin||"round",r.lineCap=n.lineCap||"round",r.stroke()}),[r.canvas,{data:e.exports.polylinesToSVG(t,n),extension:".svg"}]}},{"convert-length":26,defined:32}],22:[function(t,e,n){var r=t("seed-random"),i=t("simplex-noise"),o=t("defined");e.exports=function t(e){e=o(e,null);var n,a,s,u=Math.random,c=null,f=!1;return l(e),{value:h,createRandom:function(e){return t(e)},setSeed:l,getSeed:function(){return n},getRandomSeed:function(){return String(Math.floor(1e6*Math.random()))},valueNonZero:function(){for(var t=0;0===t;)t=h();return t},permuteNoise:function(){s=p()},noise1D:function(t,e,n){if(!isFinite(t))throw new TypeError("x component for noise() must be finite");return e=o(e,1),(n=o(n,1))*s.noise2D(t*e,0)},noise2D:function(t,e,n,r){if(!isFinite(t))throw new TypeError("x component for noise() must be finite");if(!isFinite(e))throw new TypeError("y component for noise() must be finite");return n=o(n,1),(r=o(r,1))*s.noise2D(t*n,e*n)},noise3D:function(t,e,n,r,i){if(!isFinite(t))throw new TypeError("x component for noise() must be finite");if(!isFinite(e))throw new TypeError("y component for noise() must be finite");if(!isFinite(n))throw new TypeError("z component for noise() must be finite");return r=o(r,1),(i=o(i,1))*s.noise3D(t*r,e*r,n*r)},noise4D:function(t,e,n,r,i,a){if(!isFinite(t))throw new TypeError("x component for noise() must be finite");if(!isFinite(e))throw new TypeError("y component for noise() must be finite");if(!isFinite(n))throw new TypeError("z component for noise() must be finite");if(!isFinite(r))throw new TypeError("w component for noise() must be finite");return i=o(i,1),(a=o(a,1))*s.noise4D(t*i,e*i,n*i,r*i)},sign:function(){return d()?1:-1},boolean:d,chance:function(t){if("number"!=typeof(t=o(t,.5)))throw new TypeError("expected n to be a number");return h()<t},range:m,rangeFloor:v,pick:function(t){return 0===t.length?void 0:t[v(0,t.length)]},shuffle:function(t){if(!Array.isArray(t))throw new TypeError("Expected Array, got "+typeof t);for(var e,n,r=t.length,i=t.slice();r;)e=Math.floor(h()*r--),n=i[r],i[r]=i[e],i[e]=n;return i},onCircle:g,insideCircle:function(t,e){t=o(t,1),g(1,e=e||[]);var n=t*Math.sqrt(h());return e[0]*=n,e[1]*=n,e},onSphere:function(t,e){t=o(t,1),e=e||[];var n=h()*Math.PI*2,r=2*h()-1,i=n,a=Math.acos(r);return e[0]=t*Math.sin(a)*Math.cos(i),e[1]=t*Math.sin(a)*Math.sin(i),e[2]=t*Math.cos(a),e},insideSphere:function(t,e){t=o(t,1),e=e||[];var n=h()*Math.PI*2,r=2*h()-1,i=h(),a=n,s=Math.acos(r),u=t*Math.cbrt(i);return e[0]=u*Math.sin(s)*Math.cos(a),e[1]=u*Math.sin(s)*Math.sin(a),e[2]=u*Math.cos(s),e},quaternion:function(t){t=t||[];var e=h(),n=h(),r=h(),i=Math.sqrt(1-e),o=Math.sqrt(e),a=2*Math.PI*n,s=2*Math.PI*r,u=Math.sin(a)*i,c=Math.cos(a)*i,f=Math.sin(s)*o,l=Math.cos(s)*o;return t[0]=u,t[1]=c,t[2]=f,t[3]=l,t},weighted:y,weightedSet:function(t){return 0===(t=t||[]).length?null:t[b(t)].value},weightedSetIndex:b,gaussian:function(t,e){if(t=o(t,0),e=o(e,1),f){f=!1;var n=c;return c=null,t+e*n}var r=0,i=0,a=0;do{r=2*h()-1,i=2*h()-1,a=r*r+i*i}while(a>=1||0===a);var s=Math.sqrt(-2*Math.log(a)/a);return c=i*s,f=!0,t+e*(r*s)}};function l(t,e){"number"==typeof t||"string"==typeof t?a=r(n=t,e):(n=void 0,a=u),s=p(),c=null,f=!1}function h(){return a()}function p(){return new i(a)}function d(){return h()>.5}function m(t,e){if(void 0===e&&(e=t,t=0),"number"!=typeof t||"number"!=typeof e)throw new TypeError("Expected all arguments to be numbers");return h()*(e-t)+t}function v(t,e){if(void 0===e&&(e=t,t=0),"number"!=typeof t||"number"!=typeof e)throw new TypeError("Expected all arguments to be numbers");return Math.floor(m(t,e))}function g(t,e){t=o(t,1),e=e||[];var n=2*h()*Math.PI;return e[0]=t*Math.cos(n),e[1]=t*Math.sin(n),e}function b(t){return 0===(t=t||[]).length?-1:y(t.map(function(t){return t.weight}))}function y(t){if(0===(t=t||[]).length)return-1;var e,n=0;for(e=0;e<t.length;e++)n+=t[e];if(n<=0)throw new Error("Weights must sum to > 0");var r=h()*n;for(e=0;e<t.length;e++){if(r<t[e])return e;r-=t[e]}return 0}}()},{defined:32,"seed-random":174,"simplex-noise":175}],23:[function(t,e,n){var r=t("regl"),i=t("primitive-quad"),o=t("parse-color"),a=t("defined");function s(t){return t&&!Array.isArray(t)&&"object"==typeof t}e.exports=function(t){if(!(t=t||{}).gl)throw new Error('Must specify { context: "webgl" } in sketch settings, or a WebGL-enabled canvas');var e=t.gl,n={gl:e};void 0!==t.extensions&&(n.extensions=t.extensions);void 0!==t.optionalExtensions&&(n.optionalExtensions=t.optionalExtensions);void 0!==t.profile&&(n.profile=t.profile);void 0!==t.onDone&&(n.onDone=t.onDone);var u,c=r(n),f=i(),l=new Map,h=t.uniforms||{},p=Object.assign({},h);Object.keys(h).forEach(function(t){var e=h[t];p[t]="function"==typeof e?function(t,n,r){var i=e.call(h,n,r);if(s(i))if(l.has(e)){var o=l.get(e);o(i),i=o}else{var a=c.texture(i);l.set(e,a),i=a}return i}:s(e)?c.texture(e):e});try{u=c({scissor:!!t.scissor&&{enable:!0,box:{x:c.prop("scissorX"),y:c.prop("scissorY"),width:c.prop("scissorWidth"),height:c.prop("scissorHeight")}},uniforms:p,frag:t.frag||["precision highp float;","","void main () {","  gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","}"].join("\n"),vert:t.vert||["precision highp float;","attribute vec3 position;","varying vec2 vUv;","","void main () {","  gl_Position = vec4(position.xyz, 1.0);","  vUv = gl_Position.xy * 0.5 + 0.5;","}"].join("\n"),blend:!1!==t.blend?{enable:!0,func:{srcRGB:"src alpha",srcAlpha:1,dstRGB:"one minus src alpha",dstAlpha:1}}:void 0,attributes:{position:f.positions},elements:f.cells})}catch(t){y(t)}var d=a(t.clearColor,"black");if("string"==typeof d){var m=o(d);if(!m.rgb)throw new Error('Error parsing { clearColor } color string "'+d+'"');d=m.rgb.slice(0,3).map(function(t){return t/255})}else if(d&&(!Array.isArray(d)||d.length<3))throw new Error("Error with { clearColor } option, must be a string or [ r, g, b ] float array");var v=a(t.clearAlpha,1),g=!!d&&d.concat([v||0]);return{render:function(t){c.poll(),g&&c.clear({color:g,depth:1,stencil:0}),b(t),e.flush()},regl:c,drawQuad:b,unload:function(){l.clear(),c.destroy()}};function b(t){if(t=t||{},u)try{u(t)}catch(e){y(e)&&null==t&&console.warn('Warning: shader.render() is not called with any "props" parameter')}}function y(t){if(/^\(regl\)/.test(t.message))return!0;throw t}}},{defined:32,"parse-color":162,"primitive-quad":170,regl:172}],24:[function(t,e,n){(function(r){!function(r,i){"object"==typeof n&&void 0!==e?e.exports=i(t("convert-length")):"function"==typeof define&&define.amd?define(["convert-length"],i):r.canvasSketch=i(null)}(this,function(t){t=t&&t.hasOwnProperty("default")?t.default:t;var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;var o=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,r){for(var o,a,s=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),u=1;u<arguments.length;u++){for(var c in o=Object(arguments[u]))n.call(o,c)&&(s[c]=o[c]);if(e){a=e(o);for(var f=0;f<a.length;f++)i.call(o,a[f])&&(s[a[f]]=o[a[f]])}}return s},a="undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:{};function s(t,e){return t(e={exports:{}},e.exports),e.exports}var u=a.performance&&a.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date},c=function(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then};var f=function(t){return!(!t||"object"!=typeof t)&&("object"==typeof window&&"object"==typeof window.Node?t instanceof window.Node:"number"==typeof t.nodeType&&"string"==typeof t.nodeName)};function l(){return"undefined"!=typeof window&&window["canvas-sketch-cli"]}function h(){for(var t=arguments,e=0;e<arguments.length;e++)if(null!=t[e])return t[e]}function p(){return"undefined"!=typeof document}var d,m=s(function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n}),v=s(function(t,e){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function i(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=n?r:i).supported=r,e.unsupported=i}),g=s(function(t){var e=Array.prototype.slice,n=t.exports=function(t,o,a){return a||(a={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?a.strict?t===o:t==o:function(t,o,a){var s,u;if(r(t)||r(o))return!1;if(t.prototype!==o.prototype)return!1;if(v(t))return!!v(o)&&(t=e.call(t),o=e.call(o),n(t,o,a));if(i(t)){if(!i(o))return!1;if(t.length!==o.length)return!1;for(s=0;s<t.length;s++)if(t[s]!==o[s])return!1;return!0}try{var c=m(t),f=m(o)}catch(t){return!1}if(c.length!=f.length)return!1;for(c.sort(),f.sort(),s=c.length-1;s>=0;s--)if(c[s]!=f[s])return!1;for(s=c.length-1;s>=0;s--)if(!n(t[u=c[s]],o[u],a))return!1;return typeof t==typeof o}(t,o,a))};function r(t){return null==t}function i(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}}),b=s(function(t,e){!function(e){var n,r,i,o=(n=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,r=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,i=/[^-+\dA-Z]/g,function(t,e,s,u){if(1!==arguments.length||"string"!==(null===(c=t)?"null":void 0===c?"undefined":"object"!=typeof c?typeof c:Array.isArray(c)?"array":{}.toString.call(c).slice(8,-1).toLowerCase())||/\d/.test(t)||(e=t,t=void 0),(t=t||new Date)instanceof Date||(t=new Date(t)),isNaN(t))throw TypeError("Invalid date");var c,f=(e=String(o.masks[e]||e||o.masks.default)).slice(0,4);"UTC:"!==f&&"GMT:"!==f||(e=e.slice(4),s=!0,"GMT:"===f&&(u=!0));var l=s?"getUTC":"get",h=t[l+"Date"](),p=t[l+"Day"](),d=t[l+"Month"](),m=t[l+"FullYear"](),v=t[l+"Hours"](),g=t[l+"Minutes"](),b=t[l+"Seconds"](),y=t[l+"Milliseconds"](),x=s?0:t.getTimezoneOffset(),w=function(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);var n=new Date(e.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var r=e.getTimezoneOffset()-n.getTimezoneOffset();return e.setHours(e.getHours()-r),1+Math.floor((e-n)/6048e5)}(t),_=function(t){var e=t.getDay();return 0===e&&(e=7),e}(t),M={d:h,dd:a(h),ddd:o.i18n.dayNames[p],dddd:o.i18n.dayNames[p+7],m:d+1,mm:a(d+1),mmm:o.i18n.monthNames[d],mmmm:o.i18n.monthNames[d+12],yy:String(m).slice(2),yyyy:m,h:v%12||12,hh:a(v%12||12),H:v,HH:a(v),M:g,MM:a(g),s:b,ss:a(b),l:a(y,3),L:a(Math.round(y/10)),t:v<12?o.i18n.timeNames[0]:o.i18n.timeNames[1],tt:v<12?o.i18n.timeNames[2]:o.i18n.timeNames[3],T:v<12?o.i18n.timeNames[4]:o.i18n.timeNames[5],TT:v<12?o.i18n.timeNames[6]:o.i18n.timeNames[7],Z:u?"GMT":s?"UTC":(String(t).match(r)||[""]).pop().replace(i,""),o:(x>0?"-":"+")+a(100*Math.floor(Math.abs(x)/60)+Math.abs(x)%60,4),S:["th","st","nd","rd"][h%10>3?0:(h%100-h%10!=10)*h%10],W:w,N:_};return e.replace(n,function(t){return t in M?M[t]:t.slice(1,t.length-1)})});function a(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t}o.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},o.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},t.exports=o}()}),y="",x=function(t,e){if("string"!=typeof t)throw new TypeError("expected a string");if(1===e)return t;if(2===e)return t+t;var n=t.length*e;if(d!==t||void 0===d)d=t,y="";else if(y.length>=n)return y.substr(0,n);for(;n>y.length&&e>1;)1&e&&(y+=t),e>>=1,t+=t;return y=(y+=t).substr(0,n)};var w,_=function(t,e,n){return t=t.toString(),void 0===e?t:(n=0===n?"0":n?n.toString():" ",x(n,e-t.length)+t)},M=function(){},A={extension:"",prefix:"",suffix:""},E=["image/png","image/jpeg","image/webp"];function k(t,e){return void 0===e&&(e={}),new Promise(function(n,r){e=o({},A,e);var i=R(Object.assign({},e,{frame:void 0})),a=t?"streamStart":"streamEnd",s=l();return s&&s.output&&"function"==typeof s[a]?s[a](o({},e,{filename:i})).then(function(t){return n(t)}):n({filename:i,client:!1})})}function S(t,e){return void 0===e&&(e={}),function(t){return new Promise(function(e){var n=t.indexOf(",");if(-1!==n){for(var r=t.slice(n+1),i=window.atob(r),o=t.slice(0,n),a=/data:([^;]+)/.exec(o),s=(a?a[1]:"")||void 0,u=new ArrayBuffer(i.length),c=new Uint8Array(u),f=0;f<i.length;f++)c[f]=i.charCodeAt(f);e(new window.Blob([u],{type:s}))}else e(new window.Blob)})}(t).then(function(t){return T(t,e)})}function T(t,e){return void 0===e&&(e={}),new Promise(function(n){var r=(e=o({},A,e)).filename,i=l();if(i&&"function"==typeof i.saveBlob&&i.output)return i.saveBlob(t,o({},e,{filename:r})).then(function(t){return n(t)});w||((w=document.createElement("a")).style.visibility="hidden",w.target="_blank"),w.download=r,w.href=window.URL.createObjectURL(t),document.body.appendChild(w),w.onclick=function(){w.onclick=M,setTimeout(function(){window.URL.revokeObjectURL(t),w.parentElement&&w.parentElement.removeChild(w),w.removeAttribute("href"),n({filename:r,client:!1})})},w.click()})}function R(t){if(void 0===t&&(t={}),"function"==typeof(t=o({},t)).file)return t.file(t);if(t.file)return t.file;var e,n=null,r="";("string"==typeof t.extension&&(r=t.extension),"number"==typeof t.frame)&&(e="number"==typeof t.totalFrames?t.totalFrames:Math.max(1e3,t.frame),n=_(String(t.frame),String(e).length,"0"));var i=isFinite(t.totalLayers)&&isFinite(t.layer)&&t.totalLayers>1?""+t.layer:"";return null!=n?[i,n].filter(Boolean).join("-")+r:[t.prefix,t.name||t.timeStamp,i,t.hash,t.suffix].filter(Boolean).join("-")+r}var C={dimension:"dimensions",animated:"animate",animating:"animate",unit:"units",P5:"p5",pixellated:"pixelated",looping:"loop",pixelPerInch:"pixels"},O=["dimensions","units","pixelsPerInch","orientation","scaleToFit","scaleToView","bleed","pixelRatio","exportPixelRatio","maxPixelRatio","scaleContext","resizeCanvas","styleCanvas","canvas","context","attributes","parent","file","name","prefix","suffix","animate","playing","loop","duration","totalFrames","fps","playbackRate","timeScale","frame","time","flush","pixelated","hotkeys","p5","id","scaleToFitPadding","data","params","encoding","encodingQuality"],j=function(t){Object.keys(t).forEach(function(t){t in C?console.warn('[canvas-sketch] Could not recognize the setting "'+t+'", did you mean "'+C[t]+'"?'):O.includes(t)||console.warn('[canvas-sketch] Could not recognize the setting "'+t+'"')})};var P=[["postcard",101.6,152.4],["poster-small",280,430],["poster",460,610],["poster-large",610,910],["business-card",50.8,88.9],["2r",64,89],["3r",89,127],["4r",102,152],["5r",127,178],["6r",152,203],["8r",203,254],["10r",254,305],["11r",279,356],["12r",305,381],["a0",841,1189],["a1",594,841],["a2",420,594],["a3",297,420],["a4",210,297],["a5",148,210],["a6",105,148],["a7",74,105],["a8",52,74],["a9",37,52],["a10",26,37],["2a0",1189,1682],["4a0",1682,2378],["b0",1e3,1414],["b1",707,1e3],["b1+",720,1020],["b2",500,707],["b2+",520,720],["b3",353,500],["b4",250,353],["b5",176,250],["b6",125,176],["b7",88,125],["b8",62,88],["b9",44,62],["b10",31,44],["b11",22,32],["b12",16,22],["c0",917,1297],["c1",648,917],["c2",458,648],["c3",324,458],["c4",229,324],["c5",162,229],["c6",114,162],["c7",81,114],["c8",57,81],["c9",40,57],["c10",28,40],["c11",22,32],["c12",16,22],["half-letter",5.5,8.5,"in"],["letter",8.5,11,"in"],["legal",8.5,14,"in"],["junior-legal",5,8,"in"],["ledger",11,17,"in"],["tabloid",11,17,"in"],["ansi-a",8.5,11,"in"],["ansi-b",11,17,"in"],["ansi-c",17,22,"in"],["ansi-d",22,34,"in"],["ansi-e",34,44,"in"],["arch-a",9,12,"in"],["arch-b",12,18,"in"],["arch-c",18,24,"in"],["arch-d",24,36,"in"],["arch-e",36,48,"in"],["arch-e1",30,42,"in"],["arch-e2",26,38,"in"],["arch-e3",27,39,"in"]].reduce(function(t,e){var n={units:e[3]||"mm",dimensions:[e[1],e[2]]};return t[e[0]]=n,t[e[0].replace(/-/g," ")]=n,t},{});function L(e,n,r,i){return void 0===n&&(n="px"),void 0===r&&(r="px"),void 0===i&&(i=72),t(e,n,r,{pixelsPerInch:i,precision:4,roundPixel:!0})}function D(t,e){var n,r,i,o,a,s,u=p(),c=e.dimensions,f=function(t){return!(!t.dimensions||"string"!=typeof t.dimensions&&!(Array.isArray(t.dimensions)&&t.dimensions.length>=2))}(e),l=t.exporting,d=!!f&&!1!==e.scaleToFit,m=!(!l&&f)||e.scaleToView;u||(d=m=!1);var v,g,b=e.units,y="number"==typeof e.pixelsPerInch&&isFinite(e.pixelsPerInch)?e.pixelsPerInch:72,x=h(e.bleed,0),w=u?window.devicePixelRatio:1,_=m?w:1;"number"==typeof e.pixelRatio&&isFinite(e.pixelRatio)?g=h(e.exportPixelRatio,v=e.pixelRatio):f?(v=_,g=h(e.exportPixelRatio,1)):g=h(e.exportPixelRatio,v=w),"number"==typeof e.maxPixelRatio&&isFinite(e.maxPixelRatio)&&(v=Math.min(e.maxPixelRatio,v)),l&&(v=g);var M,A,E=function(t,e){if(!p())return[300,150];var n=e.parent||window;if(n===window||n===document||n===document.body)return[window.innerWidth,window.innerHeight];var r=n.getBoundingClientRect();return[r.width,r.height]}(0,e),k=E[0],S=E[1];if(f){var T=function(t,e,n){if(void 0===e&&(e="px"),void 0===n&&(n=72),"string"==typeof t){var r=t.toLowerCase();if(!(r in P))throw new Error('The dimension preset "'+t+'" is not supported or could not be found; try using a4, a3, postcard, letter, etc.');var i=P[r];return i.dimensions.map(function(t){return L(t,i.units,e,n)})}return t}(c,b,y),R=Math.max(T[0],T[1]),C=Math.min(T[0],T[1]);if(e.orientation){var O="landscape"===e.orientation;n=O?R:C,r=O?C:R}else n=T[0],r=T[1];M=n,A=r,n+=2*x,r+=2*x}else M=n=k,A=r=S;var j=n,D=r;if(f&&b&&(j=L(n,b,"px",y),D=L(r,b,"px",y)),i=Math.round(j),o=Math.round(D),d&&!l&&f){var F=n/r,I=k/S,N=h(e.scaleToFitPadding,40),B=Math.round(k-2*N),z=Math.round(S-2*N);(i>B||o>z)&&(I>F?(o=z,i=Math.round(o*F)):(i=B,o=Math.round(i/F)))}return{bleed:x,pixelRatio:v,width:n,height:r,dimensions:[n,r],units:b||"px",scaleX:(a=m?Math.round(v*i):Math.round(v*j))/n,scaleY:(s=m?Math.round(v*o):Math.round(v*D))/r,viewportWidth:m?Math.round(i):Math.round(j),viewportHeight:m?Math.round(o):Math.round(D),canvasWidth:a,canvasHeight:s,trimWidth:M,trimHeight:A,styleWidth:i,styleHeight:o}}var F=function(t,e){if("string"!=typeof t)throw new TypeError("must specify type string");if(e=e||{},"undefined"==typeof document&&!e.canvas)return null;var n=e.canvas||document.createElement("canvas");"number"==typeof e.width&&(n.width=e.width);"number"==typeof e.height&&(n.height=e.height);var r,i=e;try{var o=[t];0===t.indexOf("webgl")&&o.push("experimental-"+t);for(var a=0;a<o.length;a++)if(r=n.getContext(o[a],i))return r}catch(t){r=null}return r||null};function I(t){var e,n;void 0===t&&(t={});var r=!1;if(!1!==t.canvas){if(!(e=t.context)||"string"==typeof e){var i=t.canvas;i||(i=function(){if(!p())throw new Error("It appears you are runing from Node.js or a non-browser environment. Try passing in an existing { canvas } interface instead.");return document.createElement("canvas")}(),r=!0);var a=e||"2d";if("function"!=typeof i.getContext)throw new Error("The specified { canvas } element does not have a getContext() function, maybe it is not a <canvas> tag?");if(!(e=F(a,o({},t.attributes,{canvas:i}))))throw new Error("Failed at canvas.getContext('"+a+"') - the browser may not support this context, or a different context may already be in use with this canvas.")}if(n=e.canvas,t.canvas&&n!==t.canvas)throw new Error("The { canvas } and { context } settings must point to the same underlying canvas element");t.pixelated&&(e.imageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.oImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1,e.msImageSmoothingEnabled=!1,n.style["image-rendering"]="pixelated")}return{canvas:n,context:e,ownsCanvas:r}}var N=function(){var t=this;this._settings={},this._props={},this._sketch=void 0,this._raf=null,this._lastRedrawResult=void 0,this._isP5Resizing=!1,this._keyboardShortcuts=function(t){void 0===t&&(t={});var e=function(e){if(t.enabled()){var n=l();83!==e.keyCode||e.altKey||!e.metaKey&&!e.ctrlKey?32===e.keyCode?t.togglePlay(e):n&&!e.altKey&&75===e.keyCode&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),t.commit(e)):(e.preventDefault(),t.save(e))}};return{attach:function(){window.addEventListener("keydown",e)},detach:function(){window.removeEventListener("keydown",e)}}}({enabled:function(){return!1!==t.settings.hotkeys},save:function(e){e.shiftKey?t.props.recording?(t.endRecord(),t.run()):t.record():t.props.recording||t.exportFrame()},togglePlay:function(){t.props.playing?t.pause():t.play()},commit:function(e){t.exportFrame({commit:!0})}}),this._animateHandler=function(){return t.animate()},this._resizeHandler=function(){t.resize()&&t.render()}},B={sketch:{configurable:!0},settings:{configurable:!0},props:{configurable:!0}};B.sketch.get=function(){return this._sketch},B.settings.get=function(){return this._settings},B.props.get=function(){return this._props},N.prototype._computePlayhead=function(t,e){return"number"==typeof e&&isFinite(e)?t/e:0},N.prototype._computeFrame=function(t,e,n,r){return isFinite(n)&&n>1?Math.floor(t*(n-1)):Math.floor(r*e)},N.prototype._computeCurrentFrame=function(){return this._computeFrame(this.props.playhead,this.props.time,this.props.totalFrames,this.props.fps)},N.prototype._getSizeProps=function(){var t=this.props;return{width:t.width,height:t.height,pixelRatio:t.pixelRatio,canvasWidth:t.canvasWidth,canvasHeight:t.canvasHeight,viewportWidth:t.viewportWidth,viewportHeight:t.viewportHeight}},N.prototype.run=function(){if(!this.sketch)throw new Error("should wait until sketch is loaded before trying to play()");return!1!==this.settings.playing&&this.play(),"function"==typeof this.sketch.dispose&&console.warn("In canvas-sketch@0.0.23 the dispose() event has been renamed to unload()"),this.props.started||(this._signalBegin(),this.props.started=!0),this.tick(),this.render(),this},N.prototype.play=function(){var t=this.settings.animate;"animation"in this.settings&&(t=!0,console.warn("[canvas-sketch] { animation } has been renamed to { animate }")),t&&(p()?this.props.playing||(this.props.started||(this._signalBegin(),this.props.started=!0),this.props.playing=!0,null!=this._raf&&window.cancelAnimationFrame(this._raf),this._lastTime=u(),this._raf=window.requestAnimationFrame(this._animateHandler)):console.error("[canvas-sketch] WARN: Using { animate } in Node.js is not yet supported"))},N.prototype.pause=function(){this.props.recording&&this.endRecord(),this.props.playing=!1,null!=this._raf&&p()&&window.cancelAnimationFrame(this._raf)},N.prototype.togglePlay=function(){this.props.playing?this.pause():this.play()},N.prototype.stop=function(){this.pause(),this.props.frame=0,this.props.playhead=0,this.props.time=0,this.props.deltaTime=0,this.props.started=!1,this.render()},N.prototype.record=function(){var t=this;if(!this.props.recording)if(p()){this.stop(),this.props.playing=!0,this.props.recording=!0;var e=this._createExportOptions({sequence:!0}),n=1/this.props.fps;null!=this._raf&&window.cancelAnimationFrame(this._raf);var r,i=function(){return t.props.recording?(t.props.deltaTime=n,t.tick(),t.exportFrame(e).then(function(){t.props.recording&&(t.props.deltaTime=0,t.props.frame++,t.props.frame<t.props.totalFrames?(t.props.time+=n,t.props.playhead=t._computePlayhead(t.props.time,t.props.duration),t._raf=window.requestAnimationFrame(i)):(console.log("Finished recording"),t._signalEnd(),t.endRecord(),t.stop(),t.run()))})):Promise.resolve()};this.props.started||(this._signalBegin(),this.props.started=!0),(r=e,void 0===r&&(r={}),k(!0,r)).catch(function(t){console.error(t)}).then(function(e){t._raf=window.requestAnimationFrame(i)})}else console.error("[canvas-sketch] WARN: Recording from Node.js is not yet supported")},N.prototype._signalBegin=function(){var t=this;this.sketch&&"function"==typeof this.sketch.begin&&this._wrapContextScale(function(e){return t.sketch.begin(e)})},N.prototype._signalEnd=function(){var t=this;this.sketch&&"function"==typeof this.sketch.end&&this._wrapContextScale(function(e){return t.sketch.end(e)})},N.prototype.endRecord=function(){var t;null!=this._raf&&p()&&window.cancelAnimationFrame(this._raf),this.props.recording=!1,this.props.deltaTime=0,this.props.playing=!1,(void 0===t&&(t={}),k(!1,t)).catch(function(t){console.error(t)})},N.prototype._createExportOptions=function(t){return void 0===t&&(t={}),{sequence:t.sequence,save:t.save,fps:this.props.fps,frame:t.sequence?this.props.frame:void 0,file:this.settings.file,name:this.settings.name,prefix:this.settings.prefix,suffix:this.settings.suffix,encoding:this.settings.encoding,encodingQuality:this.settings.encodingQuality,timeStamp:t.timeStamp||b(new Date,"yyyy.mm.dd-HH.MM.ss"),totalFrames:isFinite(this.props.totalFrames)?Math.max(100,this.props.totalFrames):1e3}},N.prototype.exportFrame=function(t){var e=this;if(void 0===t&&(t={}),!this.sketch)return Promise.all([]);"function"==typeof this.sketch.preExport&&this.sketch.preExport();var n=this._createExportOptions(t),r=l(),i=Promise.resolve();if(r&&t.commit&&"function"==typeof r.commit){var a=o({},n),s=r.commit(a);i=c(s)?s:Promise.resolve(s)}return i.then(function(t){return e._doExportFrame(o({},n,{hash:t||""}))}).then(function(t){return 1===t.length?t[0]:t})},N.prototype._doExportFrame=function(t){var e=this;void 0===t&&(t={}),this._props.exporting=!0,this.resize();var n=this.render();return void 0===n&&(n=[this.props.canvas]),n=(n=[].concat(n).filter(Boolean)).map(function(e){var n,r="object"==typeof e&&e&&("data"in e||"dataURL"in e),i=r?e.data:e,a=r?o({},e,{data:i}):{data:i};if(f(n=i)&&/canvas/i.test(n.nodeName)&&"function"==typeof n.getContext){var s=function(t,e){void 0===e&&(e={});var n=e.encoding||"image/png";if(!E.includes(n))throw new Error("Invalid canvas encoding "+n);var r=(n.split("/")[1]||"").replace(/jpeg/i,"jpg");return r&&(r=("."+r).toLowerCase()),{extension:r,type:n,dataURL:t.toDataURL(n,e.encodingQuality)}}(i,{encoding:a.encoding||t.encoding,encodingQuality:h(a.encodingQuality,t.encodingQuality,.95)});return Object.assign(a,{dataURL:s.dataURL,extension:s.extension,type:s.type})}return a}),this._props.exporting=!1,this.resize(),this.render(),Promise.all(n.map(function(e,n,r){var i=o({extension:"",prefix:"",suffix:""},t,e,{layer:n,totalLayers:r.length}),a=!1!==t.save&&e.save;for(var s in i.save=!1!==a,i.filename=R(i),delete i.encoding,delete i.encodingQuality,i)void 0===i[s]&&delete i[s];var u=Promise.resolve({});if(i.save){var c=i.data;if(i.dataURL)u=S(i.dataURL,i);else u=function(t,e){void 0===e&&(e={});var n=Array.isArray(t)?t:[t];return T(new window.Blob(n,{type:e.type||""}),e)}(c,i)}return u.then(function(t){return Object.assign({},i,t)})})).then(function(n){var r=n.filter(function(t){return t.save});if(r.length>0){var i,o=r.find(function(t){return t.outputName}),a=r.some(function(t){return t.client}),s=r.some(function(t){return t.stream});i=r.length>1?r.length:o?o.outputName+"/"+r[0].filename:""+r[0].filename;var u="";if(t.sequence)u=isFinite(e.props.totalFrames)?" (frame "+(t.frame+1)+" / "+e.props.totalFrames+")":" (frame "+t.frame+")";else r.length>1&&(u=" files");console.log("%c["+(a?"canvas-sketch-cli":"canvas-sketch")+"]%c "+(s?"Streaming into":"Exported")+" %c"+i+"%c"+u,"color: #8e8e8e;","color: initial;","font-weight: bold;","font-weight: initial;")}return"function"==typeof e.sketch.postExport&&e.sketch.postExport(),n})},N.prototype._wrapContextScale=function(t){this._preRender(),t(this.props),this._postRender()},N.prototype._preRender=function(){var t=this.props;this.props.gl||!t.context||t.p5?t.p5&&t.p5.scale(t.scaleX/t.pixelRatio,t.scaleY/t.pixelRatio):(t.context.save(),!1!==this.settings.scaleContext&&t.context.scale(t.scaleX,t.scaleY))},N.prototype._postRender=function(){var t=this.props;this.props.gl||!t.context||t.p5||t.context.restore(),t.gl&&!1!==this.settings.flush&&!t.p5&&t.gl.flush()},N.prototype.tick=function(){this.sketch&&"function"==typeof this.sketch.tick&&(this._preRender(),this.sketch.tick(this.props),this._postRender())},N.prototype.render=function(){return this.props.p5?(this._lastRedrawResult=void 0,this.props.p5.redraw(),this._lastRedrawResult):this.submitDrawCall()},N.prototype.submitDrawCall=function(){if(this.sketch){var t,e=this.props;return this._preRender(),"function"==typeof this.sketch?t=this.sketch(e):"function"==typeof this.sketch.render&&(t=this.sketch.render(e)),this._postRender(),t}},N.prototype.update=function(t){var e=this;void 0===t&&(t={});var n=["animate"];Object.keys(t).forEach(function(t){if(n.indexOf(t)>=0)throw new Error("Sorry, the { "+t+" } option is not yet supported with update().")});var r=this._settings.canvas,i=this._settings.context;for(var o in t){var a=t[o];void 0!==a&&(e._settings[o]=a)}var s=Object.assign({},this._settings,t);if("time"in t&&"frame"in t)throw new Error("You should specify { time } or { frame } but not both");if("time"in t?delete s.frame:"frame"in t&&delete s.time,"duration"in t&&"totalFrames"in t)throw new Error("You should specify { duration } or { totalFrames } but not both");"duration"in t?delete s.totalFrames:"totalFrames"in t&&delete s.duration,"data"in t&&(this._props.data=t.data);var u=this.getTimeProps(s);if(Object.assign(this._props,u),r!==this._settings.canvas||i!==this._settings.context){var c=I(this._settings),f=c.context;this.props.canvas=c.canvas,this.props.context=f,this._setupGLKey(),this._appendCanvasIfNeeded()}return t.p5&&"function"!=typeof t.p5&&(this.props.p5=t.p5,this.props.p5.draw=function(){e._isP5Resizing||(e._lastRedrawResult=e.submitDrawCall())}),"playing"in t&&(t.playing?this.play():this.pause()),j(this._settings),this.resize(),this.render(),this.props},N.prototype.resize=function(){var t=this._getSizeProps(),e=this.settings,n=this.props,r=D(n,e);Object.assign(this._props,r);var i=this.props,o=i.pixelRatio,a=i.canvasWidth,s=i.canvasHeight,u=i.styleWidth,c=i.styleHeight,f=this.props.canvas;f&&!1!==e.resizeCanvas&&(n.p5?f.width===a&&f.height===s||(this._isP5Resizing=!0,n.p5.pixelDensity(o),n.p5.resizeCanvas(a/o,s/o,!1),this._isP5Resizing=!1):(f.width!==a&&(f.width=a),f.height!==s&&(f.height=s)),p()&&!1!==e.styleCanvas&&(f.style.width=u+"px",f.style.height=c+"px"));var l=this._getSizeProps(),h=!g(t,l);return h&&this._sizeChanged(),h},N.prototype._sizeChanged=function(){this.sketch&&"function"==typeof this.sketch.resize&&this.sketch.resize(this.props)},N.prototype.animate=function(){if(this.props.playing)if(p()){this._raf=window.requestAnimationFrame(this._animateHandler);var t=u(),e=1e3/this.props.fps,n=t-this._lastTime,r=this.props.duration,i="number"==typeof r&&isFinite(r),o=!0,a=this.settings.playbackRate;"fixed"===a?n=e:"throttle"===a?n>e?this._lastTime=t-=n%e:o=!1:this._lastTime=t;var s=n/1e3,c=this.props.time+s*this.props.timeScale;c<0&&i&&(c=r+c);var f=!1,l=!1;if(i&&c>=r&&(!1!==this.settings.loop?(o=!0,c%=r,l=!0):(o=!1,c=r,f=!0),this._signalEnd()),o){this.props.deltaTime=s,this.props.time=c,this.props.playhead=this._computePlayhead(c,r);var h=this.props.frame;this.props.frame=this._computeCurrentFrame(),l&&this._signalBegin(),h!==this.props.frame&&this.tick(),this.render(),this.props.deltaTime=0}f&&this.pause()}else console.error("[canvas-sketch] WARN: Animation in Node.js is not yet supported")},N.prototype.dispatch=function(t){if("function"!=typeof t)throw new Error("must pass function into dispatch()");t(this.props),this.render()},N.prototype.mount=function(){this._appendCanvasIfNeeded()},N.prototype.unmount=function(){p()&&(window.removeEventListener("resize",this._resizeHandler),this._keyboardShortcuts.detach()),this.props.canvas.parentElement&&this.props.canvas.parentElement.removeChild(this.props.canvas)},N.prototype._appendCanvasIfNeeded=function(){p()&&(!1!==this.settings.parent&&this.props.canvas&&!this.props.canvas.parentElement&&(this.settings.parent||document.body).appendChild(this.props.canvas))},N.prototype._setupGLKey=function(){var t;this.props.context&&("function"==typeof(t=this.props.context).clear&&"function"==typeof t.clearColor&&"function"==typeof t.bufferData?this._props.gl=this.props.context:delete this._props.gl)},N.prototype.getTimeProps=function(t){void 0===t&&(t={});var e=t.duration,n=t.totalFrames,r=h(t.timeScale,1),i=h(t.fps,24),o="number"==typeof e&&isFinite(e),a="number"==typeof n&&isFinite(n),s=o?Math.floor(i*e):void 0,u=a?n/i:void 0;if(o&&a&&s!==n)throw new Error("You should specify either duration or totalFrames, but not both. Or, they must match exactly.");void 0===t.dimensions&&void 0!==t.units&&console.warn("You've specified a { units } setting but no { dimension }, so the units will be ignored."),n=h(n,s,Infinity),e=h(e,u,Infinity);var c=t.time,f=t.frame,l="number"==typeof c&&isFinite(c),p="number"==typeof f&&isFinite(f),d=0,m=0,v=0;if(l&&p)throw new Error("You should specify either start frame or time, but not both.");return l?(v=this._computePlayhead(d=c,e),m=this._computeFrame(v,d,n,i)):p&&(v=this._computePlayhead(d=(m=f)/i,e)),{playhead:v,time:d,frame:m,duration:e,totalFrames:n,fps:i,timeScale:r}},N.prototype.setup=function(t){var e=this;if(void 0===t&&(t={}),this.sketch)throw new Error("Multiple setup() calls not yet supported.");this._settings=Object.assign({},t,this._settings),j(this._settings);var n=I(this._settings),r=n.context,i=n.canvas,o=this.getTimeProps(this._settings);this._props=Object.assign({},o,{canvas:i,context:r,deltaTime:0,started:!1,exporting:!1,playing:!1,recording:!1,settings:this.settings,data:this.settings.data,render:function(){return e.render()},togglePlay:function(){return e.togglePlay()},dispatch:function(t){return e.dispatch(t)},tick:function(){return e.tick()},resize:function(){return e.resize()},update:function(t){return e.update(t)},exportFrame:function(t){return e.exportFrame(t)},record:function(){return e.record()},play:function(){return e.play()},pause:function(){return e.pause()},stop:function(){return e.stop()}}),this._setupGLKey(),this.resize()},N.prototype.loadAndRun=function(t,e){var n=this;return this.load(t,e).then(function(){return n.run(),n})},N.prototype.unload=function(){var t=this;this.pause(),this.sketch&&("function"==typeof this.sketch.unload&&this._wrapContextScale(function(e){return t.sketch.unload(e)}),this._sketch=null)},N.prototype.destroy=function(){this.unload(),this.unmount()},N.prototype.load=function(t,e){var n=this;if("function"!=typeof t)throw new Error("The function must take in a function as the first parameter. Example:\n  canvasSketcher(() => { ... }, settings)");this.sketch&&this.unload(),void 0!==e&&this.update(e),this._preRender();var r=Promise.resolve();if(this.settings.p5){if(!p())throw new Error("[canvas-sketch] ERROR: Using p5.js in Node.js is not supported");r=new Promise(function(t){var e,r=n.settings.p5;r.p5&&(e=r.preload,r=r.p5);var i=function(r){e&&(r.preload=function(){return e(r)}),r.setup=function(){var e=n.props,i="webgl"===n.settings.context,o=i?r.WEBGL:r.P2D;r.noLoop(),r.pixelDensity(e.pixelRatio),r.createCanvas(e.viewportWidth,e.viewportHeight,o),i&&n.settings.attributes&&r.setAttributes(n.settings.attributes),n.update({p5:r,canvas:r.canvas,context:r._renderer.drawingContext}),t()}};if("function"==typeof r)new r(i);else{if("function"!=typeof window.createCanvas)throw new Error("{ p5 } setting is passed but can't find p5.js in global (window) scope. Maybe you did not create it globally?\nnew p5(); // <-- attaches to global scope");i(window)}})}return r.then(function(){var e=t(n.props);return c(e)||(e=Promise.resolve(e)),e}).then(function(t){return t||(t={}),n._sketch=t,p()&&(n._keyboardShortcuts.attach(),window.addEventListener("resize",n._resizeHandler)),n._postRender(),n._sizeChanged(),n}).catch(function(t){throw console.warn("Could not start sketch, the async loading function rejected with an error:\n    Error: "+t.message),t})},Object.defineProperties(N.prototype,B);var z="hot-id-cache",q=[];function Y(t,e){if(void 0===e&&(e={}),e.p5){if(e.canvas||e.context&&"string"!=typeof e.context)throw new Error('In { p5 } mode, you can\'t pass your own canvas or context, unless the context is a "webgl" or "2d" string');e=Object.assign({},e,{canvas:!1,context:"string"==typeof e.context&&e.context})}var n,r,i=(n=l())&&n.hot;i&&(r=h(e.id,"$__DEFAULT_CANVAS_SKETCH_ID__$"));var o=i&&"string"==typeof r;o&&q.includes(r)&&(console.warn("Warning: You have multiple calls to canvasSketch() in --hot mode. You must pass unique { id } strings in settings to enable hot reload across multiple sketches. ",r),o=!1);var a=Promise.resolve();if(o){q.push(r);var s=function(t){var e=l();if(e)return e[z]=e[z]||{},e[z][t]}(r);if(s){var u=function(){var t,n=(t=s.manager,e.animate?{time:t.props.time}:void 0);return s.manager.destroy(),n};a=s.load.then(u).catch(u)}}return a.then(function(n){var i,a,s,u,c=new N;return t?(e=Object.assign({},e,n),c.setup(e),c.mount(),i=c.loadAndRun(t)):i=Promise.resolve(c),o&&(a=r,s={load:i,manager:c},(u=l())&&(u[z]=u[z]||{},u[z][a]=s)),i})}return Y.canvasSketch=Y,Y.PaperSizes=P,Y})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"convert-length":26}],25:[function(t,e,n){(function(t){var n=function(){"use strict";function e(n,i,o,a){"object"==typeof i&&(o=i.depth,a=i.prototype,i.filter,i=i.circular);var s=[],u=[],c=void 0!==t;return void 0===i&&(i=!0),void 0===o&&(o=Infinity),function n(o,f){if(null===o)return null;if(0==f)return o;var l,h;if("object"!=typeof o)return o;if(e.__isArray(o))l=[];else if(e.__isRegExp(o))l=new RegExp(o.source,r(o)),o.lastIndex&&(l.lastIndex=o.lastIndex);else if(e.__isDate(o))l=new Date(o.getTime());else{if(c&&t.isBuffer(o))return l=t.allocUnsafe?t.allocUnsafe(o.length):new t(o.length),o.copy(l),l;void 0===a?(h=Object.getPrototypeOf(o),l=Object.create(h)):(l=Object.create(a),h=a)}if(i){var p=s.indexOf(o);if(-1!=p)return u[p];s.push(o),u.push(l)}for(var d in o){var m;h&&(m=Object.getOwnPropertyDescriptor(h,d)),m&&null==m.set||(l[d]=n(o[d],f-1))}return l}(n,o)}function n(t){return Object.prototype.toString.call(t)}function r(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return e.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},e.__objToStr=n,e.__isDate=function(t){return"object"==typeof t&&"[object Date]"===n(t)},e.__isArray=function(t){return"object"==typeof t&&"[object Array]"===n(t)},e.__isRegExp=function(t){return"object"==typeof t&&"[object RegExp]"===n(t)},e.__getRegExpFlags=r,e}();"object"==typeof e&&e.exports&&(e.exports=n)}).call(this,t("buffer").Buffer)},{buffer:6}],26:[function(t,e,n){var r=t("defined"),i=["mm","cm","m","pc","pt","in","ft","px"],o={m:{system:"metric",factor:1},cm:{system:"metric",factor:.01},mm:{system:"metric",factor:.001},pt:{system:"imperial",factor:1/72},pc:{system:"imperial",factor:1/6},in:{system:"imperial",factor:1},ft:{system:"imperial",factor:12}};const a={metric:{unit:"m",ratio:1/.0254},imperial:{unit:"in",ratio:.0254}};e.exports=function(t,e,n,s){if("number"!=typeof t||!isFinite(t))throw new Error("Value must be a finite number");if(!e||!n)throw new Error("Must specify from and to units");var u=r((s=s||{}).pixelsPerInch,96),c=s.precision,f=!1!==s.roundPixel;if(e=e.toLowerCase(),n=n.toLowerCase(),-1===i.indexOf(e))throw new Error('Invalid from unit "'+e+'", must be one of: '+i.join(", "));if(-1===i.indexOf(n))throw new Error('Invalid from unit "'+n+'", must be one of: '+i.join(", "));if(e===n)return t;var l=1,h=1,p=!1;"px"===e&&(h=1/u,e="in"),"px"===n&&(p=!0,l=u,n="in");var d=o[e],m=o[n],v=t*d.factor*h;d.system!==m.system&&(v*=a[d.system].ratio);var g=v/m.factor*l;return p&&f?g=Math.round(g):"number"==typeof c&&isFinite(c)&&(g=function(t,e){return Number(Math.round(t+"e"+e)+"e-"+e)}(g,c)),g},e.exports.units=i},{defined:32}],27:[function(t,e,n){"use strict";e.exports=function(t,e,n,r,i,o){var a=i-1,s=i*i,u=a*a,c=(1+2*i)*u,f=i*u,l=s*(3-2*i),h=s*a;if(t.length){o||(o=new Array(t.length));for(var p=t.length-1;p>=0;--p)o[p]=c*t[p]+f*e[p]+l*n[p]+h*r[p];return o}return c*t+f*e+l*n+h*r},e.exports.derivative=function(t,e,n,r,i,o){var a=6*i*i-6*i,s=3*i*i-4*i+1,u=-6*i*i+6*i,c=3*i*i-2*i;if(t.length){o||(o=new Array(t.length));for(var f=t.length-1;f>=0;--f)o[f]=a*t[f]+s*e[f]+u*n[f]+c*r[f];return o}return a*t+s*e+u*n[f]+c*r}},{}],28:[function(t,e,n){e.exports=t("./vendor/dat.gui"),e.exports.color=t("./vendor/dat.color")},{"./vendor/dat.color":29,"./vendor/dat.gui":30}],29:[function(t,e,n){var r,i,o,a,s=e.exports=s||{};s.color=s.color||{},s.utils=s.utils||{},s.utils.common=(r=Array.prototype.forEach,i=Array.prototype.slice,{BREAK:{},extend:function(t){return this.each(i.call(arguments,1),function(e){for(var n in e)this.isUndefined(e[n])||(t[n]=e[n])},this),t},defaults:function(t){return this.each(i.call(arguments,1),function(e){for(var n in e)this.isUndefined(t[n])&&(t[n]=e[n])},this),t},compose:function(){var t=i.call(arguments);return function(){for(var e=i.call(arguments),n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},each:function(t,e,n){if(r&&t.forEach===r)t.forEach(e,n);else if(t.length===t.length+0){for(var i=0,o=t.length;i<o;i++)if(i in t&&e.call(n,t[i],i)===this.BREAK)return}else for(var i in t)if(e.call(n,t[i],i)===this.BREAK)return},defer:function(t){setTimeout(t,0)},toArray:function(t){return t.toArray?t.toArray():i.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){return t!=t},isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}}),s.color.toString=(o=s.utils.common,function(t){if(1==t.a||o.isUndefined(t.a)){for(var e=t.hex.toString(16);e.length<6;)e="0"+e;return"#"+e}return"rgba("+Math.round(t.r)+","+Math.round(t.g)+","+Math.round(t.b)+","+t.a+")"}),s.Color=s.color.Color=function(t,e,n,r){var i=function(){if(this.__state=t.apply(this,arguments),!1===this.__state)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};function o(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space?this.__state[e]:(s(this,e,n),this.__state[e])},set:function(t){"RGB"!==this.__state.space&&(s(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function a(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space?this.__state[e]:(u(this),this.__state[e])},set:function(t){"HSV"!==this.__state.space&&(u(this),this.__state.space="HSV"),this.__state[e]=t}})}function s(t,n,i){if("HEX"===t.__state.space)t.__state[n]=e.component_from_hex(t.__state.hex,i);else{if("HSV"!==t.__state.space)throw"Corrupted color state";r.extend(t.__state,e.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}}function u(t){var n=e.rgb_to_hsv(t.r,t.g,t.b);r.extend(t.__state,{s:n.s,v:n.v}),r.isNaN(n.h)?r.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=n.h}return i.COMPONENTS=["r","g","b","h","s","v","hex","a"],r.extend(i.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),o(i.prototype,"r",2),o(i.prototype,"g",1),o(i.prototype,"b",0),a(i.prototype,"h"),a(i.prototype,"s"),a(i.prototype,"v"),Object.defineProperty(i.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(i.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=e.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}}),i}(s.color.interpret=function(t,e){var n,r,i=[{litmus:e.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString())}},write:t},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString())}},write:t},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:t},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:t}}},{litmus:e.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:e.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:e.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b)&&e.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v)&&e.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}];return function(){r=!1;var t=arguments.length>1?e.toArray(arguments):arguments[0];return e.each(i,function(i){if(i.litmus(t))return e.each(i.conversions,function(i,o){if(n=i.read(t),!1===r&&!1!==n)return r=n,n.conversionName=o,n.conversion=i,e.BREAK}),e.BREAK}),r}}(s.color.toString,s.utils.common),s.color.math={hsv_to_rgb:function(t,e,n){var r=Math.floor(t/60)%6,i=t/60-Math.floor(t/60),o=n*(1-e),a=n*(1-i*e),s=n*(1-(1-i)*e),u=[[n,s,o],[a,n,o],[o,n,s],[o,a,n],[s,o,n],[n,o,a]][r];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(t,e,n){var r,i=Math.min(t,e,n),o=Math.max(t,e,n),a=o-i;return 0==o?{h:NaN,s:0,v:0}:(r=t==o?(e-n)/a:e==o?2+(n-t)/a:4+(t-e)/a,(r/=6)<0&&(r+=1),{h:360*r,s:a/o,v:o/255})},rgb_to_hex:function(t,e,n){var r=this.hex_with_component(0,2,t);return r=this.hex_with_component(r,1,e),r=this.hex_with_component(r,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(t,e,n){return n<<(a=8*e)|t&~(255<<a)}},s.color.toString,s.utils.common)},{}],30:[function(t,e,n){var r,i,o,a,s,u=e.exports=u||{};u.gui=u.gui||{},u.utils=u.utils||{},u.controllers=u.controllers||{},u.dom=u.dom||{},u.color=u.color||{},u.utils.css={load:function(t,e){var n=(e=e||document).createElement("link");n.type="text/css",n.rel="stylesheet",n.href=t,e.getElementsByTagName("head")[0].appendChild(n)},inject:function(t,e){e=e||document;var n=document.createElement("style");n.type="text/css",n.innerHTML=t,e.getElementsByTagName("head")[0].appendChild(n)}},u.utils.common=(r=Array.prototype.forEach,i=Array.prototype.slice,{BREAK:{},extend:function(t){return this.each(i.call(arguments,1),function(e){for(var n in e)this.isUndefined(e[n])||(t[n]=e[n])},this),t},defaults:function(t){return this.each(i.call(arguments,1),function(e){for(var n in e)this.isUndefined(t[n])&&(t[n]=e[n])},this),t},compose:function(){var t=i.call(arguments);return function(){for(var e=i.call(arguments),n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},each:function(t,e,n){if(r&&t.forEach===r)t.forEach(e,n);else if(t.length===t.length+0){for(var i=0,o=t.length;i<o;i++)if(i in t&&e.call(n,t[i],i)===this.BREAK)return}else for(var i in t)if(e.call(n,t[i],i)===this.BREAK)return},defer:function(t){setTimeout(t,0)},toArray:function(t){return t.toArray?t.toArray():i.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){return t!=t},isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}}),u.controllers.Controller=(u.utils.common.extend((o=function(t,e){this.initialValue=t[e],this.domElement=document.createElement("div"),this.object=t,this.property=e,this.__onChange=void 0,this.__onFinishChange=void 0}).prototype,{onChange:function(t){return this.__onChange=t,this},onFinishChange:function(t){return this.__onFinishChange=t,this},setValue:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),o),u.dom.dom=function(t){var e={};t.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(n,r){t.each(n,function(t){e[t]=r})});var n=/(\d+(\.\d+)?)px/;function r(e){if("0"===e||t.isUndefined(e))return 0;var r=e.match(n);return t.isNull(r)?0:parseFloat(r[1])}var i={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(e,n,r){t.isUndefined(n)&&(n=!0),t.isUndefined(r)&&(r=!0),e.style.position="absolute",n&&(e.style.left=0,e.style.right=0),r&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(n,r,i,o){i=i||{};var a=e[r];if(!a)throw new Error("Event type "+r+" not supported.");var s=document.createEvent(a);switch(a){case"MouseEvents":s.initMouseEvent(r,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,i.x||i.clientX||0,i.y||i.clientY||0,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var u=s.initKeyboardEvent||s.initKeyEvent;t.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),u(r,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:s.initEvent(r,i.bubbles||!1,i.cancelable||!0)}t.defaults(s,o),n.dispatchEvent(s)},bind:function(t,e,n,r){return r=r||!1,t.addEventListener?t.addEventListener(e,n,r):t.attachEvent&&t.attachEvent("on"+e,n),i},unbind:function(t,e,n,r){return r=r||!1,t.removeEventListener?t.removeEventListener(e,n,r):t.detachEvent&&t.detachEvent("on"+e,n),i},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var n=t.className.split(/ +/);-1==n.indexOf(e)&&(n.push(e),t.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return i},removeClass:function(t,e){if(e)if(void 0===t.className);else if(t.className===e)t.removeAttribute("class");else{var n=t.className.split(/ +/),r=n.indexOf(e);-1!=r&&(n.splice(r,1),t.className=n.join(" "))}else t.className=void 0;return i},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var e=getComputedStyle(t);return r(e["border-left-width"])+r(e["border-right-width"])+r(e["padding-left"])+r(e["padding-right"])+r(e.width)},getHeight:function(t){var e=getComputedStyle(t);return r(e["border-top-width"])+r(e["border-bottom-width"])+r(e["padding-top"])+r(e["padding-bottom"])+r(e.height)},getOffset:function(t){var e={left:0,top:0};if(t.offsetParent)do{e.left+=t.offsetLeft,e.top+=t.offsetTop}while(t=t.offsetParent);return e},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}};return i}(u.utils.common),u.controllers.OptionController=function(t,e,n){var r=function(t,i,o){r.superclass.call(this,t,i);var a=this;if(this.__select=document.createElement("select"),n.isArray(o)){var s={};n.each(o,function(t){s[t]=t}),o=s}n.each(o,function(t,e){var n=document.createElement("option");n.innerHTML=e,n.setAttribute("value",t),a.__select.appendChild(n)}),this.updateDisplay(),e.bind(this.__select,"change",function(){a.setValue(this.options[this.selectedIndex].value)}),this.domElement.appendChild(this.__select)};return r.superclass=t,n.extend(r.prototype,t.prototype,{setValue:function(t){var e=r.superclass.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),e},updateDisplay:function(){return this.__select.value=this.getValue(),r.superclass.prototype.updateDisplay.call(this)}}),r}(u.controllers.Controller,u.dom.dom,u.utils.common),u.controllers.NumberController=function(t,e){var n=function(t,r,i){var o;n.superclass.call(this,t,r),this.__min=(i=i||{}).min,this.__max=i.max,this.__step=i.step,this.__impliedStep=e.isUndefined(this.__step)?0==this.initialValue?1:Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__step,this.__precision=(o=(o=this.__impliedStep).toString()).indexOf(".")>-1?o.length-o.indexOf(".")-1:0};return n.superclass=t,e.extend(n.prototype,t.prototype,{setValue:function(t){return void 0!==this.__min&&t<this.__min?t=this.__min:void 0!==this.__max&&t>this.__max&&(t=this.__max),void 0!==this.__step&&t%this.__step!=0&&(t=Math.round(t/this.__step)*this.__step),n.superclass.prototype.setValue.call(this,t)},min:function(t){return this.__min=t,this},max:function(t){return this.__max=t,this},step:function(t){return this.__step=t,this}}),n}(u.controllers.Controller,u.utils.common),u.controllers.NumberControllerBox=function(t,e,n){var r=function(t,i,o){this.__truncationSuspended=!1,r.superclass.call(this,t,i,o);var a,s=this;function u(){var t=parseFloat(s.__input.value);n.isNaN(t)||s.setValue(t)}function c(t){var e=a-t.clientY;s.setValue(s.getValue()+e*s.__impliedStep),a=t.clientY}function f(){e.unbind(window,"mousemove",c),e.unbind(window,"mouseup",f)}this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),e.bind(this.__input,"change",u),e.bind(this.__input,"blur",function(){u(),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}),e.bind(this.__input,"mousedown",function(t){e.bind(window,"mousemove",c),e.bind(window,"mouseup",f),a=t.clientY}),e.bind(this.__input,"keydown",function(t){13===t.keyCode&&(s.__truncationSuspended=!0,this.blur(),s.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return r.superclass=t,n.extend(r.prototype,t.prototype,{updateDisplay:function(){var t,e;return this.__input.value=this.__truncationSuspended?this.getValue():(t=this.getValue(),e=Math.pow(10,this.__precision),Math.round(t*e)/e),r.superclass.prototype.updateDisplay.call(this)}}),r}(u.controllers.NumberController,u.dom.dom,u.utils.common),u.controllers.NumberControllerSlider=function(t,e,n,r,i){var o=function(t,n,r,i,a){o.superclass.call(this,t,n,{min:r,max:i,step:a});var s=this;function u(t){t.preventDefault();var n,r,i=e.getOffset(s.__background),o=e.getWidth(s.__background);return s.setValue((r=s.__min)+(t.clientX-(n=i.left))/(i.left+o-n)*(s.__max-r)),!1}function c(){e.unbind(window,"mousemove",u),e.unbind(window,"mouseup",c),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),e.bind(this.__background,"mousedown",function(t){e.bind(window,"mousemove",u),e.bind(window,"mouseup",c),u(t)}),e.addClass(this.__background,"slider"),e.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return o.superclass=t,o.useDefaultStyles=function(){n.inject(".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}")},r.extend(o.prototype,t.prototype,{updateDisplay:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",o.superclass.prototype.updateDisplay.call(this)}}),o}(u.controllers.NumberController,u.dom.dom,u.utils.css,u.utils.common),u.controllers.FunctionController=function(t,e,n){var r=function(t,n,i){r.superclass.call(this,t,n);var o=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===i?"Fire":i,e.bind(this.__button,"click",function(t){return t.preventDefault(),o.fire(),!1}),e.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return r.superclass=t,n.extend(r.prototype,t.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),r}(u.controllers.Controller,u.dom.dom,u.utils.common),u.controllers.BooleanController=function(t,e,n){var r=function(t,n){r.superclass.call(this,t,n);var i=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),e.bind(this.__checkbox,"change",function(){i.setValue(!i.__prev)},!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return r.superclass=t,n.extend(r.prototype,t.prototype,{setValue:function(t){var e=r.superclass.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),e},updateDisplay:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,r.superclass.prototype.updateDisplay.call(this)}}),r}(u.controllers.Controller,u.dom.dom,u.utils.common),u.color.toString=(a=u.utils.common,function(t){if(1==t.a||a.isUndefined(t.a)){for(var e=t.hex.toString(16);e.length<6;)e="0"+e;return"#"+e}return"rgba("+Math.round(t.r)+","+Math.round(t.g)+","+Math.round(t.b)+","+t.a+")"}),u.color.interpret=function(t,e){var n,r,i=[{litmus:e.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString())}},write:t},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString())}},write:t},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:t},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:t}}},{litmus:e.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:e.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:e.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b)&&e.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v)&&e.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}];return function(){r=!1;var t=arguments.length>1?e.toArray(arguments):arguments[0];return e.each(i,function(i){if(i.litmus(t))return e.each(i.conversions,function(i,o){if(n=i.read(t),!1===r&&!1!==n)return r=n,n.conversionName=o,n.conversion=i,e.BREAK}),e.BREAK}),r}}(u.color.toString,u.utils.common),u.GUI=u.gui.GUI=function(t,e,n,r,i,o,a,s,u,c,f,l,h,p,d){t.inject(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n");var m,v,g="Default",b=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}}(),y=!0,x=!1,w=[],_=function(t){var e=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),p.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],t=d.defaults(t=t||{},{autoPlace:!0,width:_.DEFAULT_WIDTH}),t=d.defaults(t,{resizable:t.autoPlace,hideable:t.autoPlace}),d.isUndefined(t.load)?t.load={preset:g}:t.preset&&(t.load.preset=t.preset),d.isUndefined(t.parent)&&t.hideable&&w.push(this),t.resizable=d.isUndefined(t.parent)&&t.resizable,t.autoPlace&&d.isUndefined(t.scrollable)&&(t.scrollable=!0);var n=b&&"true"===localStorage.getItem(k(this,"isLocal"));if(Object.defineProperties(this,{parent:{get:function(){return t.parent}},scrollable:{get:function(){return t.scrollable}},autoPlace:{get:function(){return t.autoPlace}},preset:{get:function(){return e.parent?e.getRoot().preset:t.load.preset},set:function(n){e.parent?e.getRoot().preset=n:t.load.preset=n,function(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value==t.preset&&(t.__preset_select.selectedIndex=e)}(this),e.revert()}},width:{get:function(){return t.width},set:function(n){t.width=n,S(e,n)}},name:{get:function(){return t.name},set:function(e){t.name=e,i&&(i.innerHTML=t.name)}},closed:{get:function(){return t.closed},set:function(n){t.closed=n,t.closed?p.addClass(e.__ul,_.CLASS_CLOSED):p.removeClass(e.__ul,_.CLASS_CLOSED),this.onResize(),e.__closeButton&&(e.__closeButton.innerHTML=n?_.TEXT_OPEN:_.TEXT_CLOSED)}},load:{get:function(){return t.load}},useLocalStorage:{get:function(){return n},set:function(t){b&&(n=t,t?p.bind(window,"unload",a):p.unbind(window,"unload",a),localStorage.setItem(k(e,"isLocal"),t))}}}),d.isUndefined(t.parent)){if(t.closed=!1,p.addClass(this.domElement,_.CLASS_MAIN),p.makeSelectable(this.domElement,!1),b&&n){e.useLocalStorage=!0;var r=localStorage.getItem(k(this,"gui"));r&&(t.load=JSON.parse(r))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=_.TEXT_CLOSED,p.addClass(this.__closeButton,_.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),p.bind(this.__closeButton,"click",function(){e.closed=!e.closed})}else{void 0===t.closed&&(t.closed=!0);var i=document.createTextNode(t.name);p.addClass(i,"controller-name");var o=A(e,i);p.addClass(this.__ul,_.CLASS_CLOSED),p.addClass(o,"title"),p.bind(o,"click",function(t){return t.preventDefault(),e.closed=!e.closed,!1}),t.closed||(this.closed=!1)}function a(){localStorage.setItem(k(e,"gui"),JSON.stringify(e.getSaveObject()))}t.autoPlace&&(d.isUndefined(t.parent)&&(y&&(v=document.createElement("div"),p.addClass(v,"dg"),p.addClass(v,_.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(v),y=!1),v.appendChild(this.domElement),p.addClass(this.domElement,_.CLASS_AUTO_PLACE)),this.parent||S(e,t.width)),p.bind(window,"resize",function(){e.onResize()}),p.bind(this.__ul,"webkitTransitionEnd",function(){e.onResize()}),p.bind(this.__ul,"transitionend",function(){e.onResize()}),p.bind(this.__ul,"oTransitionEnd",function(){e.onResize()}),this.onResize(),t.resizable&&function(t){var e;function n(n){return n.preventDefault(),e=n.clientX,p.addClass(t.__closeButton,_.CLASS_DRAG),p.bind(window,"mousemove",r),p.bind(window,"mouseup",i),!1}function r(n){return n.preventDefault(),t.width+=e-n.clientX,t.onResize(),e=n.clientX,!1}function i(){p.removeClass(t.__closeButton,_.CLASS_DRAG),p.unbind(window,"mousemove",r),p.unbind(window,"mouseup",i)}t.__resize_handle=document.createElement("div"),d.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),p.bind(t.__resize_handle,"mousedown",n),p.bind(t.__closeButton,"mousedown",n),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}(this);e.getRoot();t.parent||function(){var t=e.getRoot();t.width+=1,d.defer(function(){t.width-=1})}()};function M(t,e,n,c){if(void 0===e[n])throw new Error("Object "+e+' has no property "'+n+'"');var l;if(c.color)l=new f(e,n);else{var h=[e,n].concat(c.factoryArgs);l=r.apply(t,h)}c.before instanceof i&&(c.before=c.before.__li),E(t,l),p.addClass(l.domElement,"c");var m=document.createElement("span");p.addClass(m,"property-name"),m.innerHTML=l.property;var v=document.createElement("div");v.appendChild(m),v.appendChild(l.domElement);var g=A(t,v,c.before);return p.addClass(g,_.CLASS_CONTROLLER_ROW),p.addClass(g,typeof l.getValue()),function(t,e,n){if(n.__li=e,n.__gui=t,d.extend(n,{options:function(e){return arguments.length>1?(n.remove(),M(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[d.toArray(arguments)]})):d.isArray(e)||d.isObject(e)?(n.remove(),M(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[e]})):void 0},name:function(t){return n.__li.firstElementChild.firstElementChild.innerHTML=t,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof u){var r=new s(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});d.each(["updateDisplay","onChange","onFinishChange"],function(t){var e=n[t],i=r[t];n[t]=r[t]=function(){var t=Array.prototype.slice.call(arguments);return e.apply(n,t),i.apply(r,t)}}),p.addClass(e,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof s){var i=function(e){return d.isNumber(n.__min)&&d.isNumber(n.__max)?(n.remove(),M(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]})):e};n.min=d.compose(i,n.min),n.max=d.compose(i,n.max)}else n instanceof o?(p.bind(e,"click",function(){p.fakeEvent(n.__checkbox,"click")}),p.bind(n.__checkbox,"click",function(t){t.stopPropagation()})):n instanceof a?(p.bind(e,"click",function(){p.fakeEvent(n.__button,"click")}),p.bind(e,"mouseover",function(){p.addClass(n.__button,"hover")}),p.bind(e,"mouseout",function(){p.removeClass(n.__button,"hover")})):n instanceof f&&(p.addClass(e,"color"),n.updateDisplay=d.compose(function(t){return e.style.borderLeftColor=n.__color.toString(),t},n.updateDisplay),n.updateDisplay());n.setValue=d.compose(function(e){return t.getRoot().__preset_select&&n.isModified()&&C(t.getRoot(),!0),e},n.setValue)}(t,g,l),t.__controllers.push(l),l}function A(t,e,n){var r=document.createElement("li");return e&&r.appendChild(e),n?t.__ul.insertBefore(r,params.before):t.__ul.appendChild(r),t.onResize(),r}function E(t,e){var n=t.getRoot(),r=n.__rememberedObjects.indexOf(e.object);if(-1!=r){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(n.__rememberedObjectIndecesToControllers[r]=i={}),i[e.property]=e,n.load&&n.load.remembered){var o,a=n.load.remembered;if(a[t.preset])o=a[t.preset];else{if(!a[g])return;o=a[g]}if(o[r]&&void 0!==o[r][e.property]){var s=o[r][e.property];e.initialValue=s,e.setValue(s)}}}}function k(t,e){return document.location.href+"."+e}function S(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function T(t,e){var n={};return d.each(t.__rememberedObjects,function(r,i){var o={};d.each(t.__rememberedObjectIndecesToControllers[i],function(t,n){o[n]=e?t.initialValue:t.getValue()}),n[i]=o}),n}function R(t,e,n){var r=document.createElement("option");r.innerHTML=e,r.value=e,t.__preset_select.appendChild(r),n&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function C(t,e){var n=t.__preset_select[t.__preset_select.selectedIndex];n.innerHTML=e?n.value+"*":n.value}return _.toggleHide=function(){x=!x,d.each(w,function(t){t.domElement.style.zIndex=x?-999:999,t.domElement.style.opacity=x?0:1})},_.CLASS_AUTO_PLACE="a",_.CLASS_AUTO_PLACE_CONTAINER="ac",_.CLASS_MAIN="main",_.CLASS_CONTROLLER_ROW="cr",_.CLASS_TOO_TALL="taller-than-window",_.CLASS_CLOSED="closed",_.CLASS_CLOSE_BUTTON="close-button",_.CLASS_DRAG="drag",_.DEFAULT_WIDTH=245,_.TEXT_CLOSED="Close Controls",_.TEXT_OPEN="Open Controls",p.bind(window,"keydown",function(t){"text"===document.activeElement.type||72!==t.which&&72!=t.keyCode||_.toggleHide()},!1),d.extend(_.prototype,{add:function(t,e){return M(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return M(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.slice(this.__controllers.indexOf(t),1);var e=this;d.defer(function(){e.onResize()})},destroy:function(){this.autoPlace&&v.removeChild(this.domElement)},addFolder:function(t){if(void 0!==this.__folders[t])throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var n=new _(e);this.__folders[t]=n;var r=A(this,n.domElement);return p.addClass(r,"folder"),n},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=p.getOffset(t.__ul).top,n=0;d.each(t.__ul.childNodes,function(e){t.autoPlace&&e===t.__save_row||(n+=p.getHeight(e))}),window.innerHeight-e-20<n?(p.addClass(t.domElement,_.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-20+"px"):(p.removeClass(t.domElement,_.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&d.defer(function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"}),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},remember:function(){if(d.isUndefined(m)&&((m=new h).domElement.innerHTML='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>'),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;d.each(Array.prototype.slice.call(arguments),function(e){0==t.__rememberedObjects.length&&function(t){var e=t.__save_row=document.createElement("li");p.addClass(t.domElement,"has-save"),t.__ul.insertBefore(e,t.__ul.firstChild),p.addClass(e,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",p.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",p.addClass(r,"button"),p.addClass(r,"save");var i=document.createElement("span");i.innerHTML="New",p.addClass(i,"button"),p.addClass(i,"save-as");var o=document.createElement("span");o.innerHTML="Revert",p.addClass(o,"button"),p.addClass(o,"revert");var a=t.__preset_select=document.createElement("select");t.load&&t.load.remembered?d.each(t.load.remembered,function(e,n){R(t,n,n==t.preset)}):R(t,g,!1);if(p.bind(a,"change",function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value}),e.appendChild(a),e.appendChild(n),e.appendChild(r),e.appendChild(i),e.appendChild(o),b){var s=document.getElementById("dg-save-locally"),u=document.getElementById("dg-local-explain");s.style.display="block";var c=document.getElementById("dg-local-storage");function f(){u.style.display=t.useLocalStorage?"block":"none"}"true"===localStorage.getItem(k(t,"isLocal"))&&c.setAttribute("checked","checked"),f(),p.bind(c,"change",function(){t.useLocalStorage=!t.useLocalStorage,f()})}var l=document.getElementById("dg-new-constructor");p.bind(l,"keydown",function(t){!t.metaKey||67!==t.which&&67!=t.keyCode||m.hide()}),p.bind(n,"click",function(){l.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),m.show(),l.focus(),l.select()}),p.bind(r,"click",function(){t.save()}),p.bind(i,"click",function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)}),p.bind(o,"click",function(){t.revert()})}(t),-1==t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)}),this.autoPlace&&S(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=T(this)),t.folders={},d.each(this.__folders,function(e,n){t.folders[n]=e.getSaveObject()}),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=T(this),C(this,!1)},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered[g]=T(this,!0)),this.load.remembered[t]=T(this),this.preset=t,R(this,t,!0)},revert:function(t){d.each(this.__controllers,function(e){this.getRoot().load.remembered?E(t||this.getRoot(),e):e.setValue(e.initialValue)},this),d.each(this.__folders,function(t){t.revert(t)}),t||C(this.getRoot(),!1)},listen:function(t){var e=0==this.__listening.length;this.__listening.push(t),e&&function t(e){0!=e.length&&l(function(){t(e)});d.each(e,function(t){t.updateDisplay()})}(this.__listening)}}),_}(u.utils.css,0,0,u.controllers.factory=function(t,e,n,r,i,o,a){return function(s,u){var c=s[u];return a.isArray(arguments[2])||a.isObject(arguments[2])?new t(s,u,arguments[2]):a.isNumber(c)?a.isNumber(arguments[2])&&a.isNumber(arguments[3])?new n(s,u,arguments[2],arguments[3]):new e(s,u,{min:arguments[2],max:arguments[3]}):a.isString(c)?new r(s,u):a.isFunction(c)?new i(s,u,""):a.isBoolean(c)?new o(s,u):void 0}}(u.controllers.OptionController,u.controllers.NumberControllerBox,u.controllers.NumberControllerSlider,u.controllers.StringController=function(t,e,n){var r=function(t,n){r.superclass.call(this,t,n);var i=this;function o(){i.setValue(i.__input.value)}this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),e.bind(this.__input,"keyup",o),e.bind(this.__input,"change",o),e.bind(this.__input,"blur",function(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())}),e.bind(this.__input,"keydown",function(t){13===t.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return r.superclass=t,n.extend(r.prototype,t.prototype,{updateDisplay:function(){return e.isActive(this.__input)||(this.__input.value=this.getValue()),r.superclass.prototype.updateDisplay.call(this)}}),r}(u.controllers.Controller,u.dom.dom,u.utils.common),u.controllers.FunctionController,u.controllers.BooleanController,u.utils.common),u.controllers.Controller,u.controllers.BooleanController,u.controllers.FunctionController,u.controllers.NumberControllerBox,u.controllers.NumberControllerSlider,0,u.controllers.ColorController=function(t,e,n,r,i){var o=function(t,a){o.superclass.call(this,t,a),this.__color=new n(this.getValue()),this.__temp=new n(0);var u=this;this.domElement=document.createElement("div"),e.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",e.bind(this.__input,"keydown",function(t){13===t.keyCode&&p.call(this)}),e.bind(this.__input,"blur",p),e.bind(this.__selector,"mousedown",function(t){e.addClass(this,"drag").bind(window,"mouseup",function(t){e.removeClass(u.__selector,"drag")})});var c,f=document.createElement("div");function l(t){m(t),e.bind(window,"mousemove",m),e.bind(window,"mouseup",h)}function h(){e.unbind(window,"mousemove",m),e.unbind(window,"mouseup",h)}function p(){var t=r(this.value);!1!==t?(u.__color.__state=t,u.setValue(u.__color.toOriginal())):this.value=u.__color.toString()}function d(){e.unbind(window,"mousemove",v),e.unbind(window,"mouseup",d)}function m(t){t.preventDefault();var n=e.getWidth(u.__saturation_field),r=e.getOffset(u.__saturation_field),i=(t.clientX-r.left+document.body.scrollLeft)/n,o=1-(t.clientY-r.top+document.body.scrollTop)/n;return o>1?o=1:o<0&&(o=0),i>1?i=1:i<0&&(i=0),u.__color.v=o,u.__color.s=i,u.setValue(u.__color.toOriginal()),!1}function v(t){t.preventDefault();var n=e.getHeight(u.__hue_field),r=e.getOffset(u.__hue_field),i=1-(t.clientY-r.top+document.body.scrollTop)/n;return i>1?i=1:i<0&&(i=0),u.__color.h=360*i,u.setValue(u.__color.toOriginal()),!1}i.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),i.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),i.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),i.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),i.extend(f.style,{width:"100%",height:"100%",background:"none"}),s(f,"top","rgba(0,0,0,0)","#000"),i.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),(c=this.__hue_field).style.background="",c.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",c.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",c.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",c.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",c.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",i.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),e.bind(this.__saturation_field,"mousedown",l),e.bind(this.__field_knob,"mousedown",l),e.bind(this.__hue_field,"mousedown",function(t){v(t),e.bind(window,"mousemove",v),e.bind(window,"mouseup",d)}),this.__saturation_field.appendChild(f),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};o.superclass=t,i.extend(o.prototype,t.prototype,{updateDisplay:function(){var t=r(this.getValue());if(!1!==t){var e=!1;i.each(n.COMPONENTS,function(n){if(!i.isUndefined(t[n])&&!i.isUndefined(this.__color.__state[n])&&t[n]!==this.__color.__state[n])return e=!0,{}},this),e&&i.extend(this.__color.__state,t)}i.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var o=this.__color.v<.5||this.__color.s>.5?255:0,a=255-o;i.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+o+","+o+","+o+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,s(this.__saturation_field,"left","#fff",this.__temp.toString()),i.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+o+","+o+","+o+")",textShadow:this.__input_textShadow+"rgba("+a+","+a+","+a+",.7)"})}});var a=["-moz-","-o-","-webkit-","-ms-",""];function s(t,e,n,r){t.style.background="",i.each(a,function(i){t.style.cssText+="background: "+i+"linear-gradient("+e+", "+n+" 0%, "+r+" 100%); "})}return o}(u.controllers.Controller,u.dom.dom,u.color.Color=function(t,e,n,r){var i=function(){if(this.__state=t.apply(this,arguments),!1===this.__state)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};function o(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space?this.__state[e]:(s(this,e,n),this.__state[e])},set:function(t){"RGB"!==this.__state.space&&(s(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function a(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space?this.__state[e]:(u(this),this.__state[e])},set:function(t){"HSV"!==this.__state.space&&(u(this),this.__state.space="HSV"),this.__state[e]=t}})}function s(t,n,i){if("HEX"===t.__state.space)t.__state[n]=e.component_from_hex(t.__state.hex,i);else{if("HSV"!==t.__state.space)throw"Corrupted color state";r.extend(t.__state,e.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}}function u(t){var n=e.rgb_to_hsv(t.r,t.g,t.b);r.extend(t.__state,{s:n.s,v:n.v}),r.isNaN(n.h)?r.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=n.h}return i.COMPONENTS=["r","g","b","h","s","v","hex","a"],r.extend(i.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),o(i.prototype,"r",2),o(i.prototype,"g",1),o(i.prototype,"b",0),a(i.prototype,"h"),a(i.prototype,"s"),a(i.prototype,"v"),Object.defineProperty(i.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(i.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=e.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}}),i}(u.color.interpret,u.color.math={hsv_to_rgb:function(t,e,n){var r=Math.floor(t/60)%6,i=t/60-Math.floor(t/60),o=n*(1-e),a=n*(1-i*e),s=n*(1-(1-i)*e),u=[[n,s,o],[a,n,o],[o,n,s],[o,a,n],[s,o,n],[n,o,a]][r];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(t,e,n){var r,i=Math.min(t,e,n),o=Math.max(t,e,n),a=o-i;return 0==o?{h:NaN,s:0,v:0}:(r=t==o?(e-n)/a:e==o?2+(n-t)/a:4+(t-e)/a,(r/=6)<0&&(r+=1),{h:360*r,s:a/o,v:o/255})},rgb_to_hex:function(t,e,n){var r=this.hex_with_component(0,2,t);return r=this.hex_with_component(r,1,e),r=this.hex_with_component(r,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(t,e,n){return n<<(s=8*e)|t&~(255<<s)}},u.color.toString,u.utils.common),u.color.interpret,u.utils.common),u.utils.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,1e3/60)},u.dom.CenteredDiv=function(t,e){var n=function(){this.backgroundElement=document.createElement("div"),e.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),t.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),e.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var n=this;t.bind(this.backgroundElement,"click",function(){n.hide()})};return n.prototype.show=function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),e.defer(function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"})},n.prototype.hide=function(){var e=this,n=function(){e.domElement.style.display="none",e.backgroundElement.style.display="none",t.unbind(e.domElement,"webkitTransitionEnd",n),t.unbind(e.domElement,"transitionend",n),t.unbind(e.domElement,"oTransitionEnd",n)};t.bind(this.domElement,"webkitTransitionEnd",n),t.bind(this.domElement,"transitionend",n),t.bind(this.domElement,"oTransitionEnd",n),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},n.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-t.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-t.getHeight(this.domElement)/2+"px"},n}(u.dom.dom,u.utils.common),u.dom.dom,u.utils.common)},{}],31:[function(t,e,n){var r=t("clone");e.exports=function(t,e){return t=t||{},Object.keys(e).forEach(function(n){void 0===t[n]&&(t[n]=r(e[n]))}),t}},{clone:25}],32:[function(t,e,n){e.exports=function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]}},{}],33:[function(t,e,n){"use strict";e.exports=function(t,e,n){switch(arguments.length){case 0:return new a([0],[0],0);case 1:if("number"==typeof t){var r=u(t);return new a(r,r,0)}return new a(t,u(t.length),0);case 2:if("number"==typeof e){var r=u(t.length);return new a(t,r,+e)}n=0;case 3:if(t.length!==e.length)throw new Error("state and velocity lengths must match");return new a(t,e,n)}};var r=t("cubic-hermite"),i=t("binary-search-bounds");function o(t,e,n){return Math.min(e,Math.max(t,n))}function a(t,e,n){this.dimension=t.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var r=0;r<this.dimension;++r)this.bounds[0][r]=-Infinity,this.bounds[1][r]=Infinity;this._state=t.slice().reverse(),this._velocity=e.slice().reverse(),this._time=[n],this._scratch=[t.slice(),t.slice(),t.slice(),t.slice(),t.slice()]}var s=a.prototype;function u(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=0;return e}s.flush=function(t){var e=i.gt(this._time,t)-1;e<=0||(this._time.splice(0,e),this._state.splice(0,e*this.dimension),this._velocity.splice(0,e*this.dimension))},s.curve=function(t){var e=this._time,n=e.length,a=i.le(e,t),s=this._scratch[0],u=this._state,c=this._velocity,f=this.dimension,l=this.bounds;if(a<0)for(var h=f-1,p=0;p<f;++p,--h)s[p]=u[h];else if(a>=n-1){h=u.length-1;var d=t-e[n-1];for(p=0;p<f;++p,--h)s[p]=u[h]+d*c[h]}else{h=f*(a+1)-1;var m=e[a],v=e[a+1]-m||1,g=this._scratch[1],b=this._scratch[2],y=this._scratch[3],x=this._scratch[4],w=!0;for(p=0;p<f;++p,--h)g[p]=u[h],y[p]=c[h]*v,b[p]=u[h+f],x[p]=c[h+f]*v,w=w&&g[p]===b[p]&&y[p]===x[p]&&0===y[p];if(w)for(p=0;p<f;++p)s[p]=g[p];else r(g,y,b,x,(t-m)/v,s)}var _=l[0],M=l[1];for(p=0;p<f;++p)s[p]=o(_[p],M[p],s[p]);return s},s.dcurve=function(t){var e=this._time,n=e.length,o=i.le(e,t),a=this._scratch[0],s=this._state,u=this._velocity,c=this.dimension;if(o>=n-1)for(var f=s.length-1,l=0;l<c;++l,--f)a[l]=u[f];else{f=c*(o+1)-1;var h=e[o],p=e[o+1]-h||1,d=this._scratch[1],m=this._scratch[2],v=this._scratch[3],g=this._scratch[4],b=!0;for(l=0;l<c;++l,--f)d[l]=s[f],v[l]=u[f]*p,m[l]=s[f+c],g[l]=u[f+c]*p,b=b&&d[l]===m[l]&&v[l]===g[l]&&0===v[l];if(b)for(l=0;l<c;++l)a[l]=0;else{r.derivative(d,v,m,g,(t-h)/p,a);for(l=0;l<c;++l)a[l]/=p}}return a},s.lastT=function(){var t=this._time;return t[t.length-1]},s.stable=function(){for(var t=this._velocity,e=t.length,n=this.dimension-1;n>=0;--n)if(t[--e])return!1;return!0},s.jump=function(t){var e=this.lastT(),n=this.dimension;if(!(t<e||arguments.length!==n+1)){var r=this._state,i=this._velocity,a=r.length-this.dimension,s=this.bounds,u=s[0],c=s[1];this._time.push(e,t);for(var f=0;f<2;++f)for(var l=0;l<n;++l)r.push(r[a++]),i.push(0);this._time.push(t);for(l=n;l>0;--l)r.push(o(u[l-1],c[l-1],arguments[l])),i.push(0)}},s.push=function(t){var e=this.lastT(),n=this.dimension;if(!(t<e||arguments.length!==n+1)){var r=this._state,i=this._velocity,a=r.length-this.dimension,s=t-e,u=this.bounds,c=u[0],f=u[1],l=s>1e-6?1/s:0;this._time.push(t);for(var h=n;h>0;--h){var p=o(c[h-1],f[h-1],arguments[h]);r.push(p),i.push((p-r[a++])*l)}}},s.set=function(t){var e=this.dimension;if(!(t<this.lastT()||arguments.length!==e+1)){var n=this._state,r=this._velocity,i=this.bounds,a=i[0],s=i[1];this._time.push(t);for(var u=e;u>0;--u)n.push(o(a[u-1],s[u-1],arguments[u])),r.push(0)}},s.move=function(t){var e=this.lastT(),n=this.dimension;if(!(t<=e||arguments.length!==n+1)){var r=this._state,i=this._velocity,a=r.length-this.dimension,s=this.bounds,u=s[0],c=s[1],f=t-e,l=f>1e-6?1/f:0;this._time.push(t);for(var h=n;h>0;--h){var p=arguments[h];r.push(o(u[h-1],c[h-1],r[a++]+p)),i.push(p*l)}}},s.idle=function(t){var e=this.lastT();if(!(t<e)){var n=this.dimension,r=this._state,i=this._velocity,a=r.length-n,s=this.bounds,u=s[0],c=s[1],f=t-e;this._time.push(t);for(var l=n-1;l>=0;--l)r.push(o(u[l],c[l],r[a]+f*i[a])),i.push(0),a+=1}}},{"binary-search-bounds":5,"cubic-hermite":27}],34:[function(t,e,n){e.exports=function(t){var e,n,r,i,o,a=t[0],s=t[1],u=t[2];if(0===s)return[o=u,o,o];n=u<.5?u*(1+s):u+s-u*s;e=2*u-n,i=[0,0,0];for(var c=0;c<3;c++)(r=a+1/3*-(c-1))<0&&r++,r>1&&r--,i[c]=o=6*r<1?e+6*(n-e)*r:2*r<1?n:3*r<2?e+(n-e)*(2/3-r)*6:e;return i}},{}],35:[function(t,e,n){e.exports=function(t){var e,n,r,i=t[0],o=t[1],a=t[2],s=Math.min(i,o,a),u=Math.max(i,o,a),c=u-s;u===s?e=0:i===u?e=(o-a)/c:o===u?e=2+(a-i)/c:a===u&&(e=4+(i-o)/c);(e=Math.min(60*e,360))<0&&(e+=360);r=(s+u)/2,n=u===s?0:r<=.5?c/(u+s):c/(2-u-s);return[e/360,n,r]}},{}],36:[function(t,e,n){"use strict";var r=t("geo-identify-position-format"),i=t("geo-convert-position-format"),o=t("gl-vec3");e.exports=function(t,e){for(var n=r.identify(t),a=i.convert(t,r.ARRAY_OF_ARRAYS,3),s=0;s<a.length;s++)o.transformMat4(a[s],a[s],e);return a=i.convert(a,n,3)}},{"geo-convert-position-format":39,"geo-identify-position-format":40,"gl-vec3":93}],37:[function(t,e,n){"use strict";const r=t("regl"),i=t("gl-matrix").mat4,o=t("geo-center"),a=t("vertices-bounding-box"),s=t("geo-3d-transform-mat4"),u=t("geo-convert-position-format"),c=t("normals").vertexNormals,f=t("mesh-reindex"),l=t("defaults");e.exports=function(t,e){e=l(e,{cells:void 0,regl:!1,bias:.01,resolution:512}),t=o(t);const n=a(t),h=[1/(n[1][0]-n[0][0]),1/(n[1][1]-n[0][1]),1/(n[1][2]-n[0][2])],p=i.scale([],i.create(),h);t=s(t,p);const d=u.convert(t,u.TYPED_ARRAY);let m,v={cells:e.cells,positions:t};void 0===v.cells&&(v=f(d)),m=void 0===e.normals?c(v.cells,v.positions,0):e.normals;const g=u.convert(m,u.TYPED_ARRAY);if(d.length%3!=0)throw new Error("geo-ambient-occlusion: Position array not divisible by three.");const b=d.length/3;let y=1;for(;y*y<b;)y*=2;const x=new Float32Array(y*y*3);x.set(d);const w=new Float32Array(y*y*3);w.set(g);const _=["OES_texture_float"];if(b>65535&&void 0!==e.cells&&_.push("OES_element_index_uint"),e.regl)for(let t of _)if(!e.regl.hasExtension(t))throw new Error("geo-ambient-occlusion: Provided regl context needs the "+t+" extension for this mesh.");let M,A;e.regl?(M=e.regl,A=!1):(M=r({canvas:document.createElement("canvas"),extensions:_}),A=!0);const E=F(e.resolution),k={vert:"\n      precision highp float;\n      attribute vec3 position;\n      uniform mat4 model, projection;\n      varying vec3 vPos;\n      void main() {\n        gl_Position = projection * model * vec4(position, 1);\n        vPos = vec3(model * vec4(position, 1));\n      }\n    ",frag:"\n      precision highp float;\n      varying vec3 vPos;\n      void main() {\n        gl_FragColor = vec4(vPos, 1);\n      }\n    ",attributes:{position:t},uniforms:{model:M.prop("model"),projection:M.prop("projection")},viewport:{x:0,y:0,width:e.resolution,height:e.resolution},framebuffer:E};e.cells?k.elements=e.cells:k.count=b;const S=M(k),T=[F(y),F(y)],R=M.texture({width:y,height:y,data:x,format:"rgb",type:"float"}),C=M.texture({width:y,height:y,data:w,format:"rgb",type:"float"}),O=M({vert:"\n      precision highp float;\n      attribute vec2 position;\n      void main() {\n          gl_Position = vec4(position, 0, 1);\n      }\n    ",frag:"\n      precision highp float;\n\n      uniform sampler2D tPosition, tSource, tVertex, tNormal;\n      uniform float count, bias;\n      uniform vec2 resolution;\n      uniform mat4 model;\n\n      const float INVSQRT3 = 0.5773502691896258; // 1/sqrt(3)\n\n      void main() {\n          vec2 texel = gl_FragCoord.xy/resolution;\n          vec3 vert = texture2D(tVertex, texel).rgb;\n          vert = vec3(model * vec4(vert, 1));\n          vec3 norm = texture2D(tNormal, texel).rgb;\n          norm = vec3(model * vec4(norm, 1));\n          float z = texture2D(tPosition, INVSQRT3 * vert.xy + 0.5).z;\n          float o = 0.0;\n          if ((vert.z - z) < -bias) {\n              o = 1.0;\n          }\n          vec4 src = texture2D(tSource, texel);\n          if (dot(norm, vec3(0,0,1)) > 0.0) {\n            gl_FragColor = src + vec4(o, 1, 0, 0);\n          } else {\n            gl_FragColor = src;\n          }\n      }\n    ",attributes:{position:[-1,-1,1,-1,1,1,-1,-1,1,1,-1,1]},uniforms:{tPosition:E,tSource:M.prop("source"),tVertex:R,tNormal:C,count:M.prop("count"),bias:M.prop("bias"),resolution:[y,y],model:M.prop("model")},viewport:{x:0,y:0,width:y,height:y},framebuffer:M.prop("destination"),count:6});let j=0,P=0;const L=Math.sqrt(3)/2,D=i.ortho([],-L,L,-L,L,-L,L);function F(t){return M.framebuffer({width:t,height:t,colorFormat:"rgba",colorType:"float"})}return{sample:function(){const t=T[j=1-j],n=T[1-j];P++;const r=i.create();i.rotateX(r,r,100*Math.random()),i.rotateY(r,r,100*Math.random()),i.rotateZ(r,r,100*Math.random()),M.clear({color:[0,0,0,1],depth:1,framebuffer:E}),S({model:r,projection:D}),M.clear({color:[0,0,0,1],depth:1,framebuffer:n}),O({source:t,destination:n,count:P,bias:e.bias,model:r})},report:function(){let t;T[1-j].use(()=>{t=M.read()});const e=new Float32Array(b);for(let n=0;n<b;n++){const r=4*n,i=t[r+1];e[n]=0===i?0:t[r+0]/i}return e},dispose:function(){R.destroy(),E.destroy(),T[0].destroy(),T[1].destroy(),A&&M.destroy()}}}},{defaults:31,"geo-3d-transform-mat4":36,"geo-center":38,"geo-convert-position-format":39,"gl-matrix":71,"mesh-reindex":153,normals:159,regl:172,"vertices-bounding-box":180}],38:[function(t,e,n){"use strict";var r=t("lodash.defaultsdeep"),i=t("vertices-bounding-box"),o=t("gl-mat4"),a=t("geo-3d-transform-mat4"),s=t("geo-convert-position-format");e.exports=function(t,e){e=r(e=e||{},{center:[0,0,0]}),t=s.convert(t,s.ARRAY_OF_ARRAYS);var n=i(t),u=[-.5*(n[0][0]+n[1][0])+e.center[0],-.5*(n[0][1]+n[1][1])+e.center[1],-.5*(n[0][2]+n[1][2])+e.center[2]],c=o.create();return o.translate(c,c,u),a(t,c)}},{"geo-3d-transform-mat4":36,"geo-convert-position-format":39,"gl-mat4":56,"lodash.defaultsdeep":138,"vertices-bounding-box":180}],39:[function(t,e,n){"use strict";var r=t("geo-identify-position-format"),i=t("ndarray");e.exports={convert:function(t,e,n){if(-1===[r.FLAT_ARRAY,r.ARRAY_OF_ARRAYS,r.TYPED_ARRAY,r.ARRAY_OF_TYPED_ARRAYS,r.NDARRAY].indexOf(e=void 0===e?r.TYPED_ARRAY:e))throw new Error("geo-convert-position-format: Unknown target format "+e);var o,a=r.identify(t);if(a===r.FLAT_ARRAY)o=new Float32Array(t);else if(a===r.TYPED_ARRAY)o=new Float32Array(t);else if(a===r.ARRAY_OF_ARRAYS){o=[];for(var s=0;s<t.length;s++)o.push.apply(o,t[s]);o=new Float32Array(o)}else if(a===r.ARRAY_OF_TYPED_ARRAYS){o=[];for(var s=0;s<t.length;s++)o.push.apply(o,t[s]);o=new Float32Array(o)}else{if(a!==r.NDARRAY)throw new Error("geo-convert-position-format: Could not convert from incoming format "+a);o=new Float32Array(t.data)}void 0===n&&(n=o.length%3==0?3:o.length%2==0?2:1);if(-1===[1,2,3].indexOf(n))throw new Error("geo-convert-position-format: Stride "+n+" not a valid stride - must be 1, 2, or 3");if(o.length%n!=0)throw new Error("geo-convert-position-format: Stride "+n+" incompatible with element count "+o.length);if(e===r.TYPED_ARRAY)return o;if(e===r.FLAT_ARRAY)return Array.prototype.slice.call(o);if(e===r.ARRAY_OF_ARRAYS){for(var u=[],s=0,c=0,f=o.length/n;c<f;c++){for(var l=[],h=0;h<n;h++)l.push(o[s++]);u.push(l)}return u}if(e===r.ARRAY_OF_TYPED_ARRAYS){for(var u=[],s=0,c=0,f=o.length/n;c<f;c++){for(var l=[],h=0;h<n;h++)l.push(o[s++]);u.push(new Float32Array(l))}return u}if(e===r.NDARRAY)return i(o);throw new Error("geo-convert-position-format: Could not convert to target format "+e)},FLAT_ARRAY:r.FLAT_ARRAY,ARRAY_OF_ARRAYS:r.ARRAY_OF_ARRAYS,TYPED_ARRAY:r.TYPED_ARRAY,ARRAY_OF_TYPED_ARRAYS:r.ARRAY_OF_TYPED_ARRAYS,NDARRAY:r.NDARRAY}},{"geo-identify-position-format":40,ndarray:158}],40:[function(t,e,n){"use strict";var r=t("is-typedarray"),i=t("isndarray"),o="array of arrays",a="array of typed arrays",s="flat array",u="typed array",c="ndarray";e.exports={identify:function(t){if(Array.isArray(t)&&Array.isArray(t[0]))return o;if(Array.isArray(t)&&r(t[0]))return a;if(Array.isArray(t))return s;if(i(t))return c;if(r(t))return u;throw new Error("geo-identify-position-format: Could not identify position format.")},ARRAY_OF_ARRAYS:o,ARRAY_OF_TYPED_ARRAYS:a,FLAT_ARRAY:s,TYPED_ARRAY:u,NDARRAY:c}},{"is-typedarray":127,isndarray:128}],41:[function(t,e,n){e.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=e[9],h=e[10],p=e[11],d=e[12],m=e[13],v=e[14],g=e[15];return t[0]=s*(h*g-p*v)-l*(u*g-c*v)+m*(u*p-c*h),t[1]=-(r*(h*g-p*v)-l*(i*g-o*v)+m*(i*p-o*h)),t[2]=r*(u*g-c*v)-s*(i*g-o*v)+m*(i*c-o*u),t[3]=-(r*(u*p-c*h)-s*(i*p-o*h)+l*(i*c-o*u)),t[4]=-(a*(h*g-p*v)-f*(u*g-c*v)+d*(u*p-c*h)),t[5]=n*(h*g-p*v)-f*(i*g-o*v)+d*(i*p-o*h),t[6]=-(n*(u*g-c*v)-a*(i*g-o*v)+d*(i*c-o*u)),t[7]=n*(u*p-c*h)-a*(i*p-o*h)+f*(i*c-o*u),t[8]=a*(l*g-p*m)-f*(s*g-c*m)+d*(s*p-c*l),t[9]=-(n*(l*g-p*m)-f*(r*g-o*m)+d*(r*p-o*l)),t[10]=n*(s*g-c*m)-a*(r*g-o*m)+d*(r*c-o*s),t[11]=-(n*(s*p-c*l)-a*(r*p-o*l)+f*(r*c-o*s)),t[12]=-(a*(l*v-h*m)-f*(s*v-u*m)+d*(s*h-u*l)),t[13]=n*(l*v-h*m)-f*(r*v-i*m)+d*(r*h-i*l),t[14]=-(n*(s*v-u*m)-a*(r*v-i*m)+d*(r*u-i*s)),t[15]=n*(s*h-u*l)-a*(r*h-i*l)+f*(r*u-i*s),t}},{}],42:[function(t,e,n){e.exports=function(t){var e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],43:[function(t,e,n){e.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},{}],44:[function(t,e,n){e.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],45:[function(t,e,n){e.exports=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],f=t[9],l=t[10],h=t[11],p=t[12],d=t[13],m=t[14],v=t[15];return(e*a-n*o)*(l*v-h*m)-(e*s-r*o)*(f*v-h*d)+(e*u-i*o)*(f*m-l*d)+(n*s-r*a)*(c*v-h*p)-(n*u-i*a)*(c*m-l*p)+(r*u-i*s)*(c*d-f*p)}},{}],46:[function(t,e,n){e.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,f=r*a,l=r*s,h=i*a,p=i*s,d=i*u,m=o*a,v=o*s,g=o*u;return t[0]=1-l-d,t[1]=f+g,t[2]=h-v,t[3]=0,t[4]=f-g,t[5]=1-c-d,t[6]=p+m,t[7]=0,t[8]=h+v,t[9]=p-m,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],47:[function(t,e,n){e.exports=function(t,e,n){var r,i,o,a=n[0],s=n[1],u=n[2],c=Math.sqrt(a*a+s*s+u*u);if(Math.abs(c)<1e-6)return null;return a*=c=1/c,s*=c,u*=c,r=Math.sin(e),i=Math.cos(e),t[0]=a*a*(o=1-i)+i,t[1]=s*a*o+u*r,t[2]=u*a*o-s*r,t[3]=0,t[4]=a*s*o-u*r,t[5]=s*s*o+i,t[6]=u*s*o+a*r,t[7]=0,t[8]=a*u*o+s*r,t[9]=s*u*o-a*r,t[10]=u*u*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],48:[function(t,e,n){e.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=r+r,u=i+i,c=o+o,f=r*s,l=r*u,h=r*c,p=i*u,d=i*c,m=o*c,v=a*s,g=a*u,b=a*c;return t[0]=1-(p+m),t[1]=l+b,t[2]=h-g,t[3]=0,t[4]=l-b,t[5]=1-(f+m),t[6]=d+v,t[7]=0,t[8]=h+g,t[9]=d-v,t[10]=1-(f+p),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}},{}],49:[function(t,e,n){e.exports=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],50:[function(t,e,n){e.exports=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}},{}],51:[function(t,e,n){e.exports=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],52:[function(t,e,n){e.exports=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],53:[function(t,e,n){e.exports=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],54:[function(t,e,n){e.exports=function(t,e,n,r,i,o,a){var s=1/(n-e),u=1/(i-r),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t}},{}],55:[function(t,e,n){e.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],56:[function(t,e,n){e.exports={create:t("./create"),clone:t("./clone"),copy:t("./copy"),identity:t("./identity"),transpose:t("./transpose"),invert:t("./invert"),adjoint:t("./adjoint"),determinant:t("./determinant"),multiply:t("./multiply"),translate:t("./translate"),scale:t("./scale"),rotate:t("./rotate"),rotateX:t("./rotateX"),rotateY:t("./rotateY"),rotateZ:t("./rotateZ"),fromRotation:t("./fromRotation"),fromRotationTranslation:t("./fromRotationTranslation"),fromScaling:t("./fromScaling"),fromTranslation:t("./fromTranslation"),fromXRotation:t("./fromXRotation"),fromYRotation:t("./fromYRotation"),fromZRotation:t("./fromZRotation"),fromQuat:t("./fromQuat"),frustum:t("./frustum"),perspective:t("./perspective"),perspectiveFromFieldOfView:t("./perspectiveFromFieldOfView"),ortho:t("./ortho"),lookAt:t("./lookAt"),str:t("./str")}},{"./adjoint":41,"./clone":42,"./copy":43,"./create":44,"./determinant":45,"./fromQuat":46,"./fromRotation":47,"./fromRotationTranslation":48,"./fromScaling":49,"./fromTranslation":50,"./fromXRotation":51,"./fromYRotation":52,"./fromZRotation":53,"./frustum":54,"./identity":55,"./invert":57,"./lookAt":58,"./multiply":59,"./ortho":60,"./perspective":61,"./perspectiveFromFieldOfView":62,"./rotate":63,"./rotateX":64,"./rotateY":65,"./rotateZ":66,"./scale":67,"./str":68,"./translate":69,"./transpose":70}],57:[function(t,e,n){e.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=e[9],h=e[10],p=e[11],d=e[12],m=e[13],v=e[14],g=e[15],b=n*s-r*a,y=n*u-i*a,x=n*c-o*a,w=r*u-i*s,_=r*c-o*s,M=i*c-o*u,A=f*m-l*d,E=f*v-h*d,k=f*g-p*d,S=l*v-h*m,T=l*g-p*m,R=h*g-p*v,C=b*R-y*T+x*S+w*k-_*E+M*A;if(!C)return null;return t[0]=(s*R-u*T+c*S)*(C=1/C),t[1]=(i*T-r*R-o*S)*C,t[2]=(m*M-v*_+g*w)*C,t[3]=(h*_-l*M-p*w)*C,t[4]=(u*k-a*R-c*E)*C,t[5]=(n*R-i*k+o*E)*C,t[6]=(v*x-d*M-g*y)*C,t[7]=(f*M-h*x+p*y)*C,t[8]=(a*T-s*k+c*A)*C,t[9]=(r*k-n*T-o*A)*C,t[10]=(d*_-m*x+g*b)*C,t[11]=(l*x-f*_-p*b)*C,t[12]=(s*E-a*S-u*A)*C,t[13]=(n*S-r*E+i*A)*C,t[14]=(m*y-d*w-v*b)*C,t[15]=(f*w-l*y+h*b)*C,t}},{}],58:[function(t,e,n){var r=t("./identity");e.exports=function(t,e,n,i){var o,a,s,u,c,f,l,h,p,d,m=e[0],v=e[1],g=e[2],b=i[0],y=i[1],x=i[2],w=n[0],_=n[1],M=n[2];if(Math.abs(m-w)<1e-6&&Math.abs(v-_)<1e-6&&Math.abs(g-M)<1e-6)return r(t);l=m-w,h=v-_,p=g-M,d=1/Math.sqrt(l*l+h*h+p*p),o=y*(p*=d)-x*(h*=d),a=x*(l*=d)-b*p,s=b*h-y*l,(d=Math.sqrt(o*o+a*a+s*s))?(o*=d=1/d,a*=d,s*=d):(o=0,a=0,s=0);u=h*s-p*a,c=p*o-l*s,f=l*a-h*o,(d=Math.sqrt(u*u+c*c+f*f))?(u*=d=1/d,c*=d,f*=d):(u=0,c=0,f=0);return t[0]=o,t[1]=u,t[2]=l,t[3]=0,t[4]=a,t[5]=c,t[6]=h,t[7]=0,t[8]=s,t[9]=f,t[10]=p,t[11]=0,t[12]=-(o*m+a*v+s*g),t[13]=-(u*m+c*v+f*g),t[14]=-(l*m+h*v+p*g),t[15]=1,t}},{"./identity":55}],59:[function(t,e,n){e.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],h=e[9],p=e[10],d=e[11],m=e[12],v=e[13],g=e[14],b=e[15],y=n[0],x=n[1],w=n[2],_=n[3];return t[0]=y*r+x*s+w*l+_*m,t[1]=y*i+x*u+w*h+_*v,t[2]=y*o+x*c+w*p+_*g,t[3]=y*a+x*f+w*d+_*b,t[4]=(y=n[4])*r+(x=n[5])*s+(w=n[6])*l+(_=n[7])*m,t[5]=y*i+x*u+w*h+_*v,t[6]=y*o+x*c+w*p+_*g,t[7]=y*a+x*f+w*d+_*b,t[8]=(y=n[8])*r+(x=n[9])*s+(w=n[10])*l+(_=n[11])*m,t[9]=y*i+x*u+w*h+_*v,t[10]=y*o+x*c+w*p+_*g,t[11]=y*a+x*f+w*d+_*b,t[12]=(y=n[12])*r+(x=n[13])*s+(w=n[14])*l+(_=n[15])*m,t[13]=y*i+x*u+w*h+_*v,t[14]=y*o+x*c+w*p+_*g,t[15]=y*a+x*f+w*d+_*b,t}},{}],60:[function(t,e,n){e.exports=function(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t}},{}],61:[function(t,e,n){e.exports=function(t,e,n,r,i){var o=1/Math.tan(e/2),a=1/(r-i);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t}},{}],62:[function(t,e,n){e.exports=function(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(i-o)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}},{}],63:[function(t,e,n){e.exports=function(t,e,n,r){var i,o,a,s,u,c,f,l,h,p,d,m,v,g,b,y,x,w,_,M,A,E,k,S,T=r[0],R=r[1],C=r[2],O=Math.sqrt(T*T+R*R+C*C);if(Math.abs(O)<1e-6)return null;T*=O=1/O,R*=O,C*=O,i=Math.sin(n),o=Math.cos(n),u=e[1],c=e[2],f=e[3],h=e[5],p=e[6],d=e[7],v=e[9],g=e[10],b=e[11],_=T*R*(a=1-o)-C*i,M=R*R*a+o,A=C*R*a+T*i,E=T*C*a+R*i,k=R*C*a-T*i,S=C*C*a+o,t[0]=(s=e[0])*(y=T*T*a+o)+(l=e[4])*(x=R*T*a+C*i)+(m=e[8])*(w=C*T*a-R*i),t[1]=u*y+h*x+v*w,t[2]=c*y+p*x+g*w,t[3]=f*y+d*x+b*w,t[4]=s*_+l*M+m*A,t[5]=u*_+h*M+v*A,t[6]=c*_+p*M+g*A,t[7]=f*_+d*M+b*A,t[8]=s*E+l*k+m*S,t[9]=u*E+h*k+v*S,t[10]=c*E+p*k+g*S,t[11]=f*E+d*k+b*S,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t}},{}],64:[function(t,e,n){e.exports=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],f=e[9],l=e[10],h=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[4]=o*i+c*r,t[5]=a*i+f*r,t[6]=s*i+l*r,t[7]=u*i+h*r,t[8]=c*i-o*r,t[9]=f*i-a*r,t[10]=l*i-s*r,t[11]=h*i-u*r,t}},{}],65:[function(t,e,n){e.exports=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[8],f=e[9],l=e[10],h=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=o*i-c*r,t[1]=a*i-f*r,t[2]=s*i-l*r,t[3]=u*i-h*r,t[8]=o*r+c*i,t[9]=a*r+f*i,t[10]=s*r+l*i,t[11]=u*r+h*i,t}},{}],66:[function(t,e,n){e.exports=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],f=e[5],l=e[6],h=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=o*i+c*r,t[1]=a*i+f*r,t[2]=s*i+l*r,t[3]=u*i+h*r,t[4]=c*i-o*r,t[5]=f*i-a*r,t[6]=l*i-s*r,t[7]=h*i-u*r,t}},{}],67:[function(t,e,n){e.exports=function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},{}],68:[function(t,e,n){e.exports=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}},{}],69:[function(t,e,n){e.exports=function(t,e,n){var r,i,o,a,s,u,c,f,l,h,p,d,m=n[0],v=n[1],g=n[2];e===t?(t[12]=e[0]*m+e[4]*v+e[8]*g+e[12],t[13]=e[1]*m+e[5]*v+e[9]*g+e[13],t[14]=e[2]*m+e[6]*v+e[10]*g+e[14],t[15]=e[3]*m+e[7]*v+e[11]*g+e[15]):(i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],h=e[9],p=e[10],d=e[11],t[0]=r=e[0],t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=f,t[8]=l,t[9]=h,t[10]=p,t[11]=d,t[12]=r*m+s*v+l*g+e[12],t[13]=i*m+u*v+h*g+e[13],t[14]=o*m+c*v+p*g+e[14],t[15]=a*m+f*v+d*g+e[15]);return t}},{}],70:[function(t,e,n){e.exports=function(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}},{}],71:[function(t,e,n){!function(t,r){if("object"==typeof n&&"object"==typeof e)e.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var i=r();for(var o in i)("object"==typeof n?n:t)[o]=i[o]}}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=10)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setMatrixArrayType=function(t){e.ARRAY_TYPE=t},e.toRadian=function(t){return t*i},e.equals=function(t,e){return Math.abs(t-e)<=r*Math.max(1,Math.abs(t),Math.abs(e))};var r=e.EPSILON=1e-6;e.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,e.RANDOM=Math.random;var i=Math.PI/180},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=i,e.clone=function(t){var e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.fromValues=function(t,e,n,i){var o=new r.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=i,o},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.set=function(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},e.subtract=o,e.multiply=a,e.divide=s,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},e.distance=u,e.squaredDistance=c,e.length=f,e.squaredLength=l,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},e.normalize=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a),t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},e.lerp=function(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t},e.random=function(t,e){var n,i,o,a,s,u;e=e||1;do{s=(n=2*r.RANDOM()-1)*n+(i=2*r.RANDOM()-1)*i}while(s>=1);do{u=(o=2*r.RANDOM()-1)*o+(a=2*r.RANDOM()-1)*a}while(u>=1);var c=Math.sqrt((1-s)/u);return t[0]=e*n,t[1]=e*i,t[2]=e*o*c,t[3]=e*a*c,t},e.transformMat4=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t},e.transformQuat=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],c=n[3],f=c*r+s*o-u*i,l=c*i+u*r-a*o,h=c*o+a*i-s*r,p=-a*r-s*i-u*o;return t[0]=f*c+p*-a+l*-u-h*-s,t[1]=l*c+p*-s+h*-a-f*-u,t[2]=h*c+p*-u+f*-s-l*-a,t[3]=e[3],t},e.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){var n=t[0],i=t[1],o=t[2],a=t[3],s=e[0],u=e[1],c=e[2],f=e[3];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-u)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(a-f)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));function i(){var t=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function o(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function a(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function s(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function u(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+r*r+i*i+o*o)}function c(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o}function f(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.sqrt(e*e+n*n+r*r+i*i)}function l(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}e.sub=o,e.mul=a,e.div=s,e.dist=u,e.sqrDist=c,e.len=f,e.sqrLen=l,e.forEach=function(){var t=i();return function(e,n,r,i,o,a){var s,u=void 0;for(n||(n=4),r||(r=0),s=i?Math.min(i*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],o(t,t,a),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=i,e.clone=function(t){var e=new r.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.length=o,e.fromValues=a,e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},e.subtract=s,e.multiply=u,e.divide=c,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},e.distance=f,e.squaredDistance=l,e.squaredLength=h,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},e.normalize=p,e.dot=d,e.cross=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t},e.lerp=function(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t},e.hermite=function(t,e,n,r,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,c=a*(o-1),f=a*(3-2*o);return t[0]=e[0]*s+n[0]*u+r[0]*c+i[0]*f,t[1]=e[1]*s+n[1]*u+r[1]*c+i[1]*f,t[2]=e[2]*s+n[2]*u+r[2]*c+i[2]*f,t},e.bezier=function(t,e,n,r,i,o){var a=1-o,s=a*a,u=o*o,c=s*a,f=3*o*s,l=3*u*a,h=u*o;return t[0]=e[0]*c+n[0]*f+r[0]*l+i[0]*h,t[1]=e[1]*c+n[1]*f+r[1]*l+i[1]*h,t[2]=e[2]*c+n[2]*f+r[2]*l+i[2]*h,t},e.random=function(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI,i=2*r.RANDOM()-1,o=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=i*e,t},e.transformMat4=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/(a=a||1),t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t},e.transformMat3=function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t},e.transformQuat=function(t,e,n){var r=n[0],i=n[1],o=n[2],a=e[0],s=e[1],u=e[2],c=i*u-o*s,f=o*a-r*u,l=r*s-i*a,h=i*l-o*f,p=o*c-r*l,d=r*f-i*c,m=2*n[3];return f*=m,l*=m,p*=2,d*=2,t[0]=a+(c*=m)+(h*=2),t[1]=s+f+p,t[2]=u+l+d,t},e.rotateX=function(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.rotateY=function(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.rotateZ=function(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.angle=function(t,e){var n=a(t[0],t[1],t[2]),r=a(e[0],e[1],e[2]);p(n,n),p(r,r);var i=d(n,r);return i>1?0:i<-1?Math.PI:Math.acos(i)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},e.equals=function(t,e){var n=t[0],i=t[1],o=t[2],a=e[0],s=e[1],u=e[2];return Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-s)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-u)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));function i(){var t=new r.ARRAY_TYPE(3);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function o(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function a(t,e,n){var i=new r.ARRAY_TYPE(3);return i[0]=t,i[1]=e,i[2]=n,i}function s(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function u(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function c(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function f(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}function l(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function h(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function p(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function d(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}e.sub=s,e.mul=u,e.div=c,e.dist=f,e.sqrDist=l,e.len=o,e.sqrLen=h,e.forEach=function(){var t=i();return function(e,n,r,i,o,a){var s,u=void 0;for(n||(n=3),r||(r=0),s=i?Math.min(i*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],o(t,t,a),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2];return e}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setAxes=e.sqlerp=e.rotationTo=e.equals=e.exactEquals=e.normalize=e.sqrLen=e.squaredLength=e.len=e.length=e.lerp=e.dot=e.scale=e.mul=e.add=e.set=e.copy=e.fromValues=e.clone=void 0,e.create=u,e.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},e.setAxisAngle=c,e.getAxisAngle=function(t,e){var n=2*Math.acos(e[3]),i=Math.sin(n/2);return i>r.EPSILON?(t[0]=e[0]/i,t[1]=e[1]/i,t[2]=e[2]/i):(t[0]=1,t[1]=0,t[2]=0),n},e.multiply=f,e.rotateX=function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*s,t[1]=i*u+o*s,t[2]=o*u-i*s,t[3]=a*u-r*s,t},e.rotateY=function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-o*s,t[1]=i*u+a*s,t[2]=o*u+r*s,t[3]=a*u-i*s,t},e.rotateZ=function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*s,t[1]=i*u-r*s,t[2]=o*u+a*s,t[3]=a*u-o*s,t},e.calculateW=function(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t},e.slerp=l,e.random=function(t){var e=r.RANDOM(),n=r.RANDOM(),i=r.RANDOM(),o=Math.sqrt(1-e),a=Math.sqrt(e);return t[0]=o*Math.sin(2*Math.PI*n),t[1]=o*Math.cos(2*Math.PI*n),t[2]=a*Math.sin(2*Math.PI*i),t[3]=a*Math.cos(2*Math.PI*i),t},e.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=o*s,t},e.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},e.fromMat3=h,e.fromEuler=function(t,e,n,r){var i=.5*Math.PI/180;e*=i,n*=i,r*=i;var o=Math.sin(e),a=Math.cos(e),s=Math.sin(n),u=Math.cos(n),c=Math.sin(r),f=Math.cos(r);return t[0]=o*u*f-a*s*c,t[1]=a*s*f+o*u*c,t[2]=a*u*c-o*s*f,t[3]=a*u*f+o*s*c,t},e.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};var r=s(n(0)),i=s(n(5)),o=s(n(2)),a=s(n(1));function s(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function u(){var t=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function c(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function f(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],f=n[3];return t[0]=r*f+a*s+i*c-o*u,t[1]=i*f+a*u+o*s-r*c,t[2]=o*f+a*c+r*u-i*s,t[3]=a*f-r*s-i*u-o*c,t}function l(t,e,n,i){var o=e[0],a=e[1],s=e[2],u=e[3],c=n[0],f=n[1],l=n[2],h=n[3],p=void 0,d=void 0,m=void 0,v=void 0,g=void 0;return(d=o*c+a*f+s*l+u*h)<0&&(d=-d,c=-c,f=-f,l=-l,h=-h),1-d>r.EPSILON?(p=Math.acos(d),m=Math.sin(p),v=Math.sin((1-i)*p)/m,g=Math.sin(i*p)/m):(v=1-i,g=i),t[0]=v*o+g*c,t[1]=v*a+g*f,t[2]=v*s+g*l,t[3]=v*u+g*h,t}function h(t,e){var n=e[0]+e[4]+e[8],r=void 0;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,t[0]=(e[5]-e[7])*(r=.5/r),t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;r=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*a+a]+1),t[i]=.5*r,t[3]=(e[3*o+a]-e[3*a+o])*(r=.5/r),t[o]=(e[3*o+i]+e[3*i+o])*r,t[a]=(e[3*a+i]+e[3*i+a])*r}return t}e.clone=a.clone,e.fromValues=a.fromValues,e.copy=a.copy,e.set=a.set,e.add=a.add,e.mul=f,e.scale=a.scale,e.dot=a.dot,e.lerp=a.lerp;var p=e.length=a.length,d=(e.len=p,e.squaredLength=a.squaredLength),m=(e.sqrLen=d,e.normalize=a.normalize);e.exactEquals=a.exactEquals,e.equals=a.equals,e.rotationTo=function(){var t=o.create(),e=o.fromValues(1,0,0),n=o.fromValues(0,1,0);return function(r,i,a){var s=o.dot(i,a);return s<-.999999?(o.cross(t,e,i),o.len(t)<1e-6&&o.cross(t,n,i),o.normalize(t,t),c(r,t,Math.PI),r):s>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(o.cross(t,i,a),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+s,m(r,r))}}(),e.sqlerp=function(){var t=u(),e=u();return function(n,r,i,o,a,s){return l(t,r,a,s),l(e,i,o,s),l(n,t,e,2*s*(1-s)),n}}(),e.setAxes=function(){var t=i.create();return function(e,n,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],m(e,h(e,t))}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=function(){var t=new r.ARRAY_TYPE(16);return r.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},e.clone=function(t){var e=new r.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.fromValues=function(t,e,n,i,o,a,s,u,c,f,l,h,p,d,m,v){var g=new r.ARRAY_TYPE(16);return g[0]=t,g[1]=e,g[2]=n,g[3]=i,g[4]=o,g[5]=a,g[6]=s,g[7]=u,g[8]=c,g[9]=f,g[10]=l,g[11]=h,g[12]=p,g[13]=d,g[14]=m,g[15]=v,g},e.set=function(t,e,n,r,i,o,a,s,u,c,f,l,h,p,d,m,v){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t[9]=f,t[10]=l,t[11]=h,t[12]=p,t[13]=d,t[14]=m,t[15]=v,t},e.identity=i,e.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},e.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=e[9],h=e[10],p=e[11],d=e[12],m=e[13],v=e[14],g=e[15],b=n*s-r*a,y=n*u-i*a,x=n*c-o*a,w=r*u-i*s,_=r*c-o*s,M=i*c-o*u,A=f*m-l*d,E=f*v-h*d,k=f*g-p*d,S=l*v-h*m,T=l*g-p*m,R=h*g-p*v,C=b*R-y*T+x*S+w*k-_*E+M*A;return C?(t[0]=(s*R-u*T+c*S)*(C=1/C),t[1]=(i*T-r*R-o*S)*C,t[2]=(m*M-v*_+g*w)*C,t[3]=(h*_-l*M-p*w)*C,t[4]=(u*k-a*R-c*E)*C,t[5]=(n*R-i*k+o*E)*C,t[6]=(v*x-d*M-g*y)*C,t[7]=(f*M-h*x+p*y)*C,t[8]=(a*T-s*k+c*A)*C,t[9]=(r*k-n*T-o*A)*C,t[10]=(d*_-m*x+g*b)*C,t[11]=(l*x-f*_-p*b)*C,t[12]=(s*E-a*S-u*A)*C,t[13]=(n*S-r*E+i*A)*C,t[14]=(m*y-d*w-v*b)*C,t[15]=(f*w-l*y+h*b)*C,t):null},e.adjoint=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=e[9],h=e[10],p=e[11],d=e[12],m=e[13],v=e[14],g=e[15];return t[0]=s*(h*g-p*v)-l*(u*g-c*v)+m*(u*p-c*h),t[1]=-(r*(h*g-p*v)-l*(i*g-o*v)+m*(i*p-o*h)),t[2]=r*(u*g-c*v)-s*(i*g-o*v)+m*(i*c-o*u),t[3]=-(r*(u*p-c*h)-s*(i*p-o*h)+l*(i*c-o*u)),t[4]=-(a*(h*g-p*v)-f*(u*g-c*v)+d*(u*p-c*h)),t[5]=n*(h*g-p*v)-f*(i*g-o*v)+d*(i*p-o*h),t[6]=-(n*(u*g-c*v)-a*(i*g-o*v)+d*(i*c-o*u)),t[7]=n*(u*p-c*h)-a*(i*p-o*h)+f*(i*c-o*u),t[8]=a*(l*g-p*m)-f*(s*g-c*m)+d*(s*p-c*l),t[9]=-(n*(l*g-p*m)-f*(r*g-o*m)+d*(r*p-o*l)),t[10]=n*(s*g-c*m)-a*(r*g-o*m)+d*(r*c-o*s),t[11]=-(n*(s*p-c*l)-a*(r*p-o*l)+f*(r*c-o*s)),t[12]=-(a*(l*v-h*m)-f*(s*v-u*m)+d*(s*h-u*l)),t[13]=n*(l*v-h*m)-f*(r*v-i*m)+d*(r*h-i*l),t[14]=-(n*(s*v-u*m)-a*(r*v-i*m)+d*(r*u-i*s)),t[15]=n*(s*h-u*l)-a*(r*h-i*l)+f*(r*u-i*s),t},e.determinant=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],f=t[9],l=t[10],h=t[11],p=t[12],d=t[13],m=t[14],v=t[15];return(e*a-n*o)*(l*v-h*m)-(e*s-r*o)*(f*v-h*d)+(e*u-i*o)*(f*m-l*d)+(n*s-r*a)*(c*v-h*p)-(n*u-i*a)*(c*m-l*p)+(r*u-i*s)*(c*d-f*p)},e.multiply=o,e.translate=function(t,e,n){var r=n[0],i=n[1],o=n[2],a=void 0,s=void 0,u=void 0,c=void 0,f=void 0,l=void 0,h=void 0,p=void 0,d=void 0,m=void 0,v=void 0,g=void 0;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*o+e[12],t[13]=e[1]*r+e[5]*i+e[9]*o+e[13],t[14]=e[2]*r+e[6]*i+e[10]*o+e[14],t[15]=e[3]*r+e[7]*i+e[11]*o+e[15]):(s=e[1],u=e[2],c=e[3],f=e[4],l=e[5],h=e[6],p=e[7],d=e[8],m=e[9],v=e[10],g=e[11],t[0]=a=e[0],t[1]=s,t[2]=u,t[3]=c,t[4]=f,t[5]=l,t[6]=h,t[7]=p,t[8]=d,t[9]=m,t[10]=v,t[11]=g,t[12]=a*r+f*i+d*o+e[12],t[13]=s*r+l*i+m*o+e[13],t[14]=u*r+h*i+v*o+e[14],t[15]=c*r+p*i+g*o+e[15]),t},e.scale=function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.rotate=function(t,e,n,i){var o,a,s,u,c,f,l,h,p,d,m,v,g,b,y,x,w,_,M,A,E,k,S,T,R=i[0],C=i[1],O=i[2],j=Math.sqrt(R*R+C*C+O*O);return j<r.EPSILON?null:(R*=j=1/j,C*=j,O*=j,o=Math.sin(n),a=Math.cos(n),c=e[1],f=e[2],l=e[3],p=e[5],d=e[6],m=e[7],g=e[9],b=e[10],y=e[11],M=R*C*(s=1-a)-O*o,A=C*C*s+a,E=O*C*s+R*o,k=R*O*s+C*o,S=C*O*s-R*o,T=O*O*s+a,t[0]=(u=e[0])*(x=R*R*s+a)+(h=e[4])*(w=C*R*s+O*o)+(v=e[8])*(_=O*R*s-C*o),t[1]=c*x+p*w+g*_,t[2]=f*x+d*w+b*_,t[3]=l*x+m*w+y*_,t[4]=u*M+h*A+v*E,t[5]=c*M+p*A+g*E,t[6]=f*M+d*A+b*E,t[7]=l*M+m*A+y*E,t[8]=u*k+h*S+v*T,t[9]=c*k+p*S+g*T,t[10]=f*k+d*S+b*T,t[11]=l*k+m*S+y*T,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},e.rotateX=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=a*i+f*r,t[6]=s*i+l*r,t[7]=u*i+h*r,t[8]=c*i-o*r,t[9]=f*i-a*r,t[10]=l*i-s*r,t[11]=h*i-u*r,t},e.rotateY=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*r,t[1]=a*i-f*r,t[2]=s*i-l*r,t[3]=u*i-h*r,t[8]=o*r+c*i,t[9]=a*r+f*i,t[10]=s*r+l*i,t[11]=u*r+h*i,t},e.rotateZ=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],f=e[5],l=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=a*i+f*r,t[2]=s*i+l*r,t[3]=u*i+h*r,t[4]=c*i-o*r,t[5]=f*i-a*r,t[6]=l*i-s*r,t[7]=h*i-u*r,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotation=function(t,e,n){var i,o,a,s=n[0],u=n[1],c=n[2],f=Math.sqrt(s*s+u*u+c*c);return f<r.EPSILON?null:(s*=f=1/f,u*=f,c*=f,i=Math.sin(e),o=Math.cos(e),t[0]=s*s*(a=1-o)+o,t[1]=u*s*a+c*i,t[2]=c*s*a-u*i,t[3]=0,t[4]=s*u*a-c*i,t[5]=u*u*a+o,t[6]=c*u*a+s*i,t[7]=0,t[8]=s*c*a+u*i,t[9]=u*c*a-s*i,t[10]=c*c*a+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},e.fromXRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromYRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromZRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotationTranslation=a,e.fromQuat2=function(t,e){var n=new r.ARRAY_TYPE(3),i=-e[0],o=-e[1],s=-e[2],u=e[3],c=e[4],f=e[5],l=e[6],h=e[7],p=i*i+o*o+s*s+u*u;return p>0?(n[0]=2*(c*u+h*i+f*s-l*o)/p,n[1]=2*(f*u+h*o+l*i-c*s)/p,n[2]=2*(l*u+h*s+c*o-f*i)/p):(n[0]=2*(c*u+h*i+f*s-l*o),n[1]=2*(f*u+h*o+l*i-c*s),n[2]=2*(l*u+h*s+c*o-f*i)),a(t,e,n),t},e.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},e.getScaling=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],s=e[6],u=e[8],c=e[9],f=e[10];return t[0]=Math.sqrt(n*n+r*r+i*i),t[1]=Math.sqrt(o*o+a*a+s*s),t[2]=Math.sqrt(u*u+c*c+f*f),t},e.getRotation=function(t,e){var n=e[0]+e[5]+e[10],r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t},e.fromRotationTranslationScale=function(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3],u=i+i,c=o+o,f=a+a,l=i*u,h=i*c,p=i*f,d=o*c,m=o*f,v=a*f,g=s*u,b=s*c,y=s*f,x=r[0],w=r[1],_=r[2];return t[0]=(1-(d+v))*x,t[1]=(h+y)*x,t[2]=(p-b)*x,t[3]=0,t[4]=(h-y)*w,t[5]=(1-(l+v))*w,t[6]=(m+g)*w,t[7]=0,t[8]=(p+b)*_,t[9]=(m-g)*_,t[10]=(1-(l+d))*_,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},e.fromRotationTranslationScaleOrigin=function(t,e,n,r,i){var o=e[0],a=e[1],s=e[2],u=e[3],c=o+o,f=a+a,l=s+s,h=o*c,p=o*f,d=o*l,m=a*f,v=a*l,g=s*l,b=u*c,y=u*f,x=u*l,w=r[0],_=r[1],M=r[2],A=i[0],E=i[1],k=i[2],S=(1-(m+g))*w,T=(p+x)*w,R=(d-y)*w,C=(p-x)*_,O=(1-(h+g))*_,j=(v+b)*_,P=(d+y)*M,L=(v-b)*M,D=(1-(h+m))*M;return t[0]=S,t[1]=T,t[2]=R,t[3]=0,t[4]=C,t[5]=O,t[6]=j,t[7]=0,t[8]=P,t[9]=L,t[10]=D,t[11]=0,t[12]=n[0]+A-(S*A+C*E+P*k),t[13]=n[1]+E-(T*A+O*E+L*k),t[14]=n[2]+k-(R*A+j*E+D*k),t[15]=1,t},e.fromQuat=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,f=r*a,l=r*s,h=i*a,p=i*s,d=i*u,m=o*a,v=o*s,g=o*u;return t[0]=1-l-d,t[1]=f+g,t[2]=h-v,t[3]=0,t[4]=f-g,t[5]=1-c-d,t[6]=p+m,t[7]=0,t[8]=h+v,t[9]=p-m,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.frustum=function(t,e,n,r,i,o,a){var s=1/(n-e),u=1/(i-r),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t},e.perspective=function(t,e,n,r,i){var o=1/Math.tan(e/2),a=void 0;return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=(i+r)*(a=1/(r-i)),t[14]=2*i*r*a):(t[10]=-1,t[14]=-2*r),t},e.perspectiveFromFieldOfView=function(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(i-o)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},e.ortho=function(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t},e.lookAt=function(t,e,n,o){var a=void 0,s=void 0,u=void 0,c=void 0,f=void 0,l=void 0,h=void 0,p=void 0,d=void 0,m=void 0,v=e[0],g=e[1],b=e[2],y=o[0],x=o[1],w=o[2],_=n[0],M=n[1],A=n[2];return Math.abs(v-_)<r.EPSILON&&Math.abs(g-M)<r.EPSILON&&Math.abs(b-A)<r.EPSILON?i(t):(h=v-_,p=g-M,d=b-A,a=x*(d*=m=1/Math.sqrt(h*h+p*p+d*d))-w*(p*=m),s=w*(h*=m)-y*d,u=y*p-x*h,(m=Math.sqrt(a*a+s*s+u*u))?(a*=m=1/m,s*=m,u*=m):(a=0,s=0,u=0),c=p*u-d*s,f=d*a-h*u,l=h*s-p*a,(m=Math.sqrt(c*c+f*f+l*l))?(c*=m=1/m,f*=m,l*=m):(c=0,f=0,l=0),t[0]=a,t[1]=c,t[2]=h,t[3]=0,t[4]=s,t[5]=f,t[6]=p,t[7]=0,t[8]=u,t[9]=l,t[10]=d,t[11]=0,t[12]=-(a*v+s*g+u*b),t[13]=-(c*v+f*g+l*b),t[14]=-(h*v+p*g+d*b),t[15]=1,t)},e.targetTo=function(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=r[0],u=r[1],c=r[2],f=i-n[0],l=o-n[1],h=a-n[2],p=f*f+l*l+h*h;p>0&&(f*=p=1/Math.sqrt(p),l*=p,h*=p);var d=u*h-c*l,m=c*f-s*h,v=s*l-u*f;return(p=d*d+m*m+v*v)>0&&(d*=p=1/Math.sqrt(p),m*=p,v*=p),t[0]=d,t[1]=m,t[2]=v,t[3]=0,t[4]=l*v-h*m,t[5]=h*d-f*v,t[6]=f*m-l*d,t[7]=0,t[8]=f,t[9]=l,t[10]=h,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t},e.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},e.subtract=s,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},e.equals=function(t,e){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],f=t[7],l=t[8],h=t[9],p=t[10],d=t[11],m=t[12],v=t[13],g=t[14],b=t[15],y=e[0],x=e[1],w=e[2],_=e[3],M=e[4],A=e[5],E=e[6],k=e[7],S=e[8],T=e[9],R=e[10],C=e[11],O=e[12],j=e[13],P=e[14],L=e[15];return Math.abs(n-y)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(i-x)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(o-w)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-_)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(s-M)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(u-A)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(c-E)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(f-k)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(l-S)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(h-T)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(p-R)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(d-C)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(m-O)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(O))&&Math.abs(v-j)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(j))&&Math.abs(g-P)<=r.EPSILON*Math.max(1,Math.abs(g),Math.abs(P))&&Math.abs(b-L)<=r.EPSILON*Math.max(1,Math.abs(b),Math.abs(L))};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));function i(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function o(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],h=e[9],p=e[10],d=e[11],m=e[12],v=e[13],g=e[14],b=e[15],y=n[0],x=n[1],w=n[2],_=n[3];return t[0]=y*r+x*s+w*l+_*m,t[1]=y*i+x*u+w*h+_*v,t[2]=y*o+x*c+w*p+_*g,t[3]=y*a+x*f+w*d+_*b,t[4]=(y=n[4])*r+(x=n[5])*s+(w=n[6])*l+(_=n[7])*m,t[5]=y*i+x*u+w*h+_*v,t[6]=y*o+x*c+w*p+_*g,t[7]=y*a+x*f+w*d+_*b,t[8]=(y=n[8])*r+(x=n[9])*s+(w=n[10])*l+(_=n[11])*m,t[9]=y*i+x*u+w*h+_*v,t[10]=y*o+x*c+w*p+_*g,t[11]=y*a+x*f+w*d+_*b,t[12]=(y=n[12])*r+(x=n[13])*s+(w=n[14])*l+(_=n[15])*m,t[13]=y*i+x*u+w*h+_*v,t[14]=y*o+x*c+w*p+_*g,t[15]=y*a+x*f+w*d+_*b,t}function a(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=r+r,u=i+i,c=o+o,f=r*s,l=r*u,h=r*c,p=i*u,d=i*c,m=o*c,v=a*s,g=a*u,b=a*c;return t[0]=1-(p+m),t[1]=l+b,t[2]=h-g,t[3]=0,t[4]=l-b,t[5]=1-(f+m),t[6]=d+v,t[7]=0,t[8]=h+g,t[9]=d-v,t[10]=1-(f+p),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function s(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}e.mul=o,e.sub=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=function(){var t=new r.ARRAY_TYPE(9);return r.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},e.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},e.clone=function(t){var e=new r.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromValues=function(t,e,n,i,o,a,s,u,c){var f=new r.ARRAY_TYPE(9);return f[0]=t,f[1]=e,f[2]=n,f[3]=i,f[4]=o,f[5]=a,f[6]=s,f[7]=u,f[8]=c,f},e.set=function(t,e,n,r,i,o,a,s,u,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},e.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=f*a-s*c,h=-f*o+s*u,p=c*o-a*u,d=n*l+r*h+i*p;return d?(t[0]=l*(d=1/d),t[1]=(-f*r+i*c)*d,t[2]=(s*r-i*a)*d,t[3]=h*d,t[4]=(f*n-i*u)*d,t[5]=(-s*n+i*o)*d,t[6]=p*d,t[7]=(-c*n+r*u)*d,t[8]=(a*n-r*o)*d,t):null},e.adjoint=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8];return t[0]=a*f-s*c,t[1]=i*c-r*f,t[2]=r*s-i*a,t[3]=s*u-o*f,t[4]=n*f-i*u,t[5]=i*o-n*s,t[6]=o*c-a*u,t[7]=r*u-n*c,t[8]=n*a-r*o,t},e.determinant=function(t){var e=t[3],n=t[4],r=t[5],i=t[6],o=t[7],a=t[8];return t[0]*(a*n-r*o)+t[1]*(-a*e+r*i)+t[2]*(o*e-n*i)},e.multiply=i,e.translate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],h=n[0],p=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=h*r+p*a+c,t[7]=h*i+p*s+f,t[8]=h*o+p*u+l,t},e.rotate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],h=Math.sin(n),p=Math.cos(n);return t[0]=p*r+h*a,t[1]=p*i+h*s,t[2]=p*o+h*u,t[3]=p*a-h*r,t[4]=p*s-h*i,t[5]=p*u-h*o,t[6]=c,t[7]=f,t[8]=l,t},e.scale=function(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},e.fromQuat=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,f=r*a,l=r*s,h=i*a,p=i*s,d=i*u,m=o*a,v=o*s,g=o*u;return t[0]=1-l-d,t[3]=f-g,t[6]=h+v,t[1]=f+g,t[4]=1-c-d,t[7]=p-m,t[2]=h-v,t[5]=p+m,t[8]=1-c-l,t},e.normalFromMat4=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=e[9],h=e[10],p=e[11],d=e[12],m=e[13],v=e[14],g=e[15],b=n*s-r*a,y=n*u-i*a,x=n*c-o*a,w=r*u-i*s,_=r*c-o*s,M=i*c-o*u,A=f*m-l*d,E=f*v-h*d,k=f*g-p*d,S=l*v-h*m,T=l*g-p*m,R=h*g-p*v,C=b*R-y*T+x*S+w*k-_*E+M*A;return C?(t[0]=(s*R-u*T+c*S)*(C=1/C),t[1]=(u*k-a*R-c*E)*C,t[2]=(a*T-s*k+c*A)*C,t[3]=(i*T-r*R-o*S)*C,t[4]=(n*R-i*k+o*E)*C,t[5]=(r*k-n*T-o*A)*C,t[6]=(m*M-v*_+g*w)*C,t[7]=(v*x-d*M-g*y)*C,t[8]=(d*_-m*x+g*b)*C,t):null},e.projection=function(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},e.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},e.subtract=o,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},e.equals=function(t,e){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],f=t[7],l=t[8],h=e[0],p=e[1],d=e[2],m=e[3],v=e[4],g=e[5],b=e[6],y=e[7],x=e[8];return Math.abs(n-h)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(i-p)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(o-d)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-m)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(s-v)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-g)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(c-b)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(f-y)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(y))&&Math.abs(l-x)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(x))};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));function i(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],h=n[0],p=n[1],d=n[2],m=n[3],v=n[4],g=n[5],b=n[6],y=n[7],x=n[8];return t[0]=h*r+p*a+d*c,t[1]=h*i+p*s+d*f,t[2]=h*o+p*u+d*l,t[3]=m*r+v*a+g*c,t[4]=m*i+v*s+g*f,t[5]=m*o+v*u+g*l,t[6]=b*r+y*a+x*c,t[7]=b*i+y*s+x*f,t[8]=b*o+y*u+x*l,t}function o(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}e.mul=i,e.sub=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.sqrDist=e.dist=e.div=e.mul=e.sub=e.len=void 0,e.create=i,e.clone=function(t){var e=new r.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},e.fromValues=function(t,e){var n=new r.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.set=function(t,e,n){return t[0]=e,t[1]=n,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},e.subtract=o,e.multiply=a,e.divide=s,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},e.distance=u,e.squaredDistance=c,e.length=f,e.squaredLength=l,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},e.normalize=function(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.cross=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},e.lerp=function(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t},e.random=function(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},e.transformMat2=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t},e.transformMat2d=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t},e.transformMat3=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t},e.transformMat4=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t},e.rotate=function(t,e,n,r){var i=e[0]-n[0],o=e[1]-n[1],a=Math.sin(r),s=Math.cos(r);return t[0]=i*s-o*a+n[0],t[1]=i*a+o*s+n[1],t},e.angle=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=n*n+r*r;a>0&&(a=1/Math.sqrt(a));var s=i*i+o*o;s>0&&(s=1/Math.sqrt(s));var u=(n*i+r*o)*a*s;return u>1?0:u<-1?Math.PI:Math.acos(u)},e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},e.equals=function(t,e){var n=t[0],i=t[1],o=e[0],a=e[1];return Math.abs(n-o)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-a)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(a))};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));function i(){var t=new r.ARRAY_TYPE(2);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function o(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function a(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function s(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function u(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function c(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function f(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function l(t){var e=t[0],n=t[1];return e*e+n*n}e.len=f,e.sub=o,e.mul=a,e.div=s,e.dist=u,e.sqrDist=c,e.sqrLen=l,e.forEach=function(){var t=i();return function(e,n,r,i,o,a){var s,u=void 0;for(n||(n=2),r||(r=0),s=i?Math.min(i*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],o(t,t,a),e[u]=t[0],e[u+1]=t[1];return e}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sqrLen=e.squaredLength=e.len=e.length=e.dot=e.mul=e.setReal=e.getReal=void 0,e.create=function(){var t=new r.ARRAY_TYPE(8);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},e.clone=function(t){var e=new r.ARRAY_TYPE(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e},e.fromValues=function(t,e,n,i,o,a,s,u){var c=new r.ARRAY_TYPE(8);return c[0]=t,c[1]=e,c[2]=n,c[3]=i,c[4]=o,c[5]=a,c[6]=s,c[7]=u,c},e.fromRotationTranslationValues=function(t,e,n,i,o,a,s){var u=new r.ARRAY_TYPE(8);u[0]=t,u[1]=e,u[2]=n,u[3]=i;var c=.5*o,f=.5*a,l=.5*s;return u[4]=c*i+f*n-l*e,u[5]=f*i+l*t-c*n,u[6]=l*i+c*e-f*t,u[7]=-c*t-f*e-l*n,u},e.fromRotationTranslation=s,e.fromTranslation=function(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t},e.fromRotation=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},e.fromMat4=function(t,e){var n=i.create();o.getRotation(n,e);var a=new r.ARRAY_TYPE(3);return o.getTranslation(a,e),s(t,n,a),t},e.copy=u,e.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},e.set=function(t,e,n,r,i,o,a,s,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t},e.getDual=function(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t},e.setDual=function(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t},e.getTranslation=function(t,e){var n=e[4],r=e[5],i=e[6],o=e[7],a=-e[0],s=-e[1],u=-e[2],c=e[3];return t[0]=2*(n*c+o*a+r*u-i*s),t[1]=2*(r*c+o*s+i*a-n*u),t[2]=2*(i*c+o*u+n*s-r*a),t},e.translate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=.5*n[0],u=.5*n[1],c=.5*n[2],f=e[4],l=e[5],h=e[6],p=e[7];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=a*s+i*c-o*u+f,t[5]=a*u+o*s-r*c+l,t[6]=a*c+r*u-i*s+h,t[7]=-r*s-i*u-o*c+p,t},e.rotateX=function(t,e,n){var r=-e[0],o=-e[1],a=-e[2],s=e[3],u=e[4],c=e[5],f=e[6],l=e[7],h=u*s+l*r+c*a-f*o,p=c*s+l*o+f*r-u*a,d=f*s+l*a+u*o-c*r,m=l*s-u*r-c*o-f*a;return i.rotateX(t,e,n),t[4]=h*(s=t[3])+m*(r=t[0])+p*(a=t[2])-d*(o=t[1]),t[5]=p*s+m*o+d*r-h*a,t[6]=d*s+m*a+h*o-p*r,t[7]=m*s-h*r-p*o-d*a,t},e.rotateY=function(t,e,n){var r=-e[0],o=-e[1],a=-e[2],s=e[3],u=e[4],c=e[5],f=e[6],l=e[7],h=u*s+l*r+c*a-f*o,p=c*s+l*o+f*r-u*a,d=f*s+l*a+u*o-c*r,m=l*s-u*r-c*o-f*a;return i.rotateY(t,e,n),t[4]=h*(s=t[3])+m*(r=t[0])+p*(a=t[2])-d*(o=t[1]),t[5]=p*s+m*o+d*r-h*a,t[6]=d*s+m*a+h*o-p*r,t[7]=m*s-h*r-p*o-d*a,t},e.rotateZ=function(t,e,n){var r=-e[0],o=-e[1],a=-e[2],s=e[3],u=e[4],c=e[5],f=e[6],l=e[7],h=u*s+l*r+c*a-f*o,p=c*s+l*o+f*r-u*a,d=f*s+l*a+u*o-c*r,m=l*s-u*r-c*o-f*a;return i.rotateZ(t,e,n),t[4]=h*(s=t[3])+m*(r=t[0])+p*(a=t[2])-d*(o=t[1]),t[5]=p*s+m*o+d*r-h*a,t[6]=d*s+m*a+h*o-p*r,t[7]=m*s-h*r-p*o-d*a,t},e.rotateByQuatAppend=function(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],c=e[2],f=e[3];return t[0]=s*a+f*r+u*o-c*i,t[1]=u*a+f*i+c*r-s*o,t[2]=c*a+f*o+s*i-u*r,t[3]=f*a-s*r-u*i-c*o,t[4]=(s=e[4])*a+(f=e[7])*r+(u=e[5])*o-(c=e[6])*i,t[5]=u*a+f*i+c*r-s*o,t[6]=c*a+f*o+s*i-u*r,t[7]=f*a-s*r-u*i-c*o,t},e.rotateByQuatPrepend=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],f=n[3];return t[0]=r*f+a*s+i*c-o*u,t[1]=i*f+a*u+o*s-r*c,t[2]=o*f+a*c+r*u-i*s,t[3]=a*f-r*s-i*u-o*c,t[4]=r*(f=n[7])+a*(s=n[4])+i*(c=n[6])-o*(u=n[5]),t[5]=i*f+a*u+o*s-r*c,t[6]=o*f+a*c+r*u-i*s,t[7]=a*f-r*s-i*u-o*c,t},e.rotateAroundAxis=function(t,e,n,i){if(Math.abs(i)<r.EPSILON)return u(t,e);var o=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);i*=.5;var a=Math.sin(i),s=a*n[0]/o,c=a*n[1]/o,f=a*n[2]/o,l=Math.cos(i),h=e[0],p=e[1],d=e[2],m=e[3];t[0]=h*l+m*s+p*f-d*c,t[1]=p*l+m*c+d*s-h*f,t[2]=d*l+m*f+h*c-p*s,t[3]=m*l-h*s-p*c-d*f;var v=e[4],g=e[5],b=e[6],y=e[7];return t[4]=v*l+y*s+g*f-b*c,t[5]=g*l+y*c+b*s-v*f,t[6]=b*l+y*f+v*c-g*s,t[7]=y*l-v*s-g*c-b*f,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t},e.multiply=c,e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t},e.lerp=function(t,e,n,r){var i=1-r;return f(e,n)<0&&(r=-r),t[0]=e[0]*i+n[0]*r,t[1]=e[1]*i+n[1]*r,t[2]=e[2]*i+n[2]*r,t[3]=e[3]*i+n[3]*r,t[4]=e[4]*i+n[4]*r,t[5]=e[5]*i+n[5]*r,t[6]=e[6]*i+n[6]*r,t[7]=e[7]*i+n[7]*r,t},e.invert=function(t,e){var n=h(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t},e.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t},e.normalize=function(t,e){var n=h(e);if(n>0){n=Math.sqrt(n);var r=e[0]/n,i=e[1]/n,o=e[2]/n,a=e[3]/n,s=e[4],u=e[5],c=e[6],f=e[7],l=r*s+i*u+o*c+a*f;t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=(s-r*l)/n,t[5]=(u-i*l)/n,t[6]=(c-o*l)/n,t[7]=(f-a*l)/n}return t},e.str=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]},e.equals=function(t,e){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],f=t[7],l=e[0],h=e[1],p=e[2],d=e[3],m=e[4],v=e[5],g=e[6],b=e[7];return Math.abs(n-l)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(i-h)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(o-p)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-d)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(s-m)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(u-v)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(c-g)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(f-b)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(b))};var r=a(n(0)),i=a(n(3)),o=a(n(4));function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function s(t,e,n){var r=.5*n[0],i=.5*n[1],o=.5*n[2],a=e[0],s=e[1],u=e[2],c=e[3];return t[0]=a,t[1]=s,t[2]=u,t[3]=c,t[4]=r*c+i*u-o*s,t[5]=i*c+o*a-r*u,t[6]=o*c+r*s-i*a,t[7]=-r*a-i*s-o*u,t}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function c(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[4],u=n[5],c=n[6],f=n[7],l=e[4],h=e[5],p=e[6],d=e[7],m=n[0],v=n[1],g=n[2],b=n[3];return t[0]=r*b+a*m+i*g-o*v,t[1]=i*b+a*v+o*m-r*g,t[2]=o*b+a*g+r*v-i*m,t[3]=a*b-r*m-i*v-o*g,t[4]=r*f+a*s+i*c-o*u+l*b+d*m+h*g-p*v,t[5]=i*f+a*u+o*s-r*c+h*b+d*v+p*m-l*g,t[6]=o*f+a*c+r*u-i*s+p*b+d*g+l*v-h*m,t[7]=a*f-r*s-i*u-o*c+d*b-l*m-h*v-p*g,t}e.getReal=i.copy,e.setReal=i.copy,e.mul=c;var f=e.dot=i.dot,l=e.length=i.length,h=(e.len=l,e.squaredLength=i.squaredLength);e.sqrLen=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=function(){var t=new r.ARRAY_TYPE(6);return r.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},e.clone=function(t){var e=new r.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.fromValues=function(t,e,n,i,o,a){var s=new r.ARRAY_TYPE(6);return s[0]=t,s[1]=e,s[2]=n,s[3]=i,s[4]=o,s[5]=a,s},e.set=function(t,e,n,r,i,o,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t},e.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=n*o-r*i;return u?(t[0]=o*(u=1/u),t[1]=-r*u,t[2]=-i*u,t[3]=n*u,t[4]=(i*s-o*a)*u,t[5]=(r*a-n*s)*u,t):null},e.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},e.multiply=i,e.rotate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=Math.sin(n),f=Math.cos(n);return t[0]=r*f+o*c,t[1]=i*f+a*c,t[2]=r*-c+o*f,t[3]=i*-c+a*f,t[4]=s,t[5]=u,t},e.scale=function(t,e,n){var r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=n[0],c=n[1];return t[0]=e[0]*u,t[1]=r*u,t[2]=i*c,t[3]=o*c,t[4]=a,t[5]=s,t},e.translate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],f=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=r*c+o*f+s,t[5]=i*c+a*f+u,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},e.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},e.subtract=o,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},e.equals=function(t,e){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=e[0],f=e[1],l=e[2],h=e[3],p=e[4],d=e[5];return Math.abs(n-c)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(i-f)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(a-h)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(s-p)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(u-d)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));function i(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],f=n[1],l=n[2],h=n[3],p=n[4],d=n[5];return t[0]=r*c+o*f,t[1]=i*c+a*f,t[2]=r*l+o*h,t[3]=i*l+a*h,t[4]=r*p+o*d+s,t[5]=i*p+a*d+u,t}function o(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}e.mul=i,e.sub=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=function(){var t=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},e.clone=function(t){var e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.fromValues=function(t,e,n,i){var o=new r.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=i,o},e.set=function(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t},e.transpose=function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},e.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*o-i*r;return a?(t[0]=o*(a=1/a),t[1]=-r*a,t[2]=-i*a,t[3]=n*a,t):null},e.adjoint=function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},e.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},e.multiply=i,e.rotate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t},e.scale=function(t,e,n){var r=e[1],i=e[2],o=e[3],a=n[0],s=n[1];return t[0]=e[0]*a,t[1]=r*a,t[2]=i*s,t[3]=o*s,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},e.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},e.LDU=function(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},e.subtract=o,e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){var n=t[0],i=t[1],o=t[2],a=t[3],s=e[0],u=e[1],c=e[2],f=e[3];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-u)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(a-f)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))},e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));function i(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],f=n[3];return t[0]=r*s+o*u,t[1]=i*s+a*u,t[2]=r*c+o*f,t[3]=i*c+a*f,t}function o(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}e.mul=i,e.sub=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.vec4=e.vec3=e.vec2=e.quat2=e.quat=e.mat4=e.mat3=e.mat2d=e.mat2=e.glMatrix=void 0;var r=p(n(0)),i=p(n(9)),o=p(n(8)),a=p(n(5)),s=p(n(4)),u=p(n(3)),c=p(n(7)),f=p(n(6)),l=p(n(2)),h=p(n(1));function p(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}e.glMatrix=r,e.mat2=i,e.mat2d=o,e.mat3=a,e.mat4=s,e.quat=u,e.quat2=c,e.vec2=f,e.vec3=l,e.vec4=h}])})},{}],72:[function(t,e,n){e.exports=function(t,e,n,r){var i,o,a,s,u,c=e[0],f=e[1],l=e[2],h=e[3],p=n[0],d=n[1],m=n[2],v=n[3];(o=c*p+f*d+l*m+h*v)<0&&(o=-o,p=-p,d=-d,m=-m,v=-v);1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,u=Math.sin(r*i)/a):(s=1-r,u=r);return t[0]=s*c+u*p,t[1]=s*f+u*d,t[2]=s*l+u*m,t[3]=s*h+u*v,t}},{}],73:[function(t,e,n){e.exports=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}},{}],74:[function(t,e,n){e.exports=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}},{}],75:[function(t,e,n){e.exports=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}},{}],76:[function(t,e,n){e.exports=function(t,e){var n=r(t[0],t[1],t[2]),a=r(e[0],e[1],e[2]);i(n,n),i(a,a);var s=o(n,a);return s>1?0:Math.acos(s)};var r=t("./fromValues"),i=t("./normalize"),o=t("./dot")},{"./dot":86,"./fromValues":92,"./normalize":103}],77:[function(t,e,n){e.exports=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}},{}],78:[function(t,e,n){e.exports=function(t){var e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},{}],79:[function(t,e,n){e.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}},{}],80:[function(t,e,n){e.exports=function(){var t=new Float32Array(3);return t[0]=0,t[1]=0,t[2]=0,t}},{}],81:[function(t,e,n){e.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t}},{}],82:[function(t,e,n){e.exports=t("./distance")},{"./distance":83}],83:[function(t,e,n){e.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}},{}],84:[function(t,e,n){e.exports=t("./divide")},{"./divide":85}],85:[function(t,e,n){e.exports=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}},{}],86:[function(t,e,n){e.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}},{}],87:[function(t,e,n){e.exports=1e-6},{}],88:[function(t,e,n){e.exports=function(t,e){var n=t[0],i=t[1],o=t[2],a=e[0],s=e[1],u=e[2];return Math.abs(n-a)<=r*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-s)<=r*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-u)<=r*Math.max(1,Math.abs(o),Math.abs(u))};var r=t("./epsilon")},{"./epsilon":87}],89:[function(t,e,n){e.exports=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}},{}],90:[function(t,e,n){e.exports=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}},{}],91:[function(t,e,n){e.exports=function(t,e,n,i,o,a){var s,u;e||(e=3);n||(n=0);u=i?Math.min(i*e+n,t.length):t.length;for(s=n;s<u;s+=e)r[0]=t[s],r[1]=t[s+1],r[2]=t[s+2],o(r,r,a),t[s]=r[0],t[s+1]=r[1],t[s+2]=r[2];return t};var r=t("./create")()},{"./create":80}],92:[function(t,e,n){e.exports=function(t,e,n){var r=new Float32Array(3);return r[0]=t,r[1]=e,r[2]=n,r}},{}],93:[function(t,e,n){e.exports={EPSILON:t("./epsilon"),create:t("./create"),clone:t("./clone"),angle:t("./angle"),fromValues:t("./fromValues"),copy:t("./copy"),set:t("./set"),equals:t("./equals"),exactEquals:t("./exactEquals"),add:t("./add"),subtract:t("./subtract"),sub:t("./sub"),multiply:t("./multiply"),mul:t("./mul"),divide:t("./divide"),div:t("./div"),min:t("./min"),max:t("./max"),floor:t("./floor"),ceil:t("./ceil"),round:t("./round"),scale:t("./scale"),scaleAndAdd:t("./scaleAndAdd"),distance:t("./distance"),dist:t("./dist"),squaredDistance:t("./squaredDistance"),sqrDist:t("./sqrDist"),length:t("./length"),len:t("./len"),squaredLength:t("./squaredLength"),sqrLen:t("./sqrLen"),negate:t("./negate"),inverse:t("./inverse"),normalize:t("./normalize"),dot:t("./dot"),cross:t("./cross"),lerp:t("./lerp"),random:t("./random"),transformMat4:t("./transformMat4"),transformMat3:t("./transformMat3"),transformQuat:t("./transformQuat"),rotateX:t("./rotateX"),rotateY:t("./rotateY"),rotateZ:t("./rotateZ"),forEach:t("./forEach")}},{"./add":75,"./angle":76,"./ceil":77,"./clone":78,"./copy":79,"./create":80,"./cross":81,"./dist":82,"./distance":83,"./div":84,"./divide":85,"./dot":86,"./epsilon":87,"./equals":88,"./exactEquals":89,"./floor":90,"./forEach":91,"./fromValues":92,"./inverse":94,"./len":95,"./length":96,"./lerp":97,"./max":98,"./min":99,"./mul":100,"./multiply":101,"./negate":102,"./normalize":103,"./random":104,"./rotateX":105,"./rotateY":106,"./rotateZ":107,"./round":108,"./scale":109,"./scaleAndAdd":110,"./set":111,"./sqrDist":112,"./sqrLen":113,"./squaredDistance":114,"./squaredLength":115,"./sub":116,"./subtract":117,"./transformMat3":118,"./transformMat4":119,"./transformQuat":120}],94:[function(t,e,n){e.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}},{}],95:[function(t,e,n){e.exports=t("./length")},{"./length":96}],96:[function(t,e,n){e.exports=function(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}},{}],97:[function(t,e,n){e.exports=function(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t}},{}],98:[function(t,e,n){e.exports=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}},{}],99:[function(t,e,n){e.exports=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}},{}],100:[function(t,e,n){e.exports=t("./multiply")},{"./multiply":101}],101:[function(t,e,n){e.exports=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}},{}],102:[function(t,e,n){e.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}},{}],103:[function(t,e,n){e.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o);return t}},{}],104:[function(t,e,n){e.exports=function(t,e){e=e||1;var n=2*Math.random()*Math.PI,r=2*Math.random()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t}},{}],105:[function(t,e,n){e.exports=function(t,e,n,r){var i=n[1],o=n[2],a=e[1]-i,s=e[2]-o,u=Math.sin(r),c=Math.cos(r);return t[0]=e[0],t[1]=i+a*c-s*u,t[2]=o+a*u+s*c,t}},{}],106:[function(t,e,n){e.exports=function(t,e,n,r){var i=n[0],o=n[2],a=e[0]-i,s=e[2]-o,u=Math.sin(r),c=Math.cos(r);return t[0]=i+s*u+a*c,t[1]=e[1],t[2]=o+s*c-a*u,t}},{}],107:[function(t,e,n){e.exports=function(t,e,n,r){var i=n[0],o=n[1],a=e[0]-i,s=e[1]-o,u=Math.sin(r),c=Math.cos(r);return t[0]=i+a*c-s*u,t[1]=o+a*u+s*c,t[2]=e[2],t}},{}],108:[function(t,e,n){e.exports=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}},{}],109:[function(t,e,n){e.exports=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}},{}],110:[function(t,e,n){e.exports=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}},{}],111:[function(t,e,n){e.exports=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}},{}],112:[function(t,e,n){e.exports=t("./squaredDistance")},{"./squaredDistance":114}],113:[function(t,e,n){e.exports=t("./squaredLength")},{"./squaredLength":115}],114:[function(t,e,n){e.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}},{}],115:[function(t,e,n){e.exports=function(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}},{}],116:[function(t,e,n){e.exports=t("./subtract")},{"./subtract":117}],117:[function(t,e,n){e.exports=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}},{}],118:[function(t,e,n){e.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}},{}],119:[function(t,e,n){e.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/(a=a||1),t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}},{}],120:[function(t,e,n){e.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],c=n[3],f=c*r+s*o-u*i,l=c*i+u*r-a*o,h=c*o+a*i-s*r,p=-a*r-s*i-u*o;return t[0]=f*c+p*-a+l*-u-h*-s,t[1]=l*c+p*-s+h*-a-f*-u,t[2]=h*c+p*-u+f*-s-l*-a,t}},{}],121:[function(t,e,n){"use strict";var r=t("is-browser");e.exports=r&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){t=!1}return t}()},{"is-browser":125}],122:[function(t,e,n){var r=t("vectors/normalize-nd");function i(t){for(var e=t.positions,n=t.cells,r=[],i=[],o={},a=0,s=0;s<n.length;s++){var u=n[s],c=e[u[0]],f=e[u[1]],l=e[u[2]],h=w(c,f),p=w(f,l),d=w(l,c),m=i.indexOf(h);-1===m&&(m=a++,i.push(h));var v=i.indexOf(p);-1===v&&(v=a++,i.push(p));var g=i.indexOf(d);-1===g&&(g=a++,i.push(d));var b=i.indexOf(c);-1===b&&(b=a++,i.push(c));var y=i.indexOf(f);-1===y&&(y=a++,i.push(f));var x=i.indexOf(l);-1===x&&(x=a++,i.push(l)),r.push([b,m,g]),r.push([y,v,m]),r.push([x,g,v]),r.push([m,v,g])}return{cells:r,positions:i};function w(t,e){var n=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2,(t[2]+e[2])/2]}(t,e),r=function(t){return t[0].toPrecision(6)+","+t[1].toPrecision(6)+","+t[2].toPrecision(6)}(n),i=o[r];return i||(o[r]=n)}}e.exports=function(t){t=0|+t;var e=[],n=[],o=.5+Math.sqrt(5)/2;e.push([-1,+o,0]),e.push([1,+o,0]),e.push([-1,-o,0]),e.push([1,-o,0]),e.push([0,-1,+o]),e.push([0,1,+o]),e.push([0,-1,-o]),e.push([0,1,-o]),e.push([+o,0,-1]),e.push([+o,0,1]),e.push([-o,0,-1]),e.push([-o,0,1]),n.push([0,11,5]),n.push([0,5,1]),n.push([0,1,7]),n.push([0,7,10]),n.push([0,10,11]),n.push([1,5,9]),n.push([5,11,4]),n.push([11,10,2]),n.push([10,7,6]),n.push([7,1,8]),n.push([3,9,4]),n.push([3,4,2]),n.push([3,2,6]),n.push([3,6,8]),n.push([3,8,9]),n.push([4,9,5]),n.push([2,4,11]),n.push([6,2,10]),n.push([8,6,7]),n.push([9,8,1]);var a={cells:n,positions:e};for(;t-- >0;)a=i(a);e=a.positions;for(var s=0;s<e.length;s++)r(e[s]);return a}},{"vectors/normalize-nd":179}],123:[function(t,e,n){n.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,f=-7,l=n?i-1:0,h=n?-1:1,p=t[e+l];for(l+=h,o=p&(1<<-f)-1,p>>=-f,f+=s;f>0;o=256*o+t[e+l],l+=h,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=r;f>0;a=256*a+t[e+l],l+=h,f-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:Infinity*(p?-1:1);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,f=(1<<c)-1,l=f>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||Infinity===e?(s=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+l>=1?h/u:h*Math.pow(2,1-l))*u>=2&&(a++,u/=2),a+l>=f?(s=0,a=f):a+l>=1?(s=(e*u-1)*Math.pow(2,i),a+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+p]=255&a,p+=d,a/=256,c-=8);t[n+p-d]|=128*m}},{}],124:[function(t,e,n){"use strict";e.exports=function(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=n;return e}},{}],125:[function(t,e,n){e.exports=!0},{}],126:[function(t,e,n){function r(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}e.exports=function(t){return null!=t&&(r(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))}(t)||!!t._isBuffer)}},{}],127:[function(t,e,n){e.exports=o,o.strict=a,o.loose=s;var r=Object.prototype.toString,i={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function o(t){return a(t)||s(t)}function a(t){return t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array}function s(t){return i[r.call(t)]}},{}],128:[function(t,e,n){e.exports=function(t){return!!t&&(!!t.dtype&&new RegExp("function View[0-9]+d(:?"+t.dtype+")+").test(String(t.constructor)))}},{}],129:[function(t,e,n){"use strict";function r(t,e,n){var r,a,s,u,c,f=t.length,l=o(t[0],e),h=[];for(n||(n=[]),r=1;r<f;r++){for(a=t[r-1],u=c=o(s=t[r],e);;){if(!(l|u)){h.push(a),u!==c?(h.push(s),r<f-1&&(n.push(h),h=[])):r===f-1&&h.push(s);break}if(l&u)break;l?l=o(a=i(a,s,l,e),e):u=o(s=i(a,s,u,e),e)}l=c}return h.length&&n.push(h),n}function i(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function o(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}e.exports=r,r.polyline=r,r.polygon=function(t,e){var n,r,a,s,u,c,f;for(r=1;r<=8;r*=2){for(n=[],s=!(o(a=t[t.length-1],e)&r),u=0;u<t.length;u++)(f=!(o(c=t[u],e)&r))!==s&&n.push(i(a,c,r,e)),f&&n.push(c),a=c,s=f;if(!(t=n).length)break}return n}},{}],130:[function(t,e,n){e.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},{}],131:[function(t,e,n){e.exports=function(t,e){for(var n=-1,r=t.length;++n<r&&!1!==e(t[n],n,t););return t}},{}],132:[function(t,e,n){e.exports=function(t,e,n){n||(n={});for(var r=-1,i=e.length;++r<i;){var o=e[r];n[o]=t[o]}return n}},{}],133:[function(t,e,n){var r;e.exports=function(t,e,n){for(var i=-1,o=Object(t),a=n(t),s=a.length;s--;){var u=a[r?s:++i];if(!1===e(o[u],u,o))break}return t}},{}],134:[function(t,e,n){function r(t){return t}e.exports=function(t,e,n){if("function"!=typeof t)return r;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)};case 5:return function(n,r,i,o,a){return t.call(e,n,r,i,o,a)}}return function(){return t.apply(e,arguments)}}},{}],135:[function(t,e,n){var r=t("lodash._bindcallback"),i=t("lodash._isiterateecall"),o=t("lodash.restparam");e.exports=function(t){return o(function(e,n){var o=-1,a=null==e?0:n.length,s=a>2?n[a-2]:void 0,u=a>2?n[2]:void 0,c=a>1?n[a-1]:void 0;for("function"==typeof s?(s=r(s,c,5),a-=2):a-=(s="function"==typeof c?c:void 0)?1:0,u&&i(n[0],n[1],u)&&(s=a<3?void 0:s,a=1);++o<a;){var f=n[o];f&&t(e,f,s)}return e})}},{"lodash._bindcallback":134,"lodash._isiterateecall":137,"lodash.restparam":146}],136:[function(t,e,n){var r="[object Function]",i=/^\[object .+?Constructor\]$/;var o=Object.prototype,a=Function.prototype.toString,s=o.toString,u=RegExp("^"+a.call(o.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(t,e){var n=null==t?void 0:t[e];return function(t){return null!=t&&(function(t){return function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)&&s.call(t)==r}(t)?u.test(a.call(t)):function(t){return!!t&&"object"==typeof t}(t)&&i.test(t))}(n)?n:void 0}},{}],137:[function(t,e,n){var r=/^\d+$/,i=9007199254740991;var o,a=(o="length",function(t){return null==t?void 0:t[o]});function s(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}(a(t))}e.exports=function(t,e,n){if(!function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(n))return!1;var o=typeof e;if("number"==o?s(n)&&function(t,e){return t="number"==typeof t||r.test(t)?+t:-1,e=null==e?i:e,t>-1&&t%1==0&&t<e}(e,n.length):"string"==o&&e in n){var a=n[e];return t==t?t===a:a!=a}return!1}},{}],138:[function(t,e,n){var r=t("lodash.merge"),i=t("lodash.restparam");var o,a,s=(o=r,a=function t(e,n){return void 0===e?n:r(e,n,t)},i(function(t){var e=t[0];return null==e?e:(t.push(a),o.apply(void 0,t))}));e.exports=s},{"lodash.merge":145,"lodash.restparam":146}],139:[function(t,e,n){var r=9007199254740991,i="[object Arguments]",o="[object Function]",a="[object GeneratorFunction]",s=Object.prototype,u=s.hasOwnProperty,c=s.toString,f=s.propertyIsEnumerable;e.exports=function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&function(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}(t.length)&&!function(t){var e=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)?c.call(t):"";return e==o||e==a}(t)}(t)}(t)&&u.call(t,"callee")&&(!f.call(t,"callee")||c.call(t)==i)}},{}],140:[function(t,e,n){var r="[object Function]",i=/^\[object .+?Constructor\]$/;function o(t){return!!t&&"object"==typeof t}var a,s,u,c=Object.prototype,f=Function.prototype.toString,l=c.toString,h=RegExp("^"+f.call(c.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),p=(a=Array,s="isArray",function(t){return null!=t&&(function(t){return function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)&&l.call(t)==r}(t)?h.test(f.call(t)):o(t)&&i.test(t))}(u=null==a?void 0:a[s])?u:void 0),d=9007199254740991;e.exports=p||function(t){return o(t)&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=d}(t.length)&&"[object Array]"==l.call(t)}},{}],141:[function(t,e,n){var r=t("lodash._basefor"),i=t("lodash.isarguments"),o=t("lodash.keysin"),a="[object Object]";var s=Object.prototype,u=s.hasOwnProperty,c=s.toString;e.exports=function(t){var e,n;return!(!function(t){return!!t&&"object"==typeof t}(t)||c.call(t)!=a||i(t)||!(u.call(t,"constructor")||"function"!=typeof(e=t.constructor)||e instanceof e))&&(r(t,function(t,e){n=e},o),void 0===n||u.call(t,n))}},{"lodash._basefor":133,"lodash.isarguments":139,"lodash.keysin":144}],142:[function(t,e,n){var r=9007199254740991,i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1;var o=Object.prototype.toString;e.exports=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}(t.length)&&!!i[o.call(t)]}},{}],143:[function(t,e,n){var r=t("lodash._getnative"),i=t("lodash.isarguments"),o=t("lodash.isarray"),a=/^\d+$/,s=Object.prototype.hasOwnProperty,u=r(Object,"keys"),c=9007199254740991;var f,l=(f="length",function(t){return null==t?void 0:t[f]});function h(t,e){return t="number"==typeof t||a.test(t)?+t:-1,e=null==e?c:e,t>-1&&t%1==0&&t<e}function p(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=c}function d(t){for(var e=function(t){if(null==t)return[];m(t)||(t=Object(t));var e=t.length;e=e&&p(e)&&(o(t)||i(t))&&e||0;var n=t.constructor,r=-1,a="function"==typeof n&&n.prototype===t,u=Array(e),c=e>0;for(;++r<e;)u[r]=r+"";for(var f in t)c&&h(f,e)||"constructor"==f&&(a||!s.call(t,f))||u.push(f);return u}(t),n=e.length,r=n&&t.length,a=!!r&&p(r)&&(o(t)||i(t)),u=-1,c=[];++u<n;){var f=e[u];(a&&h(f,r)||s.call(t,f))&&c.push(f)}return c}function m(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}e.exports=u?function(t){var e,n=null==t?void 0:t.constructor;return"function"==typeof n&&n.prototype===t||"function"!=typeof t&&(null!=(e=t)&&p(l(e)))?d(t):m(t)?u(t):[]}:d},{"lodash._getnative":136,"lodash.isarguments":139,"lodash.isarray":140}],144:[function(t,e,n){var r=t("lodash.isarguments"),i=t("lodash.isarray"),o=/^\d+$/,a=Object.prototype.hasOwnProperty,s=9007199254740991;function u(t,e){return t="number"==typeof t||o.test(t)?+t:-1,e=null==e?s:e,t>-1&&t%1==0&&t<e}e.exports=function(t){if(null==t)return[];var e,n;n=typeof(e=t),(!e||"object"!=n&&"function"!=n)&&(t=Object(t));var o=t.length;o=o&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=s}(o)&&(i(t)||r(t))&&o||0;for(var c=t.constructor,f=-1,l="function"==typeof c&&c.prototype===t,h=Array(o),p=o>0;++f<o;)h[f]=f+"";for(var d in t)p&&u(d,o)||"constructor"==d&&(l||!a.call(t,d))||h.push(d);return h}},{"lodash.isarguments":139,"lodash.isarray":140}],145:[function(t,e,n){var r=t("lodash._arraycopy"),i=t("lodash._arrayeach"),o=t("lodash._createassigner"),a=t("lodash.isarguments"),s=t("lodash.isarray"),u=t("lodash.isplainobject"),c=t("lodash.istypedarray"),f=t("lodash.keys"),l=t("lodash.toplainobject");var h=9007199254740991;var p,d=(p="length",function(t){return null==t?void 0:t[p]});function m(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=h}(d(t))}var v=o(function t(e,n,o,h,p){if(v=typeof(d=e),!d||"object"!=v&&"function"!=v)return e;var d,v,g=m(n)&&(s(n)||c(n)),b=g?void 0:f(n);return i(b||n,function(i,f){if(b&&(i=n[f=i]),function(t){return!!t&&"object"==typeof t}(i))h||(h=[]),p||(p=[]),function(t,e,n,i,o,f,h){for(var p=f.length,d=e[n];p--;)if(f[p]==d)return void(t[n]=h[p]);var v=t[n],g=o?o(v,d,n,t,e):void 0,b=void 0===g;b&&(g=d,m(d)&&(s(d)||c(d))?g=s(v)?v:m(v)?r(v):[]:u(d)||a(d)?g=a(v)?l(v):u(v)?v:{}:b=!1),f.push(d),h.push(g),b?t[n]=i(g,d,o,f,h):(g==g?g!==v:v==v)&&(t[n]=g)}(e,n,f,t,o,h,p);else{var d=e[f],v=o?o(d,i,f,e,n):void 0,y=void 0===v;y&&(v=i),void 0===v&&(!g||f in e)||!y&&(v==v?v===d:d!=d)||(e[f]=v)}}),e});e.exports=v},{"lodash._arraycopy":130,"lodash._arrayeach":131,"lodash._createassigner":135,"lodash.isarguments":139,"lodash.isarray":140,"lodash.isplainobject":141,"lodash.istypedarray":142,"lodash.keys":143,"lodash.toplainobject":147}],146:[function(t,e,n){var r="Expected a function",i=Math.max;e.exports=function(t,e){if("function"!=typeof t)throw new TypeError(r);return e=i(void 0===e?t.length-1:+e||0,0),function(){for(var n=arguments,r=-1,o=i(n.length-e,0),a=Array(o);++r<o;)a[r]=n[e+r];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,n[0],a);case 2:return t.call(this,n[0],n[1],a)}var s=Array(e+1);for(r=-1;++r<e;)s[r]=n[r];return s[e]=a,t.apply(this,s)}}},{}],147:[function(t,e,n){var r=t("lodash._basecopy"),i=t("lodash.keysin");e.exports=function(t){return r(t,i(t))}},{"lodash._basecopy":132,"lodash.keysin":144}],148:[function(t,e,n){var r=t("./normalize"),i=t("gl-mat4/create"),o=t("gl-mat4/clone"),a=t("gl-mat4/determinant"),s=t("gl-mat4/invert"),u=t("gl-mat4/transpose"),c={length:t("gl-vec3/length"),normalize:t("gl-vec3/normalize"),dot:t("gl-vec3/dot"),cross:t("gl-vec3/cross")},f=i(),l=i(),h=[0,0,0,0],p=[[0,0,0],[0,0,0],[0,0,0]],d=[0,0,0];function m(t,e,n,r,i){t[0]=e[0]*r+n[0]*i,t[1]=e[1]*r+n[1]*i,t[2]=e[2]*r+n[2]*i}e.exports=function(t,e,n,i,v,g){if(e||(e=[0,0,0]),n||(n=[0,0,0]),i||(i=[0,0,0]),v||(v=[0,0,0,1]),g||(g=[0,0,0,1]),!r(f,t))return!1;if(o(l,f),l[3]=0,l[7]=0,l[11]=0,l[15]=1,Math.abs(a(l)<1e-8))return!1;var b,y,x,w,_,M,A,E=f[3],k=f[7],S=f[11],T=f[12],R=f[13],C=f[14],O=f[15];if(0!==E||0!==k||0!==S){if(h[0]=E,h[1]=k,h[2]=S,h[3]=O,!s(l,l))return!1;u(l,l),(b=v)[0]=(x=l)[0]*(w=(y=h)[0])+x[4]*(_=y[1])+x[8]*(M=y[2])+x[12]*(A=y[3]),b[1]=x[1]*w+x[5]*_+x[9]*M+x[13]*A,b[2]=x[2]*w+x[6]*_+x[10]*M+x[14]*A,b[3]=x[3]*w+x[7]*_+x[11]*M+x[15]*A}else v[0]=v[1]=v[2]=0,v[3]=1;if(e[0]=T,e[1]=R,e[2]=C,function(t,e){t[0][0]=e[0],t[0][1]=e[1],t[0][2]=e[2],t[1][0]=e[4],t[1][1]=e[5],t[1][2]=e[6],t[2][0]=e[8],t[2][1]=e[9],t[2][2]=e[10]}(p,f),n[0]=c.length(p[0]),c.normalize(p[0],p[0]),i[0]=c.dot(p[0],p[1]),m(p[1],p[1],p[0],1,-i[0]),n[1]=c.length(p[1]),c.normalize(p[1],p[1]),i[0]/=n[1],i[1]=c.dot(p[0],p[2]),m(p[2],p[2],p[0],1,-i[1]),i[2]=c.dot(p[1],p[2]),m(p[2],p[2],p[1],1,-i[2]),n[2]=c.length(p[2]),c.normalize(p[2],p[2]),i[1]/=n[2],i[2]/=n[2],c.cross(d,p[1],p[2]),c.dot(p[0],d)<0)for(var j=0;j<3;j++)n[j]*=-1,p[j][0]*=-1,p[j][1]*=-1,p[j][2]*=-1;return g[0]=.5*Math.sqrt(Math.max(1+p[0][0]-p[1][1]-p[2][2],0)),g[1]=.5*Math.sqrt(Math.max(1-p[0][0]+p[1][1]-p[2][2],0)),g[2]=.5*Math.sqrt(Math.max(1-p[0][0]-p[1][1]+p[2][2],0)),g[3]=.5*Math.sqrt(Math.max(1+p[0][0]+p[1][1]+p[2][2],0)),p[2][1]>p[1][2]&&(g[0]=-g[0]),p[0][2]>p[2][0]&&(g[1]=-g[1]),p[1][0]>p[0][1]&&(g[2]=-g[2]),!0}},{"./normalize":149,"gl-mat4/clone":42,"gl-mat4/create":44,"gl-mat4/determinant":45,"gl-mat4/invert":57,"gl-mat4/transpose":70,"gl-vec3/cross":81,"gl-vec3/dot":86,"gl-vec3/length":96,"gl-vec3/normalize":103}],149:[function(t,e,n){e.exports=function(t,e){var n=e[15];if(0===n)return!1;for(var r=1/n,i=0;i<16;i++)t[i]=e[i]*r;return!0}},{}],150:[function(t,e,n){var r=t("gl-vec3/lerp"),i=t("mat4-recompose"),o=t("mat4-decompose"),a=t("gl-mat4/determinant"),s=t("quat-slerp"),u=l(),c=l(),f=l();function l(){return{translate:h(),scale:h(1),skew:h(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function h(t){return[t||0,t||0,t||0]}e.exports=function(t,e,n,l){if(0===a(e)||0===a(n))return!1;var h=o(e,u.translate,u.scale,u.skew,u.perspective,u.quaternion),p=o(n,c.translate,c.scale,c.skew,c.perspective,c.quaternion);return!(!h||!p||(r(f.translate,u.translate,c.translate,l),r(f.skew,u.skew,c.skew,l),r(f.scale,u.scale,c.scale,l),r(f.perspective,u.perspective,c.perspective,l),s(f.quaternion,u.quaternion,c.quaternion,l),i(t,f.translate,f.scale,f.skew,f.perspective,f.quaternion),0))}},{"gl-mat4/determinant":45,"gl-vec3/lerp":97,"mat4-decompose":148,"mat4-recompose":151,"quat-slerp":171}],151:[function(t,e,n){var r={identity:t("gl-mat4/identity"),translate:t("gl-mat4/translate"),multiply:t("gl-mat4/multiply"),create:t("gl-mat4/create"),scale:t("gl-mat4/scale"),fromRotationTranslation:t("gl-mat4/fromRotationTranslation")},i=(r.create(),r.create());e.exports=function(t,e,n,o,a,s){return r.identity(t),r.fromRotationTranslation(t,s,e),t[3]=a[0],t[7]=a[1],t[11]=a[2],t[15]=a[3],r.identity(i),0!==o[2]&&(i[9]=o[2],r.multiply(t,t,i)),0!==o[1]&&(i[9]=0,i[8]=o[1],r.multiply(t,t,i)),0!==o[0]&&(i[8]=0,i[4]=o[0],r.multiply(t,t,i)),r.scale(t,t,n),t}},{"gl-mat4/create":44,"gl-mat4/fromRotationTranslation":48,"gl-mat4/identity":55,"gl-mat4/multiply":59,"gl-mat4/scale":67,"gl-mat4/translate":69}],152:[function(t,e,n){"use strict";var r=t("binary-search-bounds"),i=t("mat4-interpolate"),o=t("gl-mat4/invert"),a=t("gl-mat4/rotateX"),s=t("gl-mat4/rotateY"),u=t("gl-mat4/rotateZ"),c=t("gl-mat4/lookAt"),f=t("gl-mat4/translate"),l=(t("gl-mat4/scale"),t("gl-vec3/normalize")),h=[0,0,0];function p(t){this._components=t.slice(),this._time=[0],this.prevMatrix=t.slice(),this.nextMatrix=t.slice(),this.computedMatrix=t.slice(),this.computedInverse=t.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-Infinity,Infinity]}e.exports=function(t){return new p((t=t||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var d=p.prototype;d.recalcMatrix=function(t){var e=this._time,n=r.le(e,t),a=this.computedMatrix;if(!(n<0)){var s=this._components;if(n===e.length-1)for(var u=16*n,c=0;c<16;++c)a[c]=s[u++];else{var f=e[n+1]-e[n],h=(u=16*n,this.prevMatrix),p=!0;for(c=0;c<16;++c)h[c]=s[u++];var d=this.nextMatrix;for(c=0;c<16;++c)d[c]=s[u++],p=p&&h[c]===d[c];if(f<1e-6||p)for(c=0;c<16;++c)a[c]=h[c];else i(a,h,d,(t-e[n])/f)}var m=this.computedUp;m[0]=a[1],m[1]=a[5],m[2]=a[9],l(m,m);var v=this.computedInverse;o(v,a);var g=this.computedEye,b=v[15];g[0]=v[12]/b,g[1]=v[13]/b,g[2]=v[14]/b;var y=this.computedCenter,x=Math.exp(this.computedRadius[0]);for(c=0;c<3;++c)y[c]=g[c]-a[2+4*c]*x}},d.idle=function(t){if(!(t<this.lastT())){for(var e=this._components,n=e.length-16,r=0;r<16;++r)e.push(e[n++]);this._time.push(t)}},d.flush=function(t){var e=r.gt(this._time,t)-2;e<0||(this._time.splice(0,e),this._components.splice(0,16*e))},d.lastT=function(){return this._time[this._time.length-1]},d.lookAt=function(t,e,n,r){this.recalcMatrix(t),this.setMatrix(t,c(this.computedMatrix,e=e||this.computedEye,n=n||h,r=r||this.computedUp));for(var i=0,o=0;o<3;++o)i+=Math.pow(n[o]-e[o],2);i=Math.log(Math.sqrt(i)),this.computedRadius[0]=i},d.rotate=function(t,e,n,r){this.recalcMatrix(t);var i=this.computedInverse;e&&s(i,i,e),n&&a(i,i,n),r&&u(i,i,r),this.setMatrix(t,o(this.computedMatrix,i))};var m=[0,0,0];d.pan=function(t,e,n,r){m[0]=-(e||0),m[1]=-(n||0),m[2]=-(r||0),this.recalcMatrix(t);var i=this.computedInverse;f(i,i,m),this.setMatrix(t,o(i,i))},d.translate=function(t,e,n,r){m[0]=e||0,m[1]=n||0,m[2]=r||0,this.recalcMatrix(t);var i=this.computedMatrix;f(i,i,m),this.setMatrix(t,i)},d.setMatrix=function(t,e){if(!(t<this.lastT())){this._time.push(t);for(var n=0;n<16;++n)this._components.push(e[n])}},d.setDistance=function(t,e){this.computedRadius[0]=e},d.setDistanceLimits=function(t,e){var n=this._limits;n[0]=t,n[1]=e},d.getDistanceLimits=function(t){var e=this._limits;return t?(t[0]=e[0],t[1]=e[1],t):e}},{"binary-search-bounds":5,"gl-mat4/invert":57,"gl-mat4/lookAt":58,"gl-mat4/rotateX":64,"gl-mat4/rotateY":65,"gl-mat4/rotateZ":66,"gl-mat4/scale":67,"gl-mat4/translate":69,"gl-vec3/normalize":103,"mat4-interpolate":150}],153:[function(t,e,n){e.exports=function(t){var e=[],n=[],r=0,i=0;for(;r<t.length;)n.push([i++,i++,i++]),e.push([t[r++],t[r++],t[r++]],[t[r++],t[r++],t[r++]],[t[r++],t[r++],t[r++]]);return{positions:e,cells:n}}},{}],154:[function(t,e,n){"use strict";e.exports=function(t,e){e||(e=t,t=window);var n=0,i=0,o=0,a={shift:!1,alt:!1,control:!1,meta:!1},s=!1;function u(t){var e=!1;return"altKey"in t&&(e=e||t.altKey!==a.alt,a.alt=!!t.altKey),"shiftKey"in t&&(e=e||t.shiftKey!==a.shift,a.shift=!!t.shiftKey),"ctrlKey"in t&&(e=e||t.ctrlKey!==a.control,a.control=!!t.ctrlKey),"metaKey"in t&&(e=e||t.metaKey!==a.meta,a.meta=!!t.metaKey),e}function c(t,s){var c=r.x(s),f=r.y(s);"buttons"in s&&(t=0|s.buttons),(t!==n||c!==i||f!==o||u(s))&&(n=0|t,i=c||0,o=f||0,e&&e(n,i,o,a))}function f(t){c(0,t)}function l(){(n||i||o||a.shift||a.alt||a.meta||a.control)&&(i=o=0,n=0,a.shift=a.alt=a.control=a.meta=!1,e&&e(0,0,0,a))}function h(t){u(t)&&e&&e(n,i,o,a)}function p(t){0===r.buttons(t)?c(0,t):c(n,t)}function d(t){c(n|r.buttons(t),t)}function m(t){c(n&~r.buttons(t),t)}function v(){s||(s=!0,t.addEventListener("mousemove",p),t.addEventListener("mousedown",d),t.addEventListener("mouseup",m),t.addEventListener("mouseleave",f),t.addEventListener("mouseenter",f),t.addEventListener("mouseout",f),t.addEventListener("mouseover",f),t.addEventListener("blur",l),t.addEventListener("keyup",h),t.addEventListener("keydown",h),t.addEventListener("keypress",h),t!==window&&(window.addEventListener("blur",l),window.addEventListener("keyup",h),window.addEventListener("keydown",h),window.addEventListener("keypress",h)))}v();var g={element:t};return Object.defineProperties(g,{enabled:{get:function(){return s},set:function(e){e?v():s&&(s=!1,t.removeEventListener("mousemove",p),t.removeEventListener("mousedown",d),t.removeEventListener("mouseup",m),t.removeEventListener("mouseleave",f),t.removeEventListener("mouseenter",f),t.removeEventListener("mouseout",f),t.removeEventListener("mouseover",f),t.removeEventListener("blur",l),t.removeEventListener("keyup",h),t.removeEventListener("keydown",h),t.removeEventListener("keypress",h),t!==window&&(window.removeEventListener("blur",l),window.removeEventListener("keyup",h),window.removeEventListener("keydown",h),window.removeEventListener("keypress",h)))},enumerable:!0},buttons:{get:function(){return n},enumerable:!0},x:{get:function(){return i},enumerable:!0},y:{get:function(){return o},enumerable:!0},mods:{get:function(){return a},enumerable:!0}}),g};var r=t("mouse-event")},{"mouse-event":156}],155:[function(t,e,n){var r={left:0,top:0};e.exports=function(t,e,n){e=e||t.currentTarget||t.srcElement,Array.isArray(n)||(n=[0,0]);var i=t.clientX||0,o=t.clientY||0,a=(s=e,s===window||s===document||s===document.body?r:s.getBoundingClientRect());var s;return n[0]=i-a.left,n[1]=o-a.top,n}},{}],156:[function(t,e,n){"use strict";function r(t){return t.target||t.srcElement||window}n.buttons=function(t){if("object"==typeof t){if("buttons"in t)return t.buttons;if("which"in t){if(2===(e=t.which))return 4;if(3===e)return 2;if(e>0)return 1<<e-1}else if("button"in t){var e;if(1===(e=t.button))return 4;if(2===e)return 2;if(e>=0)return 1<<e}}return 0},n.element=r,n.x=function(t){if("object"==typeof t){if("offsetX"in t)return t.offsetX;var e=r(t).getBoundingClientRect();return t.clientX-e.left}return 0},n.y=function(t){if("object"==typeof t){if("offsetY"in t)return t.offsetY;var e=r(t).getBoundingClientRect();return t.clientY-e.top}return 0}},{}],157:[function(t,e,n){"use strict";var r=t("to-px");e.exports=function(t,e,n){"function"==typeof t&&(n=!!e,e=t,t=window);var i=r("ex",t),o=function(t){n&&t.preventDefault();var r=t.deltaX||0,o=t.deltaY||0,a=t.deltaZ||0,s=t.deltaMode,u=1;switch(s){case 1:u=i;break;case 2:u=window.innerHeight}if(o*=u,a*=u,(r*=u)||o||a)return e(r,o,a,t)};return t.addEventListener("wheel",o),o}},{"to-px":176}],158:[function(t,e,n){var r=t("iota-array"),i=t("is-buffer"),o="undefined"!=typeof Float64Array;function a(t,e){return t[0]-e[0]}function s(){var t,e=this.stride,n=new Array(e.length);for(t=0;t<n.length;++t)n[t]=[Math.abs(e[t]),t];n.sort(a);var r=new Array(n.length);for(t=0;t<r.length;++t)r[t]=n[t][1];return r}function u(t,e){var n=["View",e,"d",t].join("");e<0&&(n="View_Nil"+t);var i="generic"===t;if(-1===e){var o="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}";return new Function(o)()}if(0===e){o="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}";return new Function("TrivialArray",o)(c[t][0])}o=["'use strict'"];var a=r(e),u=a.map(function(t){return"i"+t}),f="this.offset+"+a.map(function(t){return"this.stride["+t+"]*i"+t}).join("+"),l=a.map(function(t){return"b"+t}).join(","),h=a.map(function(t){return"c"+t}).join(",");o.push("function "+n+"(a,"+l+","+h+",d){this.data=a","this.shape=["+l+"]","this.stride=["+h+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),o.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+a.map(function(t){return"this.shape["+t+"]"}).join("*"),"}})"),1===e?o.push("proto.order=[0]"):(o.push("Object.defineProperty(proto,'order',{get:"),e<4?(o.push("function "+n+"_order(){"),2===e?o.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===e&&o.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):o.push("ORDER})")),o.push("proto.set=function "+n+"_set("+u.join(",")+",v){"),o.push(i?"return this.data.set("+f+",v)}":"return this.data["+f+"]=v}"),o.push("proto.get=function "+n+"_get("+u.join(",")+"){"),o.push(i?"return this.data.get("+f+")}":"return this.data["+f+"]}"),o.push("proto.index=function "+n+"_index(",u.join(),"){return "+f+"}"),o.push("proto.hi=function "+n+"_hi("+u.join(",")+"){return new "+n+"(this.data,"+a.map(function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")}).join(",")+","+a.map(function(t){return"this.stride["+t+"]"}).join(",")+",this.offset)}");var p=a.map(function(t){return"a"+t+"=this.shape["+t+"]"}),d=a.map(function(t){return"c"+t+"=this.stride["+t+"]"});o.push("proto.lo=function "+n+"_lo("+u.join(",")+"){var b=this.offset,d=0,"+p.join(",")+","+d.join(","));for(var m=0;m<e;++m)o.push("if(typeof i"+m+"==='number'&&i"+m+">=0){d=i"+m+"|0;b+=c"+m+"*d;a"+m+"-=d}");o.push("return new "+n+"(this.data,"+a.map(function(t){return"a"+t}).join(",")+","+a.map(function(t){return"c"+t}).join(",")+",b)}"),o.push("proto.step=function "+n+"_step("+u.join(",")+"){var "+a.map(function(t){return"a"+t+"=this.shape["+t+"]"}).join(",")+","+a.map(function(t){return"b"+t+"=this.stride["+t+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(m=0;m<e;++m)o.push("if(typeof i"+m+"==='number'){d=i"+m+"|0;if(d<0){c+=b"+m+"*(a"+m+"-1);a"+m+"=ceil(-a"+m+"/d)}else{a"+m+"=ceil(a"+m+"/d)}b"+m+"*=d}");o.push("return new "+n+"(this.data,"+a.map(function(t){return"a"+t}).join(",")+","+a.map(function(t){return"b"+t}).join(",")+",c)}");var v=new Array(e),g=new Array(e);for(m=0;m<e;++m)v[m]="a[i"+m+"]",g[m]="b[i"+m+"]";o.push("proto.transpose=function "+n+"_transpose("+u+"){"+u.map(function(t,e){return t+"=("+t+"===undefined?"+e+":"+t+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+v.join(",")+","+g.join(",")+",this.offset)}"),o.push("proto.pick=function "+n+"_pick("+u+"){var a=[],b=[],c=this.offset");for(m=0;m<e;++m)o.push("if(typeof i"+m+"==='number'&&i"+m+">=0){c=(c+this.stride["+m+"]*i"+m+")|0}else{a.push(this.shape["+m+"]);b.push(this.stride["+m+"])}");return o.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),o.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+a.map(function(t){return"shape["+t+"]"}).join(",")+","+a.map(function(t){return"stride["+t+"]"}).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",o.join("\n"))(c[t],s)}var c={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};e.exports=function(t,e,n,r){if(void 0===t)return(0,c.array[0])([]);"number"==typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var a=e.length;if(void 0===n){n=new Array(a);for(var s=a-1,f=1;s>=0;--s)n[s]=f,f*=e[s]}if(void 0===r)for(r=0,s=0;s<a;++s)n[s]<0&&(r-=(e[s]-1)*n[s]);for(var l=function(t){if(i(t))return"buffer";if(o)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(t)?"array":"generic"}(t),h=c[l];h.length<=a+1;)h.push(u(l,h.length-1));return(0,h[a+1])(t,e,n,r)}},{"iota-array":124,"is-buffer":126}],159:[function(t,e,n){n.vertexNormals=function(t,e,n){for(var r=e.length,i=new Array(r),o=void 0===n?1e-6:n,a=0;a<r;++a)i[a]=[0,0,0];for(a=0;a<t.length;++a)for(var s=t[a],u=s[s.length-1],c=s[0],f=0;f<s.length;++f){for(var l=e[u],h=e[u=c],p=e[c=s[(f+1)%s.length]],d=new Array(3),m=0,v=new Array(3),g=0,b=0;b<3;++b)d[b]=l[b]-h[b],m+=d[b]*d[b],v[b]=p[b]-h[b],g+=v[b]*v[b];if(m*g>o){var y=i[u],x=1/Math.sqrt(m*g);for(b=0;b<3;++b){var w=(b+1)%3,_=(b+2)%3;y[b]+=x*(v[w]*d[_]-v[_]*d[w])}}}for(a=0;a<r;++a){y=i[a];var M=0;for(b=0;b<3;++b)M+=y[b]*y[b];if(M>o)for(x=1/Math.sqrt(M),b=0;b<3;++b)y[b]*=x;else for(b=0;b<3;++b)y[b]=0}return i},n.faceNormals=function(t,e,n){for(var r=t.length,i=new Array(r),o=void 0===n?1e-6:n,a=0;a<r;++a){for(var s=t[a],u=new Array(3),c=0;c<3;++c)u[c]=e[s[c]];var f=new Array(3),l=new Array(3);for(c=0;c<3;++c)f[c]=u[1][c]-u[0][c],l[c]=u[2][c]-u[0][c];var h=new Array(3),p=0;for(c=0;c<3;++c){var d=(c+1)%3,m=(c+2)%3;h[c]=f[d]*l[m]-f[m]*l[d],p+=h[c]*h[c]}p=p>o?1/Math.sqrt(p):0;for(c=0;c<3;++c)h[c]*=p;i[a]=h}return i}},{}],160:[function(t,e,n){"use strict";e.exports=function(t,e,n,r,i,o,a,s,u,c){var f=e+o+c;if(l>0){var l=Math.sqrt(f+1);t[0]=.5*(a-u)/l,t[1]=.5*(s-r)/l,t[2]=.5*(n-o)/l,t[3]=.5*l}else{var h=Math.max(e,o,c),l=Math.sqrt(2*h-f+1);e>=h?(t[0]=.5*l,t[1]=.5*(i+n)/l,t[2]=.5*(s+r)/l,t[3]=.5*(a-u)/l):o>=h?(t[0]=.5*(n+i)/l,t[1]=.5*l,t[2]=.5*(u+a)/l,t[3]=.5*(s-r)/l):(t[0]=.5*(r+s)/l,t[1]=.5*(a+u)/l,t[2]=.5*l,t[3]=.5*(n-i)/l)}return t}},{}],161:[function(t,e,n){"use strict";e.exports=function(t){var e=(t=t||{}).center||[0,0,0],n=t.rotation||[0,0,0,1],r=t.radius||1;e=[].slice.call(e,0,3),f(n=[].slice.call(n,0,4),n);var i=new l(n,e,Math.log(r));i.setDistanceLimits(t.zoomMin,t.zoomMax),("eye"in t||"up"in t)&&i.lookAt(0,t.eye,t.center,t.up);return i};var r=t("filtered-vector"),i=t("gl-mat4/lookAt"),o=t("gl-mat4/fromQuat"),a=t("gl-mat4/invert"),s=t("./lib/quatFromFrame");function u(t,e,n){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(n,2))}function c(t,e,n,r){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(n,2)+Math.pow(r,2))}function f(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=c(n,r,i,o);a>1e-6?(t[0]=n/a,t[1]=r/a,t[2]=i/a,t[3]=o/a):(t[0]=t[1]=t[2]=0,t[3]=1)}function l(t,e,n){this.radius=r([n]),this.center=r(e),this.rotation=r(t),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var h=l.prototype;h.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},h.recalcMatrix=function(t){this.radius.curve(t),this.center.curve(t),this.rotation.curve(t);var e=this.computedRotation;f(e,e);var n=this.computedMatrix;o(n,e);var r=this.computedCenter,i=this.computedEye,a=this.computedUp,s=Math.exp(this.computedRadius[0]);i[0]=r[0]+s*n[2],i[1]=r[1]+s*n[6],i[2]=r[2]+s*n[10],a[0]=n[1],a[1]=n[5],a[2]=n[9];for(var u=0;u<3;++u){for(var c=0,l=0;l<3;++l)c+=n[u+4*l]*i[l];n[12+u]=-c}},h.getMatrix=function(t,e){this.recalcMatrix(t);var n=this.computedMatrix;if(e){for(var r=0;r<16;++r)e[r]=n[r];return e}return n},h.idle=function(t){this.center.idle(t),this.radius.idle(t),this.rotation.idle(t)},h.flush=function(t){this.center.flush(t),this.radius.flush(t),this.rotation.flush(t)},h.pan=function(t,e,n,r){e=e||0,n=n||0,r=r||0,this.recalcMatrix(t);var i=this.computedMatrix,o=i[1],a=i[5],s=i[9],c=u(o,a,s),f=i[0],l=i[4],h=i[8],p=f*(o/=c)+l*(a/=c)+h*(s/=c),d=u(f-=o*p,l-=a*p,h-=s*p),m=i[2],v=i[6],g=i[10],b=m*o+v*a+g*s,y=m*(f/=d)+v*(l/=d)+g*(h/=d),x=u(m-=b*o+y*f,v-=b*a+y*l,g-=b*s+y*h);m/=x,v/=x,g/=x,this.center.move(t,f*e+o*n,l*e+a*n,h*e+s*n);var w=Math.exp(this.computedRadius[0]);w=Math.max(1e-4,w+r),this.radius.set(t,Math.log(w))},h.rotate=function(t,e,n,r){this.recalcMatrix(t);var i=this.computedMatrix,o=i[2],a=i[6],s=i[10],f=(e=e||0)*i[0]+(n=n||0)*i[1],l=e*i[4]+n*i[5],h=e*i[8]+n*i[9],p=-(a*h-s*l),d=-(s*f-o*h),m=-(o*l-a*f),v=Math.sqrt(Math.max(0,1-Math.pow(p,2)-Math.pow(d,2)-Math.pow(m,2))),g=c(p,d,m,v);g>1e-6?(p/=g,d/=g,m/=g,v/=g):(p=d=m=0,v=1);var b=this.computedRotation,y=b[0],x=b[1],w=b[2],_=b[3],M=y*v+_*p+x*m-w*d,A=x*v+_*d+w*p-y*m,E=w*v+_*m+y*d-x*p,k=_*v-y*p-x*d-w*m;if(r){p=o,d=a,m=s;var S=Math.sin(r)/u(p,d,m);p*=S,d*=S,m*=S,k=k*(v=Math.cos(e))-(M=M*v+k*p+A*m-E*d)*p-(A=A*v+k*d+E*p-M*m)*d-(E=E*v+k*m+M*d-A*p)*m}var T=c(M,A,E,k);T>1e-6?(M/=T,A/=T,E/=T,k/=T):(M=A=E=0,k=1),this.rotation.set(t,M,A,E,k)},h.lookAt=function(t,e,n,r){this.recalcMatrix(t);var o=this.computedMatrix;i(o,e=e||this.computedEye,n=n||this.computedCenter,r=r||this.computedUp);var a=this.computedRotation;s(a,o[0],o[1],o[2],o[4],o[5],o[6],o[8],o[9],o[10]),f(a,a),this.rotation.set(t,a[0],a[1],a[2],a[3]);for(var u=0,c=0;c<3;++c)u+=Math.pow(n[c]-e[c],2);this.radius.set(t,.5*Math.log(Math.max(u,1e-6))),this.center.set(t,n[0],n[1],n[2])},h.translate=function(t,e,n,r){this.center.move(t,e||0,n||0,r||0)},h.setMatrix=function(t,e){var n=this.computedRotation;s(n,e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]),f(n,n),this.rotation.set(t,n[0],n[1],n[2],n[3]);var r=this.computedMatrix;a(r,e);var i=r[15];if(Math.abs(i)>1e-6){var o=r[12]/i,u=r[13]/i,c=r[14]/i;this.recalcMatrix(t);var l=Math.exp(this.computedRadius[0]);this.center.set(t,o-r[2]*l,u-r[6]*l,c-r[10]*l),this.radius.idle(t)}else this.center.idle(t),this.radius.idle(t)},h.setDistance=function(t,e){e>0&&this.radius.set(t,Math.log(e))},h.setDistanceLimits=function(t,e){t=t>0?Math.log(t):-Infinity,e=e>0?Math.log(e):Infinity,e=Math.max(e,t),this.radius.bounds[0][0]=t,this.radius.bounds[1][0]=e},h.getDistanceLimits=function(t){var e=this.radius.bounds;return t?(t[0]=Math.exp(e[0][0]),t[1]=Math.exp(e[1][0]),t):[Math.exp(e[0][0]),Math.exp(e[1][0])]},h.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},h.fromJSON=function(t){var e=this.lastT(),n=t.center;n&&this.center.set(e,n[0],n[1],n[2]);var r=t.rotation;r&&this.rotation.set(e,r[0],r[1],r[2],r[3]);var i=t.distance;i&&i>0&&this.radius.set(e,Math.log(i)),this.setDistanceLimits(t.zoomMin,t.zoomMax)}},{"./lib/quatFromFrame":160,"filtered-vector":33,"gl-mat4/fromQuat":46,"gl-mat4/invert":57,"gl-mat4/lookAt":58}],162:[function(t,e,n){var r=t("color-convert");e.exports=function(t){var e,n,i,o;if(e=/^((?:rgb|hs[lv]|cmyk|xyz|lab)a?)\s*\(([^\)]*)\)/.exec(t)){var a=e[1],s="cmyk"===(u=a.replace(/a$/,""))?4:3;n=r[u],i=e[2].replace(/^\s+|\s+$/g,"").split(/\s*,\s*/).map(function(t,e){return/%$/.test(t)&&e===s?parseFloat(t)/100:(/%$/.test(t),parseFloat(t))}),a===u&&i.push(1),o=void 0===i[s]?1:i[s],i=i.slice(0,s),n[u]=function(){return i}}else if(/^#[A-Fa-f0-9]+$/.test(t)){var u=t.replace(/^#/,"");n=r.rgb,i=(i=u.split(3===(s=u.length)?/(.)/:/(..)/)).filter(Boolean).map(function(t){return 3===s?parseInt(t+t,16):parseInt(t,16)}),o=1,n.rgb=function(){return i},i[0]||(i[0]=0),i[1]||(i[1]=0),i[2]||(i[2]=0)}else(n=r.keyword).keyword=function(){return t},i=t,o=1;var c={rgb:void 0,hsl:void 0,hsv:void 0,cmyk:void 0,keyword:void 0,hex:void 0};try{c.rgb=n.rgb(i)}catch(t){}try{c.hsl=n.hsl(i)}catch(t){}try{c.hsv=n.hsv(i)}catch(t){}try{c.cmyk=n.cmyk(i)}catch(t){}try{c.keyword=n.keyword(i)}catch(t){}return c.rgb&&(c.hex="#"+c.rgb.map(function(t){var e=t.toString(16);return 1===e.length?"0"+e:e}).join("")),c.rgb&&(c.rgba=c.rgb.concat(o)),c.hsl&&(c.hsla=c.hsl.concat(o)),c.hsv&&(c.hsva=c.hsv.concat(o)),c.cmyk&&(c.cmyka=c.cmyk.concat(o)),c}},{"color-convert":164}],163:[function(t,e,n){function i(t){var e,n,r=t[0]/255,i=t[1]/255,o=t[2]/255,a=Math.min(r,i,o),s=Math.max(r,i,o),u=s-a;return s==a?e=0:r==s?e=(i-o)/u:i==s?e=2+(o-r)/u:o==s&&(e=4+(r-i)/u),(e=Math.min(60*e,360))<0&&(e+=360),n=(a+s)/2,[e,100*(s==a?0:n<=.5?u/(s+a):u/(2-s-a)),100*n]}function o(t){var e,n,r=t[0],i=t[1],o=t[2],a=Math.min(r,i,o),s=Math.max(r,i,o),u=s-a;return n=0==s?0:u/s*1e3/10,s==a?e=0:r==s?e=(i-o)/u:i==s?e=2+(o-r)/u:o==s&&(e=4+(r-i)/u),(e=Math.min(60*e,360))<0&&(e+=360),[e,n,s/255*1e3/10]}function a(t){var e=t[0],n=t[1],r=t[2];return[i(t)[0],100*(1/255*Math.min(e,Math.min(n,r))),100*(r=1-1/255*Math.max(e,Math.max(n,r)))]}function s(t){var e,n=t[0]/255,r=t[1]/255,i=t[2]/255;return[100*((1-n-(e=Math.min(1-n,1-r,1-i)))/(1-e)||0),100*((1-r-e)/(1-e)||0),100*((1-i-e)/(1-e)||0),100*e]}function u(t){return E[JSON.stringify(t)]}function c(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*e+.7152*n+.0722*r),100*(.0193*e+.1192*n+.9505*r)]}function f(t){var e=c(t),n=e[0],r=e[1],i=e[2];return r/=100,i/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(n-r),200*(r-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]}function l(t){var e,n,r,i,o,a=t[0]/360,s=t[1]/100,u=t[2]/100;if(0==s)return[o=255*u,o,o];e=2*u-(n=u<.5?u*(1+s):u+s-u*s),i=[0,0,0];for(var c=0;c<3;c++)(r=a+1/3*-(c-1))<0&&r++,r>1&&r--,i[c]=255*(o=6*r<1?e+6*(n-e)*r:2*r<1?n:3*r<2?e+(n-e)*(2/3-r)*6:e);return i}function h(t){var e=t[0]/60,n=t[1]/100,r=t[2]/100,i=Math.floor(e)%6,o=e-Math.floor(e),a=255*r*(1-n),s=255*r*(1-n*o),u=255*r*(1-n*(1-o));r*=255;switch(i){case 0:return[r,u,a];case 1:return[s,r,a];case 2:return[a,r,u];case 3:return[a,s,r];case 4:return[u,a,r];case 5:return[r,a,s]}}function p(t){var e,n,i,o,a=t[0]/360,s=t[1]/100,u=t[2]/100,c=s+u;switch(c>1&&(s/=c,u/=c),i=6*a-(e=Math.floor(6*a)),0!=(1&e)&&(i=1-i),o=s+i*((n=1-u)-s),e){default:case 6:case 0:r=n,g=o,b=s;break;case 1:r=o,g=n,b=s;break;case 2:r=s,g=n,b=o;break;case 3:r=s,g=o,b=n;break;case 4:r=o,g=s,b=n;break;case 5:r=n,g=s,b=o}return[255*r,255*g,255*b]}function d(t){var e=t[1]/100,n=t[2]/100,r=t[3]/100;return[255*(1-Math.min(1,t[0]/100*(1-r)+r)),255*(1-Math.min(1,e*(1-r)+r)),255*(1-Math.min(1,n*(1-r)+r))]}function m(t){var e,n,r,i=t[0]/100,o=t[1]/100,a=t[2]/100;return n=-.9689*i+1.8758*o+.0415*a,r=.0557*i+-.204*o+1.057*a,e=(e=3.2406*i+-1.5372*o+-.4986*a)>.0031308?1.055*Math.pow(e,1/2.4)-.055:e*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*=12.92,[255*(e=Math.min(Math.max(0,e),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]}function v(t){var e=t[0],n=t[1],r=t[2];return n/=100,r/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(e-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]}function y(t){var e,n,r,i,o=t[0],a=t[1],s=t[2];return o<=8?i=(n=100*o/903.3)/100*7.787+16/116:(n=100*Math.pow((o+16)/116,3),i=Math.pow(n/100,1/3)),[e=e/95.047<=.008856?e=95.047*(a/500+i-16/116)/7.787:95.047*Math.pow(a/500+i,3),n,r=r/108.883<=.008859?r=108.883*(i-s/200-16/116)/7.787:108.883*Math.pow(i-s/200,3)]}function x(t){var e,n=t[0],r=t[1],i=t[2];return(e=360*Math.atan2(i,r)/2/Math.PI)<0&&(e+=360),[n,Math.sqrt(r*r+i*i),e]}function w(t){return m(y(t))}function _(t){var e,n=t[1];return e=t[2]/360*2*Math.PI,[t[0],n*Math.cos(e),n*Math.sin(e)]}function M(t){return A[t]}e.exports={rgb2hsl:i,rgb2hsv:o,rgb2hwb:a,rgb2cmyk:s,rgb2keyword:u,rgb2xyz:c,rgb2lab:f,rgb2lch:function(t){return x(f(t))},hsl2rgb:l,hsl2hsv:function(t){var e=t[0],n=t[1]/100,r=t[2]/100;if(0===r)return[0,0,0];return[e,100*(2*(n*=(r*=2)<=1?r:2-r)/(r+n)),100*((r+n)/2)]},hsl2hwb:function(t){return a(l(t))},hsl2cmyk:function(t){return s(l(t))},hsl2keyword:function(t){return u(l(t))},hsv2rgb:h,hsv2hsl:function(t){var e,n,r=t[1]/100,i=t[2]/100;return e=r*i,[t[0],100*(e=(e/=(n=(2-r)*i)<=1?n:2-n)||0),100*(n/=2)]},hsv2hwb:function(t){return a(h(t))},hsv2cmyk:function(t){return s(h(t))},hsv2keyword:function(t){return u(h(t))},hwb2rgb:p,hwb2hsl:function(t){return i(p(t))},hwb2hsv:function(t){return o(p(t))},hwb2cmyk:function(t){return s(p(t))},hwb2keyword:function(t){return u(p(t))},cmyk2rgb:d,cmyk2hsl:function(t){return i(d(t))},cmyk2hsv:function(t){return o(d(t))},cmyk2hwb:function(t){return a(d(t))},cmyk2keyword:function(t){return u(d(t))},keyword2rgb:M,keyword2hsl:function(t){return i(M(t))},keyword2hsv:function(t){return o(M(t))},keyword2hwb:function(t){return a(M(t))},keyword2cmyk:function(t){return s(M(t))},keyword2lab:function(t){return f(M(t))},keyword2xyz:function(t){return c(M(t))},xyz2rgb:m,xyz2lab:v,xyz2lch:function(t){return x(v(t))},lab2xyz:y,lab2rgb:w,lab2lch:x,lch2lab:_,lch2xyz:function(t){return y(_(t))},lch2rgb:function(t){return w(_(t))}};var A={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},E={};for(var k in A)E[JSON.stringify(A[k])]=k},{}],164:[function(t,e,n){var r=t("./conversions"),i=function(){return new c};for(var o in r){i[o+"Raw"]=function(t){return function(e){return"number"==typeof e&&(e=Array.prototype.slice.call(arguments)),r[t](e)}}(o);var a=/(\w+)2(\w+)/.exec(o),s=a[1],u=a[2];(i[s]=i[s]||{})[u]=i[o]=function(t){return function(e){"number"==typeof e&&(e=Array.prototype.slice.call(arguments));var n=r[t](e);if("string"==typeof n||void 0===n)return n;for(var i=0;i<n.length;i++)n[i]=Math.round(n[i]);return n}}(o)}var c=function(){this.convs={}};c.prototype.routeSpace=function(t,e){var n=e[0];return void 0===n?this.getValues(t):("number"==typeof n&&(n=Array.prototype.slice.call(e)),this.setValues(t,n))},c.prototype.setValues=function(t,e){return this.space=t,this.convs={},this.convs[t]=e,this},c.prototype.getValues=function(t){var e=this.convs[t];if(!e){var n=this.space;e=i[n][t](this.convs[n]),this.convs[t]=e}return e},["rgb","hsl","hsv","cmyk","keyword"].forEach(function(t){c.prototype[t]=function(e){return this.routeSpace(t,arguments)}}),e.exports=i},{"./conversions":163}],165:[function(t,e,n){e.exports=function(t,e){e||(e=[0,""]),t=String(t);var n=parseFloat(t,10);return e[0]=n,e[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},{}],166:[function(t,e,n){var r=t("icosphere"),i=t("gl-vec3/normalize"),o=t("gl-vec3/scale"),a=t("./lib/fix-wrapped-uvs"),s=t("./lib/fix-pole-uvs");e.exports=function(t,e){t=void 0!==t?t:1;var n,u,c=r(void 0!==(e=e||{}).subdivisions?e.subdivisions:2),f=[],l=[];for(n=0;n<c.positions.length;n++){u=c.positions[n];var h=.5*(-Math.atan2(u[2],-u[0])/Math.PI+1),p=.5+Math.asin(u[1])/Math.PI;l.push([1-h,1-p])}var d={positions:c.positions,cells:c.cells,uvs:l,normals:f};for(s(d),a(d),n=0;n<d.positions.length;n++){var m=i([0,0,0],u=d.positions[n]);f.push(m),o(u,u,t)}return d}},{"./lib/fix-pole-uvs":167,"./lib/fix-wrapped-uvs":168,"gl-vec3/normalize":103,"gl-vec3/scale":109,icosphere:122}],167:[function(t,e,n){function r(t,e){for(var n=0;n<t.length;n++){if(Math.abs(t[n][1]-e)<=1e-4)return n}return-1}e.exports=function(t){var e=t.positions,n=t.cells,i=t.uvs,o=r(e,1),a=r(e,-1);if(-1===o||-1===a)return;for(var s=e.slice(),u=i.slice(),c=s.length-1,f=0;f<n.length;f++){var l=n[f],h=l[0],p=l[1],d=l[2];h===o?m(l,o,p,d):h===a&&m(l,a,p,d)}function m(t,n,r,o){var a=i[r],f=i[o];i[n][0]=(a[0]+f[0])/2,c++,s.push(e[n].slice()),u.push(i[n].slice()),t[0]=c}t.positions=s,t.uvs=u}},{}],168:[function(t,e,n){var r=t("./is-uv-seam"),i=.25,o=.75;e.exports=function(t){for(var e=t.positions,n=t.cells,a=t.uvs,s=e.slice(),u=a.slice(),c={},f=0;f<n.length;f++){var l=n[f],h=l[0],p=l[1],d=l[2];if(r(a,h,p,d)){var m=e[h],v=e[p],g=e[d],b=a[h],y=a[p],x=a[d];b[0]<i&&(h=w(c,h,b,m)),y[0]<i&&(p=w(c,p,y,v)),x[0]<i&&(d=w(c,d,x,g)),l[0]=h,l[1]=p,l[2]=d}}function w(t,e,n,r){if(e in t)return t[e];s.push(r.slice()),u.push(n.slice());var i=s.length-1;return t[e]=i,i}(function(t,e){for(var n=0;n<t.length;n++){var r=t[n],a=e[r[0]],s=e[r[1]],u=e[r[2]],c=Math.max(a[0],s[0],u[0]),f=Math.min(a[0],s[0],u[0]);c>o&&f<i&&(a[0]<i&&(a[0]+=1),s[0]<i&&(s[0]+=1),u[0]<i&&(u[0]+=1))}})(n,u),t.positions=s,t.uvs=u}},{"./is-uv-seam":169}],169:[function(t,e,n){var r=t("gl-vec2/cross"),i=t("gl-vec2/subtract"),o=[0,0,0],a=[0,0,0];e.exports=function(t,e,n,s){var u=t[e],c=t[s];return i(o,t[n],u),i(a,c,u),r(o,o,a),o[2]<0}},{"gl-vec2/cross":73,"gl-vec2/subtract":74}],170:[function(t,e,n){e.exports=function(t){t=void 0!==t?t:1,Array.isArray(t)||(t=[t,t]);var e=[[-t[0],-t[1],0],[t[0],-t[1],0],[t[0],t[1],0],[-t[0],t[1],0]],n=[0,0,-1],r=[n.slice(),n.slice(),n.slice(),n.slice()];return{positions:e,cells:[[0,1,2],[2,3,0]],uvs:[[0,0],[1,0],[1,1],[0,1]],normals:r}}},{}],171:[function(t,e,n){e.exports=t("gl-quat/slerp")},{"gl-quat/slerp":72}],172:[function(t,e,n){var r,i;r=this,i=function(){function t(t,e){this.id=q++,this.type=t,this.data=e}function e(t){return"["+function t(e){if(0===e.length)return[];var n=e.charAt(0),r=e.charAt(e.length-1);if(1<e.length&&n===r&&('"'===n||"'"===n))return['"'+e.substr(1,e.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(n=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(e))return t(e.substr(0,n.index)).concat(t(n[1])).concat(t(e.substr(n.index+n[0].length)));if(1===(n=e.split(".")).length)return['"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(e=[],r=0;r<n.length;++r)e=e.concat(t(n[r]));return e}(t).join("][")+"]"}function n(t){return"string"==typeof t?t.split():t}function r(t){return"string"==typeof t?document.querySelector(t):t}function i(t){var e,i,o,a,s=t||{};t={};var u=[],c=[],f="undefined"==typeof window?1:window.devicePixelRatio,l=!1,h=function(t){},p=function(){};if("string"==typeof s?e=document.querySelector(s):"object"==typeof s&&("string"==typeof s.nodeName&&"function"==typeof s.appendChild&&"function"==typeof s.getBoundingClientRect?e=s:"function"==typeof s.drawArrays||"function"==typeof s.drawElements?o=(a=s).canvas:("gl"in s?a=s.gl:"canvas"in s?o=r(s.canvas):"container"in s&&(i=r(s.container)),"attributes"in s&&(t=s.attributes),"extensions"in s&&(u=n(s.extensions)),"optionalExtensions"in s&&(c=n(s.optionalExtensions)),"onDone"in s&&(h=s.onDone),"profile"in s&&(l=!!s.profile),"pixelRatio"in s&&(f=+s.pixelRatio))),e&&("canvas"===e.nodeName.toLowerCase()?o=e:i=e),!a){if(!o){if(!(e=function(t,e,n){function r(){var e=window.innerWidth,r=window.innerHeight;t!==document.body&&(e=(r=t.getBoundingClientRect()).right-r.left,r=r.bottom-r.top),i.width=n*e,i.height=n*r,z(i.style,{width:e+"px",height:r+"px"})}var i=document.createElement("canvas");return z(i.style,{border:0,margin:0,padding:0,top:0,left:0}),t.appendChild(i),t===document.body&&(i.style.position="absolute",z(t.style,{margin:0,padding:0})),window.addEventListener("resize",r,!1),r(),{canvas:i,onDestroy:function(){window.removeEventListener("resize",r),t.removeChild(i)}}}(i||document.body,0,f)))return null;o=e.canvas,p=e.onDestroy}a=function(t,e){function n(n){try{return t.getContext(n,e)}catch(t){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}(o,t)}return a?{gl:a,canvas:o,container:i,extensions:u,optionalExtensions:c,pixelRatio:f,profile:l,onDone:h,onDestroy:p}:(p(),h("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function o(t,e){for(var n=Array(t),r=0;r<t;++r)n[r]=e(r);return n}function a(t){var e,n;return e=(65535<t)<<4,e|=n=(255<(t>>>=e))<<3,(e|=n=(15<(t>>>=n))<<2)|(n=(3<(t>>>=n))<<1)|t>>>n>>1}function s(){function t(t){t:{for(var e=16;268435456>=e;e*=16)if(t<=e){t=e;break t}t=0}return 0<(e=n[a(t)>>2]).length?e.pop():new ArrayBuffer(t)}function e(t){n[a(t.byteLength)>>2].push(t)}var n=o(8,function(){return[]});return{alloc:t,free:e,allocType:function(e,n){var r=null;switch(e){case 5120:r=new Int8Array(t(n),0,n);break;case 5121:r=new Uint8Array(t(n),0,n);break;case 5122:r=new Int16Array(t(2*n),0,n);break;case 5123:r=new Uint16Array(t(2*n),0,n);break;case 5124:r=new Int32Array(t(4*n),0,n);break;case 5125:r=new Uint32Array(t(4*n),0,n);break;case 5126:r=new Float32Array(t(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r},freeType:function(t){e(t.buffer)}}}function u(t){return!!t&&"object"==typeof t&&Array.isArray(t.shape)&&Array.isArray(t.stride)&&"number"==typeof t.offset&&t.shape.length===t.stride.length&&(Array.isArray(t.data)||W(t.data))}function c(t,e,n,r,i,o){for(var a=0;a<e;++a)for(var s=t[a],u=0;u<n;++u)for(var c=s[u],f=0;f<r;++f)i[o++]=c[f]}function f(t){return 0|K[Object.prototype.toString.call(t)]}function l(t,e){for(var n=0;n<e.length;++n)t[n]=e[n]}function h(t,e,n,r,i,o,a){for(var s=0,u=0;u<n;++u)for(var c=0;c<r;++c)t[s++]=e[i*u+o*c+a]}function p(t,e,n,r){function i(e){this.id=c++,this.buffer=t.createBuffer(),this.type=e,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,n.profile&&(this.stats={size:0})}function o(e,n,r){e.byteLength=n.byteLength,t.bufferData(e.type,n,r)}function a(t,e,n,r,i,a){if(t.usage=n,Array.isArray(e)){if(t.dtype=r||5126,0<e.length)if(Array.isArray(e[0])){i=tt(e);for(var s=r=1;s<i.length;++s)r*=i[s];t.dimension=r,o(t,e=$(e,i,t.dtype),n),a?t.persistentData=e:V.freeType(e)}else"number"==typeof e[0]?(t.dimension=i,l(i=V.allocType(t.dtype,e.length),e),o(t,i,n),a?t.persistentData=i:V.freeType(i)):W(e[0])&&(t.dimension=e[0].length,t.dtype=r||f(e[0])||5126,o(t,e=$(e,[e.length,e[0].length],t.dtype),n),a?t.persistentData=e:V.freeType(e))}else if(W(e))t.dtype=r||f(e),t.dimension=i,o(t,e,n),a&&(t.persistentData=new Uint8Array(new Uint8Array(e.buffer)));else if(u(e)){var c=e.stride,p=(s=e.offset,0),d=0,m=0,v=0;1===(i=e.shape).length?(p=i[0],d=1,m=c[0],v=0):2===i.length&&(p=i[0],d=i[1],m=c[0],v=c[1]),t.dtype=r||f(e.data)||5126,t.dimension=d,h(i=V.allocType(t.dtype,p*d),e.data,p,d,m,v,s),o(t,i,n),a?t.persistentData=i:V.freeType(i)}}function s(n){e.bufferCount--;for(var i=0;i<r.state.length;++i){var o=r.state[i];o.buffer===n&&(t.disableVertexAttribArray(i),o.buffer=null)}t.deleteBuffer(n.buffer),n.buffer=null,delete p[n.id]}var c=0,p={};i.prototype.bind=function(){t.bindBuffer(this.type,this.buffer)},i.prototype.destroy=function(){s(this)};var d=[];return n.profile&&(e.getTotalBufferSize=function(){var t=0;return Object.keys(p).forEach(function(e){t+=p[e].stats.size}),t}),{create:function(r,o,c,d){function m(e){var r=35044,i=null,o=0,s=0,c=1;return Array.isArray(e)||W(e)||u(e)?i=e:"number"==typeof e?o=0|e:e&&("data"in e&&(i=e.data),"usage"in e&&(r=J[e.usage]),"type"in e&&(s=Z[e.type]),"dimension"in e&&(c=0|e.dimension),"length"in e&&(o=0|e.length)),v.bind(),i?a(v,i,r,s,c,d):(o&&t.bufferData(v.type,o,r),v.dtype=s||5121,v.usage=r,v.dimension=c,v.byteLength=o),n.profile&&(v.stats.size=v.byteLength*et[v.dtype]),m}e.bufferCount++;var v=new i(o);return p[v.id]=v,c||m(r),m._reglType="buffer",m._buffer=v,m.subdata=function(e,n){var r,i=0|(n||0);if(v.bind(),W(e))t.bufferSubData(v.type,i,e);else if(Array.isArray(e)){if(0<e.length)if("number"==typeof e[0]){var o=V.allocType(v.dtype,e.length);l(o,e),t.bufferSubData(v.type,i,o),V.freeType(o)}else(Array.isArray(e[0])||W(e[0]))&&(r=tt(e),o=$(e,r,v.dtype),t.bufferSubData(v.type,i,o),V.freeType(o))}else if(u(e)){var a=e.stride,s=o=0,c=0,p=0;1===(r=e.shape).length?(o=r[0],s=1,c=a[0],p=0):2===r.length&&(o=r[0],s=r[1],c=a[0],p=a[1]),r=Array.isArray(e.data)?v.dtype:f(e.data),h(r=V.allocType(r,o*s),e.data,o,s,c,p,e.offset),t.bufferSubData(v.type,i,r),V.freeType(r)}return m},n.profile&&(m.stats=v.stats),m.destroy=function(){s(v)},m},createStream:function(t,e){var n=d.pop();return n||(n=new i(t)),n.bind(),a(n,e,35040,0,1,!1),n},destroyStream:function(t){d.push(t)},clear:function(){X(p).forEach(s),d.forEach(s)},getBuffer:function(t){return t&&t._buffer instanceof i?t._buffer:null},restore:function(){X(p).forEach(function(e){e.buffer=t.createBuffer(),t.bindBuffer(e.type,e.buffer),t.bufferData(e.type,e.persistentData||e.byteLength,e.usage)})},_initBuffer:a}}function d(t,e,n,r){function i(t){this.id=c++,s[this.id]=this,this.buffer=t,this.primType=4,this.type=this.vertCount=0}function o(r,i,o,a,s,c,f){if(r.buffer.bind(),i){var l=f;f||W(i)&&(!u(i)||W(i.data))||(l=e.oes_element_index_uint?5125:5123),n._initBuffer(r.buffer,i,o,l,3)}else t.bufferData(34963,c,o),r.buffer.dtype=l||5121,r.buffer.usage=o,r.buffer.dimension=3,r.buffer.byteLength=c;if(l=f,!f){switch(r.buffer.dtype){case 5121:case 5120:l=5121;break;case 5123:case 5122:l=5123;break;case 5125:case 5124:l=5125}r.buffer.dtype=l}r.type=l,0>(i=s)&&(i=r.buffer.byteLength,5123===l?i>>=1:5125===l&&(i>>=2)),r.vertCount=i,i=a,0>a&&(i=4,1===(a=r.buffer.dimension)&&(i=0),2===a&&(i=1),3===a&&(i=4)),r.primType=i}function a(t){r.elementsCount--,delete s[t.id],t.buffer.destroy(),t.buffer=null}var s={},c=0,f={uint8:5121,uint16:5123};e.oes_element_index_uint&&(f.uint32=5125),i.prototype.bind=function(){this.buffer.bind()};var l=[];return{create:function(t,e){function s(t){if(t)if("number"==typeof t)c(t),l.primType=4,l.vertCount=0|t,l.type=5121;else{var e=null,n=35044,r=-1,i=-1,a=0,h=0;Array.isArray(t)||W(t)||u(t)?e=t:("data"in t&&(e=t.data),"usage"in t&&(n=J[t.usage]),"primitive"in t&&(r=nt[t.primitive]),"count"in t&&(i=0|t.count),"type"in t&&(h=f[t.type]),"length"in t?a=0|t.length:(a=i,5123===h||5122===h?a*=2:5125!==h&&5124!==h||(a*=4))),o(l,e,n,r,i,a,h)}else c(),l.primType=4,l.vertCount=0,l.type=5121;return s}var c=n.create(null,34963,!0),l=new i(c._buffer);return r.elementsCount++,s(t),s._reglType="elements",s._elements=l,s.subdata=function(t,e){return c.subdata(t,e),s},s.destroy=function(){a(l)},s},createStream:function(t){var e=l.pop();return e||(e=new i(n.create(null,34963,!0,!1)._buffer)),o(e,t,35040,-1,-1,0,0),e},destroyStream:function(t){l.push(t)},getElements:function(t){return"function"==typeof t&&t._elements instanceof i?t._elements:null},clear:function(){X(s).forEach(a)}}}function m(t){for(var e=V.allocType(5123,t.length),n=0;n<t.length;++n)if(isNaN(t[n]))e[n]=65535;else if(Infinity===t[n])e[n]=31744;else if(-Infinity===t[n])e[n]=64512;else{rt[0]=t[n];var r=(o=it[0])>>>31<<15,i=(o<<1>>>24)-127,o=o>>13&1023;e[n]=-24>i?r:-14>i?r+(o+1024>>-14-i):15<i?r+31744:r+(i+15<<10)+o}return e}function v(t){return Array.isArray(t)||W(t)}function g(t){return"[object "+t+"]"}function b(t){return Array.isArray(t)&&(0===t.length||"number"==typeof t[0])}function y(t){return!(!Array.isArray(t)||0===t.length||!v(t[0]))}function x(t){return Object.prototype.toString.call(t)}function w(t){if(!t)return!1;var e=x(t);return 0<=pt.indexOf(e)||(b(t)||y(t)||u(t))}function _(t,e){36193===t.type?(t.data=m(e),V.freeType(e)):t.data=e}function M(t,e,n,r,i,o){if(t=void 0!==mt[t]?mt[t]:st[t]*dt[e],o&&(t*=6),i){for(r=0;1<=n;)r+=t*n*n,n/=2;return r}return t*n*r}function A(t,e,n,r,i,o,a){function s(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function c(t,e){t.internalformat=e.internalformat,t.format=e.format,t.type=e.type,t.compressed=e.compressed,t.premultiplyAlpha=e.premultiplyAlpha,t.flipY=e.flipY,t.unpackAlignment=e.unpackAlignment,t.colorSpace=e.colorSpace,t.width=e.width,t.height=e.height,t.channels=e.channels}function f(t,e){if("object"==typeof e&&e){"premultiplyAlpha"in e&&(t.premultiplyAlpha=e.premultiplyAlpha),"flipY"in e&&(t.flipY=e.flipY),"alignment"in e&&(t.unpackAlignment=e.alignment),"colorSpace"in e&&(t.colorSpace=U[e.colorSpace]),"type"in e&&(t.type=H[e.type]);var n=t.width,r=t.height,i=t.channels,o=!1;"shape"in e?(n=e.shape[0],r=e.shape[1],3===e.shape.length&&(i=e.shape[2],o=!0)):("radius"in e&&(n=r=e.radius),"width"in e&&(n=e.width),"height"in e&&(r=e.height),"channels"in e&&(i=e.channels,o=!0)),t.width=0|n,t.height=0|r,t.channels=0|i,n=!1,"format"in e&&(r=t.internalformat=G[n=e.format],t.format=pt[r],n in H&&!("type"in e)&&(t.type=H[n]),n in Z&&(t.compressed=!0),n=!0),!o&&n?t.channels=st[t.format]:o&&!n&&t.channels!==at[t.format]&&(t.format=t.internalformat=at[t.channels])}}function l(e){t.pixelStorei(37440,e.flipY),t.pixelStorei(37441,e.premultiplyAlpha),t.pixelStorei(37443,e.colorSpace),t.pixelStorei(3317,e.unpackAlignment)}function h(){s.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function p(t,e){var n=null;if(w(e)?n=e:e&&(f(t,e),"x"in e&&(t.xOffset=0|e.x),"y"in e&&(t.yOffset=0|e.y),w(e.data)&&(n=e.data)),e.copy){var r=i.viewportWidth,o=i.viewportHeight;t.width=t.width||r-t.xOffset,t.height=t.height||o-t.yOffset,t.needsCopy=!0}else if(n){if(W(n))t.channels=t.channels||4,t.data=n,"type"in e||5121!==t.type||(t.type=0|K[Object.prototype.toString.call(n)]);else if(b(n)){switch(t.channels=t.channels||4,o=(r=n).length,t.type){case 5121:case 5123:case 5125:case 5126:(o=V.allocType(t.type,o)).set(r),t.data=o;break;case 36193:t.data=m(r)}t.alignment=1,t.needsFree=!0}else if(u(n)){r=n.data,Array.isArray(r)||5121!==t.type||(t.type=0|K[Object.prototype.toString.call(r)]);var a,s,c,l,h=n.stride;3===(o=n.shape).length?(c=o[2],l=h[2]):l=c=1,a=o[0],s=o[1],o=h[0],h=h[1],t.alignment=1,t.width=a,t.height=s,t.channels=c,t.format=t.internalformat=at[c],t.needsFree=!0,a=l,n=n.offset;for(var p=V.allocType(36193===t.type?5126:t.type,(c=t.width)*(l=t.height)*(s=t.channels)),d=0,g=0;g<l;++g)for(var M=0;M<c;++M)for(var A=0;A<s;++A)p[d++]=r[o*M+h*g+a*A+n];_(t,p)}else if(x(n)===ut||x(n)===ct)t.element=x(n)===ut?n:n.canvas,t.width=t.element.width,t.height=t.element.height,t.channels=4;else if(x(n)===ft)t.element=n,t.width=n.width,t.height=n.height,t.channels=4;else if(x(n)===lt)t.element=n,t.width=n.naturalWidth,t.height=n.naturalHeight,t.channels=4;else if(x(n)===ht)t.element=n,t.width=n.videoWidth,t.height=n.videoHeight,t.channels=4;else if(y(n)){for(r=t.width||n[0].length,o=t.height||n.length,h=t.channels,h=v(n[0][0])?h||n[0][0].length:h||1,a=Q.shape(n),c=1,l=0;l<a.length;++l)c*=a[l];c=V.allocType(36193===t.type?5126:t.type,c),Q.flatten(n,a,"",c),_(t,c),t.alignment=1,t.width=r,t.height=o,t.channels=h,t.format=t.internalformat=at[h],t.needsFree=!0}}else t.width=t.width||1,t.height=t.height||1,t.channels=t.channels||4}function d(e,n,i,o,a){var s=e.element,u=e.data,c=e.internalformat,f=e.format,h=e.type,p=e.width,d=e.height;l(e),s?t.texSubImage2D(n,a,i,o,f,h,s):e.compressed?t.compressedTexSubImage2D(n,a,i,o,c,p,d,u):e.needsCopy?(r(),t.copyTexSubImage2D(n,a,i,o,e.xOffset,e.yOffset,p,d)):t.texSubImage2D(n,a,i,o,p,d,f,h,u)}function g(){return dt.pop()||new h}function A(t){t.needsFree&&V.freeType(t.data),h.call(t),dt.push(t)}function E(){s.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function k(t,e,n){var r=t.images[0]=g();t.mipmask=1,r.width=t.width=e,r.height=t.height=n,r.channels=t.channels=4}function S(t,e){var n=null;if(w(e))c(n=t.images[0]=g(),t),p(n,e),t.mipmask=1;else if(f(t,e),Array.isArray(e.mipmap))for(var r=e.mipmap,i=0;i<r.length;++i)c(n=t.images[i]=g(),t),n.width>>=i,n.height>>=i,p(n,r[i]),t.mipmask|=1<<i;else c(n=t.images[0]=g(),t),p(n,e),t.mipmask=1;c(t,t.images[0])}function T(e,n){for(var i=e.images,o=0;o<i.length&&i[o];++o){var a=i[o],s=n,u=o,c=a.element,f=a.data,h=a.internalformat,p=a.format,d=a.type,m=a.width,v=a.height,g=a.channels;l(a),c?t.texImage2D(s,u,p,p,d,c):a.compressed?t.compressedTexImage2D(s,u,h,m,v,0,f):a.needsCopy?(r(),t.copyTexImage2D(s,u,p,a.xOffset,a.yOffset,m,v,0)):((a=!f)&&(f=V.zero.allocType(d,m*v*g)),t.texImage2D(s,u,p,m,v,0,p,d,f),a&&f&&V.zero.freeType(f))}}function R(){var t=mt.pop()||new E;s.call(t);for(var e=t.mipmask=0;16>e;++e)t.images[e]=null;return t}function C(t){for(var e=t.images,n=0;n<e.length;++n)e[n]&&A(e[n]),e[n]=null;mt.push(t)}function O(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function j(t,e){"min"in e&&(t.minFilter=Y[e.min],0<=ot.indexOf(t.minFilter)&&!("faces"in e)&&(t.genMipmaps=!0)),"mag"in e&&(t.magFilter=q[e.mag]);var n=t.wrapS,r=t.wrapT;if("wrap"in e){var i=e.wrap;"string"==typeof i?n=r=B[i]:Array.isArray(i)&&(n=B[i[0]],r=B[i[1]])}else"wrapS"in e&&(n=B[e.wrapS]),"wrapT"in e&&(r=B[e.wrapT]);if(t.wrapS=n,t.wrapT=r,"anisotropic"in e&&(t.anisotropic=e.anisotropic),"mipmap"in e){switch(n=!1,typeof e.mipmap){case"string":t.mipmapHint=N[e.mipmap],n=t.genMipmaps=!0;break;case"boolean":n=t.genMipmaps=e.mipmap;break;case"object":t.genMipmaps=!1,n=!0}!n||"min"in e||(t.minFilter=9984)}}function P(n,r){t.texParameteri(r,10241,n.minFilter),t.texParameteri(r,10240,n.magFilter),t.texParameteri(r,10242,n.wrapS),t.texParameteri(r,10243,n.wrapT),e.ext_texture_filter_anisotropic&&t.texParameteri(r,34046,n.anisotropic),n.genMipmaps&&(t.hint(33170,n.mipmapHint),t.generateMipmap(r))}function L(e){s.call(this),this.mipmask=0,this.internalformat=6408,this.id=vt++,this.refCount=1,this.target=e,this.texture=t.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new O,a.profile&&(this.stats={size:0})}function D(e){t.activeTexture(33984),t.bindTexture(e.target,e.texture)}function F(){var e=yt[0];e?t.bindTexture(e.target,e.texture):t.bindTexture(3553,null)}function I(e){var n=e.texture,r=e.unit,i=e.target;0<=r&&(t.activeTexture(33984+r),t.bindTexture(i,null),yt[r]=null),t.deleteTexture(n),e.texture=null,e.params=null,e.pixels=null,e.refCount=0,delete gt[e.id],o.textureCount--}var N={"don't care":4352,"dont care":4352,nice:4354,fast:4353},B={repeat:10497,clamp:33071,mirror:33648},q={nearest:9728,linear:9729},Y=z({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},q),U={none:0,browser:37444},H={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},G={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Z={};e.ext_srgb&&(G.srgb=35904,G.srgba=35906),e.oes_texture_float&&(H.float32=H.float=5126),e.oes_texture_half_float&&(H.float16=H["half float"]=36193),e.webgl_depth_texture&&(z(G,{depth:6402,"depth stencil":34041}),z(H,{uint16:5123,uint32:5125,"depth stencil":34042})),e.webgl_compressed_texture_s3tc&&z(Z,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),e.webgl_compressed_texture_atc&&z(Z,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),e.webgl_compressed_texture_pvrtc&&z(Z,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),e.webgl_compressed_texture_etc1&&(Z["rgb etc1"]=36196);var J=Array.prototype.slice.call(t.getParameter(34467));Object.keys(Z).forEach(function(t){var e=Z[t];0<=J.indexOf(e)&&(G[t]=e)});var $=Object.keys(G);n.textureFormats=$;var tt=[];Object.keys(G).forEach(function(t){tt[G[t]]=t});var et=[];Object.keys(H).forEach(function(t){et[H[t]]=t});var nt=[];Object.keys(q).forEach(function(t){nt[q[t]]=t});var rt=[];Object.keys(Y).forEach(function(t){rt[Y[t]]=t});var it=[];Object.keys(B).forEach(function(t){it[B[t]]=t});var pt=$.reduce(function(t,e){var n=G[e];return t[n]=6409===n||6406===n||6409===n||6410===n||6402===n||34041===n?n:32855===n||0<=e.indexOf("rgba")?6408:6407,t},{}),dt=[],mt=[],vt=0,gt={},bt=n.maxTextureUnits,yt=Array(bt).map(function(){return null});return z(L.prototype,{bind:function(){this.bindCount+=1;var e=this.unit;if(0>e){for(var n=0;n<bt;++n){var r=yt[n];if(r){if(0<r.bindCount)continue;r.unit=-1}yt[n]=this,e=n;break}a.profile&&o.maxTextureUnits<e+1&&(o.maxTextureUnits=e+1),this.unit=e,t.activeTexture(33984+e),t.bindTexture(this.target,this.texture)}return e},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&I(this)}}),a.profile&&(o.getTotalTextureSize=function(){var t=0;return Object.keys(gt).forEach(function(e){t+=gt[e].stats.size}),t}),{create2D:function(e,n){function r(t,e){var n=i.texInfo;O.call(n);var o=R();return"number"==typeof t?k(o,0|t,"number"==typeof e?0|e:0|t):t?(j(n,t),S(o,t)):k(o,1,1),n.genMipmaps&&(o.mipmask=(o.width<<1)-1),i.mipmask=o.mipmask,c(i,o),i.internalformat=o.internalformat,r.width=o.width,r.height=o.height,D(i),T(o,3553),P(n,3553),F(),C(o),a.profile&&(i.stats.size=M(i.internalformat,i.type,o.width,o.height,n.genMipmaps,!1)),r.format=tt[i.internalformat],r.type=et[i.type],r.mag=nt[n.magFilter],r.min=rt[n.minFilter],r.wrapS=it[n.wrapS],r.wrapT=it[n.wrapT],r}var i=new L(3553);return gt[i.id]=i,o.textureCount++,r(e,n),r.subimage=function(t,e,n,o){e|=0,n|=0,o|=0;var a=g();return c(a,i),a.width=0,a.height=0,p(a,t),a.width=a.width||(i.width>>o)-e,a.height=a.height||(i.height>>o)-n,D(i),d(a,3553,e,n,o),F(),A(a),r},r.resize=function(e,n){var o=0|e,s=0|n||o;if(o===i.width&&s===i.height)return r;r.width=i.width=o,r.height=i.height=s,D(i);for(var u,c=i.channels,f=i.type,l=0;i.mipmask>>l;++l){var h=o>>l,p=s>>l;if(!h||!p)break;u=V.zero.allocType(f,h*p*c),t.texImage2D(3553,l,i.format,h,p,0,i.format,i.type,u),u&&V.zero.freeType(u)}return F(),a.profile&&(i.stats.size=M(i.internalformat,i.type,o,s,!1,!1)),r},r._reglType="texture2d",r._texture=i,a.profile&&(r.stats=i.stats),r.destroy=function(){i.decRef()},r},createCube:function(e,n,r,i,s,u){function l(t,e,n,r,i,o){var s,u=h.texInfo;for(O.call(u),s=0;6>s;++s)m[s]=R();if("number"!=typeof t&&t){if("object"==typeof t)if(e)S(m[0],t),S(m[1],e),S(m[2],n),S(m[3],r),S(m[4],i),S(m[5],o);else if(j(u,t),f(h,t),"faces"in t)for(t=t.faces,s=0;6>s;++s)c(m[s],h),S(m[s],t[s]);else for(s=0;6>s;++s)S(m[s],t)}else for(t=0|t||1,s=0;6>s;++s)k(m[s],t,t);for(c(h,m[0]),h.mipmask=u.genMipmaps?(m[0].width<<1)-1:m[0].mipmask,h.internalformat=m[0].internalformat,l.width=m[0].width,l.height=m[0].height,D(h),s=0;6>s;++s)T(m[s],34069+s);for(P(u,34067),F(),a.profile&&(h.stats.size=M(h.internalformat,h.type,l.width,l.height,u.genMipmaps,!0)),l.format=tt[h.internalformat],l.type=et[h.type],l.mag=nt[u.magFilter],l.min=rt[u.minFilter],l.wrapS=it[u.wrapS],l.wrapT=it[u.wrapT],s=0;6>s;++s)C(m[s]);return l}var h=new L(34067);gt[h.id]=h,o.cubeCount++;var m=Array(6);return l(e,n,r,i,s,u),l.subimage=function(t,e,n,r,i){n|=0,r|=0,i|=0;var o=g();return c(o,h),o.width=0,o.height=0,p(o,e),o.width=o.width||(h.width>>i)-n,o.height=o.height||(h.height>>i)-r,D(h),d(o,34069+t,n,r,i),F(),A(o),l},l.resize=function(e){if((e|=0)!==h.width){l.width=h.width=e,l.height=h.height=e,D(h);for(var n=0;6>n;++n)for(var r=0;h.mipmask>>r;++r)t.texImage2D(34069+n,r,h.format,e>>r,e>>r,0,h.format,h.type,null);return F(),a.profile&&(h.stats.size=M(h.internalformat,h.type,l.width,l.height,!1,!0)),l}},l._reglType="textureCube",l._texture=h,a.profile&&(l.stats=h.stats),l.destroy=function(){h.decRef()},l},clear:function(){for(var e=0;e<bt;++e)t.activeTexture(33984+e),t.bindTexture(3553,null),yt[e]=null;X(gt).forEach(I),o.cubeCount=0,o.textureCount=0},getTexture:function(t){return null},restore:function(){for(var e=0;e<bt;++e){var n=yt[e];n&&(n.bindCount=0,n.unit=-1,yt[e]=null)}X(gt).forEach(function(e){e.texture=t.createTexture(),t.bindTexture(e.target,e.texture);for(var n=0;32>n;++n)if(0!=(e.mipmask&1<<n))if(3553===e.target)t.texImage2D(3553,n,e.internalformat,e.width>>n,e.height>>n,0,e.internalformat,e.type,null);else for(var r=0;6>r;++r)t.texImage2D(34069+r,n,e.internalformat,e.width>>n,e.height>>n,0,e.internalformat,e.type,null);P(e.texInfo,e.target)})}}}function E(t,e,n,r,i,o){function a(t,e,n){this.target=t,this.texture=e,this.renderbuffer=n;var r=t=0;e?(t=e.width,r=e.height):n&&(t=n.width,r=n.height),this.width=t,this.height=r}function s(t){t&&(t.texture&&t.texture._texture.decRef(),t.renderbuffer&&t.renderbuffer._renderbuffer.decRef())}function u(t,e,n){t&&(t.texture?t.texture._texture.refCount+=1:t.renderbuffer._renderbuffer.refCount+=1)}function c(e,n){n&&(n.texture?t.framebufferTexture2D(36160,e,n.target,n.texture._texture.texture,0):t.framebufferRenderbuffer(36160,e,36161,n.renderbuffer._renderbuffer.renderbuffer))}function f(t){var e=3553,n=null,r=null,i=t;return"object"==typeof t&&(i=t.data,"target"in t&&(e=0|t.target)),"texture2d"===(t=i._reglType)?n=i:"textureCube"===t?n=i:"renderbuffer"===t&&(r=i,e=36161),new a(e,n,r)}function l(t,e,n,o,s){return n?((t=r.create2D({width:t,height:e,format:o,type:s}))._texture.refCount=0,new a(3553,t,null)):((t=i.create({width:t,height:e,format:o}))._renderbuffer.refCount=0,new a(36161,null,t))}function h(t){return t&&(t.texture||t.renderbuffer)}function p(t,e,n){t&&(t.texture?t.texture.resize(e,n):t.renderbuffer&&t.renderbuffer.resize(e,n),t.width=e,t.height=n)}function d(){this.id=M++,A[this.id]=this,this.framebuffer=t.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function m(t){t.colorAttachments.forEach(s),s(t.depthAttachment),s(t.stencilAttachment),s(t.depthStencilAttachment)}function v(e){t.deleteFramebuffer(e.framebuffer),e.framebuffer=null,o.framebufferCount--,delete A[e.id]}function g(e){var r;t.bindFramebuffer(36160,e.framebuffer);var i=e.colorAttachments;for(r=0;r<i.length;++r)c(36064+r,i[r]);for(r=i.length;r<n.maxColorAttachments;++r)t.framebufferTexture2D(36160,36064+r,3553,null,0);t.framebufferTexture2D(36160,33306,3553,null,0),t.framebufferTexture2D(36160,36096,3553,null,0),t.framebufferTexture2D(36160,36128,3553,null,0),c(36096,e.depthAttachment),c(36128,e.stencilAttachment),c(33306,e.depthStencilAttachment),t.checkFramebufferStatus(36160),t.isContextLost(),t.bindFramebuffer(36160,y.next?y.next.framebuffer:null),y.cur=y.next,t.getError()}function b(t,e){function n(t,e){var i,o=0,a=0,s=!0,c=!0;i=null;var p=!0,d="rgba",v="uint8",b=1,y=null,_=null,M=null,A=!1;"number"==typeof t?(o=0|t,a=0|e||o):t?("shape"in t?(o=(a=t.shape)[0],a=a[1]):("radius"in t&&(o=a=t.radius),"width"in t&&(o=t.width),"height"in t&&(a=t.height)),("color"in t||"colors"in t)&&(i=t.color||t.colors,Array.isArray(i)),i||("colorCount"in t&&(b=0|t.colorCount),"colorTexture"in t&&(p=!!t.colorTexture,d="rgba4"),"colorType"in t&&(v=t.colorType,!p)&&("half float"===v||"float16"===v?d="rgba16f":"float"!==v&&"float32"!==v||(d="rgba32f")),"colorFormat"in t&&(0<=x.indexOf(d=t.colorFormat)?p=!0:0<=w.indexOf(d)&&(p=!1))),("depthTexture"in t||"depthStencilTexture"in t)&&(A=!(!t.depthTexture&&!t.depthStencilTexture)),"depth"in t&&("boolean"==typeof t.depth?s=t.depth:(y=t.depth,c=!1)),"stencil"in t&&("boolean"==typeof t.stencil?c=t.stencil:(_=t.stencil,s=!1)),"depthStencil"in t&&("boolean"==typeof t.depthStencil?s=c=t.depthStencil:(M=t.depthStencil,c=s=!1))):o=a=1;var E=null,k=null,S=null,T=null;if(Array.isArray(i))E=i.map(f);else if(i)E=[f(i)];else for(E=Array(b),i=0;i<b;++i)E[i]=l(o,a,p,d,v);for(o=o||E[0].width,a=a||E[0].height,y?k=f(y):s&&!c&&(k=l(o,a,A,"depth","uint32")),_?S=f(_):c&&!s&&(S=l(o,a,!1,"stencil","uint8")),M?T=f(M):!y&&!_&&c&&s&&(T=l(o,a,A,"depth stencil","depth stencil")),s=null,i=0;i<E.length;++i)u(E[i]),E[i]&&E[i].texture&&(c=bt[E[i].texture._texture.format]*yt[E[i].texture._texture.type],null===s&&(s=c));return u(k),u(S),u(T),m(r),r.width=o,r.height=a,r.colorAttachments=E,r.depthAttachment=k,r.stencilAttachment=S,r.depthStencilAttachment=T,n.color=E.map(h),n.depth=h(k),n.stencil=h(S),n.depthStencil=h(T),n.width=r.width,n.height=r.height,g(r),n}var r=new d;return o.framebufferCount++,n(t,e),z(n,{resize:function(t,e){var i=Math.max(0|t,1),o=Math.max(0|e||i,1);if(i===r.width&&o===r.height)return n;for(var a=r.colorAttachments,s=0;s<a.length;++s)p(a[s],i,o);return p(r.depthAttachment,i,o),p(r.stencilAttachment,i,o),p(r.depthStencilAttachment,i,o),r.width=n.width=i,r.height=n.height=o,g(r),n},_reglType:"framebuffer",_framebuffer:r,destroy:function(){v(r),m(r)},use:function(t){y.setFBO({framebuffer:n},t)}})}var y={cur:null,next:null,dirty:!1,setFBO:null},x=["rgba"],w=["rgba4","rgb565","rgb5 a1"];e.ext_srgb&&w.push("srgba"),e.ext_color_buffer_half_float&&w.push("rgba16f","rgb16f"),e.webgl_color_buffer_float&&w.push("rgba32f");var _=["uint8"];e.oes_texture_half_float&&_.push("half float","float16"),e.oes_texture_float&&_.push("float","float32");var M=0,A={};return z(y,{getFramebuffer:function(t){return"function"==typeof t&&"framebuffer"===t._reglType&&(t=t._framebuffer)instanceof d?t:null},create:b,createCube:function(t){function e(t){var i,o={color:null},a=0,s=null;i="rgba";var u="uint8",c=1;if("number"==typeof t?a=0|t:t?("shape"in t?a=t.shape[0]:("radius"in t&&(a=0|t.radius),"width"in t?a=0|t.width:"height"in t&&(a=0|t.height)),("color"in t||"colors"in t)&&(s=t.color||t.colors,Array.isArray(s)),s||("colorCount"in t&&(c=0|t.colorCount),"colorType"in t&&(u=t.colorType),"colorFormat"in t&&(i=t.colorFormat)),"depth"in t&&(o.depth=t.depth),"stencil"in t&&(o.stencil=t.stencil),"depthStencil"in t&&(o.depthStencil=t.depthStencil)):a=1,s)if(Array.isArray(s))for(t=[],i=0;i<s.length;++i)t[i]=s[i];else t=[s];else for(t=Array(c),s={radius:a,format:i,type:u},i=0;i<c;++i)t[i]=r.createCube(s);for(o.color=Array(t.length),i=0;i<t.length;++i)c=t[i],a=a||c.width,o.color[i]={target:34069,data:t[i]};for(i=0;6>i;++i){for(c=0;c<t.length;++c)o.color[c].target=34069+i;0<i&&(o.depth=n[0].depth,o.stencil=n[0].stencil,o.depthStencil=n[0].depthStencil),n[i]?n[i](o):n[i]=b(o)}return z(e,{width:a,height:a,color:t})}var n=Array(6);return e(t),z(e,{faces:n,resize:function(t){var r=0|t;if(r===e.width)return e;var i=e.color;for(t=0;t<i.length;++t)i[t].resize(r);for(t=0;6>t;++t)n[t].resize(r);return e.width=e.height=r,e},_reglType:"framebufferCube",destroy:function(){n.forEach(function(t){t.destroy()})}})},clear:function(){X(A).forEach(v)},restore:function(){y.cur=null,y.next=null,y.dirty=!0,X(A).forEach(function(e){e.framebuffer=t.createFramebuffer(),g(e)})}})}function k(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function S(t,e,n,r){function i(t,e,n,r){this.name=t,this.id=e,this.location=n,this.info=r}function o(t,e){for(var n=0;n<t.length;++n)if(t[n].id===e.id)return void(t[n].location=e.location);t.push(e)}function a(n,r,i){if(!(a=(i=35632===n?c:f)[r])){var o=e.str(r),a=t.createShader(n);t.shaderSource(a,o),t.compileShader(a),i[r]=a}return a}function s(t,e){this.id=p++,this.fragId=t,this.vertId=e,this.program=null,this.uniforms=[],this.attributes=[],r.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function u(n,s){var u,c;u=a(35632,n.fragId),c=a(35633,n.vertId);var f=n.program=t.createProgram();t.attachShader(f,u),t.attachShader(f,c),t.linkProgram(f);var l=t.getProgramParameter(f,35718);r.profile&&(n.stats.uniformsCount=l);var h=n.uniforms;for(u=0;u<l;++u)if(c=t.getActiveUniform(f,u))if(1<c.size)for(var p=0;p<c.size;++p){var d=c.name.replace("[0]","["+p+"]");o(h,new i(d,e.id(d),t.getUniformLocation(f,d),c))}else o(h,new i(c.name,e.id(c.name),t.getUniformLocation(f,c.name),c));for(l=t.getProgramParameter(f,35721),r.profile&&(n.stats.attributesCount=l),h=n.attributes,u=0;u<l;++u)(c=t.getActiveAttrib(f,u))&&o(h,new i(c.name,e.id(c.name),t.getAttribLocation(f,c.name),c))}var c={},f={},l={},h=[],p=0;return r.profile&&(n.getMaxUniformsCount=function(){var t=0;return h.forEach(function(e){e.stats.uniformsCount>t&&(t=e.stats.uniformsCount)}),t},n.getMaxAttributesCount=function(){var t=0;return h.forEach(function(e){e.stats.attributesCount>t&&(t=e.stats.attributesCount)}),t}),{clear:function(){var e=t.deleteShader.bind(t);X(c).forEach(e),c={},X(f).forEach(e),f={},h.forEach(function(e){t.deleteProgram(e.program)}),h.length=0,l={},n.shaderCount=0},program:function(t,e,r){var i=l[e];i||(i=l[e]={});var o=i[t];return o||(o=new s(e,t),n.shaderCount++,u(o),i[t]=o,h.push(o)),o},restore:function(){c={},f={};for(var t=0;t<h.length;++t)u(h[t])},shader:a,frag:-1,vert:-1}}function T(t,e,n,r,i,o,a){function s(i){var o;o=null===e.next?5121:e.next.colorAttachments[0].texture._texture.type;var a=0,s=0,u=r.framebufferWidth,c=r.framebufferHeight,f=null;return W(i)?f=i:i&&(a=0|i.x,s=0|i.y,u=0|(i.width||r.framebufferWidth-a),c=0|(i.height||r.framebufferHeight-s),f=i.data||null),n(),i=u*c*4,f||(5121===o?f=new Uint8Array(i):5126===o&&(f=f||new Float32Array(i))),t.pixelStorei(3333,4),t.readPixels(a,s,u,c,6408,o,f),f}return function(t){return t&&"framebuffer"in t?function(t){var n;return e.setFBO({framebuffer:t.framebuffer},function(){n=s(t)}),n}(t):s(t)}}function R(t){return Array.prototype.slice.call(t)}function C(t){return R(t).join("")}function O(){function t(){var t=[],e=[];return z(function(){t.push.apply(t,R(arguments))},{def:function(){var r="v"+n++;return e.push(r),0<arguments.length&&(t.push(r,"="),t.push.apply(t,R(arguments)),t.push(";")),r},toString:function(){return C([0<e.length?"var "+e+";":"",C(t)])}})}function e(){function e(t,e){r(t,e,"=",n.def(t,e),";")}var n=t(),r=t(),i=n.toString,o=r.toString;return z(function(){n.apply(n,R(arguments))},{def:n.def,entry:n,exit:r,save:e,set:function(t,r,i){e(t,r),n(t,r,"=",i,";")},toString:function(){return i()+o()}})}var n=0,r=[],i=[],o=t(),a={};return{global:o,link:function(t){for(var e=0;e<i.length;++e)if(i[e]===t)return r[e];return e="g"+n++,r.push(e),i.push(t),e},block:t,proc:function(t,n){function r(){var t="a"+i.length;return i.push(t),t}var i=[];n=n||0;for(var o=0;o<n;++o)r();var s=(o=e()).toString;return a[t]=z(o,{arg:r,toString:function(){return C(["function(",i.join(),"){",s(),"}"])}})},scope:e,cond:function(){var t=C(arguments),n=e(),r=e(),i=n.toString,o=r.toString;return z(n,{then:function(){return n.apply(n,R(arguments)),this},else:function(){return r.apply(r,R(arguments)),this},toString:function(){var e=o();return e&&(e="else{"+e+"}"),C(["if(",t,"){",i(),"}",e])}})},compile:function(){var t=['"use strict";',o,"return {"];Object.keys(a).forEach(function(e){t.push('"',e,'":',a[e].toString(),",")}),t.push("}");var e=C(t).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,r.concat(e)).apply(null,i)}}}function j(t){return Array.isArray(t)||W(t)||u(t)}function P(t){return t.sort(function(t,e){return"viewport"===t?-1:"viewport"===e?1:t<e?-1:1})}function L(t,e,n,r){this.thisDep=t,this.contextDep=e,this.propDep=n,this.append=r}function D(t){return t&&!(t.thisDep||t.contextDep||t.propDep)}function F(t){return new L(!1,!1,!1,t)}function I(t,e){var n=t.type;return 0===n?new L(!0,1<=(n=t.data.length),2<=n,e):4===n?new L((n=t.data).thisDep,n.contextDep,n.propDep,e):new L(3===n,2===n,1===n,e)}function N(t,e,n,r,i,a,s,u,c,f,l,h,p,d,m){function g(t){return t.replace(".","_")}function b(t,e,n){var r=g(t);rt.push(t),et[r]=tt[r]=!!n,it[r]=e}function y(t,e,n){var r=g(t);rt.push(t),Array.isArray(n)?(tt[r]=n.slice(),et[r]=n.slice()):tt[r]=et[r]=n,ot[r]=e}function x(){var t=O(),n=t.link,r=t.global;t.id=ut++,t.batchId="0";var i=n(at),o=t.shared={props:"a0"};Object.keys(at).forEach(function(t){o[t]=r.def(i,".",t)});var a=t.next={},s=t.current={};Object.keys(ot).forEach(function(t){Array.isArray(tt[t])&&(a[t]=r.def(o.next,".",t),s[t]=r.def(o.current,".",t))});var u=t.constants={};Object.keys(st).forEach(function(t){u[t]=r.def(JSON.stringify(st[t]))}),t.invoke=function(e,r){switch(r.type){case 0:var i=["this",o.context,o.props,t.batchId];return e.def(n(r.data),".call(",i.slice(0,Math.max(r.data.length+1,4)),")");case 1:return e.def(o.props,r.data);case 2:return e.def(o.context,r.data);case 3:return e.def("this",r.data);case 4:return r.data.append(t,e),r.data.ref}},t.attribCache={};var c={};return t.scopeAttrib=function(t){if((t=e.id(t))in c)return c[t];var r=f.scope[t];return r||(r=f.scope[t]=new Q),c[t]=n(r)},t}function w(t,e){var n=t.static,r=t.dynamic;if("framebuffer"in n){var i=n.framebuffer;return i?(i=u.getFramebuffer(i),F(function(t,e){var n=t.link(i),r=t.shared;return e.set(r.framebuffer,".next",n),e.set(r=r.context,".framebufferWidth",n+".width"),e.set(r,".framebufferHeight",n+".height"),n})):F(function(t,e){var n=t.shared;return e.set(n.framebuffer,".next","null"),e.set(n=n.context,".framebufferWidth",n+".drawingBufferWidth"),e.set(n,".framebufferHeight",n+".drawingBufferHeight"),"null"})}if("framebuffer"in r){var o=r.framebuffer;return I(o,function(t,e){var n=t.invoke(e,o),r=t.shared,i=r.framebuffer;n=e.def(i,".getFramebuffer(",n,")");return e.set(i,".next",n),e.set(r=r.context,".framebufferWidth",n+"?"+n+".width:"+r+".drawingBufferWidth"),e.set(r,".framebufferHeight",n+"?"+n+".height:"+r+".drawingBufferHeight"),n})}return null}function _(t){function n(t){if(t in r){var n=e.id(r[t]);return(t=F(function(){return n})).id=n,t}if(t in i){var o=i[t];return I(o,function(t,e){var n=t.invoke(e,o);return e.def(t.shared.strings,".id(",n,")")})}return null}var r=t.static,i=t.dynamic,o=n("frag"),a=n("vert"),s=null;return D(o)&&D(a)?(s=l.program(a.id,o.id),t=F(function(t,e){return t.link(s)})):t=new L(o&&o.thisDep||a&&a.thisDep,o&&o.contextDep||a&&a.contextDep,o&&o.propDep||a&&a.propDep,function(t,e){var n,r,i=t.shared.shader;return n=o?o.append(t,e):e.def(i,".","frag"),r=a?a.append(t,e):e.def(i,".","vert"),e.def(i+".program("+r+","+n+")")}),{frag:o,vert:a,progVar:t,program:s}}function M(t,e){function n(t,e){if(t in r){var n=0|r[t];return F(function(t,r){return e&&(t.OFFSET=n),n})}if(t in i){var a=i[t];return I(a,function(t,n){var r=t.invoke(n,a);return e&&(t.OFFSET=r),r})}return e&&o?F(function(t,e){return t.OFFSET="0",0}):null}var r=t.static,i=t.dynamic,o=function(){if("elements"in r){var t=r.elements;j(t)?t=a.getElements(a.create(t,!0)):t&&(t=a.getElements(t));var e=F(function(e,n){if(t){var r=e.link(t);return e.ELEMENTS=r}return e.ELEMENTS=null});return e.value=t,e}if("elements"in i){var n=i.elements;return I(n,function(t,e){var r=(i=t.shared).isBufferArgs,i=i.elements,o=t.invoke(e,n),a=e.def("null");r=e.def(r,"(",o,")"),o=t.cond(r).then(a,"=",i,".createStream(",o,");").else(a,"=",i,".getElements(",o,");");return e.entry(o),e.exit(t.cond(r).then(i,".destroyStream(",a,");")),t.ELEMENTS=a})}return null}(),s=n("offset",!0);return{elements:o,primitive:function(){if("primitive"in r){var t=r.primitive;return F(function(e,n){return nt[t]})}if("primitive"in i){var e=i.primitive;return I(e,function(t,n){var r=t.constants.primTypes,i=t.invoke(n,e);return n.def(r,"[",i,"]")})}return o?D(o)?F(o.value?function(t,e){return e.def(t.ELEMENTS,".primType")}:function(){return 4}):new L(o.thisDep,o.contextDep,o.propDep,function(t,e){var n=t.ELEMENTS;return e.def(n,"?",n,".primType:",4)}):null}(),count:function(){if("count"in r){var t=0|r.count;return F(function(){return t})}if("count"in i){var e=i.count;return I(e,function(t,n){return t.invoke(n,e)})}return o?D(o)?o?s?new L(s.thisDep,s.contextDep,s.propDep,function(t,e){return e.def(t.ELEMENTS,".vertCount-",t.OFFSET)}):F(function(t,e){return e.def(t.ELEMENTS,".vertCount")}):F(function(){return-1}):new L(o.thisDep||s.thisDep,o.contextDep||s.contextDep,o.propDep||s.propDep,function(t,e){var n=t.ELEMENTS;return t.OFFSET?e.def(n,"?",n,".vertCount-",t.OFFSET,":-1"):e.def(n,"?",n,".vertCount:-1")}):null}(),instances:n("instances",!1),offset:s}}function A(t,n){var r=t.static,o=t.dynamic,a={};return Object.keys(r).forEach(function(t){var n=r[t],o=e.id(t),s=new Q;if(j(n))s.state=1,s.buffer=i.getBuffer(i.create(n,34962,!1,!0)),s.type=0;else if(c=i.getBuffer(n))s.state=1,s.buffer=c,s.type=0;else if("constant"in n){var u=n.constant;s.buffer="null",s.state=2,"number"==typeof u?s.x=u:xt.forEach(function(t,e){e<u.length&&(s[t]=u[e])})}else{var c=j(n.buffer)?i.getBuffer(i.create(n.buffer,34962,!1,!0)):i.getBuffer(n.buffer),f=0|n.offset,l=0|n.stride,h=0|n.size,p=!!n.normalized,d=0;"type"in n&&(d=Z[n.type]),n=0|n.divisor,s.buffer=c,s.state=1,s.size=h,s.normalized=p,s.type=d||c.dtype,s.offset=f,s.stride=l,s.divisor=n}a[t]=F(function(t,e){var n=t.attribCache;if(o in n)return n[o];var r={isStream:!1};return Object.keys(s).forEach(function(t){r[t]=s[t]}),s.buffer&&(r.buffer=t.link(s.buffer),r.type=r.type||r.buffer+".dtype"),n[o]=r})}),Object.keys(o).forEach(function(t){var e=o[t];a[t]=I(e,function(t,n){function r(t){n(u[t],"=",i,".",t,"|0;")}var i=t.invoke(n,e),o=t.shared,a=o.isBufferArgs,s=o.buffer,u={isStream:n.def(!1)},c=new Q;c.state=1,Object.keys(c).forEach(function(t){u[t]=n.def(""+c[t])});var f=u.buffer,l=u.type;return n("if(",a,"(",i,")){",u.isStream,"=true;",f,"=",s,".createStream(",34962,",",i,");",l,"=",f,".dtype;","}else{",f,"=",s,".getBuffer(",i,");","if(",f,"){",l,"=",f,".dtype;",'}else if("constant" in ',i,"){",u.state,"=",2,";","if(typeof "+i+'.constant === "number"){',u[xt[0]],"=",i,".constant;",xt.slice(1).map(function(t){return u[t]}).join("="),"=0;","}else{",xt.map(function(t,e){return u[t]+"="+i+".constant.length>"+e+"?"+i+".constant["+e+"]:0;"}).join(""),"}}else{","if(",a,"(",i,".buffer)){",f,"=",s,".createStream(",34962,",",i,".buffer);","}else{",f,"=",s,".getBuffer(",i,".buffer);","}",l,'="type" in ',i,"?",o.glTypes,"[",i,".type]:",f,".dtype;",u.normalized,"=!!",i,".normalized;"),r("size"),r("offset"),r("stride"),r("divisor"),n("}}"),n.exit("if(",u.isStream,"){",s,".destroyStream(",f,");","}"),u})}),a}function E(t,e,n,r,i){var a=w(t),s=function(t,e,n){function r(t){if(t in i){var n=i[t];t=!0;var r,a,s=0|n.x,u=0|n.y;return"width"in n?r=0|n.width:t=!1,"height"in n?a=0|n.height:t=!1,new L(!t&&e&&e.thisDep,!t&&e&&e.contextDep,!t&&e&&e.propDep,function(t,e){var i=t.shared.context,o=r;"width"in n||(o=e.def(i,".","framebufferWidth","-",s));var c=a;return"height"in n||(c=e.def(i,".","framebufferHeight","-",u)),[s,u,o,c]})}if(t in o){var c=o[t];return t=I(c,function(t,e){var n=t.invoke(e,c),r=t.shared.context,i=e.def(n,".x|0"),o=e.def(n,".y|0");return[i,o,e.def('"width" in ',n,"?",n,".width|0:","(",r,".","framebufferWidth","-",i,")"),n=e.def('"height" in ',n,"?",n,".height|0:","(",r,".","framebufferHeight","-",o,")")]}),e&&(t.thisDep=t.thisDep||e.thisDep,t.contextDep=t.contextDep||e.contextDep,t.propDep=t.propDep||e.propDep),t}return e?new L(e.thisDep,e.contextDep,e.propDep,function(t,e){var n=t.shared.context;return[0,0,e.def(n,".","framebufferWidth"),e.def(n,".","framebufferHeight")]}):null}var i=t.static,o=t.dynamic;if(t=r("viewport")){var a=t;t=new L(t.thisDep,t.contextDep,t.propDep,function(t,e){var n=a.append(t,e),r=t.shared.context;return e.set(r,".viewportWidth",n[2]),e.set(r,".viewportHeight",n[3]),n})}return{viewport:t,scissor_box:r("scissor.box")}}(t,a),u=M(t),c=function(t,e){var n=t.static,r=t.dynamic,i={};return rt.forEach(function(t){function e(e,o){if(t in n){var s=e(n[t]);i[a]=F(function(){return s})}else if(t in r){var u=r[t];i[a]=I(u,function(t,e){return o(t,e,t.invoke(e,u))})}}var a=g(t);switch(t){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return e(function(t){return t},function(t,e,n){return n});case"depth.func":return e(function(t){return Mt[t]},function(t,e,n){return e.def(t.constants.compareFuncs,"[",n,"]")});case"depth.range":return e(function(t){return t},function(t,e,n){return[e.def("+",n,"[0]"),e=e.def("+",n,"[1]")]});case"blend.func":return e(function(t){return[_t["srcRGB"in t?t.srcRGB:t.src],_t["dstRGB"in t?t.dstRGB:t.dst],_t["srcAlpha"in t?t.srcAlpha:t.src],_t["dstAlpha"in t?t.dstAlpha:t.dst]]},function(t,e,n){function r(t,r){return e.def('"',t,r,'" in ',n,"?",n,".",t,r,":",n,".",t)}t=t.constants.blendFuncs;var i=r("src","RGB"),o=r("dst","RGB"),a=(i=e.def(t,"[",i,"]"),e.def(t,"[",r("src","Alpha"),"]"));return[i,o=e.def(t,"[",o,"]"),a,t=e.def(t,"[",r("dst","Alpha"),"]")]});case"blend.equation":return e(function(t){return"string"==typeof t?[K[t],K[t]]:"object"==typeof t?[K[t.rgb],K[t.alpha]]:void 0},function(t,e,n){var r=t.constants.blendEquations,i=e.def(),o=e.def();return(t=t.cond("typeof ",n,'==="string"')).then(i,"=",o,"=",r,"[",n,"];"),t.else(i,"=",r,"[",n,".rgb];",o,"=",r,"[",n,".alpha];"),e(t),[i,o]});case"blend.color":return e(function(t){return o(4,function(e){return+t[e]})},function(t,e,n){return o(4,function(t){return e.def("+",n,"[",t,"]")})});case"stencil.mask":return e(function(t){return 0|t},function(t,e,n){return e.def(n,"|0")});case"stencil.func":return e(function(t){return[Mt[t.cmp||"keep"],t.ref||0,"mask"in t?t.mask:-1]},function(t,e,n){return[t=e.def('"cmp" in ',n,"?",t.constants.compareFuncs,"[",n,".cmp]",":",7680),e.def(n,".ref|0"),e=e.def('"mask" in ',n,"?",n,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return e(function(e){return["stencil.opBack"===t?1029:1028,At[e.fail||"keep"],At[e.zfail||"keep"],At[e.zpass||"keep"]]},function(e,n,r){function i(t){return n.def('"',t,'" in ',r,"?",o,"[",r,".",t,"]:",7680)}var o=e.constants.stencilOps;return["stencil.opBack"===t?1029:1028,i("fail"),i("zfail"),i("zpass")]});case"polygonOffset.offset":return e(function(t){return[0|t.factor,0|t.units]},function(t,e,n){return[e.def(n,".factor|0"),e=e.def(n,".units|0")]});case"cull.face":return e(function(t){var e=0;return"front"===t?e=1028:"back"===t&&(e=1029),e},function(t,e,n){return e.def(n,'==="front"?',1028,":",1029)});case"lineWidth":return e(function(t){return t},function(t,e,n){return n});case"frontFace":return e(function(t){return Et[t]},function(t,e,n){return e.def(n+'==="cw"?2304:2305')});case"colorMask":return e(function(t){return t.map(function(t){return!!t})},function(t,e,n){return o(4,function(t){return"!!"+n+"["+t+"]"})});case"sample.coverage":return e(function(t){return["value"in t?t.value:1,!!t.invert]},function(t,e,n){return[e.def('"value" in ',n,"?+",n,".value:1"),e=e.def("!!",n,".invert")]})}}),i}(t),f=_(t),l=s.viewport;return l&&(c.viewport=l),(s=s[l=g("scissor.box")])&&(c[l]=s),(a={framebuffer:a,draw:u,shader:f,state:c,dirty:s=0<Object.keys(c).length}).profile=function(t){var e,n=t.static;if(t=t.dynamic,"profile"in n){var r=!!n.profile;(e=F(function(t,e){return r})).enable=r}else if("profile"in t){var i=t.profile;e=I(i,function(t,e){return t.invoke(e,i)})}return e}(t),a.uniforms=function(t,e){var n=t.static,r=t.dynamic,i={};return Object.keys(n).forEach(function(t){var e,r=n[t];if("number"==typeof r||"boolean"==typeof r)e=F(function(){return r});else if("function"==typeof r){var a=r._reglType;"texture2d"===a||"textureCube"===a?e=F(function(t){return t.link(r)}):"framebuffer"!==a&&"framebufferCube"!==a||(e=F(function(t){return t.link(r.color[0])}))}else v(r)&&(e=F(function(t){return t.global.def("[",o(r.length,function(t){return r[t]}),"]")}));e.value=r,i[t]=e}),Object.keys(r).forEach(function(t){var e=r[t];i[t]=I(e,function(t,n){return t.invoke(n,e)})}),i}(n),a.attributes=A(e),a.context=function(t){var e=t.static,n=t.dynamic,r={};return Object.keys(e).forEach(function(t){var n=e[t];r[t]=F(function(t,e){return"number"==typeof n||"boolean"==typeof n?""+n:t.link(n)})}),Object.keys(n).forEach(function(t){var e=n[t];r[t]=I(e,function(t,n){return t.invoke(n,e)})}),r}(r),a}function k(t,e,n){var r=t.shared.context,i=t.scope();Object.keys(n).forEach(function(o){e.save(r,"."+o),i(r,".",o,"=",n[o].append(t,e),";")}),e(i)}function S(t,e,n,r){var i,o=(s=t.shared).gl,a=s.framebuffer;$&&(i=e.def(s.extensions,".webgl_draw_buffers"));var s=(u=t.constants).drawBuffer,u=u.backBuffer;t=n?n.append(t,e):e.def(a,".next"),r||e("if(",t,"!==",a,".cur){"),e("if(",t,"){",o,".bindFramebuffer(",36160,",",t,".framebuffer);"),$&&e(i,".drawBuffersWEBGL(",s,"[",t,".colorAttachments.length]);"),e("}else{",o,".bindFramebuffer(",36160,",null);"),$&&e(i,".drawBuffersWEBGL(",u,");"),e("}",a,".cur=",t,";"),r||e("}")}function T(t,e,n){var r=t.shared,i=r.gl,a=t.current,s=t.next,u=r.current,c=r.next,f=t.cond(u,".dirty");rt.forEach(function(e){var r,l;if(!((e=g(e))in n.state))if(e in s){r=s[e],l=a[e];var h=o(tt[e].length,function(t){return f.def(r,"[",t,"]")});f(t.cond(h.map(function(t,e){return t+"!=="+l+"["+e+"]"}).join("||")).then(i,".",ot[e],"(",h,");",h.map(function(t,e){return l+"["+e+"]="+t}).join(";"),";"))}else r=f.def(c,".",e),h=t.cond(r,"!==",u,".",e),f(h),e in it?h(t.cond(r).then(i,".enable(",it[e],");").else(i,".disable(",it[e],");"),u,".",e,"=",r,";"):h(i,".",ot[e],"(",r,");",u,".",e,"=",r,";")}),0===Object.keys(n.state).length&&f(u,".dirty=false;"),e(f)}function R(t,e,n,r){var i=t.shared,o=t.current,a=i.current,s=i.gl;P(Object.keys(n)).forEach(function(i){var u=n[i];if(!r||r(u)){var c=u.append(t,e);if(it[i]){var f=it[i];D(u)?e(s,c?".enable(":".disable(",f,");"):e(t.cond(c).then(s,".enable(",f,");").else(s,".disable(",f,");")),e(a,".",i,"=",c,";")}else if(v(c)){var l=o[i];e(s,".",ot[i],"(",c,");",c.map(function(t,e){return l+"["+e+"]="+t}).join(";"),";")}else e(s,".",ot[i],"(",c,");",a,".",i,"=",c,";")}})}function C(t,e){J&&(t.instancing=e.def(t.shared.extensions,".angle_instanced_arrays"))}function N(t,e,n,r,i){function o(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function a(t){t(c=e.def(),"=",o(),";"),"string"==typeof i?t(h,".count+=",i,";"):t(h,".count++;"),d&&(r?t(f=e.def(),"=",m,".getNumPendingQueries();"):t(m,".beginQuery(",h,");"))}function s(t){t(h,".cpuTime+=",o(),"-",c,";"),d&&(r?t(m,".pushScopeStats(",f,",",m,".getNumPendingQueries(),",h,");"):t(m,".endQuery();"))}function u(t){var n=e.def(p,".profile");e(p,".profile=",t,";"),e.exit(p,".profile=",n,";")}var c,f,l=t.shared,h=t.stats,p=l.current,m=l.timer;if(n=n.profile){if(D(n))return void(n.enable?(a(e),s(e.exit),u("true")):u("false"));u(n=n.append(t,e))}else n=e.def(p,".profile");a(l=t.block()),e("if(",n,"){",l,"}"),s(t=t.block()),e.exit("if(",n,"){",t,"}")}function B(t,e,n,r,i){function o(n,r,i){function o(){e("if(!",f,".buffer){",u,".enableVertexAttribArray(",c,");}");var n,o=i.type;n=i.size?e.def(i.size,"||",r):r,e("if(",f,".type!==",o,"||",f,".size!==",n,"||",p.map(function(t){return f+"."+t+"!=="+i[t]}).join("||"),"){",u,".bindBuffer(",34962,",",l,".buffer);",u,".vertexAttribPointer(",[c,n,o,i.normalized,i.stride,i.offset],");",f,".type=",o,";",f,".size=",n,";",p.map(function(t){return f+"."+t+"="+i[t]+";"}).join(""),"}"),J&&e("if(",f,".divisor!==",o=i.divisor,"){",t.instancing,".vertexAttribDivisorANGLE(",[c,o],");",f,".divisor=",o,";}")}function s(){e("if(",f,".buffer){",u,".disableVertexAttribArray(",c,");","}if(",xt.map(function(t,e){return f+"."+t+"!=="+h[e]}).join("||"),"){",u,".vertexAttrib4f(",c,",",h,");",xt.map(function(t,e){return f+"."+t+"="+h[e]+";"}).join(""),"}")}var u=a.gl,c=e.def(n,".location"),f=e.def(a.attributes,"[",c,"]"),l=i.buffer,h=[i.x,i.y,i.z,i.w],p=["buffer","normalized","offset","stride"];1===(n=i.state)?o():2===n?s():(e("if(",n,"===",1,"){"),o(),e("}else{"),s(),e("}"))}var a=t.shared;r.forEach(function(r){var a,s=r.name,u=n.attributes[s];if(u){if(!i(u))return;a=u.append(t,e)}else{if(!i(kt))return;var c=t.scopeAttrib(s);a={},Object.keys(new Q).forEach(function(t){a[t]=e.def(c,".",t)})}o(t.link(r),function(t){switch(t){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(r.info.type),a)})}function z(t,n,r,i,a){for(var s,u=t.shared,c=u.gl,f=0;f<i.length;++f){var l,h=(m=i[f]).name,p=m.info.type,d=r.uniforms[h],m=t.link(m)+".location";if(d){if(!a(d))continue;if(D(d)){if(h=d.value,35678===p||35680===p)n(c,".uniform1i(",m,",",(p=t.link(h._texture||h.color[0]._texture))+".bind());"),n.exit(p,".unbind();");else if(35674===p||35675===p||35676===p)d=2,35675===p?d=3:35676===p&&(d=4),n(c,".uniformMatrix",d,"fv(",m,",false,",h=t.global.def("new Float32Array(["+Array.prototype.slice.call(h)+"])"),");");else{switch(p){case 5126:s="1f";break;case 35664:s="2f";break;case 35665:s="3f";break;case 35666:s="4f";break;case 35670:case 5124:s="1i";break;case 35671:case 35667:s="2i";break;case 35672:case 35668:s="3i";break;case 35673:s="4i";break;case 35669:s="4i"}n(c,".uniform",s,"(",m,",",v(h)?Array.prototype.slice.call(h):h,");")}continue}l=d.append(t,n)}else{if(!a(kt))continue;l=n.def(u.uniforms,"[",e.id(h),"]")}switch(35678===p?n("if(",l,"&&",l,'._reglType==="framebuffer"){',l,"=",l,".color[0];","}"):35680===p&&n("if(",l,"&&",l,'._reglType==="framebufferCube"){',l,"=",l,".color[0];","}"),h=1,p){case 35678:case 35680:p=n.def(l,"._texture"),n(c,".uniform1i(",m,",",p,".bind());"),n.exit(p,".unbind();");continue;case 5124:case 35670:s="1i";break;case 35667:case 35671:s="2i",h=2;break;case 35668:case 35672:s="3i",h=3;break;case 35669:case 35673:s="4i",h=4;break;case 5126:s="1f";break;case 35664:s="2f",h=2;break;case 35665:s="3f",h=3;break;case 35666:s="4f",h=4;break;case 35674:s="Matrix2fv";break;case 35675:s="Matrix3fv";break;case 35676:s="Matrix4fv"}if(n(c,".uniform",s,"(",m,","),"M"===s.charAt(0)){m=Math.pow(p-35674+2,2);var g=t.global.def("new Float32Array(",m,")");n("false,(Array.isArray(",l,")||",l," instanceof Float32Array)?",l,":(",o(m,function(t){return g+"["+t+"]="+l+"["+t+"]"}),",",g,")")}else n(1<h?o(h,function(t){return l+"["+t+"]"}):l);n(");")}}function q(t,e,n,r){function i(i){var o=h[i];return o?o.append(t,o.contextDep&&r.contextDynamic||o.propDep?n:e):e.def(l,".",i)}function o(){function t(){n(u,".drawElementsInstancedANGLE(",[d,v,g,m+"<<(("+g+"-5121)>>1)",s],");")}function e(){n(u,".drawArraysInstancedANGLE(",[d,m,v,s],");")}p?b?t():(n("if(",p,"){"),t(),n("}else{"),e(),n("}")):e()}function a(){function t(){n(f+".drawElements("+[d,v,g,m+"<<(("+g+"-5121)>>1)"]+");")}function e(){n(f+".drawArrays("+[d,m,v]+");")}p?b?t():(n("if(",p,"){"),t(),n("}else{"),e(),n("}")):e()}var s,u,c=t.shared,f=c.gl,l=c.draw,h=r.draw,p=function(){var i=h.elements,o=e;return i?((i.contextDep&&r.contextDynamic||i.propDep)&&(o=n),i=i.append(t,o)):i=o.def(l,".","elements"),i&&o("if("+i+")"+f+".bindBuffer(34963,"+i+".buffer.buffer);"),i}(),d=i("primitive"),m=i("offset"),v=function(){var i=h.count,o=e;return i?((i.contextDep&&r.contextDynamic||i.propDep)&&(o=n),i=i.append(t,o)):i=o.def(l,".","count"),i}();if("number"==typeof v){if(0===v)return}else n("if(",v,"){"),n.exit("}");J&&(s=i("instances"),u=t.instancing);var g=p+".type",b=h.elements&&D(h.elements);J&&("number"!=typeof s||0<=s)?"string"==typeof s?(n("if(",s,">0){"),o(),n("}else if(",s,"<0){"),a(),n("}")):o():a()}function U(t,e,n,r,i){return i=(e=x()).proc("body",i),J&&(e.instancing=i.def(e.shared.extensions,".angle_instanced_arrays")),t(e,i,n,r),e.compile().body}function H(t,e,n,r){C(t,e),B(t,e,n,r.attributes,function(){return!0}),z(t,e,n,r.uniforms,function(){return!0}),q(t,e,e,n)}function V(t,e,n,r){function i(){return!0}t.batchId="a1",C(t,e),B(t,e,n,r.attributes,i),z(t,e,n,r.uniforms,i),q(t,e,e,n)}function G(t,e,n,r){function i(t){return t.contextDep&&a||t.propDep}function o(t){return!i(t)}C(t,e);var a=n.contextDep,s=e.def(),u=e.def();t.shared.props=u,t.batchId=s;var c=t.scope(),f=t.scope();e(c.entry,"for(",s,"=0;",s,"<","a1",";++",s,"){",u,"=","a0","[",s,"];",f,"}",c.exit),n.needsContext&&k(t,f,n.context),n.needsFramebuffer&&S(t,f,n.framebuffer),R(t,f,n.state,i),n.profile&&i(n.profile)&&N(t,f,n,!1,!0),r?(B(t,c,n,r.attributes,o),B(t,f,n,r.attributes,i),z(t,c,n,r.uniforms,o),z(t,f,n,r.uniforms,i),q(t,c,f,n)):(e=t.global.def("{}"),r=n.shader.progVar.append(t,f),u=f.def(r,".id"),c=f.def(e,"[",u,"]"),f(t.shared.gl,".useProgram(",r,".program);","if(!",c,"){",c,"=",e,"[",u,"]=",t.link(function(e){return U(V,t,n,e,2)}),"(",r,");}",c,".call(this,a0[",s,"],",s,");"))}function W(t,n){function r(e){var r=n.shader[e];r&&i.set(o.shader,"."+e,r.append(t,i))}var i=t.proc("scope",3);t.batchId="a2";var o=t.shared,a=o.current;k(t,i,n.context),n.framebuffer&&n.framebuffer.append(t,i),P(Object.keys(n.state)).forEach(function(e){var r=n.state[e].append(t,i);v(r)?r.forEach(function(n,r){i.set(t.next[e],"["+r+"]",n)}):i.set(o.next,"."+e,r)}),N(t,i,n,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(e){var r=n.draw[e];r&&i.set(o.draw,"."+e,""+r.append(t,i))}),Object.keys(n.uniforms).forEach(function(r){i.set(o.uniforms,"["+e.id(r)+"]",n.uniforms[r].append(t,i))}),Object.keys(n.attributes).forEach(function(e){var r=n.attributes[e].append(t,i),o=t.scopeAttrib(e);Object.keys(new Q).forEach(function(t){i.set(o,"."+t,r[t])})}),r("vert"),r("frag"),0<Object.keys(n.state).length&&(i(a,".dirty=true;"),i.exit(a,".dirty=true;")),i("a1(",t.shared.context,",a0,",t.batchId,");")}function X(t,e,n){var r=e.static[n];if(r&&function(t){if("object"==typeof t&&!v(t)){for(var e=Object.keys(t),n=0;n<e.length;++n)if(Y.isDynamic(t[e[n]]))return!0;return!1}}(r)){var i=t.global,o=Object.keys(r),a=!1,s=!1,u=!1,c=t.global.def("{}");o.forEach(function(e){var n=r[e];if(Y.isDynamic(n))"function"==typeof n&&(n=r[e]=Y.unbox(n)),e=I(n,null),a=a||e.thisDep,u=u||e.propDep,s=s||e.contextDep;else{switch(i(c,".",e,"="),typeof n){case"number":i(n);break;case"string":i('"',n,'"');break;case"object":Array.isArray(n)&&i("[",n.join(),"]");break;default:i(t.link(n))}i(";")}}),e.dynamic[n]=new Y.DynamicVariable(4,{thisDep:a,contextDep:s,propDep:u,ref:c,append:function(t,e){o.forEach(function(n){var i=r[n];Y.isDynamic(i)&&(i=t.invoke(e,i),e(c,".",n,"=",i,";"))})}}),delete e.static[n]}}var Q=f.Record,K={add:32774,subtract:32778,"reverse subtract":32779};n.ext_blend_minmax&&(K.min=32775,K.max=32776);var J=n.angle_instanced_arrays,$=n.webgl_draw_buffers,tt={dirty:!0,profile:m.profile},et={},rt=[],it={},ot={};b("dither",3024),b("blend.enable",3042),y("blend.color","blendColor",[0,0,0,0]),y("blend.equation","blendEquationSeparate",[32774,32774]),y("blend.func","blendFuncSeparate",[1,0,1,0]),b("depth.enable",2929,!0),y("depth.func","depthFunc",513),y("depth.range","depthRange",[0,1]),y("depth.mask","depthMask",!0),y("colorMask","colorMask",[!0,!0,!0,!0]),b("cull.enable",2884),y("cull.face","cullFace",1029),y("frontFace","frontFace",2305),y("lineWidth","lineWidth",1),b("polygonOffset.enable",32823),y("polygonOffset.offset","polygonOffset",[0,0]),b("sample.alpha",32926),b("sample.enable",32928),y("sample.coverage","sampleCoverage",[1,!1]),b("stencil.enable",2960),y("stencil.mask","stencilMask",-1),y("stencil.func","stencilFunc",[519,0,-1]),y("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),y("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),b("scissor.enable",3089),y("scissor.box","scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),y("viewport","viewport",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var at={gl:t,context:p,strings:e,next:et,current:tt,draw:h,elements:a,buffer:i,shader:l,attributes:f.state,uniforms:c,framebuffer:u,extensions:n,timer:d,isBufferArgs:j},st={primTypes:nt,compareFuncs:Mt,blendFuncs:_t,blendEquations:K,stencilOps:At,glTypes:Z,orientationType:Et};$&&(st.backBuffer=[1029],st.drawBuffer=o(r.maxDrawbuffers,function(t){return 0===t?[0]:o(t,function(t){return 36064+t})}));var ut=0;return{next:et,current:tt,procs:function(){var t=x(),e=t.proc("poll"),n=t.proc("refresh"),i=t.block();e(i),n(i);var a,s=t.shared,u=s.gl,c=s.next,f=s.current;i(f,".dirty=false;"),S(t,e),S(t,n,null,!0),J&&(a=t.link(J));for(var l=0;l<r.maxAttributes;++l){var h=n.def(s.attributes,"[",l,"]"),p=t.cond(h,".buffer");p.then(u,".enableVertexAttribArray(",l,");",u,".bindBuffer(",34962,",",h,".buffer.buffer);",u,".vertexAttribPointer(",l,",",h,".size,",h,".type,",h,".normalized,",h,".stride,",h,".offset);").else(u,".disableVertexAttribArray(",l,");",u,".vertexAttrib4f(",l,",",h,".x,",h,".y,",h,".z,",h,".w);",h,".buffer=null;"),n(p),J&&n(a,".vertexAttribDivisorANGLE(",l,",",h,".divisor);")}return Object.keys(it).forEach(function(r){var o=it[r],a=i.def(c,".",r),s=t.block();s("if(",a,"){",u,".enable(",o,")}else{",u,".disable(",o,")}",f,".",r,"=",a,";"),n(s),e("if(",a,"!==",f,".",r,"){",s,"}")}),Object.keys(ot).forEach(function(r){var a,s,l=ot[r],h=tt[r],p=t.block();p(u,".",l,"("),v(h)?(l=h.length,a=t.global.def(c,".",r),s=t.global.def(f,".",r),p(o(l,function(t){return a+"["+t+"]"}),");",o(l,function(t){return s+"["+t+"]="+a+"["+t+"];"}).join("")),e("if(",o(l,function(t){return a+"["+t+"]!=="+s+"["+t+"]"}).join("||"),"){",p,"}")):(a=i.def(c,".",r),s=i.def(f,".",r),p(a,");",f,".",r,"=",a,";"),e("if(",a,"!==",s,"){",p,"}")),n(p)}),t.compile()}(),compile:function(t,e,n,r,i){var o=x();return o.stats=o.link(i),Object.keys(e.static).forEach(function(t){X(o,e,t)}),wt.forEach(function(e){X(o,t,e)}),n=E(t,e,n,r),function(t,e){var n=t.proc("draw",1);C(t,n),k(t,n,e.context),S(t,n,e.framebuffer),T(t,n,e),R(t,n,e.state),N(t,n,e,!1,!0);var r=e.shader.progVar.append(t,n);if(n(t.shared.gl,".useProgram(",r,".program);"),e.shader.program)H(t,n,e,e.shader.program);else{var i=t.global.def("{}"),o=n.def(r,".id"),a=n.def(i,"[",o,"]");n(t.cond(a).then(a,".call(this,a0);").else(a,"=",i,"[",o,"]=",t.link(function(n){return U(H,t,e,n,1)}),"(",r,");",a,".call(this,a0);"))}0<Object.keys(e.state).length&&n(t.shared.current,".dirty=true;")}(o,n),W(o,n),function(t,e){function n(t){return t.contextDep&&i||t.propDep}var r=t.proc("batch",2);t.batchId="0",C(t,r);var i=!1,o=!0;Object.keys(e.context).forEach(function(t){i=i||e.context[t].propDep}),i||(k(t,r,e.context),o=!1);var a=!1;if((s=e.framebuffer)?(s.propDep?i=a=!0:s.contextDep&&i&&(a=!0),a||S(t,r,s)):S(t,r,null),e.state.viewport&&e.state.viewport.propDep&&(i=!0),T(t,r,e),R(t,r,e.state,function(t){return!n(t)}),e.profile&&n(e.profile)||N(t,r,e,!1,"a1"),e.contextDep=i,e.needsContext=o,e.needsFramebuffer=a,(o=e.shader.progVar).contextDep&&i||o.propDep)G(t,r,e,null);else if(o=o.append(t,r),r(t.shared.gl,".useProgram(",o,".program);"),e.shader.program)G(t,r,e,e.shader.program);else{var s=t.global.def("{}"),u=(a=r.def(o,".id"),r.def(s,"[",a,"]"));r(t.cond(u).then(u,".call(this,a0,a1);").else(u,"=",s,"[",a,"]=",t.link(function(n){return U(G,t,e,n,2)}),"(",o,");",u,".call(this,a0,a1);"))}0<Object.keys(e.state).length&&r(t.shared.current,".dirty=true;")}(o,n),o.compile()}}}function B(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}var z=function(t,e){for(var n=Object.keys(e),r=0;r<n.length;++r)t[n[r]]=e[n[r]];return t},q=0,Y={DynamicVariable:t,define:function(n,r){return new t(n,e(r+""))},isDynamic:function(e){return"function"==typeof e&&!e._reglType||e instanceof t},unbox:function(e,n){return"function"==typeof e?new t(0,e):e},accessor:e},U={next:"function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},cancel:"function"==typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:clearTimeout},H="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},V=s();V.zero=s();var G=function(t,e){var n=1;e.ext_texture_filter_anisotropic&&(n=t.getParameter(34047));var r=1,i=1;e.webgl_draw_buffers&&(r=t.getParameter(34852),i=t.getParameter(36063));var o=!!e.oes_texture_float;if(o){o=t.createTexture(),t.bindTexture(3553,o),t.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var a=t.createFramebuffer();if(t.bindFramebuffer(36160,a),t.framebufferTexture2D(36160,36064,3553,o,0),t.bindTexture(3553,null),36053!==t.checkFramebufferStatus(36160))o=!1;else{t.viewport(0,0,1,1),t.clearColor(1,0,0,1),t.clear(16384);var s=V.allocType(5126,4);t.readPixels(0,0,1,1,6408,5126,s),t.getError()?o=!1:(t.deleteFramebuffer(a),t.deleteTexture(o),o=1===s[0]),V.freeType(s)}}return s=!0,"undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(s=t.createTexture(),a=V.allocType(5121,36),t.activeTexture(33984),t.bindTexture(34067,s),t.texImage2D(34069,0,6408,3,3,0,6408,5121,a),V.freeType(a),t.bindTexture(34067,null),t.deleteTexture(s),s=!t.getError()),{colorBits:[t.getParameter(3410),t.getParameter(3411),t.getParameter(3412),t.getParameter(3413)],depthBits:t.getParameter(3414),stencilBits:t.getParameter(3415),subpixelBits:t.getParameter(3408),extensions:Object.keys(e).filter(function(t){return!!e[t]}),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:i,pointSizeDims:t.getParameter(33901),lineWidthDims:t.getParameter(33902),maxViewportDims:t.getParameter(3386),maxCombinedTextureUnits:t.getParameter(35661),maxCubeMapSize:t.getParameter(34076),maxRenderbufferSize:t.getParameter(34024),maxTextureUnits:t.getParameter(34930),maxTextureSize:t.getParameter(3379),maxAttributes:t.getParameter(34921),maxVertexUniforms:t.getParameter(36347),maxVertexTextureUnits:t.getParameter(35660),maxVaryingVectors:t.getParameter(36348),maxFragmentUniforms:t.getParameter(36349),glsl:t.getParameter(35724),renderer:t.getParameter(7937),vendor:t.getParameter(7936),version:t.getParameter(7938),readFloat:o,npotTextureCube:s}},W=function(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array||t instanceof Uint8ClampedArray},X=function(t){return Object.keys(t).map(function(e){return t[e]})},Q={shape:function(t){for(var e=[];t.length;t=t[0])e.push(t.length);return e},flatten:function(t,e,n,r){var i=1;if(e.length)for(var o=0;o<e.length;++o)i*=e[o];else i=0;switch(n=r||V.allocType(n,i),e.length){case 0:break;case 1:for(r=e[0],e=0;e<r;++e)n[e]=t[e];break;case 2:for(r=e[0],e=e[1],o=i=0;o<r;++o)for(var a=t[o],s=0;s<e;++s)n[i++]=a[s];break;case 3:c(t,e[0],e[1],e[2],n,0);break;default:!function t(e,n,r,i,o){for(var a=1,s=r+1;s<n.length;++s)a*=n[s];var u=n[r];if(4==n.length-r){var f=n[r+1],l=n[r+2];for(n=n[r+3],s=0;s<u;++s)c(e[s],f,l,n,i,o),o+=a}else for(s=0;s<u;++s)t(e[s],n,r+1,i,o),o+=a}(t,e,0,n,0)}return n}},K={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Z={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},J={dynamic:35048,stream:35040,static:35044},$=Q.flatten,tt=Q.shape,et=[];et[5120]=1,et[5122]=2,et[5124]=4,et[5121]=1,et[5123]=2,et[5125]=4,et[5126]=4;var nt={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},rt=new Float32Array(1),it=new Uint32Array(rt.buffer),ot=[9984,9986,9985,9987],at=[0,6409,6410,6407,6408],st={};st[6409]=st[6406]=st[6402]=1,st[34041]=st[6410]=2,st[6407]=st[35904]=3,st[6408]=st[35906]=4;var ut=g("HTMLCanvasElement"),ct=g("CanvasRenderingContext2D"),ft=g("ImageBitmap"),lt=g("HTMLImageElement"),ht=g("HTMLVideoElement"),pt=Object.keys(K).concat([ut,ct,ft,lt,ht]),dt=[];dt[5121]=1,dt[5126]=4,dt[36193]=2,dt[5123]=2,dt[5125]=4;var mt=[];mt[32854]=2,mt[32855]=2,mt[36194]=2,mt[34041]=4,mt[33776]=.5,mt[33777]=.5,mt[33778]=1,mt[33779]=1,mt[35986]=.5,mt[35987]=1,mt[34798]=1,mt[35840]=.5,mt[35841]=.25,mt[35842]=.5,mt[35843]=.25,mt[36196]=.5;var vt=[];vt[32854]=2,vt[32855]=2,vt[36194]=2,vt[33189]=2,vt[36168]=1,vt[34041]=4,vt[35907]=4,vt[34836]=16,vt[34842]=8,vt[34843]=6;var gt=function(t,e,n,r,i){function o(t){this.id=c++,this.refCount=1,this.renderbuffer=t,this.format=32854,this.height=this.width=0,i.profile&&(this.stats={size:0})}function a(e){var n=e.renderbuffer;t.bindRenderbuffer(36161,null),t.deleteRenderbuffer(n),e.renderbuffer=null,e.refCount=0,delete f[e.id],r.renderbufferCount--}var s={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};e.ext_srgb&&(s.srgba=35907),e.ext_color_buffer_half_float&&(s.rgba16f=34842,s.rgb16f=34843),e.webgl_color_buffer_float&&(s.rgba32f=34836);var u=[];Object.keys(s).forEach(function(t){u[s[t]]=t});var c=0,f={};return o.prototype.decRef=function(){0>=--this.refCount&&a(this)},i.profile&&(r.getTotalRenderbufferSize=function(){var t=0;return Object.keys(f).forEach(function(e){t+=f[e].stats.size}),t}),{create:function(e,n){function a(e,n){var r=0,o=0,f=32854;if("object"==typeof e&&e?("shape"in e?(r=0|(o=e.shape)[0],o=0|o[1]):("radius"in e&&(r=o=0|e.radius),"width"in e&&(r=0|e.width),"height"in e&&(o=0|e.height)),"format"in e&&(f=s[e.format])):"number"==typeof e?(r=0|e,o="number"==typeof n?0|n:r):e||(r=o=1),r!==c.width||o!==c.height||f!==c.format)return a.width=c.width=r,a.height=c.height=o,c.format=f,t.bindRenderbuffer(36161,c.renderbuffer),t.renderbufferStorage(36161,f,r,o),i.profile&&(c.stats.size=vt[c.format]*c.width*c.height),a.format=u[c.format],a}var c=new o(t.createRenderbuffer());return f[c.id]=c,r.renderbufferCount++,a(e,n),a.resize=function(e,n){var r=0|e,o=0|n||r;return r===c.width&&o===c.height?a:(a.width=c.width=r,a.height=c.height=o,t.bindRenderbuffer(36161,c.renderbuffer),t.renderbufferStorage(36161,c.format,r,o),i.profile&&(c.stats.size=vt[c.format]*c.width*c.height),a)},a._reglType="renderbuffer",a._renderbuffer=c,i.profile&&(a.stats=c.stats),a.destroy=function(){c.decRef()},a},clear:function(){X(f).forEach(a)},restore:function(){X(f).forEach(function(e){e.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,e.renderbuffer),t.renderbufferStorage(36161,e.format,e.width,e.height)}),t.bindRenderbuffer(36161,null)}}},bt=[];bt[6408]=4,bt[6407]=3;var yt=[];yt[5121]=1,yt[5126]=4,yt[36193]=2;var xt=["x","y","z","w"],wt="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),_t={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Mt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},At={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Et={cw:2304,ccw:2305},kt=new L(!1,!1,!1,function(){});return function(t){function e(){if(0===Q.length)_&&_.update(),$=null;else{$=U.next(e),l();for(var t=Q.length-1;0<=t;--t){var n=Q[t];n&&n(C,null,0)}v.flush(),_&&_.update()}}function n(){!$&&0<Q.length&&($=U.next(e))}function r(){$&&(U.cancel(e),$=null)}function o(t){t.preventDefault(),r(),K.forEach(function(t){t()})}function a(t){v.getError(),b.restore(),D.restore(),P.restore(),F.restore(),I.restore(),q.restore(),_&&_.restore(),V.procs.refresh(),n(),Z.forEach(function(t){t()})}function s(t){function e(t){var e={},n={};return Object.keys(t).forEach(function(r){var i=t[r];Y.isDynamic(i)?n[r]=Y.unbox(i,r):e[r]=i}),{dynamic:n,static:e}}var n=e(t.context||{}),r=e(t.uniforms||{}),i=e(t.attributes||{}),o=e(function(t){function e(t){if(t in n){var e=n[t];delete n[t],Object.keys(e).forEach(function(r){n[t+"."+r]=e[r]})}}var n=z({},t);return delete n.uniforms,delete n.attributes,delete n.context,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),e("blend"),e("depth"),e("cull"),e("stencil"),e("polygonOffset"),e("scissor"),e("sample"),n}(t)),a=(n=V.compile(o,i,r,n,t={gpuTime:0,cpuTime:0,count:0})).draw,s=n.batch,u=n.scope,c=[];return z(function(t,e){var n;if("function"==typeof t)return u.call(this,null,t,0);if("function"==typeof e)if("number"==typeof t)for(n=0;n<t;++n)u.call(this,null,e,n);else{if(!Array.isArray(t))return u.call(this,t,e,0);for(n=0;n<t.length;++n)u.call(this,t[n],e,n)}else if("number"==typeof t){if(0<t)return s.call(this,function(t){for(;c.length<t;)c.push(null);return c}(0|t),0|t)}else{if(!Array.isArray(t))return a.call(this,t);if(t.length)return s.call(this,t,t.length)}},{stats:t})}function u(t,e){var n=0;V.procs.poll();var r=e.color;r&&(v.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),n|=16384),"depth"in e&&(v.clearDepth(+e.depth),n|=256),"stencil"in e&&(v.clearStencil(0|e.stencil),n|=1024),v.clear(n)}function c(t){return Q.push(t),n(),{cancel:function(){var e=B(Q,t);Q[e]=function t(){var e=B(Q,t);Q[e]=Q[Q.length-1],--Q.length,0>=Q.length&&r()}}}}function f(){var t=W.viewport,e=W.scissor_box;t[0]=t[1]=e[0]=e[1]=0,C.viewportWidth=C.framebufferWidth=C.drawingBufferWidth=t[2]=e[2]=v.drawingBufferWidth,C.viewportHeight=C.framebufferHeight=C.drawingBufferHeight=t[3]=e[3]=v.drawingBufferHeight}function l(){C.tick+=1,C.time=m(),f(),V.procs.poll()}function h(){f(),V.procs.refresh(),_&&_.update()}function m(){return(H()-M)/1e3}if(!(t=i(t)))return null;var v=t.gl,g=v.getContextAttributes();v.isContextLost();var b=function(t,e){function n(e){var n;e=e.toLowerCase();try{n=r[e]=t.getExtension(e)}catch(t){}return!!n}for(var r={},i=0;i<e.extensions.length;++i){var o=e.extensions[i];if(!n(o))return e.onDestroy(),e.onDone('"'+o+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return e.optionalExtensions.forEach(n),{extensions:r,restore:function(){Object.keys(r).forEach(function(t){if(r[t]&&!n(t))throw Error("(regl): error restoring extension "+t)})}}}(v,t);if(!b)return null;var y=function(){var t={"":0},e=[""];return{id:function(n){var r=t[n];return r||(r=t[n]=e.length,e.push(n),r)},str:function(t){return e[t]}}}(),x={bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},w=b.extensions,_=function(t,e){function n(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function r(t,e,r){var i=a.pop()||new n;i.startQueryIndex=t,i.endQueryIndex=e,i.sum=0,i.stats=r,s.push(i)}if(!e.ext_disjoint_timer_query)return null;var i=[],o=[],a=[],s=[],u=[],c=[];return{beginQuery:function(t){var n=i.pop()||e.ext_disjoint_timer_query.createQueryEXT();e.ext_disjoint_timer_query.beginQueryEXT(35007,n),o.push(n),r(o.length-1,o.length,t)},endQuery:function(){e.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:r,update:function(){var t,n;if(0!==(t=o.length)){c.length=Math.max(c.length,t+1),u.length=Math.max(u.length,t+1),u[0]=0;var r=c[0]=0;for(n=t=0;n<o.length;++n)e.ext_disjoint_timer_query.getQueryObjectEXT(f=o[n],34919)?(r+=e.ext_disjoint_timer_query.getQueryObjectEXT(f,34918),i.push(f)):o[t++]=f,u[n+1]=r,c[n+1]=t;for(o.length=t,n=t=0;n<s.length;++n){var f,l=(r=s[n]).startQueryIndex;r.sum+=u[f=r.endQueryIndex]-u[l],(f=c[f])===(l=c[l])?(r.stats.gpuTime+=r.sum/1e6,a.push(r)):(r.startQueryIndex=l,r.endQueryIndex=f,s[t++]=r)}s.length=t}},getNumPendingQueries:function(){return o.length},clear:function(){i.push.apply(i,o);for(var t=0;t<i.length;t++)e.ext_disjoint_timer_query.deleteQueryEXT(i[t]);o.length=0,i.length=0},restore:function(){o.length=0,i.length=0}}}(0,w),M=H(),R=v.drawingBufferHeight,C={tick:0,time:0,viewportWidth:j=v.drawingBufferWidth,viewportHeight:R,framebufferWidth:j,framebufferHeight:R,drawingBufferWidth:j,drawingBufferHeight:R,pixelRatio:t.pixelRatio},O=G(v,w),j=function(t,e,n,r){for(t=n.maxAttributes,e=Array(t),n=0;n<t;++n)e[n]=new k;return{Record:k,scope:{},state:e}}(v,w,O),P=p(v,x,t,j),L=d(v,w,P,x),D=S(v,y,x,t),F=A(v,w,O,function(){V.procs.poll()},C,x,t),I=gt(v,w,0,x,t),q=E(v,w,O,F,I,x),V=N(v,y,w,O,P,L,0,q,{},j,D,{elements:null,primitive:4,count:-1,offset:0,instances:-1},C,_,t),W=(y=T(v,q,V.procs.poll,C),V.next),X=v.canvas,Q=[],K=[],Z=[],J=[t.onDestroy],$=null;X&&(X.addEventListener("webglcontextlost",o,!1),X.addEventListener("webglcontextrestored",a,!1));var tt=q.setFBO=s({framebuffer:Y.define.call(null,1,"framebuffer")});return h(),g=z(s,{clear:function(t){if("framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var e=0;6>e;++e)tt(z({framebuffer:t.framebuffer.faces[e]},t),u);else tt(t,u);else u(0,t)},prop:Y.define.bind(null,1),context:Y.define.bind(null,2),this:Y.define.bind(null,3),draw:s({}),buffer:function(t){return P.create(t,34962,!1,!1)},elements:function(t){return L.create(t,!1)},texture:F.create2D,cube:F.createCube,renderbuffer:I.create,framebuffer:q.create,framebufferCube:q.createCube,attributes:g,frame:c,on:function(t,e){var n;switch(t){case"frame":return c(e);case"lost":n=K;break;case"restore":n=Z;break;case"destroy":n=J}return n.push(e),{cancel:function(){for(var t=0;t<n.length;++t)if(n[t]===e){n[t]=n[n.length-1],n.pop();break}}}},limits:O,hasExtension:function(t){return 0<=O.extensions.indexOf(t.toLowerCase())},read:y,destroy:function(){Q.length=0,r(),X&&(X.removeEventListener("webglcontextlost",o),X.removeEventListener("webglcontextrestored",a)),D.clear(),q.clear(),I.clear(),F.clear(),L.clear(),P.clear(),_&&_.clear(),J.forEach(function(t){t()})},_gl:v,_refresh:h,poll:function(){l(),_&&_.update()},now:m,stats:x}),t.onDone(null,g),g}},"object"==typeof n&&void 0!==e?e.exports=i():"function"==typeof define&&define.amd?define(i):r.createREGL=i()},{}],173:[function(t,e,n){(function(t){e.exports=t.performance&&t.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],174:[function(t,e,n){(function(t){"use strict";var n=256,r=[],i=void 0===t?window:t,o=Math.pow(n,6),a=Math.pow(2,52),s=2*a,u=n-1,c=Math.random;function f(t){var e,r=t.length,i=this,o=0,a=i.i=i.j=0,s=i.S=[];for(r||(t=[r++]);o<n;)s[o]=o++;for(o=0;o<n;o++)s[o]=s[a=u&a+t[o%r]+(e=s[o])],s[a]=e;(i.g=function(t){for(var e,r=0,o=i.i,a=i.j,s=i.S;t--;)e=s[o=u&o+1],r=r*n+s[u&(s[o]=s[a=u&a+e])+(s[a]=e)];return i.i=o,i.j=a,r})(n)}function l(t,e){for(var n,r=t+"",i=0;i<r.length;)e[u&i]=u&(n^=19*e[u&i])+r.charCodeAt(i++);return h(e)}function h(t){return String.fromCharCode.apply(0,t)}e.exports=function(t,u){if(u&&!0===u.global)return u.global=!1,Math.random=e.exports(t,u),u.global=!0,Math.random;var c=[],p=(l(function t(e,n){var r,i=[],o=(typeof e)[0];if(n&&"o"==o)for(r in e)try{i.push(t(e[r],n-1))}catch(t){}return i.length?i:"s"==o?e:e+"\0"}(u&&u.entropy||!1?[t,h(r)]:0 in arguments?t:function(t){try{return i.crypto.getRandomValues(t=new Uint8Array(n)),h(t)}catch(t){return[+new Date,i,i.navigator&&i.navigator.plugins,i.screen,h(r)]}}(),3),c),new f(c));return l(h(p.S),r),function(){for(var t=p.g(6),e=o,r=0;t<a;)t=(t+r)*n,e*=n,r=p.g(1);for(;t>=s;)t/=2,e/=2,r>>>=1;return(t+r)/e}},e.exports.resetGlobal=function(){Math.random=c},l(Math.random(),r)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],175:[function(t,e,n){!function(){"use strict";var t=.5*(Math.sqrt(3)-1),r=(3-Math.sqrt(3))/6,i=1/6,o=(Math.sqrt(5)-1)/4,a=(5-Math.sqrt(5))/20;function s(t){var e;e="function"==typeof t?t:t?function(){var t=0,e=0,n=0,r=1,i=(o=4022871197,function(t){t=t.toString();for(var e=0;e<t.length;e++){var n=.02519603282416938*(o+=t.charCodeAt(e));n-=o=n>>>0,o=(n*=o)>>>0,o+=4294967296*(n-=o)}return 2.3283064365386963e-10*(o>>>0)});var o;t=i(" "),e=i(" "),n=i(" ");for(var a=0;a<arguments.length;a++)(t-=i(arguments[a]))<0&&(t+=1),(e-=i(arguments[a]))<0&&(e+=1),(n-=i(arguments[a]))<0&&(n+=1);return i=null,function(){var i=2091639*t+2.3283064365386963e-10*r;return t=e,e=n,n=i-(r=0|i)}}(t):Math.random,this.p=u(e),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var n=0;n<512;n++)this.perm[n]=this.p[255&n],this.permMod12[n]=this.perm[n]%12}function u(t){var e,n=new Uint8Array(256);for(e=0;e<256;e++)n[e]=e;for(e=0;e<255;e++){var r=e+~~(t()*(256-e)),i=n[e];n[e]=n[r],n[r]=i}return n}s.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(e,n){var i,o,a=this.permMod12,s=this.perm,u=this.grad3,c=0,f=0,l=0,h=(e+n)*t,p=Math.floor(e+h),d=Math.floor(n+h),m=(p+d)*r,v=e-(p-m),g=n-(d-m);v>g?(i=1,o=0):(i=0,o=1);var b=v-i+r,y=g-o+r,x=v-1+2*r,w=g-1+2*r,_=255&p,M=255&d,A=.5-v*v-g*g;if(A>=0){var E=3*a[_+s[M]];c=(A*=A)*A*(u[E]*v+u[E+1]*g)}var k=.5-b*b-y*y;if(k>=0){var S=3*a[_+i+s[M+o]];f=(k*=k)*k*(u[S]*b+u[S+1]*y)}var T=.5-x*x-w*w;if(T>=0){var R=3*a[_+1+s[M+1]];l=(T*=T)*T*(u[R]*x+u[R+1]*w)}return 70*(c+f+l)},noise3D:function(t,e,n){var r,o,a,s,u,c,f,l,h,p,d=this.permMod12,m=this.perm,v=this.grad3,g=(t+e+n)*(1/3),b=Math.floor(t+g),y=Math.floor(e+g),x=Math.floor(n+g),w=(b+y+x)*i,_=t-(b-w),M=e-(y-w),A=n-(x-w);_>=M?M>=A?(u=1,c=0,f=0,l=1,h=1,p=0):_>=A?(u=1,c=0,f=0,l=1,h=0,p=1):(u=0,c=0,f=1,l=1,h=0,p=1):M<A?(u=0,c=0,f=1,l=0,h=1,p=1):_<A?(u=0,c=1,f=0,l=0,h=1,p=1):(u=0,c=1,f=0,l=1,h=1,p=0);var E=_-u+i,k=M-c+i,S=A-f+i,T=_-l+2*i,R=M-h+2*i,C=A-p+2*i,O=_-1+.5,j=M-1+.5,P=A-1+.5,L=255&b,D=255&y,F=255&x,I=.6-_*_-M*M-A*A;if(I<0)r=0;else{var N=3*d[L+m[D+m[F]]];r=(I*=I)*I*(v[N]*_+v[N+1]*M+v[N+2]*A)}var B=.6-E*E-k*k-S*S;if(B<0)o=0;else{var z=3*d[L+u+m[D+c+m[F+f]]];o=(B*=B)*B*(v[z]*E+v[z+1]*k+v[z+2]*S)}var q=.6-T*T-R*R-C*C;if(q<0)a=0;else{var Y=3*d[L+l+m[D+h+m[F+p]]];a=(q*=q)*q*(v[Y]*T+v[Y+1]*R+v[Y+2]*C)}var U=.6-O*O-j*j-P*P;if(U<0)s=0;else{var H=3*d[L+1+m[D+1+m[F+1]]];s=(U*=U)*U*(v[H]*O+v[H+1]*j+v[H+2]*P)}return 32*(r+o+a+s)},noise4D:function(t,e,n,r){var i,s,u,c,f,l,h,p,d,m,v,g,b,y,x,w,_,M=this.perm,A=this.grad4,E=(t+e+n+r)*o,k=Math.floor(t+E),S=Math.floor(e+E),T=Math.floor(n+E),R=Math.floor(r+E),C=(k+S+T+R)*a,O=t-(k-C),j=e-(S-C),P=n-(T-C),L=r-(R-C),D=0,F=0,I=0,N=0;O>j?D++:F++,O>P?D++:I++,O>L?D++:N++,j>P?F++:I++,j>L?F++:N++,P>L?I++:N++;var B=O-(l=D>=3?1:0)+a,z=j-(h=F>=3?1:0)+a,q=P-(p=I>=3?1:0)+a,Y=L-(d=N>=3?1:0)+a,U=O-(m=D>=2?1:0)+2*a,H=j-(v=F>=2?1:0)+2*a,V=P-(g=I>=2?1:0)+2*a,G=L-(b=N>=2?1:0)+2*a,W=O-(y=D>=1?1:0)+3*a,X=j-(x=F>=1?1:0)+3*a,Q=P-(w=I>=1?1:0)+3*a,K=L-(_=N>=1?1:0)+3*a,Z=O-1+4*a,J=j-1+4*a,$=P-1+4*a,tt=L-1+4*a,et=255&k,nt=255&S,rt=255&T,it=255&R,ot=.6-O*O-j*j-P*P-L*L;if(ot<0)i=0;else{var at=M[et+M[nt+M[rt+M[it]]]]%32*4;i=(ot*=ot)*ot*(A[at]*O+A[at+1]*j+A[at+2]*P+A[at+3]*L)}var st=.6-B*B-z*z-q*q-Y*Y;if(st<0)s=0;else{var ut=M[et+l+M[nt+h+M[rt+p+M[it+d]]]]%32*4;s=(st*=st)*st*(A[ut]*B+A[ut+1]*z+A[ut+2]*q+A[ut+3]*Y)}var ct=.6-U*U-H*H-V*V-G*G;if(ct<0)u=0;else{var ft=M[et+m+M[nt+v+M[rt+g+M[it+b]]]]%32*4;u=(ct*=ct)*ct*(A[ft]*U+A[ft+1]*H+A[ft+2]*V+A[ft+3]*G)}var lt=.6-W*W-X*X-Q*Q-K*K;if(lt<0)c=0;else{var ht=M[et+y+M[nt+x+M[rt+w+M[it+_]]]]%32*4;c=(lt*=lt)*lt*(A[ht]*W+A[ht+1]*X+A[ht+2]*Q+A[ht+3]*K)}var pt=.6-Z*Z-J*J-$*$-tt*tt;if(pt<0)f=0;else{var dt=M[et+1+M[nt+1+M[rt+1+M[it+1]]]]%32*4;f=(pt*=pt)*pt*(A[dt]*Z+A[dt+1]*J+A[dt+2]*$+A[dt+3]*tt)}return 27*(i+s+u+c+f)}},s._buildPermutationTable=u,"undefined"!=typeof define&&define.amd&&define(function(){return s}),void 0!==n?n.SimplexNoise=s:"undefined"!=typeof window&&(window.SimplexNoise=s),void 0!==e&&(e.exports=s)}()},{}],176:[function(t,e,n){"use strict";var r=t("parse-unit");e.exports=s;var i=a("in",document.body);function o(t,e){var n=r(getComputedStyle(t).getPropertyValue(e));return n[0]*s(n[1],t)}function a(t,e){var n=document.createElement("div");n.style.height="128"+t,e.appendChild(n);var r=o(n,"height")/128;return e.removeChild(n),r}function s(t,e){if(!t)return null;switch(e=e||document.body,t=(t+""||"px").trim().toLowerCase(),e!==window&&e!==document||(e=document.body),t){case"%":return e.clientHeight/100;case"ch":case"ex":return a(t,e);case"em":return o(e,"font-size");case"rem":return o(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return i;case"cm":return i/2.54;case"mm":return i/25.4;case"pt":return i/72;case"pc":return i/6;case"px":return 1}var n=r(t);if(!isNaN(n[0])&&n[1]){var u=s(n[1],e);return"number"==typeof u?n[0]*u:null}return null}},{"parse-unit":165}],177:[function(t,e,n){e.exports=function(t,e,n,r,i,o,a,s,u,c){c||(c=[]);var f=r-t,l=i-e,h=o-n,p=a-t,d=s-e,m=u-n,v=l*m-h*d,g=h*p-f*m,b=f*d-l*p,y=Math.sqrt(v*v+g*g+b*b);0===y?(c[0]=0,c[1]=0,c[2]=0):(c[0]=v/y,c[1]=g/y,c[2]=b/y);return c}},{}],178:[function(t,e,n){"use strict";e.exports=function(t){var e=(t=t||{}).center||[0,0,0],n=t.up||[0,1,0],r=t.right||l(n),i=t.radius||1,o=t.theta||0,f=t.phi||0;if(e=[].slice.call(e,0,3),n=[].slice.call(n,0,3),s(n,n),r=[].slice.call(r,0,3),s(r,r),"eye"in t){var p=t.eye,d=[p[0]-e[0],p[1]-e[1],p[2]-e[2]];a(r,d,n),c(r[0],r[1],r[2])<1e-6?r=l(n):s(r,r),i=c(d[0],d[1],d[2]);var m=u(n,d)/i,v=u(r,d)/i;f=Math.acos(m),o=Math.acos(v)}return i=Math.log(i),new h(t.zoomMin,t.zoomMax,e,n,r,i,o,f)};var r=t("filtered-vector"),i=t("gl-mat4/invert"),o=t("gl-mat4/rotate"),a=t("gl-vec3/cross"),s=t("gl-vec3/normalize"),u=t("gl-vec3/dot");function c(t,e,n){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(n,2))}function f(t){return Math.min(1,Math.max(-1,t))}function l(t){var e=Math.abs(t[0]),n=Math.abs(t[1]),r=Math.abs(t[2]),i=[0,0,0];e>Math.max(n,r)?i[2]=1:n>Math.max(e,r)?i[0]=1:i[1]=1;for(var o=0,a=0,u=0;u<3;++u)o+=t[u]*t[u],a+=i[u]*t[u];for(u=0;u<3;++u)i[u]-=a/o*t[u];return s(i,i),i}function h(t,e,n,i,o,a,s,u){this.center=r(n),this.up=r(i),this.right=r(o),this.radius=r([a]),this.angle=r([s,u]),this.angle.bounds=[[-Infinity,-Math.PI/2],[Infinity,Math.PI/2]],this.setDistanceLimits(t,e),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var c=0;c<16;++c)this.computedMatrix[c]=.5;this.recalcMatrix(0)}var p=h.prototype;p.setDistanceLimits=function(t,e){t=t>0?Math.log(t):-Infinity,e=e>0?Math.log(e):Infinity,e=Math.max(e,t),this.radius.bounds[0][0]=t,this.radius.bounds[1][0]=e},p.getDistanceLimits=function(t){var e=this.radius.bounds[0];return t?(t[0]=Math.exp(e[0][0]),t[1]=Math.exp(e[1][0]),t):[Math.exp(e[0][0]),Math.exp(e[1][0])]},p.recalcMatrix=function(t){this.center.curve(t),this.up.curve(t),this.right.curve(t),this.radius.curve(t),this.angle.curve(t);for(var e=this.computedUp,n=this.computedRight,r=0,i=0,o=0;o<3;++o)i+=e[o]*n[o],r+=e[o]*e[o];var u=Math.sqrt(r),f=0;for(o=0;o<3;++o)n[o]-=e[o]*i/r,f+=n[o]*n[o],e[o]/=u;var l=Math.sqrt(f);for(o=0;o<3;++o)n[o]/=l;var h=this.computedToward;a(h,e,n),s(h,h);var p=Math.exp(this.computedRadius[0]),d=this.computedAngle[0],m=this.computedAngle[1],v=Math.cos(d),g=Math.sin(d),b=Math.cos(m),y=Math.sin(m),x=this.computedCenter,w=v*b,_=g*b,M=y,A=-v*y,E=-g*y,k=b,S=this.computedEye,T=this.computedMatrix;for(o=0;o<3;++o){var R=w*n[o]+_*h[o]+M*e[o];T[4*o+1]=A*n[o]+E*h[o]+k*e[o],T[4*o+2]=R,T[4*o+3]=0}var C=T[1],O=T[5],j=T[9],P=T[2],L=T[6],D=T[10],F=O*D-j*L,I=j*P-C*D,N=C*L-O*P,B=c(F,I,N);I/=B,N/=B,T[0]=F/=B,T[4]=I,T[8]=N;for(o=0;o<3;++o)S[o]=x[o]+T[2+4*o]*p;for(o=0;o<3;++o){f=0;for(var z=0;z<3;++z)f+=T[o+4*z]*S[z];T[12+o]=-f}T[15]=1},p.getMatrix=function(t,e){this.recalcMatrix(t);var n=this.computedMatrix;if(e){for(var r=0;r<16;++r)e[r]=n[r];return e}return n};var d=[0,0,0];p.rotate=function(t,e,n,r){if(this.angle.move(t,e,n),r){this.recalcMatrix(t);var i=this.computedMatrix;d[0]=i[2],d[1]=i[6],d[2]=i[10];for(var a=this.computedUp,s=this.computedRight,u=this.computedToward,c=0;c<3;++c)i[4*c]=a[c],i[4*c+1]=s[c],i[4*c+2]=u[c];o(i,i,r,d);for(c=0;c<3;++c)a[c]=i[4*c],s[c]=i[4*c+1];this.up.set(t,a[0],a[1],a[2]),this.right.set(t,s[0],s[1],s[2])}},p.pan=function(t,e,n,r){e=e||0,n=n||0,r=r||0,this.recalcMatrix(t);var i=this.computedMatrix,o=(Math.exp(this.computedRadius[0]),i[1]),a=i[5],s=i[9],u=c(o,a,s),f=i[0],l=i[4],h=i[8],p=f*(o/=u)+l*(a/=u)+h*(s/=u),d=c(f-=o*p,l-=a*p,h-=s*p);this.center.move(t,(f/=d)*e+o*n,(l/=d)*e+a*n,(h/=d)*e+s*n);var m=Math.exp(this.computedRadius[0]);m=Math.max(1e-4,m+r),this.radius.set(t,Math.log(m))},p.translate=function(t,e,n,r){this.center.move(t,e||0,n||0,r||0)},p.setMatrix=function(t,e,n,r){var o=1;"number"==typeof n&&(o=0|n),(o<0||o>3)&&(o=1);var a=(o+2)%3;e||(this.recalcMatrix(t),e=this.computedMatrix);var s=e[o],u=e[o+4],l=e[o+8];if(r){var h=Math.abs(s),p=Math.abs(u),d=Math.abs(l),m=Math.max(h,p,d);h===m?(s=s<0?-1:1,u=l=0):d===m?(l=l<0?-1:1,s=u=0):(u=u<0?-1:1,s=l=0)}else{var v=c(s,u,l);s/=v,u/=v,l/=v}var g,b,y=e[a],x=e[a+4],w=e[a+8],_=y*s+x*u+w*l,M=c(y-=s*_,x-=u*_,w-=l*_),A=u*(w/=M)-l*(x/=M),E=l*(y/=M)-s*w,k=s*x-u*y,S=c(A,E,k);if(A/=S,E/=S,k/=S,this.center.jump(t,Y,U,H),this.radius.idle(t),this.up.jump(t,s,u,l),this.right.jump(t,y,x,w),2===o){var T=e[1],R=e[5],C=e[9];g=L<0?-Math.PI/2:Math.PI/2,b=Math.atan2(T*A+R*E+C*k,T*y+R*x+C*w)}else{var O=e[2],j=e[6],P=e[10],L=O*s+j*u+P*l,D=O*y+j*x+P*w,F=O*A+j*E+P*k;g=Math.asin(f(L)),b=Math.atan2(F,D)}this.angle.jump(t,b,g),this.recalcMatrix(t);var I=e[2],N=e[6],B=e[10],z=this.computedMatrix;i(z,e);var q=z[15],Y=z[12]/q,U=z[13]/q,H=z[14]/q,V=Math.exp(this.computedRadius[0]);this.center.jump(t,Y-I*V,U-N*V,H-B*V)},p.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},p.idle=function(t){this.center.idle(t),this.up.idle(t),this.right.idle(t),this.radius.idle(t),this.angle.idle(t)},p.flush=function(t){this.center.flush(t),this.up.flush(t),this.right.flush(t),this.radius.flush(t),this.angle.flush(t)},p.setDistance=function(t,e){e>0&&this.radius.set(t,Math.log(e))},p.lookAt=function(t,e,n,r){this.recalcMatrix(t),e=e||this.computedEye,n=n||this.computedCenter;var i=(r=r||this.computedUp)[0],o=r[1],a=r[2],s=c(i,o,a);if(!(s<1e-6)){i/=s,o/=s,a/=s;var u=e[0]-n[0],l=e[1]-n[1],h=e[2]-n[2],p=c(u,l,h);if(!(p<1e-6)){u/=p,l/=p,h/=p;var d=this.computedRight,m=d[0],v=d[1],g=d[2],b=i*m+o*v+a*g,y=c(m-=b*i,v-=b*o,g-=b*a);if(!(y<.01&&(y=c(m=o*h-a*l,v=a*u-i*h,g=i*l-o*u))<1e-6)){m/=y,v/=y,g/=y,this.up.set(t,i,o,a),this.right.set(t,m,v,g),this.center.set(t,n[0],n[1],n[2]),this.radius.set(t,Math.log(p));var x=o*g-a*v,w=a*m-i*g,_=i*v-o*m,M=c(x,w,_),A=m*u+v*l+g*h,E=(x/=M)*u+(w/=M)*l+(_/=M)*h,k=Math.asin(f(i*u+o*l+a*h)),S=Math.atan2(E,A),T=this.angle._state,R=T[T.length-1],C=T[T.length-2];R%=2*Math.PI;var O=Math.abs(R+2*Math.PI-S),j=Math.abs(R-S),P=Math.abs(R-2*Math.PI-S);O<j&&(R+=2*Math.PI),P<j&&(R-=2*Math.PI),this.angle.jump(this.angle.lastT(),R,C),this.angle.set(t,S,k)}}}}},{"filtered-vector":33,"gl-mat4/invert":57,"gl-mat4/rotate":63,"gl-vec3/cross":81,"gl-vec3/dot":86,"gl-vec3/normalize":103}],179:[function(t,e,n){e.exports=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n]*t[n];if(0===(e=Math.sqrt(e)))return Array.apply(null,new Array(t.length)).map(Number.prototype.valueOf,0);for(var n=0;n<t.length;n++)t[n]/=e;return t}},{}],180:[function(t,e,n){e.exports=function(t){if(0===t.length)return null;for(var e=t[0].length,n=new Array(e),r=new Array(e),i=0;i<e;i++)n[i]=Infinity,r[i]=-Infinity;return t.forEach(function(t){for(var i=0;i<e;i++)r[i]=t[i]>r[i]?t[i]:r[i],n[i]=t[i]<n[i]?t[i]:n[i]}),[n,r]}},{}],181:[function(t,e,n){const r=t("canvas-sketch"),{GUI:i}=t("dat-gui"),{random:o}=t("canvas-sketch-util"),a=t("glslify"),s=t("gl-mat4"),u=t("regl"),c=t("3d-view-controls"),f=t("triangle-normal"),l=t("geo-ambient-occlusion"),h=t("primitive-icosphere");let p,d,m,v,g,b,y;const x={seed:1,meshCount:160,spreadSize:15,sampleCount:2048,resolution:512,bias:.04,subdivisions:2,size:.6,freq:.03,hueSpread:.04,hueStart:.62,saturation:.4,lightness:.5,speed:.005},w=()=>y(),_=new i;_.add(x,"seed",1,1e3).step(1).onChange(w),_.add(x,"meshCount",1,1e3).step(1).onChange(w),_.add(x,"spreadSize",1,100).step(1).onChange(w),_.add(x,"sampleCount",1,1e4).step(1).onChange(w),_.add(x,"resolution",1,2048).step(1).onChange(w),_.add(x,"bias",0,.5).step(.001).onChange(w),_.add(x,"subdivisions",0,4).step(1).onChange(w),_.add(x,"size",0,2).step(.01).onChange(w),_.add(x,"freq",0,.1).step(.001),_.add(x,"hueStart",0,1).step(.01),_.add(x,"hueSpread",0,1).step(.01),_.add(x,"saturation",0,1).step(.01),_.add(x,"lightness",0,1).step(.01),_.add(x,"speed",0,.02).step(.001);function M(t){return.5*Math.sin(t)+.5}r(({canvas:t})=>{const e=c(t,{zoomSpeed:4}),n=u({extensions:["OES_texture_float"],canvas:t});e.lookAt([50,50,50],[0,0,0],[0,0,1]),(y=function(){!function(t){o.setSeed(x.seed);const e=function(t,e,n){const r=[],i=[],a=()=>o.range(-n,n);let s=e;for(;s--;){const e=[a(),a(),a()];t.cells.forEach(n=>{for(let i=0;i<3;i++)r.push(5*t.positions[n[i]][0]+e[0],5*t.positions[n[i]][1]+e[1],5*t.positions[n[i]][2]+e[2])})}for(let t=0;t<r.length;t+=9){const e=f(r[t+0],r[t+1],r[t+2],r[t+3],r[t+4],r[t+5],r[t+6],r[t+7],r[t+8],[]);i.push(e[0],e[1],e[2],e[0],e[1],e[2],e[0],e[1],e[2])}return{positions:r,normals:i}}(h(x.size,{subdivisions:x.subdivisions}),x.meshCount,t);g=e.positions,b=e.normals}(x.spreadSize),p=o.insideSphere(500),function(){const t=l(g,{resolution:x.resolution,bias:x.bias,normals:b,regl:n});for(let e=0;e<x.sampleCount;e++)t.sample();const e=t.report();v=m||e,m=e,t.dispose()}(),d=n({vert:a(["\n        precision highp float;\n#define GLSLIFY 1\n\n    \n        attribute vec3 position;\n        attribute float curAO;\n        attribute float lastAO;\n        varying vec4 fragColor;\n\n        uniform mat4 projection;\n        uniform mat4 view;\n        uniform float frame;\n        uniform vec3 nOffset;\n        uniform float saturation;\n        uniform float lightness;\n        uniform float hueStart;\n        uniform float hueSpread;\n        uniform float nFreq;\n        uniform float speed;\n  \n        float hue2rgb(float f1, float f2, float hue) {\n          if (hue < 0.0)\n            hue += 1.0;\n          else if (hue > 1.0)\n            hue -= 1.0;\n          float res;\n          if ((6.0 * hue) < 1.0)\n            res = f1 + (f2 - f1) * 6.0 * hue;\n          else if ((2.0 * hue) < 1.0)\n            res = f2;\n          else if ((3.0 * hue) < 2.0)\n            res = f1 + (f2 - f1) * ((2.0 / 3.0) - hue) * 6.0;\n          else\n            res = f1;\n          return res;\n        }\n\n        vec3 hsl2rgb(vec3 hsl) {\n          vec3 rgb;\n          if (hsl.y == 0.0) {\n            rgb = vec3(hsl.z); // Luminance\n          } else {\n            float f2;\n            if (hsl.z < 0.5) {\n              f2 = hsl.z * (1.0 + hsl.y);\n            } else {\n              f2 = hsl.z + hsl.y - hsl.y * hsl.z;\n            }\n            float f1 = 2.0 * hsl.z - f2;\n            rgb.r = hue2rgb(f1, f2, hsl.x + (1.0/3.0));\n            rgb.g = hue2rgb(f1, f2, hsl.x);\n            rgb.b = hue2rgb(f1, f2, hsl.x - (1.0/3.0));\n          }\n          return rgb;\n        }\n\n        vec4 mod289(vec4 x) {\n          return x - floor(x * (1.0 / 289.0)) * 289.0; }\n        \n        float mod289(float x) {\n          return x - floor(x * (1.0 / 289.0)) * 289.0; }\n        \n        vec4 permute(vec4 x) {\n             return mod289(((x*34.0)+1.0)*x);\n        }\n        \n        float permute(float x) {\n             return mod289(((x*34.0)+1.0)*x);\n        }\n        \n        vec4 taylorInvSqrt(vec4 r)\n        {\n          return 1.79284291400159 - 0.85373472095314 * r;\n        }\n        \n        float taylorInvSqrt(float r)\n        {\n          return 1.79284291400159 - 0.85373472095314 * r;\n        }\n        \n        vec4 grad4(float j, vec4 ip)\n          {\n          const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\n          vec4 p,s;\n        \n          p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\n          p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\n          s = vec4(lessThan(p, vec4(0.0)));\n          p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;\n        \n          return p;\n          }\n        \n        // (sqrt(5) - 1)/4 = F4, used once below\n        #define F4 0.309016994374947451\n        \n        float snoise(vec4 v)\n          {\n          const vec4  C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4\n                                0.276393202250021,  // 2 * G4\n                                0.414589803375032,  // 3 * G4\n                               -0.447213595499958); // -1 + 4 * G4\n        \n        // First corner\n          vec4 i  = floor(v + dot(v, vec4(F4)) );\n          vec4 x0 = v -   i + dot(i, C.xxxx);\n        \n        // Other corners\n        \n        // Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\n          vec4 i0;\n          vec3 isX = step( x0.yzw, x0.xxx );\n          vec3 isYZ = step( x0.zww, x0.yyz );\n        //  i0.x = dot( isX, vec3( 1.0 ) );\n          i0.x = isX.x + isX.y + isX.z;\n          i0.yzw = 1.0 - isX;\n        //  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\n          i0.y += isYZ.x + isYZ.y;\n          i0.zw += 1.0 - isYZ.xy;\n          i0.z += isYZ.z;\n          i0.w += 1.0 - isYZ.z;\n        \n          // i0 now contains the unique values 0,1,2,3 in each channel\n          vec4 i3 = clamp( i0, 0.0, 1.0 );\n          vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\n          vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\n        \n          //  x0 = x0 - 0.0 + 0.0 * C.xxxx\n          //  x1 = x0 - i1  + 1.0 * C.xxxx\n          //  x2 = x0 - i2  + 2.0 * C.xxxx\n          //  x3 = x0 - i3  + 3.0 * C.xxxx\n          //  x4 = x0 - 1.0 + 4.0 * C.xxxx\n          vec4 x1 = x0 - i1 + C.xxxx;\n          vec4 x2 = x0 - i2 + C.yyyy;\n          vec4 x3 = x0 - i3 + C.zzzz;\n          vec4 x4 = x0 + C.wwww;\n        \n        // Permutations\n          i = mod289(i);\n          float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);\n          vec4 j1 = permute( permute( permute( permute (\n                     i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\n                   + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\n                   + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\n                   + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\n        \n        // Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope\n        // 7*7*6 = 294, which is close to the ring size 17*17 = 289.\n          vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\n        \n          vec4 p0 = grad4(j0,   ip);\n          vec4 p1 = grad4(j1.x, ip);\n          vec4 p2 = grad4(j1.y, ip);\n          vec4 p3 = grad4(j1.z, ip);\n          vec4 p4 = grad4(j1.w, ip);\n        \n        // Normalise gradients\n          vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n          p0 *= norm.x;\n          p1 *= norm.y;\n          p2 *= norm.z;\n          p3 *= norm.w;\n          p4 *= taylorInvSqrt(dot(p4,p4));\n        \n        // Mix contributions from the five corners\n          vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\n          vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\n          m0 = m0 * m0;\n          m1 = m1 * m1;\n          return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))\n                       + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\n        \n        }\n\n        void main (void) {\n          float h = snoise(vec4((position + nOffset) * nFreq, frame * speed));\n\n          float l = snoise(vec4((position + nOffset.zxy) * nFreq, frame * speed));\n          float lightnessOffset = 0.25 * l;\n\n          float sat = snoise(vec4((position + nOffset.xzy) * nFreq, frame * speed));\n          float saturationOffset = 0.1 * sat;\n\n          float hue = h * hueSpread + hueStart;\n\n          float ao = (curAO + lastAO) / 2.0;\n          fragColor = vec4(hsl2rgb(vec3(hue, saturation + saturationOffset, lightness + lightnessOffset)), 1.0);\n          fragColor.rgb *= pow(ao + 0.1, 0.8);\n          gl_Position = projection * view * vec4(position, 1.0);\n        }\n      ",""]),frag:a(["\n        precision highp float;\n#define GLSLIFY 1\n\n\n        varying vec4 fragColor;\n  \n        void main() {\n          gl_FragColor = fragColor;\n        }\n      ",""]),attributes:{position:()=>g,normal:()=>b,curAO:()=>m,lastAO:()=>v},uniforms:{projection:s.perspective([],Math.PI/4,1,10,1e3),view:()=>e.matrix,saturation:()=>x.saturation,lightness:()=>x.lightness,hueStart:()=>x.hueStart,hueSpread:()=>x.hueSpread,nOffset:()=>p,frame:n.prop("frame"),nFreq:()=>x.freq,speed:()=>x.speed},count:()=>g.length/3,primitive:"triangles"})})();let r=0;return()=>{const t=(r+=1)/30;n.poll(),e.tick(),e.center=[100*Math.sin(.3*t),90*Math.cos(.4*t),85*Math.sin(.5*(t+10))];const i=.2*M(.1*t)+.4,o=.03*M(.04*t+10)+.5,a=.03*M(.04*t+12)+.5,[s,u,c]=function(t,e,n){let r,i,o;function a(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(0===e)r=i=o=n;else{var s=n<.5?n*(1+e):n+e-n*e,u=2*n-s;r=a(u,s,t+1/3),i=a(u,s,t),o=a(u,s,t-1/3)}return[r,i,o]}(i,o,a);n.clear({color:[.11,.1,.12,1],depth:1}),d({frame:r})}},{dimensions:[1024,1024],context:"webgl",attributes:{antialias:!0},animate:!0})},{"3d-view-controls":1,"canvas-sketch":24,"canvas-sketch-util":10,"dat-gui":28,"geo-ambient-occlusion":37,"gl-mat4":56,glslify:7,"primitive-icosphere":166,regl:172,"triangle-normal":177}],182:[function(t,e,n){(function(t){t.CANVAS_SKETCH_DEFAULT_STORAGE_KEY=window.location.href}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[181,182]);</script>