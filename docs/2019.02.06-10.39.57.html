<!doctype html><html lang=en><meta charset=UTF-8><meta name=viewport content="width=device-width,shrink-to-fit=0,user-scalable=no,minimum-scale=1,maximum-scale=1"><title>2019.02.06-10.39.57.js</title><style>html{width:100%;height:100%;display:flex;justify-content:center;align-items:center;flex-direction:column}body{width:100%;height:100%;display:flex;justify-content:center;align-items:center;flex-direction:row;margin:0}canvas{margin:auto;display:block;box-shadow:0 2px 12px -2px rgba(0,0,0,.15)}</style><body><script>!function(){return function e(t,r,n){function i(o,s){if(!r[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[o]={exports:{}};t[o][0].call(c.exports,function(e){return i(t[o][1][e]||e)},c,c.exports,e,t,r,n)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}}()({1:[function(e,t,r){"use strict";t.exports=function(e,t){e=e||document.body,t=t||{};var r=[.01,Infinity];"distanceLimits"in t&&(r[0]=t.distanceLimits[0],r[1]=t.distanceLimits[1]);"zoomMin"in t&&(r[0]=t.zoomMin);"zoomMax"in t&&(r[1]=t.zoomMax);var l=i({center:t.center||[0,0,0],up:t.up||[0,1,0],eye:t.eye||[0,0,10],mode:t.mode||"orbit",distanceLimits:r}),c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],f=0,d=e.clientWidth,h=e.clientHeight,p={view:l,element:e,delay:t.delay||16,rotateSpeed:t.rotateSpeed||1,zoomSpeed:t.zoomSpeed||1,translateSpeed:t.translateSpeed||1,flipX:!!t.flipX,flipY:!!t.flipY,modes:l.modes,tick:function(){var t=n(),r=this.delay;l.idle(t-r),l.flush(t-(100+2*r));var i=t-2*r;l.recalcMatrix(i);for(var a=!0,o=l.computedMatrix,s=0;s<16;++s)a=a&&c[s]===o[s],c[s]=o[s];var u=e.clientWidth===d&&e.clientHeight===h;return d=e.clientWidth,h=e.clientHeight,a?!u:(f=Math.exp(l.computedRadius[0]),!0)},lookAt:function(e,t,r){l.lookAt(l.lastT(),e,t,r)},rotate:function(e,t,r){l.rotate(l.lastT(),e,t,r)},pan:function(e,t,r){l.pan(l.lastT(),e,t,r)},translate:function(e,t,r){l.translate(l.lastT(),e,t,r)}};Object.defineProperties(p,{matrix:{get:function(){return l.computedMatrix},set:function(e){return l.setMatrix(l.lastT(),e),l.computedMatrix},enumerable:!0},mode:{get:function(){return l.getMode()},set:function(e){return l.setMode(e),l.getMode()},enumerable:!0},center:{get:function(){return l.computedCenter},set:function(e){return l.lookAt(l.lastT(),e),l.computedCenter},enumerable:!0},eye:{get:function(){return l.computedEye},set:function(e){return l.lookAt(l.lastT(),null,e),l.computedEye},enumerable:!0},up:{get:function(){return l.computedUp},set:function(e){return l.lookAt(l.lastT(),null,null,e),l.computedUp},enumerable:!0},distance:{get:function(){return f},set:function(e){return l.setDistance(l.lastT(),e),e},enumerable:!0},distanceLimits:{get:function(){return l.getDistanceLimits(r)},set:function(e){return l.setDistanceLimits(e),e},enumerable:!0}}),e.addEventListener("contextmenu",function(e){return e.preventDefault(),!1});var m=0,b=0,g={shift:!1,control:!1,alt:!1,meta:!1};function v(t,r,i,a){var o=1/e.clientHeight,s=o*(r-m),u=o*(i-b),c=p.flipX?1:-1,d=p.flipY?1:-1,h=Math.PI*p.rotateSpeed,v=n();if(1&t)a.shift?l.rotate(v,0,0,-s*h):l.rotate(v,c*h*s,-d*h*u,0);else if(2&t)l.pan(v,-p.translateSpeed*s*f,p.translateSpeed*u*f,0);else if(4&t){var y=p.zoomSpeed*u/window.innerHeight*(v-l.lastT())*50;l.pan(v,0,0,f*(Math.exp(y)-1))}m=r,b=i,g=a}return a(e,v),e.addEventListener("touchstart",function(t){var r=s(t.changedTouches[0],e);v(0,r[0],r[1],g),v(1,r[0],r[1],g),t.preventDefault()},!!u&&{passive:!1}),e.addEventListener("touchmove",function(t){var r=s(t.changedTouches[0],e);v(1,r[0],r[1],g),t.preventDefault()},!!u&&{passive:!1}),e.addEventListener("touchend",function(t){s(t.changedTouches[0],e),v(0,m,b,g),t.preventDefault()},!!u&&{passive:!1}),o(e,function(e,t,r){var i=p.flipX?1:-1,a=p.flipY?1:-1,o=n();if(Math.abs(e)>Math.abs(t))l.rotate(o,0,0,-e*i*Math.PI*p.rotateSpeed/window.innerWidth);else{var s=p.zoomSpeed*a*t/window.innerHeight*(o-l.lastT())/100;l.pan(o,0,0,f*(Math.exp(s)-1))}},!0),p};var n=e("right-now"),i=e("3d-view"),a=e("mouse-change"),o=e("mouse-wheel"),s=e("mouse-event-offset"),u=e("has-passive-events")},{"3d-view":2,"has-passive-events":95,"mouse-change":279,"mouse-event-offset":280,"mouse-wheel":282,"right-now":311}],2:[function(e,t,r){"use strict";t.exports=function(e){var t=(e=e||{}).eye||[0,0,1],r=e.center||[0,0,0],s=e.up||[0,1,0],u=e.distanceLimits||[0,Infinity],l=e.mode||"turntable",c=n(),f=i(),d=a();return c.setDistanceLimits(u[0],u[1]),c.lookAt(0,t,r,s),f.setDistanceLimits(u[0],u[1]),f.lookAt(0,t,r,s),d.setDistanceLimits(u[0],u[1]),d.lookAt(0,t,r,s),new o({turntable:c,orbit:f,matrix:d},l)};var n=e("turntable-camera-controller"),i=e("orbit-camera-controller"),a=e("matrix-camera-controller");function o(e,t){this._controllerNames=Object.keys(e),this._controllerList=this._controllerNames.map(function(t){return e[t]}),this._mode=t,this._active=e[t],this._active||(this._mode="turntable",this._active=e.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var s=o.prototype;[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]].forEach(function(e){for(var t=e[0],r=[],n=0;n<e[1];++n)r.push("a"+n);var i="var cc=this._controllerList;for(var i=0;i<cc.length;++i){cc[i]."+e[0]+"("+r.join()+")}";s[t]=Function.apply(null,r.concat(i))}),s.recalcMatrix=function(e){this._active.recalcMatrix(e)},s.getDistance=function(e){return this._active.getDistance(e)},s.getDistanceLimits=function(e){return this._active.getDistanceLimits(e)},s.lastT=function(){return this._active.lastT()},s.setMode=function(e){if(e!==this._mode){var t=this._controllerNames.indexOf(e);if(!(t<0)){var r=this._active,n=this._controllerList[t],i=Math.max(r.lastT(),n.lastT());r.recalcMatrix(i),n.setMatrix(i,r.computedMatrix),this._active=n,this._mode=e,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},s.getMode=function(){return this._mode}},{"matrix-camera-controller":278,"orbit-camera-controller":285,"turntable-camera-controller":317}],3:[function(e,t,r){t.exports=function(e){if(Array.isArray(e))return e}},{}],4:[function(e,t,r){t.exports=function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}},{}],5:[function(e,t,r){t.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},{}],6:[function(e,t,r){t.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],7:[function(e,t,r){var n=e("./setPrototypeOf");function i(e,r,a){return t.exports=i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return r&&n(a,r.prototype),a},i.apply(null,arguments)}t.exports=i},{"./setPrototypeOf":21}],8:[function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},{}],9:[function(e,t,r){t.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},{}],10:[function(e,t,r){e("./getPrototypeOf");var n=e("./superPropBase");function i(e,r,a){return t.exports=i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var i=n(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(r):a.value}},i(e,r,a||e)}t.exports=i},{"./getPrototypeOf":11,"./superPropBase":23}],11:[function(e,t,r){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}t.exports=n},{}],12:[function(e,t,r){var n=e("./setPrototypeOf");t.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},{"./setPrototypeOf":21}],13:[function(e,t,r){t.exports=function(e){return e&&e.__esModule?e:{default:e}}},{}],14:[function(e,t,r){t.exports=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}},{}],15:[function(e,t,r){t.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},{}],16:[function(e,t,r){t.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},{}],17:[function(e,t,r){t.exports=function(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r}},{}],18:[function(e,t,r){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},{}],19:[function(e,t,r){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},{}],20:[function(e,t,r){var n=e("../helpers/typeof"),i=e("./assertThisInitialized");t.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?i(e):t}},{"../helpers/typeof":25,"./assertThisInitialized":5}],21:[function(e,t,r){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,r)}t.exports=n},{}],22:[function(e,t,r){var n=e("./arrayWithHoles"),i=e("./iterableToArrayLimit"),a=e("./nonIterableRest");t.exports=function(e,t){return n(e)||i(e,t)||a()}},{"./arrayWithHoles":3,"./iterableToArrayLimit":17,"./nonIterableRest":18}],23:[function(e,t,r){var n=e("./getPrototypeOf");t.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e}},{"./getPrototypeOf":11}],24:[function(e,t,r){var n=e("./arrayWithoutHoles"),i=e("./iterableToArray"),a=e("./nonIterableSpread");t.exports=function(e){return n(e)||i(e)||a()}},{"./arrayWithoutHoles":4,"./iterableToArray":16,"./nonIterableSpread":19}],25:[function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return t.exports=i="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},i(e)}t.exports=i},{}],26:[function(e,t,r){var n=e("./getPrototypeOf"),i=e("./setPrototypeOf"),a=e("./isNativeFunction"),o=e("./construct");function s(e){var r="function"==typeof Map?new Map:void 0;return t.exports=s=function(e){if(null===e||!a(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return o(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},s(e)}t.exports=s},{"./construct":7,"./getPrototypeOf":11,"./isNativeFunction":15,"./setPrototypeOf":21}],27:[function(e,t,r){"use strict";var n=Math.abs,i=Math.min;function a(e,t,r,o){var s=n(e-t);return null==r&&(r=a.DBL_EPSILON),null==o&&(o=r),s<=r||(s<=o*i(n(e),n(t))||e===t)}a.FLT_EPSILON=1.1920929e-7,a.DBL_EPSILON=2.220446049250313e-16,t.exports=a},{}],28:[function(e,t,r){(function(r){"use strict";var n=e("object-assign");function i(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}function a(e){return r.Buffer&&"function"==typeof r.Buffer.isBuffer?r.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var o=e("util/"),s=Object.prototype.hasOwnProperty,u=Array.prototype.slice,l="foo"===function(){}.name;function c(e){return Object.prototype.toString.call(e)}function f(e){return!a(e)&&("function"==typeof r.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var d=t.exports=v,h=/\s*function\s+([^\(\s]*)\s*/;function p(e){if(o.isFunction(e)){if(l)return e.name;var t=e.toString().match(h);return t&&t[1]}}function m(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function b(e){if(l||!o.isFunction(e))return o.inspect(e);var t=p(e);return"[Function"+(t?": "+t:"")+"]"}function g(e,t,r,n,i){throw new d.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:i})}function v(e,t){e||g(e,!0,t,"==",d.ok)}function y(e,t,r,n){if(e===t)return!0;if(a(e)&&a(t))return 0===i(e,t);if(o.isDate(e)&&o.isDate(t))return e.getTime()===t.getTime();if(o.isRegExp(e)&&o.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(f(e)&&f(t)&&c(e)===c(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===i(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(a(e)!==a(t))return!1;var s=(n=n||{actual:[],expected:[]}).actual.indexOf(e);return-1!==s&&s===n.expected.indexOf(t)||(n.actual.push(e),n.expected.push(t),function(e,t,r,n){if(null==e||null==t)return!1;if(o.isPrimitive(e)||o.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=_(e),a=_(t);if(i&&!a||!i&&a)return!1;if(i)return e=u.call(e),t=u.call(t),y(e,t,r);var s,l,c=E(e),f=E(t);if(c.length!==f.length)return!1;for(c.sort(),f.sort(),l=c.length-1;l>=0;l--)if(c[l]!==f[l])return!1;for(l=c.length-1;l>=0;l--)if(!y(e[s=c[l]],t[s],r,n))return!1;return!0}(e,t,r,n))}return r?e===t:e==t}function _(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function x(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function w(e,t,r,n){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),i=function(e){var t;try{e()}catch(e){t=e}return t}(t),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!i&&g(i,r,"Missing expected exception"+n);var a="string"==typeof n,s=!e&&i&&!r;if((!e&&o.isError(i)&&a&&x(i,r)||s)&&g(i,r,"Got unwanted exception"+n),e&&i&&r&&!x(i,r)||!e&&i)throw i}d.AssertionError=function(e){var t;this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=m(b((t=this).actual),128)+" "+t.operator+" "+m(b(t.expected),128),this.generatedMessage=!0);var r=e.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,r);else{var n=new Error;if(n.stack){var i=n.stack,a=p(r),o=i.indexOf("\n"+a);if(o>=0){var s=i.indexOf("\n",o+1);i=i.substring(s+1)}this.stack=i}}},o.inherits(d.AssertionError,Error),d.fail=g,d.ok=v,d.equal=function(e,t,r){e!=t&&g(e,t,r,"==",d.equal)},d.notEqual=function(e,t,r){e==t&&g(e,t,r,"!=",d.notEqual)},d.deepEqual=function(e,t,r){y(e,t,!1)||g(e,t,r,"deepEqual",d.deepEqual)},d.deepStrictEqual=function(e,t,r){y(e,t,!0)||g(e,t,r,"deepStrictEqual",d.deepStrictEqual)},d.notDeepEqual=function(e,t,r){y(e,t,!1)&&g(e,t,r,"notDeepEqual",d.notDeepEqual)},d.notDeepStrictEqual=function e(t,r,n){y(t,r,!0)&&g(t,r,n,"notDeepStrictEqual",e)},d.strictEqual=function(e,t,r){e!==t&&g(e,t,r,"===",d.strictEqual)},d.notStrictEqual=function(e,t,r){e===t&&g(e,t,r,"!==",d.notStrictEqual)},d.throws=function(e,t,r){w(!0,e,t,r)},d.doesNotThrow=function(e,t,r){w(!1,e,t,r)},d.ifError=function(e){if(e)throw e},d.strict=n(function e(t,r){t||g(t,!0,r,"==",e)},d,{equal:d.strictEqual,deepEqual:d.deepStrictEqual,notEqual:d.notStrictEqual,notDeepEqual:d.notDeepStrictEqual}),d.strict.strict=d.strict;var E=Object.keys||function(e){var t=[];for(var r in e)s.call(e,r)&&t.push(r);return t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":283,"util/":31}],29:[function(e,t,r){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],30:[function(e,t,r){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],31:[function(e,t,r){(function(t,n){var i=/%[sdj%]/g;r.format=function(e){if(!g(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(s(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,a=n.length,o=String(e).replace(i,function(e){if("%%"===e)return"%";if(r>=a)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),u=n[r];r<a;u=n[++r])m(u)||!_(u)?o+=" "+u:o+=" "+s(u);return o},r.deprecate=function(e,i){if(v(n.process))return function(){return r.deprecate(e,i).apply(this,arguments)};if(!0===t.noDeprecation)return e;var a=!1;return function(){if(!a){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),a=!0}return e.apply(this,arguments)}};var a,o={};function s(e,t){var n={seen:[],stylize:l};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),p(t)?n.showHidden=t:t&&r._extend(n,t),v(n.showHidden)&&(n.showHidden=!1),v(n.depth)&&(n.depth=2),v(n.colors)&&(n.colors=!1),v(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=u),c(n,e,n.depth)}function u(e,t){var r=s.styles[t];return r?"["+s.colors[r][0]+"m"+e+"["+s.colors[r][1]+"m":e}function l(e,t){return e}function c(e,t,n){if(e.customInspect&&t&&E(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n,e);return g(i)||(i=c(e,i,n)),i}var a=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(g(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(b(t))return e.stylize(""+t,"number");if(p(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(e,t);if(a)return a;var o=Object.keys(t),s=function(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),w(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return f(t);if(0===o.length){if(E(t))return e.stylize("[Function"+(t.name?": "+t.name:"")+"]","special");if(y(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(x(t))return e.stylize(Date.prototype.toString.call(t),"date");if(w(t))return f(t)}var u,l="",_=!1,k=["{","}"];(h(t)&&(_=!0,k=["[","]"]),E(t))&&(l=" [Function"+(t.name?": "+t.name:"")+"]");return y(t)&&(l=" "+RegExp.prototype.toString.call(t)),x(t)&&(l=" "+Date.prototype.toUTCString.call(t)),w(t)&&(l=" "+f(t)),0!==o.length||_&&0!=t.length?n<0?y(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),u=_?function(e,t,r,n,i){for(var a=[],o=0,s=t.length;o<s;++o)A(t,String(o))?a.push(d(e,t,r,n,String(o),!0)):a.push("");return i.forEach(function(i){i.match(/^\d+$/)||a.push(d(e,t,r,n,i,!0))}),a}(e,t,n,s,o):o.map(function(r){return d(e,t,n,s,r,_)}),e.seen.pop(),function(e,t,r){if(e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(u,l,k)):k[0]+l+k[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,r,n,i,a){var o,s,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=e.stylize(u.set?"[Getter/Setter]":"[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),A(n,i)||(o="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=m(r)?c(e,u.value,null):c(e,u.value,r-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),v(o)){if(a&&i.match(/^\d+$/))return s;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function h(e){return Array.isArray(e)}function p(e){return"boolean"==typeof e}function m(e){return null===e}function b(e){return"number"==typeof e}function g(e){return"string"==typeof e}function v(e){return void 0===e}function y(e){return _(e)&&"[object RegExp]"===k(e)}function _(e){return"object"==typeof e&&null!==e}function x(e){return _(e)&&"[object Date]"===k(e)}function w(e){return _(e)&&("[object Error]"===k(e)||e instanceof Error)}function E(e){return"function"==typeof e}function k(e){return Object.prototype.toString.call(e)}function P(e){return e<10?"0"+e.toString(10):e.toString(10)}r.debuglog=function(e){if(v(a)&&(a=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!o[e])if(new RegExp("\\b"+e+"\\b","i").test(a)){var n=t.pid;o[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else o[e]=function(){};return o[e]},r.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=h,r.isBoolean=p,r.isNull=m,r.isNullOrUndefined=function(e){return null==e},r.isNumber=b,r.isString=g,r.isSymbol=function(e){return"symbol"==typeof e},r.isUndefined=v,r.isRegExp=y,r.isObject=_,r.isDate=x,r.isError=w,r.isFunction=E,r.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},r.isBuffer=e("./support/isBuffer");var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}r.log=function(){var e,t;console.log("%s - %s",(e=new Date,t=[P(e.getHours()),P(e.getMinutes()),P(e.getSeconds())].join(":"),[e.getDate(),M[e.getMonth()],t].join(" ")),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!_(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":30,_process:308,inherits:29}],32:[function(e,t,r){"use strict";function n(e,t,r,n,i,a){var o=["function ",e,"(a,l,h,",n.join(","),"){",a?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",i?".get(m)":"[m]"];return a?t.indexOf("c")<0?o.push(";if(x===y){return m}else if(x<=y){"):o.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):o.push(";if(",t,"){i=m;"),o.push(r?"l=m+1}else{h=m-1}":"h=m-1}else{l=m+1}"),o.push("}"),o.push(a?"return -1};":"return i};"),o.join("")}function i(e,t,r,i){return new Function([n("A","x"+e+"y",t,["y"],!1,i),n("B","x"+e+"y",t,["y"],!0,i),n("P","c(x,y)"+e+"0",t,["y","c"],!1,i),n("Q","c(x,y)"+e+"0",t,["y","c"],!0,i),"function dispatchBsearch",r,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",r].join(""))()}t.exports={ge:i(">=",!1,"GE"),gt:i(">",!1,"GT"),lt:i("<",!0,"LT"),le:i("<=",!0,"LE"),eq:i("-",!0,"EQ",!0)}},{}],33:[function(e,t,r){var n=e("./lib/css-color"),i=e("./lib/css-color-names.json"),a=e("./lib/relative-luminance"),o=e("./lib/hsl"),s=e("./lib/hex-to-rgba"),u=e("./lib/rgba-to-hex");t.exports.parse=n.parse,t.exports.style=n.style,t.exports.names=i,t.exports.relativeLuminance=function(e){var r=t.exports.parse(e);return r?a(r.rgb):null},t.exports.contrastRatio=function(e,r){var n=t.exports.relativeLuminance(e),i=t.exports.relativeLuminance(r);return null==n||null==i?null:(Math.max(n,i)+.05)/(Math.min(n,i)+.05)},t.exports.offsetHSL=function(e,r,n,i){var a=t.exports.parse(e);return a?(a.hsla[0]+=r||0,a.hsla[1]=Math.max(0,Math.min(100,a.hsla[1]+(n||0))),a.hsla[2]=Math.max(0,Math.min(100,a.hsla[2]+(i||0))),t.exports.parse({hsla:a.hsla})):null},t.exports.blend=function(e,r,n){var i=t.exports.parse(e),a=t.exports.parse(r);if(null==i||null==a)return null;var o=i.rgba,s=a.rgba,u=(n="number"==typeof n&&isFinite(n)?n:1)*s[3];if(u>=1)return a;for(var l=0;l<3;l++)s[l]=s[l]*u+o[l]*(o[3]*(1-u));return s[3]=Math.max(0,Math.min(1,u+o[3]*(1-u))),t.exports.parse(s)},t.exports.hexToRGBA=s,t.exports.RGBAToHex=u,t.exports.RGBAToHSLA=o.RGBAToHSLA,t.exports.HSLAToRGBA=o.HSLAToRGBA},{"./lib/css-color":39,"./lib/css-color-names.json":38,"./lib/hex-to-rgba":40,"./lib/hsl":41,"./lib/relative-luminance":42,"./lib/rgba-to-hex":43}],34:[function(e,t,r){var n=e("lineclip");t.exports.clipSegmentToCircle=e("./lib/clip/clip-segment-to-circle"),t.exports.clipLineToCircle=e("./lib/clip/clip-line-to-circle"),t.exports.clipPolylinesToBox=function(e,t,r,i){if(!Array.isArray(t)||2!==t.length&&4!==t.length)throw new Error("Expected box to either be format [ minPoint, maxPoint ] or [ minX, minY, maxX, maxY ]");if(2===t.length){var a=t[0],o=t[1];t=[a[0],a[1],o[0],o[1]]}return i=!1!==i,(r=Boolean(r))?e.map(function(e){var r=n.polygon(e,t);return i&&r.length>2&&r.push(r[0]),r}).filter(function(e){return e.length>0}):e.map(function(e){return n.polyline(e,t)}).reduce(function(e,t){return e.concat(t)},[])},t.exports.createHatchLines=function(e,t,r,n){if(!Array.isArray(e)||2!==e.length&&4!==e.length)throw new Error("Expected box to either be format [ minPoint, maxPoint ] or [ minX, minY, maxX, maxY ]");if(2===e.length){var i=e[0],a=e[1];e=[i[0],i[1],a[0],a[1]]}null==t&&(t=-Math.PI/4);null==r&&(r=.5);null==n&&(n=[]);if(0===(r=Math.abs(r)))throw new Error("cannot use a spacing of zero as it will run an infinite loop!");var o=e[0],s=e[1],u=e[2],l=e[3],c=u-o,f=l-s;if(0===c||0===f)return n;var d=Math.sqrt(c*c+f*f)/2,h=Math.PI/2-t,p=Math.cos(h),m=Math.sin(h),b=o+c/2,g=s+f/2,v=-d;for(;v<=d;){var y=b+v*p+d*m,_=g+v*m-d*p,x=b+v*p-d*m,w=g+v*m+d*p;v+=r,y<o&&x<o||y>u&&x>u||(_<s&&w<s||_>l&&w>l||n.push([[y,_],[x,w]]))}return n}},{"./lib/clip/clip-line-to-circle":36,"./lib/clip/clip-segment-to-circle":37,lineclip:97}],35:[function(e,t,r){t.exports={random:e("./random"),math:e("./math"),penplot:e("./penplot.js"),geometry:e("./geometry.js"),shader:e("./shader.js"),color:e("./color.js")}},{"./color.js":33,"./geometry.js":34,"./math":45,"./penplot.js":46,"./random":47,"./shader.js":48}],36:[function(e,t,r){var n=e("almost-equal");function i(e){return e*e}t.exports=function(e,t,r,a,o){null==o&&(o=[]);var s,u=i(t[0]-e[0])+i(t[1]-e[1]),l=2*((t[0]-e[0])*(e[0]-r[0])+(t[1]-e[1])*(e[1]-r[1])),c=i(r[0])+i(r[1])+i(e[0])+i(e[1])-2*(r[0]*e[0]+r[1]*e[1])-i(a),f=l*l-4*u*c;if(f<0)return!1;if(n(f,0))return o.push([e[0]+(s=-l/(2*u))*(t[0]-e[0]),e[1]+s*(t[1]-e[1])]),!0;if(f>0){var d=Math.sqrt(f);return o.push([e[0]+(s=(-l+d)/(2*u))*(t[0]-e[0]),e[1]+s*(t[1]-e[1])]),o.push([e[0]+(s=(-l-d)/(2*u))*(t[0]-e[0]),e[1]+s*(t[1]-e[1])]),!0}return null}},{"almost-equal":27}],37:[function(e,t,r){var n=e("almost-equal");function i(e,t,r,n,i){return(a=r-e)*a+(o=n-t)*o<=i*i;var a,o}function a(e,t,r,n){var i=e-r,a=t-n;return Math.sqrt(i*i+a*a)}function o(e,t,r,n,i){var o=i/a(e,t,r,n);return[e+o*(r-e),t+o*(n-t)]}t.exports=function(e,t,r,s,u){return function(e,t,r,s,u,l,c,f){null==f&&(f=[]);var d,h,p,m,b,g=i(e,t,u,l,c),v=i(r,s,u,l,c);if(g&&v)return f.push([e,t]),f.push([r,s]),!0;if(g||v){p=function(e,t,r,n,i,a){var o=r-e,s=n-t,u=(o*(i-e)+s*(a-t))/(o*o+s*s);return[e+u*o,t+u*s]}(e,t,r,s,u,l),d=a(m=p[0],b=p[1],u,l),h=Math.sqrt(c*c-d*d);var y=g?[e,t]:[r,s],_=g?o(m,b,r,s,h):o(m,b,e,t,h);return n(y[0],_[0])&&n(y[1],_[1])?(f.push(y),!0):(f.push(y),f.push(_),!0)}return p=function(e,t,r,n,i,a){var o=r-e,s=n-t,u=o*(i-e)+s*(a-t);if(u<=0)return[e,t];var l=o*o+s*s;if(l<=u)return[r,n];var c=u/l;return[e+c*o,t+c*s]}(e,t,r,s,u,l),b=p[1],!(n(e,m=p[0])&&n(t,b)||n(r,m)&&n(s,b))&&(!((d=a(m,b,u,l))>c)&&(n(d,c)?(f.push([m,b]),!0):n(d,0)?(f.push(o(u,l,e,t,c)),f.push(o(u,l,r,s,c)),!0):(h=Math.sqrt(c*c-d*d),f.push(o(m,b,e,t,h)),f.push(o(m,b,r,s,h)),!0)))}(e[0],e[1],t[0],t[1],r[0],r[1],s,u)}},{"almost-equal":27}],38:[function(e,t,r){t.exports={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}},{}],39:[function(e,t,r){var n=e("./css-color-names.json"),i=e("./hsl"),a=e("./hex-to-rgba"),o=e("./rgba-to-hex"),s=e("./wrap");function u(e){if("string"!=typeof e)throw new TypeError("Color parsing must be performed on a string parameter");var t,r,u;if((e=e.toLowerCase())in n?e=n[e]:"transparent"===e&&(e="#00000000"),/^#[a-f0-9]+$/.test(e))t=a(e),u=o(t),r=i.RGBAToHSLA(t);else{var l=/^((?:rgb|hsl)a?)\s*\(([^)]*)\)/.exec(e);if(!l)return null;var c=l[1].replace(/a$/,""),f=l[2].replace(/^\s+|\s+$/g,"").split(/\s*,\s*/).map(function(e,t){return t<=2?Math.round(parseFloat(e)||0):("number"==typeof(e=parseFloat(e))&&isFinite(e)||(e=1),e)});void 0!==f[3]&&isFinite(f[3])||(f[3]=1),"rgb"===c?(r=i.RGBAToHSLA(f),t=f):"hsl"===c&&(t=i.HSLAToRGBA(f),f[0]=s(f[0],0,360),r=f),u=o(t)}return t||u||r?{hex:u,alpha:t[3],rgb:t.slice(0,3),rgba:t,hsl:r.slice(0,3),hsla:r}:null}function l(e,t,r,n){return e=Math.max(0,Math.min(255,Math.round(e))),t=Math.max(0,Math.min(255,Math.round(t))),r=Math.max(0,Math.min(255,Math.round(r))),1!==n&&isFinite(n)&&void 0!==n?"rgba("+[e,t,r,n=Math.max(0,Math.min(1,n))].join(", ")+")":"rgb("+[e,t,r].join(", ")+")"}function c(e,t,r,n){return e=s(e,0,360),e=Math.max(0,Math.min(360,Math.round(e))),t=Math.max(0,Math.min(100,Math.round(t))),r=Math.max(0,Math.min(100,Math.round(r))),1!==n&&isFinite(n)&&void 0!==n?"hsla("+[e,t,r,n=Math.max(0,Math.min(1,n))].join(", ")+")":"hsl("+[e,t,r].join(", ")+")"}t.exports.parse=function(e){if("string"==typeof e)return u(e);if(Array.isArray(e)&&e.length>=3){var t=l(e[0],e[1],e[2],e[3]);return u(t)}var r;if(e&&"object"==typeof e&&(e.hex?r=e.hex:e.rgba?r=l(e.rgba[0],e.rgba[1],e.rgba[2],e.rgba[3]):e.hsla?r=c(e.hsla[0],e.hsla[1],e.hsla[2],e.hsla[3]):e.rgb?r=l(e.rgb[0],e.rgb[1],e.rgb[2]):e.hsl&&(r=c(e.hsl[0],e.hsl[1],e.hsl[2])),r))return u(r);return null},t.exports.style=function(e){var r=t.exports.parse(e);if(r){var n=r.rgba;return l(n[0],n[1],n[2],n[3])}return null}},{"./css-color-names.json":38,"./hex-to-rgba":40,"./hsl":41,"./rgba-to-hex":43,"./wrap":44}],40:[function(e,t,r){t.exports=function(e){if("string"!=typeof e)throw new TypeError("Hex code parsing must be performed on a string parameter");if(e=e.toLowerCase(),!/^#[a-f0-9]+$/.test(e))return null;var t=e.replace(/^#/,""),r=1;8===t.length&&(r=parseInt(t.slice(6,8),16)/255,t=t.slice(0,6));4===t.length&&(r=parseInt(t.slice(3,4).repeat(2),16)/255,t=t.slice(0,3));3===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);var n=parseInt(t,16);return[n>>16,n>>8&255,255&n,r]}},{}],41:[function(e,t,r){var n=e("float-hsl2rgb"),i=e("float-rgb2hsl"),a=e("./wrap");t.exports.RGBAToHSLA=function(e){var t=i([e[0]/255,e[1]/255,e[2]/255]);return[Math.max(0,Math.min(360,Math.round(360*t[0]))),Math.max(0,Math.min(100,Math.round(100*t[1]))),Math.max(0,Math.min(100,Math.round(100*t[2]))),e[3]]},t.exports.HSLAToRGBA=function(e){var t=a(e[0],0,360),r=n([t/360,e[1]/100,e[2]/100]);return[Math.max(0,Math.min(255,Math.round(255*r[0]))),Math.max(0,Math.min(255,Math.round(255*r[1]))),Math.max(0,Math.min(255,Math.round(255*r[2]))),e[3]]}},{"./wrap":44,"float-hsl2rgb":57,"float-rgb2hsl":58}],42:[function(e,t,r){var n=.2126,i=.7152,a=.0722,o=1/12.92;function s(e){return Math.pow((e+.055)/1.055,2.4)}t.exports=function(e){var t=e[0]/255,r=e[1]/255,u=e[2]/255,l=t<=.03928?t*o:s(t),c=r<=.03928?r*o:s(r),f=u<=.03928?u*o:s(u);return l*n+c*i+f*a}},{}],43:[function(e,t,r){t.exports=function(e){if(!e||!Array.isArray(e))throw new TypeError("Must specify an array to convert into a hex code");var t=Math.max(0,Math.min(255,Math.round(e[0]||0))),r=Math.max(0,Math.min(255,Math.round(e[1]||0))),n=Math.max(0,Math.min(255,Math.round(e[2]||0))),i=e[3];void 0!==i&&isFinite(i)||(i=1);var a=Math.max(0,Math.min(255,Math.round(255*i))),o=255===a?"":(256|a).toString(16).slice(1);return"#"+((n|r<<8|t<<16|1<<24).toString(16).slice(1)+o)}},{}],44:[function(e,t,r){t.exports=function(e,t,r){if("number"!=typeof t||"number"!=typeof r)throw new TypeError('Must specify "to" and "from" arguments as numbers');if(t>r){var n=t;t=r,r=n}var i=r-t;if(0===i)return r;return e-i*Math.floor((e-t)/i)}},{}],45:[function(e,t,r){var n=e("defined"),i=e("./lib/wrap"),a=Number.EPSILON;function o(e,t,r){return t<r?e<t?t:e>r?r:e:e<r?r:e>t?t:e}function s(e,t,r){return e*(1-r)+t*r}function u(e,t,r){return Math.abs(e-t)<a?0:(r-e)/(t-e)}function l(e,t){return t=n(t,0),"number"==typeof e&&isFinite(e)?e:t}function c(e){if("number"!=typeof e)throw new TypeError("Expected dims argument");return function(t,r){var i;r=n(r,0),null==t?i=r:"number"==typeof t&&isFinite(t)&&(i=t);var a,o=[];if(null==i)for(a=0;a<e;a++)o[a]=l(t[a],r);else for(a=0;a<e;a++)o[a]=i;return o}}function f(e,t,r,n){if(n=n||[],e.length!==t.length)throw new TypeError("min and max array are expected to have the same length");for(var i=0;i<e.length;i++)n[i]=s(e[i],t[i],r);return n}function d(e,t){if("number"!=typeof(e=n(e,0)))throw new TypeError("Expected n argument to be a number");for(var r=[],i=0;i<e;i++)r.push(t);return r}function h(e,t){return(e%t+t)%t}function p(e,t,r,n){return s(e,t,1-Math.exp(-r*n))}t.exports={mod:h,fract:function(e){return e-Math.floor(e)},sign:function(e){return e>0?1:e<0?-1:0},degToRad:function(e){return e*Math.PI/180},radToDeg:function(e){return 180*e/Math.PI},wrap:i,pingPong:function(e,t){return e=h(e,2*t),t-Math.abs(e-t)},linspace:function(e,t){if("number"!=typeof(e=n(e,0)))throw new TypeError("Expected n argument to be a number");"boolean"==typeof(t=t||{})&&(t={endpoint:!0});var r=n(t.offset,0);return t.endpoint?d(e).map(function(t,n){return e<=1?0:(n+r)/(e-1)}):d(e).map(function(t,n){return(n+r)/e})},lerp:s,lerpArray:f,inverseLerp:u,lerpFrames:function(e,t,r){t=o(t,0,1);var n=e.length-1,i=t*n,a=Math.floor(i),u=i-a,l=Math.min(a+1,n),c=e[a%e.length],d=e[l%e.length];if("number"==typeof c&&"number"==typeof d)return s(c,d,u);if(Array.isArray(c)&&Array.isArray(d))return f(c,d,u,r);throw new TypeError("Mismatch in value type of two array elements: "+a+" and "+l)},clamp:o,clamp01:function(e){return o(e,0,1)},smoothstep:function(e,t,r){var n=o(u(e,t,r),0,1);return n*n*(3-2*n)},damp:p,dampArray:function(e,t,r,n,i){i=i||[];for(var a=0;a<e.length;a++)i[a]=p(e[a],t[a],r,n);return i},mapRange:function(e,t,r,n,i,o){if(Math.abs(t-r)<a)return n;var s=(e-t)/(r-t)*(i-n)+n;return o&&(i<n?s<i?s=i:s>n&&(s=n):s>i?s=i:s<n&&(s=n)),s},expand2D:c(2),expand3D:c(3),expand4D:c(4)}},{"./lib/wrap":44,defined:55}],46:[function(e,t,r){var n=e("defined"),i=e("convert-length");t.exports.polylinesToSVG=function(e,t){var r=(t=t||{}).width,a=t.height;if(void 0===r||void 0===a)throw new Error('Must specify "width" and "height" options');var o=t.units||"px",s=[],u={roundPixel:!1,precision:n(t.precision,5),pixelsPerInch:90};e.forEach(function(e){e.forEach(function(e,t){var r=0===t?"M":"L",n=i(e[0],o,"px",u).toString(),a=i(e[1],o,"px",u).toString();s.push(r+n+" "+a)})});var l=s.join(" "),c=i(r,o,"px",u).toString(),f=i(a,o,"px",u).toString(),d=t.fillStyle||"none",h=t.strokeStyle||"black",p=t.lineWidth;return void 0===p&&(p=i(.03,"cm",o,u).toString()),['<?xml version="1.0" standalone="no"?>','  <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','      "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">','  <svg width="'+r+o+'" height="'+a+o+'"','      xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+c+" "+f+'">',"    <g>",'      <path d="'+l+'" fill="'+d+'" stroke="'+h+'" stroke-width="'+p+o+'" />',"    </g>","</svg>"].join("\n")},t.exports.renderPolylines=function(e,r){var n=(r=r||{}).context;if(!n)throw new Error('Must specify "context" options');var a=r.units||"px",o=r.width,s=r.height;if(void 0===o||void 0===s)throw new Error('Must specify "width" and "height" options');var u=r.lineWidth;return void 0===u&&(u=i(.03,"cm",a,{roundPixel:!1,pixelsPerInch:90})),n.clearRect(0,0,o,s),n.fillStyle=r.background||"white",n.fillRect(0,0,o,s),e.forEach(function(e){n.beginPath(),e.forEach(function(e){n.lineTo(e[0],e[1])}),n.strokeStyle=r.foreground||r.strokeStyle||"black",n.lineWidth=u,n.lineJoin=r.lineJoin||"round",n.lineCap=r.lineCap||"round",n.stroke()}),[n.canvas,{data:t.exports.polylinesToSVG(e,r),extension:".svg"}]}},{"convert-length":50,defined:55}],47:[function(e,t,r){var n=e("seed-random"),i=e("simplex-noise"),a=e("defined");t.exports=function e(t){t=a(t,null);var r,o,s,u=Math.random,l=null,c=!1;return f(t),{value:d,createRandom:function(t){return e(t)},setSeed:f,getSeed:function(){return r},getRandomSeed:function(){return String(Math.floor(1e6*Math.random()))},valueNonZero:function(){for(var e=0;0===e;)e=d();return e},permuteNoise:function(){s=h()},noise1D:function(e,t,r){if(!isFinite(e))throw new TypeError("x component for noise() must be finite");return t=a(t,1),(r=a(r,1))*s.noise2D(e*t,0)},noise2D:function(e,t,r,n){if(!isFinite(e))throw new TypeError("x component for noise() must be finite");if(!isFinite(t))throw new TypeError("y component for noise() must be finite");return r=a(r,1),(n=a(n,1))*s.noise2D(e*r,t*r)},noise3D:function(e,t,r,n,i){if(!isFinite(e))throw new TypeError("x component for noise() must be finite");if(!isFinite(t))throw new TypeError("y component for noise() must be finite");if(!isFinite(r))throw new TypeError("z component for noise() must be finite");return n=a(n,1),(i=a(i,1))*s.noise3D(e*n,t*n,r*n)},noise4D:function(e,t,r,n,i,o){if(!isFinite(e))throw new TypeError("x component for noise() must be finite");if(!isFinite(t))throw new TypeError("y component for noise() must be finite");if(!isFinite(r))throw new TypeError("z component for noise() must be finite");if(!isFinite(n))throw new TypeError("w component for noise() must be finite");return i=a(i,1),(o=a(o,1))*s.noise4D(e*i,t*i,r*i,n*i)},sign:function(){return p()?1:-1},boolean:p,chance:function(e){if("number"!=typeof(e=a(e,.5)))throw new TypeError("expected n to be a number");return d()<e},range:m,rangeFloor:b,pick:function(e){return 0===e.length?void 0:e[b(0,e.length)]},shuffle:function(e){if(!Array.isArray(e))throw new TypeError("Expected Array, got "+typeof e);for(var t,r,n=e.length,i=e.slice();n;)t=Math.floor(d()*n--),r=i[n],i[n]=i[t],i[t]=r;return i},onCircle:g,insideCircle:function(e,t){e=a(e,1),g(1,t=t||[]);var r=e*Math.sqrt(d());return t[0]*=r,t[1]*=r,t},onSphere:function(e,t){e=a(e,1),t=t||[];var r=d()*Math.PI*2,n=2*d()-1,i=r,o=Math.acos(n);return t[0]=e*Math.sin(o)*Math.cos(i),t[1]=e*Math.sin(o)*Math.sin(i),t[2]=e*Math.cos(o),t},insideSphere:function(e,t){e=a(e,1),t=t||[];var r=d()*Math.PI*2,n=2*d()-1,i=d(),o=r,s=Math.acos(n),u=e*Math.cbrt(i);return t[0]=u*Math.sin(s)*Math.cos(o),t[1]=u*Math.sin(s)*Math.sin(o),t[2]=u*Math.cos(s),t},quaternion:function(e){e=e||[];var t=d(),r=d(),n=d(),i=Math.sqrt(1-t),a=Math.sqrt(t),o=2*Math.PI*r,s=2*Math.PI*n,u=Math.sin(o)*i,l=Math.cos(o)*i,c=Math.sin(s)*a,f=Math.cos(s)*a;return e[0]=u,e[1]=l,e[2]=c,e[3]=f,e},weighted:y,weightedSet:function(e){return 0===(e=e||[]).length?null:e[v(e)].value},weightedSetIndex:v,gaussian:function(e,t){if(e=a(e,0),t=a(t,1),c){c=!1;var r=l;return l=null,e+t*r}var n=0,i=0,o=0;do{n=2*d()-1,i=2*d()-1,o=n*n+i*i}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);return l=i*s,c=!0,e+t*(n*s)}};function f(e,t){"number"==typeof e||"string"==typeof e?o=n(r=e,t):(r=void 0,o=u),s=h(),l=null,c=!1}function d(){return o()}function h(){return new i(o)}function p(){return d()>.5}function m(e,t){if(void 0===t&&(t=e,e=0),"number"!=typeof e||"number"!=typeof t)throw new TypeError("Expected all arguments to be numbers");return d()*(t-e)+e}function b(e,t){if(void 0===t&&(t=e,e=0),"number"!=typeof e||"number"!=typeof t)throw new TypeError("Expected all arguments to be numbers");return Math.floor(m(e,t))}function g(e,t){e=a(e,1),t=t||[];var r=2*d()*Math.PI;return t[0]=e*Math.cos(r),t[1]=e*Math.sin(r),t}function v(e){return 0===(e=e||[]).length?-1:y(e.map(function(e){return e.weight}))}function y(e){if(0===(e=e||[]).length)return-1;var t,r=0;for(t=0;t<e.length;t++)r+=e[t];if(r<=0)throw new Error("Weights must sum to > 0");var n=d()*r;for(t=0;t<e.length;t++){if(n<e[t])return t;n-=e[t]}return 0}}()},{defined:55,"seed-random":312,"simplex-noise":314}],48:[function(e,t,r){var n=e("regl"),i=e("primitive-quad"),a=e("parse-color"),o=e("defined");function s(e){return e&&!Array.isArray(e)&&"object"==typeof e}t.exports=function(e){if(!(e=e||{}).gl)throw new Error('Must specify { context: "webgl" } in sketch settings, or a WebGL-enabled canvas');var t=e.gl,r={gl:t};void 0!==e.extensions&&(r.extensions=e.extensions);void 0!==e.optionalExtensions&&(r.optionalExtensions=e.optionalExtensions);void 0!==e.profile&&(r.profile=e.profile);void 0!==e.onDone&&(r.onDone=e.onDone);var u,l=n(r),c=i(),f=new Map,d=e.uniforms||{},h=Object.assign({},d);Object.keys(d).forEach(function(e){var t=d[e];h[e]="function"==typeof t?function(e,r,n){var i=t.call(d,r,n);if(s(i))if(f.has(t)){var a=f.get(t);a(i),i=a}else{var o=l.texture(i);f.set(t,o),i=o}return i}:s(t)?l.texture(t):t});try{u=l({scissor:!!e.scissor&&{enable:!0,box:{x:l.prop("scissorX"),y:l.prop("scissorY"),width:l.prop("scissorWidth"),height:l.prop("scissorHeight")}},uniforms:h,frag:e.frag||["precision highp float;","","void main () {","  gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","}"].join("\n"),vert:e.vert||["precision highp float;","attribute vec3 position;","varying vec2 vUv;","","void main () {","  gl_Position = vec4(position.xyz, 1.0);","  vUv = gl_Position.xy * 0.5 + 0.5;","}"].join("\n"),blend:!1!==e.blend?{enable:!0,func:{srcRGB:"src alpha",srcAlpha:1,dstRGB:"one minus src alpha",dstAlpha:1}}:void 0,attributes:{position:c.positions},elements:c.cells})}catch(e){y(e)}var p=o(e.clearColor,"black");if("string"==typeof p){var m=a(p);if(!m.rgb)throw new Error('Error parsing { clearColor } color string "'+p+'"');p=m.rgb.slice(0,3).map(function(e){return e/255})}else if(p&&(!Array.isArray(p)||p.length<3))throw new Error("Error with { clearColor } option, must be a string or [ r, g, b ] float array");var b=o(e.clearAlpha,1),g=!!p&&p.concat([b||0]);return{render:function(e){l.poll(),g&&l.clear({color:g,depth:1,stencil:0}),v(e),t.flush()},regl:l,drawQuad:v,unload:function(){f.clear(),l.destroy()}};function v(e){if(e=e||{},u)try{u(e)}catch(t){y(t)&&null==e&&console.warn('Warning: shader.render() is not called with any "props" parameter')}}function y(e){if(/^\(regl\)/.test(e.message))return!0;throw e}}},{defined:55,"parse-color":286,"primitive-quad":290,regl:310}],49:[function(e,t,r){(function(n){!function(n,i){"object"==typeof r&&void 0!==t?t.exports=i(e("convert-length")):"function"==typeof define&&define.amd?define(["convert-length"],i):n.canvasSketch=i(null)}(this,function(e){e=e&&e.hasOwnProperty("default")?e.default:e;var t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;var a=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,n){for(var a,o,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),u=1;u<arguments.length;u++){for(var l in a=Object(arguments[u]))r.call(a,l)&&(s[l]=a[l]);if(t){o=t(a);for(var c=0;c<o.length;c++)i.call(a,o[c])&&(s[o[c]]=a[o[c]])}}return s},o="undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:{};function s(e,t){return e(t={exports:{}},t.exports),t.exports}var u=o.performance&&o.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date},l=function(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then};var c=function(e){return!(!e||"object"!=typeof e)&&("object"==typeof window&&"object"==typeof window.Node?e instanceof window.Node:"number"==typeof e.nodeType&&"string"==typeof e.nodeName)};function f(){return"undefined"!=typeof window&&window["canvas-sketch-cli"]}function d(){for(var e=arguments,t=0;t<arguments.length;t++)if(null!=e[t])return e[t]}function h(){return"undefined"!=typeof document}var p,m=s(function(e,t){function r(e){var t=[];for(var r in e)t.push(r);return t}(e.exports="function"==typeof Object.keys?Object.keys:r).shim=r}),b=s(function(e,t){var r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function n(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function i(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=r?n:i).supported=n,t.unsupported=i}),g=s(function(e){var t=Array.prototype.slice,r=e.exports=function(e,a,o){return o||(o={}),e===a||(e instanceof Date&&a instanceof Date?e.getTime()===a.getTime():!e||!a||"object"!=typeof e&&"object"!=typeof a?o.strict?e===a:e==a:function(e,a,o){var s,u;if(n(e)||n(a))return!1;if(e.prototype!==a.prototype)return!1;if(b(e))return!!b(a)&&(e=t.call(e),a=t.call(a),r(e,a,o));if(i(e)){if(!i(a))return!1;if(e.length!==a.length)return!1;for(s=0;s<e.length;s++)if(e[s]!==a[s])return!1;return!0}try{var l=m(e),c=m(a)}catch(e){return!1}if(l.length!=c.length)return!1;for(l.sort(),c.sort(),s=l.length-1;s>=0;s--)if(l[s]!=c[s])return!1;for(s=l.length-1;s>=0;s--)if(!r(e[u=l[s]],a[u],o))return!1;return typeof e==typeof a}(e,a,o))};function n(e){return null==e}function i(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}}),v=s(function(e,t){!function(t){var r,n,i,a=(r=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,n=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,i=/[^-+\dA-Z]/g,function(e,t,s,u){if(1!==arguments.length||"string"!==(null===(l=e)?"null":void 0===l?"undefined":"object"!=typeof l?typeof l:Array.isArray(l)?"array":{}.toString.call(l).slice(8,-1).toLowerCase())||/\d/.test(e)||(t=e,e=void 0),(e=e||new Date)instanceof Date||(e=new Date(e)),isNaN(e))throw TypeError("Invalid date");var l,c=(t=String(a.masks[t]||t||a.masks.default)).slice(0,4);"UTC:"!==c&&"GMT:"!==c||(t=t.slice(4),s=!0,"GMT:"===c&&(u=!0));var f=s?"getUTC":"get",d=e[f+"Date"](),h=e[f+"Day"](),p=e[f+"Month"](),m=e[f+"FullYear"](),b=e[f+"Hours"](),g=e[f+"Minutes"](),v=e[f+"Seconds"](),y=e[f+"Milliseconds"](),_=s?0:e.getTimezoneOffset(),x=function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var r=new Date(t.getFullYear(),0,4);r.setDate(r.getDate()-(r.getDay()+6)%7+3);var n=t.getTimezoneOffset()-r.getTimezoneOffset();return t.setHours(t.getHours()-n),1+Math.floor((t-r)/6048e5)}(e),w=function(e){var t=e.getDay();return 0===t&&(t=7),t}(e),E={d:d,dd:o(d),ddd:a.i18n.dayNames[h],dddd:a.i18n.dayNames[h+7],m:p+1,mm:o(p+1),mmm:a.i18n.monthNames[p],mmmm:a.i18n.monthNames[p+12],yy:String(m).slice(2),yyyy:m,h:b%12||12,hh:o(b%12||12),H:b,HH:o(b),M:g,MM:o(g),s:v,ss:o(v),l:o(y,3),L:o(Math.round(y/10)),t:b<12?a.i18n.timeNames[0]:a.i18n.timeNames[1],tt:b<12?a.i18n.timeNames[2]:a.i18n.timeNames[3],T:b<12?a.i18n.timeNames[4]:a.i18n.timeNames[5],TT:b<12?a.i18n.timeNames[6]:a.i18n.timeNames[7],Z:u?"GMT":s?"UTC":(String(e).match(n)||[""]).pop().replace(i,""),o:(_>0?"-":"+")+o(100*Math.floor(Math.abs(_)/60)+Math.abs(_)%60,4),S:["th","st","nd","rd"][d%10>3?0:(d%100-d%10!=10)*d%10],W:x,N:w};return t.replace(r,function(e){return e in E?E[e]:e.slice(1,e.length-1)})});function o(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}a.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},a.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},e.exports=a}()}),y="",_=function(e,t){if("string"!=typeof e)throw new TypeError("expected a string");if(1===t)return e;if(2===t)return e+e;var r=e.length*t;if(p!==e||void 0===p)p=e,y="";else if(y.length>=r)return y.substr(0,r);for(;r>y.length&&t>1;)1&t&&(y+=e),t>>=1,e+=e;return y=(y+=e).substr(0,r)};var x,w=function(e,t,r){return e=e.toString(),void 0===t?e:(r=0===r?"0":r?r.toString():" ",_(r,t-e.length)+e)},E=function(){},k={extension:"",prefix:"",suffix:""},P=["image/png","image/jpeg","image/webp"];function M(e,t){return void 0===t&&(t={}),new Promise(function(r,n){t=a({},k,t);var i=O(Object.assign({},t,{frame:void 0})),o=e?"streamStart":"streamEnd",s=f();return s&&s.output&&"function"==typeof s[o]?s[o](a({},t,{filename:i})).then(function(e){return r(e)}):r({filename:i,client:!1})})}function A(e,t){return void 0===t&&(t={}),function(e){return new Promise(function(t){var r=e.indexOf(",");if(-1!==r){for(var n=e.slice(r+1),i=window.atob(n),a=e.slice(0,r),o=/data:([^;]+)/.exec(a),s=(o?o[1]:"")||void 0,u=new ArrayBuffer(i.length),l=new Uint8Array(u),c=0;c<i.length;c++)l[c]=i.charCodeAt(c);t(new window.Blob([u],{type:s}))}else t(new window.Blob)})}(e).then(function(e){return C(e,t)})}function C(e,t){return void 0===t&&(t={}),new Promise(function(r){var n=(t=a({},k,t)).filename,i=f();if(i&&"function"==typeof i.saveBlob&&i.output)return i.saveBlob(e,a({},t,{filename:n})).then(function(e){return r(e)});x||((x=document.createElement("a")).style.visibility="hidden",x.target="_blank"),x.download=n,x.href=window.URL.createObjectURL(e),document.body.appendChild(x),x.onclick=function(){x.onclick=E,setTimeout(function(){window.URL.revokeObjectURL(e),x.parentElement&&x.parentElement.removeChild(x),x.removeAttribute("href"),r({filename:n,client:!1})})},x.click()})}function O(e){if(void 0===e&&(e={}),"function"==typeof(e=a({},e)).file)return e.file(e);if(e.file)return e.file;var t,r=null,n="";("string"==typeof e.extension&&(n=e.extension),"number"==typeof e.frame)&&(t="number"==typeof e.totalFrames?e.totalFrames:Math.max(1e3,e.frame),r=w(String(e.frame),String(t).length,"0"));var i=isFinite(e.totalLayers)&&isFinite(e.layer)&&e.totalLayers>1?""+e.layer:"";return null!=r?[i,r].filter(Boolean).join("-")+n:[e.prefix,e.name||e.timeStamp,i,e.hash,e.suffix].filter(Boolean).join("-")+n}var T={dimension:"dimensions",animated:"animate",animating:"animate",unit:"units",P5:"p5",pixellated:"pixelated",looping:"loop",pixelPerInch:"pixels"},S=["dimensions","units","pixelsPerInch","orientation","scaleToFit","scaleToView","bleed","pixelRatio","exportPixelRatio","maxPixelRatio","scaleContext","resizeCanvas","styleCanvas","canvas","context","attributes","parent","file","name","prefix","suffix","animate","playing","loop","duration","totalFrames","fps","playbackRate","timeScale","frame","time","flush","pixelated","hotkeys","p5","id","scaleToFitPadding","data","params","encoding","encodingQuality"],R=function(e){Object.keys(e).forEach(function(e){e in T?console.warn('[canvas-sketch] Could not recognize the setting "'+e+'", did you mean "'+T[e]+'"?'):S.includes(e)||console.warn('[canvas-sketch] Could not recognize the setting "'+e+'"')})};var L=[["postcard",101.6,152.4],["poster-small",280,430],["poster",460,610],["poster-large",610,910],["business-card",50.8,88.9],["2r",64,89],["3r",89,127],["4r",102,152],["5r",127,178],["6r",152,203],["8r",203,254],["10r",254,305],["11r",279,356],["12r",305,381],["a0",841,1189],["a1",594,841],["a2",420,594],["a3",297,420],["a4",210,297],["a5",148,210],["a6",105,148],["a7",74,105],["a8",52,74],["a9",37,52],["a10",26,37],["2a0",1189,1682],["4a0",1682,2378],["b0",1e3,1414],["b1",707,1e3],["b1+",720,1020],["b2",500,707],["b2+",520,720],["b3",353,500],["b4",250,353],["b5",176,250],["b6",125,176],["b7",88,125],["b8",62,88],["b9",44,62],["b10",31,44],["b11",22,32],["b12",16,22],["c0",917,1297],["c1",648,917],["c2",458,648],["c3",324,458],["c4",229,324],["c5",162,229],["c6",114,162],["c7",81,114],["c8",57,81],["c9",40,57],["c10",28,40],["c11",22,32],["c12",16,22],["half-letter",5.5,8.5,"in"],["letter",8.5,11,"in"],["legal",8.5,14,"in"],["junior-legal",5,8,"in"],["ledger",11,17,"in"],["tabloid",11,17,"in"],["ansi-a",8.5,11,"in"],["ansi-b",11,17,"in"],["ansi-c",17,22,"in"],["ansi-d",22,34,"in"],["ansi-e",34,44,"in"],["arch-a",9,12,"in"],["arch-b",12,18,"in"],["arch-c",18,24,"in"],["arch-d",24,36,"in"],["arch-e",36,48,"in"],["arch-e1",30,42,"in"],["arch-e2",26,38,"in"],["arch-e3",27,39,"in"]].reduce(function(e,t){var r={units:t[3]||"mm",dimensions:[t[1],t[2]]};return e[t[0]]=r,e[t[0].replace(/-/g," ")]=r,e},{});function D(t,r,n,i){return void 0===r&&(r="px"),void 0===n&&(n="px"),void 0===i&&(i=72),e(t,r,n,{pixelsPerInch:i,precision:4,roundPixel:!0})}function j(e,t){var r,n,i,a,o,s,u=h(),l=t.dimensions,c=function(e){return!(!e.dimensions||"string"!=typeof e.dimensions&&!(Array.isArray(e.dimensions)&&e.dimensions.length>=2))}(t),f=e.exporting,p=!!c&&!1!==t.scaleToFit,m=!(!f&&c)||t.scaleToView;u||(p=m=!1);var b,g,v=t.units,y="number"==typeof t.pixelsPerInch&&isFinite(t.pixelsPerInch)?t.pixelsPerInch:72,_=d(t.bleed,0),x=u?window.devicePixelRatio:1,w=m?x:1;"number"==typeof t.pixelRatio&&isFinite(t.pixelRatio)?g=d(t.exportPixelRatio,b=t.pixelRatio):c?(b=w,g=d(t.exportPixelRatio,1)):g=d(t.exportPixelRatio,b=x),"number"==typeof t.maxPixelRatio&&isFinite(t.maxPixelRatio)&&(b=Math.min(t.maxPixelRatio,b)),f&&(b=g);var E,k,P=function(e,t){if(!h())return[300,150];var r=t.parent||window;if(r===window||r===document||r===document.body)return[window.innerWidth,window.innerHeight];var n=r.getBoundingClientRect();return[n.width,n.height]}(0,t),M=P[0],A=P[1];if(c){var C=function(e,t,r){if(void 0===t&&(t="px"),void 0===r&&(r=72),"string"==typeof e){var n=e.toLowerCase();if(!(n in L))throw new Error('The dimension preset "'+e+'" is not supported or could not be found; try using a4, a3, postcard, letter, etc.');var i=L[n];return i.dimensions.map(function(e){return D(e,i.units,t,r)})}return e}(l,v,y),O=Math.max(C[0],C[1]),T=Math.min(C[0],C[1]);if(t.orientation){var S="landscape"===t.orientation;r=S?O:T,n=S?T:O}else r=C[0],n=C[1];E=r,k=n,r+=2*_,n+=2*_}else E=r=M,k=n=A;var R=r,j=n;if(c&&v&&(R=D(r,v,"px",y),j=D(n,v,"px",y)),i=Math.round(R),a=Math.round(j),p&&!f&&c){var F=r/n,I=M/A,N=d(t.scaleToFitPadding,40),B=Math.round(M-2*N),G=Math.round(A-2*N);(i>B||a>G)&&(I>F?(a=G,i=Math.round(a*F)):(i=B,a=Math.round(i/F)))}return{bleed:_,pixelRatio:b,width:r,height:n,dimensions:[r,n],units:v||"px",scaleX:(o=m?Math.round(b*i):Math.round(b*R))/r,scaleY:(s=m?Math.round(b*a):Math.round(b*j))/n,viewportWidth:m?Math.round(i):Math.round(R),viewportHeight:m?Math.round(a):Math.round(j),canvasWidth:o,canvasHeight:s,trimWidth:E,trimHeight:k,styleWidth:i,styleHeight:a}}var F=function(e,t){if("string"!=typeof e)throw new TypeError("must specify type string");if(t=t||{},"undefined"==typeof document&&!t.canvas)return null;var r=t.canvas||document.createElement("canvas");"number"==typeof t.width&&(r.width=t.width);"number"==typeof t.height&&(r.height=t.height);var n,i=t;try{var a=[e];0===e.indexOf("webgl")&&a.push("experimental-"+e);for(var o=0;o<a.length;o++)if(n=r.getContext(a[o],i))return n}catch(e){n=null}return n||null};function I(e){var t,r;void 0===e&&(e={});var n=!1;if(!1!==e.canvas){if(!(t=e.context)||"string"==typeof t){var i=e.canvas;i||(i=function(){if(!h())throw new Error("It appears you are runing from Node.js or a non-browser environment. Try passing in an existing { canvas } interface instead.");return document.createElement("canvas")}(),n=!0);var o=t||"2d";if("function"!=typeof i.getContext)throw new Error("The specified { canvas } element does not have a getContext() function, maybe it is not a <canvas> tag?");if(!(t=F(o,a({},e.attributes,{canvas:i}))))throw new Error("Failed at canvas.getContext('"+o+"') - the browser may not support this context, or a different context may already be in use with this canvas.")}if(r=t.canvas,e.canvas&&r!==e.canvas)throw new Error("The { canvas } and { context } settings must point to the same underlying canvas element");e.pixelated&&(t.imageSmoothingEnabled=!1,t.mozImageSmoothingEnabled=!1,t.oImageSmoothingEnabled=!1,t.webkitImageSmoothingEnabled=!1,t.msImageSmoothingEnabled=!1,r.style["image-rendering"]="pixelated")}return{canvas:r,context:t,ownsCanvas:n}}var N=function(){var e=this;this._settings={},this._props={},this._sketch=void 0,this._raf=null,this._lastRedrawResult=void 0,this._isP5Resizing=!1,this._keyboardShortcuts=function(e){void 0===e&&(e={});var t=function(t){if(e.enabled()){var r=f();83!==t.keyCode||t.altKey||!t.metaKey&&!t.ctrlKey?32===t.keyCode?e.togglePlay(t):r&&!t.altKey&&75===t.keyCode&&(t.metaKey||t.ctrlKey)&&(t.preventDefault(),e.commit(t)):(t.preventDefault(),e.save(t))}};return{attach:function(){window.addEventListener("keydown",t)},detach:function(){window.removeEventListener("keydown",t)}}}({enabled:function(){return!1!==e.settings.hotkeys},save:function(t){t.shiftKey?e.props.recording?(e.endRecord(),e.run()):e.record():e.props.recording||e.exportFrame()},togglePlay:function(){e.props.playing?e.pause():e.play()},commit:function(t){e.exportFrame({commit:!0})}}),this._animateHandler=function(){return e.animate()},this._resizeHandler=function(){e.resize()&&e.render()}},B={sketch:{configurable:!0},settings:{configurable:!0},props:{configurable:!0}};B.sketch.get=function(){return this._sketch},B.settings.get=function(){return this._settings},B.props.get=function(){return this._props},N.prototype._computePlayhead=function(e,t){return"number"==typeof t&&isFinite(t)?e/t:0},N.prototype._computeFrame=function(e,t,r,n){return isFinite(r)&&r>1?Math.floor(e*(r-1)):Math.floor(n*t)},N.prototype._computeCurrentFrame=function(){return this._computeFrame(this.props.playhead,this.props.time,this.props.totalFrames,this.props.fps)},N.prototype._getSizeProps=function(){var e=this.props;return{width:e.width,height:e.height,pixelRatio:e.pixelRatio,canvasWidth:e.canvasWidth,canvasHeight:e.canvasHeight,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight}},N.prototype.run=function(){if(!this.sketch)throw new Error("should wait until sketch is loaded before trying to play()");return!1!==this.settings.playing&&this.play(),"function"==typeof this.sketch.dispose&&console.warn("In canvas-sketch@0.0.23 the dispose() event has been renamed to unload()"),this.props.started||(this._signalBegin(),this.props.started=!0),this.tick(),this.render(),this},N.prototype.play=function(){var e=this.settings.animate;"animation"in this.settings&&(e=!0,console.warn("[canvas-sketch] { animation } has been renamed to { animate }")),e&&(h()?this.props.playing||(this.props.started||(this._signalBegin(),this.props.started=!0),this.props.playing=!0,null!=this._raf&&window.cancelAnimationFrame(this._raf),this._lastTime=u(),this._raf=window.requestAnimationFrame(this._animateHandler)):console.error("[canvas-sketch] WARN: Using { animate } in Node.js is not yet supported"))},N.prototype.pause=function(){this.props.recording&&this.endRecord(),this.props.playing=!1,null!=this._raf&&h()&&window.cancelAnimationFrame(this._raf)},N.prototype.togglePlay=function(){this.props.playing?this.pause():this.play()},N.prototype.stop=function(){this.pause(),this.props.frame=0,this.props.playhead=0,this.props.time=0,this.props.deltaTime=0,this.props.started=!1,this.render()},N.prototype.record=function(){var e=this;if(!this.props.recording)if(h()){this.stop(),this.props.playing=!0,this.props.recording=!0;var t=this._createExportOptions({sequence:!0}),r=1/this.props.fps;null!=this._raf&&window.cancelAnimationFrame(this._raf);var n,i=function(){return e.props.recording?(e.props.deltaTime=r,e.tick(),e.exportFrame(t).then(function(){e.props.recording&&(e.props.deltaTime=0,e.props.frame++,e.props.frame<e.props.totalFrames?(e.props.time+=r,e.props.playhead=e._computePlayhead(e.props.time,e.props.duration),e._raf=window.requestAnimationFrame(i)):(console.log("Finished recording"),e._signalEnd(),e.endRecord(),e.stop(),e.run()))})):Promise.resolve()};this.props.started||(this._signalBegin(),this.props.started=!0),(n=t,void 0===n&&(n={}),M(!0,n)).catch(function(e){console.error(e)}).then(function(t){e._raf=window.requestAnimationFrame(i)})}else console.error("[canvas-sketch] WARN: Recording from Node.js is not yet supported")},N.prototype._signalBegin=function(){var e=this;this.sketch&&"function"==typeof this.sketch.begin&&this._wrapContextScale(function(t){return e.sketch.begin(t)})},N.prototype._signalEnd=function(){var e=this;this.sketch&&"function"==typeof this.sketch.end&&this._wrapContextScale(function(t){return e.sketch.end(t)})},N.prototype.endRecord=function(){var e;null!=this._raf&&h()&&window.cancelAnimationFrame(this._raf),this.props.recording=!1,this.props.deltaTime=0,this.props.playing=!1,(void 0===e&&(e={}),M(!1,e)).catch(function(e){console.error(e)})},N.prototype._createExportOptions=function(e){return void 0===e&&(e={}),{sequence:e.sequence,save:e.save,fps:this.props.fps,frame:e.sequence?this.props.frame:void 0,file:this.settings.file,name:this.settings.name,prefix:this.settings.prefix,suffix:this.settings.suffix,encoding:this.settings.encoding,encodingQuality:this.settings.encodingQuality,timeStamp:e.timeStamp||v(new Date,"yyyy.mm.dd-HH.MM.ss"),totalFrames:isFinite(this.props.totalFrames)?Math.max(100,this.props.totalFrames):1e3}},N.prototype.exportFrame=function(e){var t=this;if(void 0===e&&(e={}),!this.sketch)return Promise.all([]);"function"==typeof this.sketch.preExport&&this.sketch.preExport();var r=this._createExportOptions(e),n=f(),i=Promise.resolve();if(n&&e.commit&&"function"==typeof n.commit){var o=a({},r),s=n.commit(o);i=l(s)?s:Promise.resolve(s)}return i.then(function(e){return t._doExportFrame(a({},r,{hash:e||""}))}).then(function(e){return 1===e.length?e[0]:e})},N.prototype._doExportFrame=function(e){var t=this;void 0===e&&(e={}),this._props.exporting=!0,this.resize();var r=this.render();return void 0===r&&(r=[this.props.canvas]),r=(r=[].concat(r).filter(Boolean)).map(function(t){var r,n="object"==typeof t&&t&&("data"in t||"dataURL"in t),i=n?t.data:t,o=n?a({},t,{data:i}):{data:i};if(c(r=i)&&/canvas/i.test(r.nodeName)&&"function"==typeof r.getContext){var s=function(e,t){void 0===t&&(t={});var r=t.encoding||"image/png";if(!P.includes(r))throw new Error("Invalid canvas encoding "+r);var n=(r.split("/")[1]||"").replace(/jpeg/i,"jpg");return n&&(n=("."+n).toLowerCase()),{extension:n,type:r,dataURL:e.toDataURL(r,t.encodingQuality)}}(i,{encoding:o.encoding||e.encoding,encodingQuality:d(o.encodingQuality,e.encodingQuality,.95)});return Object.assign(o,{dataURL:s.dataURL,extension:s.extension,type:s.type})}return o}),this._props.exporting=!1,this.resize(),this.render(),Promise.all(r.map(function(t,r,n){var i=a({extension:"",prefix:"",suffix:""},e,t,{layer:r,totalLayers:n.length}),o=!1!==e.save&&t.save;for(var s in i.save=!1!==o,i.filename=O(i),delete i.encoding,delete i.encodingQuality,i)void 0===i[s]&&delete i[s];var u=Promise.resolve({});if(i.save){var l=i.data;if(i.dataURL)u=A(i.dataURL,i);else u=function(e,t){void 0===t&&(t={});var r=Array.isArray(e)?e:[e];return C(new window.Blob(r,{type:t.type||""}),t)}(l,i)}return u.then(function(e){return Object.assign({},i,e)})})).then(function(r){var n=r.filter(function(e){return e.save});if(n.length>0){var i,a=n.find(function(e){return e.outputName}),o=n.some(function(e){return e.client}),s=n.some(function(e){return e.stream});i=n.length>1?n.length:a?a.outputName+"/"+n[0].filename:""+n[0].filename;var u="";if(e.sequence)u=isFinite(t.props.totalFrames)?" (frame "+(e.frame+1)+" / "+t.props.totalFrames+")":" (frame "+e.frame+")";else n.length>1&&(u=" files");console.log("%c["+(o?"canvas-sketch-cli":"canvas-sketch")+"]%c "+(s?"Streaming into":"Exported")+" %c"+i+"%c"+u,"color: #8e8e8e;","color: initial;","font-weight: bold;","font-weight: initial;")}return"function"==typeof t.sketch.postExport&&t.sketch.postExport(),r})},N.prototype._wrapContextScale=function(e){this._preRender(),e(this.props),this._postRender()},N.prototype._preRender=function(){var e=this.props;this.props.gl||!e.context||e.p5?e.p5&&e.p5.scale(e.scaleX/e.pixelRatio,e.scaleY/e.pixelRatio):(e.context.save(),!1!==this.settings.scaleContext&&e.context.scale(e.scaleX,e.scaleY))},N.prototype._postRender=function(){var e=this.props;this.props.gl||!e.context||e.p5||e.context.restore(),e.gl&&!1!==this.settings.flush&&!e.p5&&e.gl.flush()},N.prototype.tick=function(){this.sketch&&"function"==typeof this.sketch.tick&&(this._preRender(),this.sketch.tick(this.props),this._postRender())},N.prototype.render=function(){return this.props.p5?(this._lastRedrawResult=void 0,this.props.p5.redraw(),this._lastRedrawResult):this.submitDrawCall()},N.prototype.submitDrawCall=function(){if(this.sketch){var e,t=this.props;return this._preRender(),"function"==typeof this.sketch?e=this.sketch(t):"function"==typeof this.sketch.render&&(e=this.sketch.render(t)),this._postRender(),e}},N.prototype.update=function(e){var t=this;void 0===e&&(e={});var r=["animate"];Object.keys(e).forEach(function(e){if(r.indexOf(e)>=0)throw new Error("Sorry, the { "+e+" } option is not yet supported with update().")});var n=this._settings.canvas,i=this._settings.context;for(var a in e){var o=e[a];void 0!==o&&(t._settings[a]=o)}var s=Object.assign({},this._settings,e);if("time"in e&&"frame"in e)throw new Error("You should specify { time } or { frame } but not both");if("time"in e?delete s.frame:"frame"in e&&delete s.time,"duration"in e&&"totalFrames"in e)throw new Error("You should specify { duration } or { totalFrames } but not both");"duration"in e?delete s.totalFrames:"totalFrames"in e&&delete s.duration,"data"in e&&(this._props.data=e.data);var u=this.getTimeProps(s);if(Object.assign(this._props,u),n!==this._settings.canvas||i!==this._settings.context){var l=I(this._settings),c=l.context;this.props.canvas=l.canvas,this.props.context=c,this._setupGLKey(),this._appendCanvasIfNeeded()}return e.p5&&"function"!=typeof e.p5&&(this.props.p5=e.p5,this.props.p5.draw=function(){t._isP5Resizing||(t._lastRedrawResult=t.submitDrawCall())}),"playing"in e&&(e.playing?this.play():this.pause()),R(this._settings),this.resize(),this.render(),this.props},N.prototype.resize=function(){var e=this._getSizeProps(),t=this.settings,r=this.props,n=j(r,t);Object.assign(this._props,n);var i=this.props,a=i.pixelRatio,o=i.canvasWidth,s=i.canvasHeight,u=i.styleWidth,l=i.styleHeight,c=this.props.canvas;c&&!1!==t.resizeCanvas&&(r.p5?c.width===o&&c.height===s||(this._isP5Resizing=!0,r.p5.pixelDensity(a),r.p5.resizeCanvas(o/a,s/a,!1),this._isP5Resizing=!1):(c.width!==o&&(c.width=o),c.height!==s&&(c.height=s)),h()&&!1!==t.styleCanvas&&(c.style.width=u+"px",c.style.height=l+"px"));var f=this._getSizeProps(),d=!g(e,f);return d&&this._sizeChanged(),d},N.prototype._sizeChanged=function(){this.sketch&&"function"==typeof this.sketch.resize&&this.sketch.resize(this.props)},N.prototype.animate=function(){if(this.props.playing)if(h()){this._raf=window.requestAnimationFrame(this._animateHandler);var e=u(),t=1e3/this.props.fps,r=e-this._lastTime,n=this.props.duration,i="number"==typeof n&&isFinite(n),a=!0,o=this.settings.playbackRate;"fixed"===o?r=t:"throttle"===o?r>t?this._lastTime=e-=r%t:a=!1:this._lastTime=e;var s=r/1e3,l=this.props.time+s*this.props.timeScale;l<0&&i&&(l=n+l);var c=!1,f=!1;if(i&&l>=n&&(!1!==this.settings.loop?(a=!0,l%=n,f=!0):(a=!1,l=n,c=!0),this._signalEnd()),a){this.props.deltaTime=s,this.props.time=l,this.props.playhead=this._computePlayhead(l,n);var d=this.props.frame;this.props.frame=this._computeCurrentFrame(),f&&this._signalBegin(),d!==this.props.frame&&this.tick(),this.render(),this.props.deltaTime=0}c&&this.pause()}else console.error("[canvas-sketch] WARN: Animation in Node.js is not yet supported")},N.prototype.dispatch=function(e){if("function"!=typeof e)throw new Error("must pass function into dispatch()");e(this.props),this.render()},N.prototype.mount=function(){this._appendCanvasIfNeeded()},N.prototype.unmount=function(){h()&&(window.removeEventListener("resize",this._resizeHandler),this._keyboardShortcuts.detach()),this.props.canvas.parentElement&&this.props.canvas.parentElement.removeChild(this.props.canvas)},N.prototype._appendCanvasIfNeeded=function(){h()&&(!1!==this.settings.parent&&this.props.canvas&&!this.props.canvas.parentElement&&(this.settings.parent||document.body).appendChild(this.props.canvas))},N.prototype._setupGLKey=function(){var e;this.props.context&&("function"==typeof(e=this.props.context).clear&&"function"==typeof e.clearColor&&"function"==typeof e.bufferData?this._props.gl=this.props.context:delete this._props.gl)},N.prototype.getTimeProps=function(e){void 0===e&&(e={});var t=e.duration,r=e.totalFrames,n=d(e.timeScale,1),i=d(e.fps,24),a="number"==typeof t&&isFinite(t),o="number"==typeof r&&isFinite(r),s=a?Math.floor(i*t):void 0,u=o?r/i:void 0;if(a&&o&&s!==r)throw new Error("You should specify either duration or totalFrames, but not both. Or, they must match exactly.");void 0===e.dimensions&&void 0!==e.units&&console.warn("You've specified a { units } setting but no { dimension }, so the units will be ignored."),r=d(r,s,Infinity),t=d(t,u,Infinity);var l=e.time,c=e.frame,f="number"==typeof l&&isFinite(l),h="number"==typeof c&&isFinite(c),p=0,m=0,b=0;if(f&&h)throw new Error("You should specify either start frame or time, but not both.");return f?(b=this._computePlayhead(p=l,t),m=this._computeFrame(b,p,r,i)):h&&(b=this._computePlayhead(p=(m=c)/i,t)),{playhead:b,time:p,frame:m,duration:t,totalFrames:r,fps:i,timeScale:n}},N.prototype.setup=function(e){var t=this;if(void 0===e&&(e={}),this.sketch)throw new Error("Multiple setup() calls not yet supported.");this._settings=Object.assign({},e,this._settings),R(this._settings);var r=I(this._settings),n=r.context,i=r.canvas,a=this.getTimeProps(this._settings);this._props=Object.assign({},a,{canvas:i,context:n,deltaTime:0,started:!1,exporting:!1,playing:!1,recording:!1,settings:this.settings,data:this.settings.data,render:function(){return t.render()},togglePlay:function(){return t.togglePlay()},dispatch:function(e){return t.dispatch(e)},tick:function(){return t.tick()},resize:function(){return t.resize()},update:function(e){return t.update(e)},exportFrame:function(e){return t.exportFrame(e)},record:function(){return t.record()},play:function(){return t.play()},pause:function(){return t.pause()},stop:function(){return t.stop()}}),this._setupGLKey(),this.resize()},N.prototype.loadAndRun=function(e,t){var r=this;return this.load(e,t).then(function(){return r.run(),r})},N.prototype.unload=function(){var e=this;this.pause(),this.sketch&&("function"==typeof this.sketch.unload&&this._wrapContextScale(function(t){return e.sketch.unload(t)}),this._sketch=null)},N.prototype.destroy=function(){this.unload(),this.unmount()},N.prototype.load=function(e,t){var r=this;if("function"!=typeof e)throw new Error("The function must take in a function as the first parameter. Example:\n  canvasSketcher(() => { ... }, settings)");this.sketch&&this.unload(),void 0!==t&&this.update(t),this._preRender();var n=Promise.resolve();if(this.settings.p5){if(!h())throw new Error("[canvas-sketch] ERROR: Using p5.js in Node.js is not supported");n=new Promise(function(e){var t,n=r.settings.p5;n.p5&&(t=n.preload,n=n.p5);var i=function(n){t&&(n.preload=function(){return t(n)}),n.setup=function(){var t=r.props,i="webgl"===r.settings.context,a=i?n.WEBGL:n.P2D;n.noLoop(),n.pixelDensity(t.pixelRatio),n.createCanvas(t.viewportWidth,t.viewportHeight,a),i&&r.settings.attributes&&n.setAttributes(r.settings.attributes),r.update({p5:n,canvas:n.canvas,context:n._renderer.drawingContext}),e()}};if("function"==typeof n)new n(i);else{if("function"!=typeof window.createCanvas)throw new Error("{ p5 } setting is passed but can't find p5.js in global (window) scope. Maybe you did not create it globally?\nnew p5(); // <-- attaches to global scope");i(window)}})}return n.then(function(){var t=e(r.props);return l(t)||(t=Promise.resolve(t)),t}).then(function(e){return e||(e={}),r._sketch=e,h()&&(r._keyboardShortcuts.attach(),window.addEventListener("resize",r._resizeHandler)),r._postRender(),r._sizeChanged(),r}).catch(function(e){throw console.warn("Could not start sketch, the async loading function rejected with an error:\n    Error: "+e.message),e})},Object.defineProperties(N.prototype,B);var G="hot-id-cache",q=[];function U(e,t){if(void 0===t&&(t={}),t.p5){if(t.canvas||t.context&&"string"!=typeof t.context)throw new Error('In { p5 } mode, you can\'t pass your own canvas or context, unless the context is a "webgl" or "2d" string');t=Object.assign({},t,{canvas:!1,context:"string"==typeof t.context&&t.context})}var r,n,i=(r=f())&&r.hot;i&&(n=d(t.id,"$__DEFAULT_CANVAS_SKETCH_ID__$"));var a=i&&"string"==typeof n;a&&q.includes(n)&&(console.warn("Warning: You have multiple calls to canvasSketch() in --hot mode. You must pass unique { id } strings in settings to enable hot reload across multiple sketches. ",n),a=!1);var o=Promise.resolve();if(a){q.push(n);var s=function(e){var t=f();if(t)return t[G]=t[G]||{},t[G][e]}(n);if(s){var u=function(){var e,r=(e=s.manager,t.animate?{time:e.props.time}:void 0);return s.manager.destroy(),r};o=s.load.then(u).catch(u)}}return o.then(function(r){var i,o,s,u,l=new N;return e?(t=Object.assign({},t,r),l.setup(t),l.mount(),i=l.loadAndRun(e)):i=Promise.resolve(l),a&&(o=n,s={load:i,manager:l},(u=f())&&(u[G]=u[G]||{},u[G][o]=s)),i})}return U.canvasSketch=U,U.PaperSizes=L,U})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"convert-length":50}],50:[function(e,t,r){var n=e("defined"),i=["mm","cm","m","pc","pt","in","ft","px"],a={m:{system:"metric",factor:1},cm:{system:"metric",factor:.01},mm:{system:"metric",factor:.001},pt:{system:"imperial",factor:1/72},pc:{system:"imperial",factor:1/6},in:{system:"imperial",factor:1},ft:{system:"imperial",factor:12}};const o={metric:{unit:"m",ratio:1/.0254},imperial:{unit:"in",ratio:.0254}};t.exports=function(e,t,r,s){if("number"!=typeof e||!isFinite(e))throw new Error("Value must be a finite number");if(!t||!r)throw new Error("Must specify from and to units");var u=n((s=s||{}).pixelsPerInch,96),l=s.precision,c=!1!==s.roundPixel;if(t=t.toLowerCase(),r=r.toLowerCase(),-1===i.indexOf(t))throw new Error('Invalid from unit "'+t+'", must be one of: '+i.join(", "));if(-1===i.indexOf(r))throw new Error('Invalid from unit "'+r+'", must be one of: '+i.join(", "));if(t===r)return e;var f=1,d=1,h=!1;"px"===t&&(d=1/u,t="in"),"px"===r&&(h=!0,f=u,r="in");var p=a[t],m=a[r],b=e*p.factor*d;p.system!==m.system&&(b*=o[p.system].ratio);var g=b/m.factor*f;return h&&c?g=Math.round(g):"number"==typeof l&&isFinite(l)&&(g=function(e,t){return Number(Math.round(e+"e"+t)+"e-"+t)}(g,l)),g},t.exports.units=i},{defined:55}],51:[function(e,t,r){"use strict";t.exports=function(e,t,r,n,i,a){var o=i-1,s=i*i,u=o*o,l=(1+2*i)*u,c=i*u,f=s*(3-2*i),d=s*o;if(e.length){a||(a=new Array(e.length));for(var h=e.length-1;h>=0;--h)a[h]=l*e[h]+c*t[h]+f*r[h]+d*n[h];return a}return l*e+c*t+f*r+d*n},t.exports.derivative=function(e,t,r,n,i,a){var o=6*i*i-6*i,s=3*i*i-4*i+1,u=-6*i*i+6*i,l=3*i*i-2*i;if(e.length){a||(a=new Array(e.length));for(var c=e.length-1;c>=0;--c)a[c]=o*e[c]+s*t[c]+u*r[c]+l*n[c];return a}return o*e+s*t+u*r[c]+l*n}},{}],52:[function(e,t,r){t.exports=e("./vendor/dat.gui"),t.exports.color=e("./vendor/dat.color")},{"./vendor/dat.color":53,"./vendor/dat.gui":54}],53:[function(e,t,r){var n,i,a,o,s=t.exports=s||{};s.color=s.color||{},s.utils=s.utils||{},s.utils.common=(n=Array.prototype.forEach,i=Array.prototype.slice,{BREAK:{},extend:function(e){return this.each(i.call(arguments,1),function(t){for(var r in t)this.isUndefined(t[r])||(e[r]=t[r])},this),e},defaults:function(e){return this.each(i.call(arguments,1),function(t){for(var r in t)this.isUndefined(e[r])&&(e[r]=t[r])},this),e},compose:function(){var e=i.call(arguments);return function(){for(var t=i.call(arguments),r=e.length-1;r>=0;r--)t=[e[r].apply(this,t)];return t[0]}},each:function(e,t,r){if(n&&e.forEach===n)e.forEach(t,r);else if(e.length===e.length+0){for(var i=0,a=e.length;i<a;i++)if(i in e&&t.call(r,e[i],i)===this.BREAK)return}else for(var i in e)if(t.call(r,e[i],i)===this.BREAK)return},defer:function(e){setTimeout(e,0)},toArray:function(e){return e.toArray?e.toArray():i.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){return e!=e},isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}}),s.color.toString=(a=s.utils.common,function(e){if(1==e.a||a.isUndefined(e.a)){for(var t=e.hex.toString(16);t.length<6;)t="0"+t;return"#"+t}return"rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+e.a+")"}),s.Color=s.color.Color=function(e,t,r,n){var i=function(){if(this.__state=e.apply(this,arguments),!1===this.__state)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};function a(e,t,r){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(s(this,t,r),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(s(this,t,r),this.__state.space="RGB"),this.__state[t]=e}})}function o(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(u(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(u(this),this.__state.space="HSV"),this.__state[t]=e}})}function s(e,r,i){if("HEX"===e.__state.space)e.__state[r]=t.component_from_hex(e.__state.hex,i);else{if("HSV"!==e.__state.space)throw"Corrupted color state";n.extend(e.__state,t.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}}function u(e){var r=t.rgb_to_hsv(e.r,e.g,e.b);n.extend(e.__state,{s:r.s,v:r.v}),n.isNaN(r.h)?n.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=r.h}return i.COMPONENTS=["r","g","b","h","s","v","hex","a"],n.extend(i.prototype,{toString:function(){return r(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),a(i.prototype,"r",2),a(i.prototype,"g",1),a(i.prototype,"b",0),o(i.prototype,"h"),o(i.prototype,"s"),o(i.prototype,"v"),Object.defineProperty(i.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(i.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=t.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}}),i}(s.color.interpret=function(e,t){var r,n,i=[{litmus:t.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString())}},write:e},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString())}},write:e},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:e},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:e}}},{litmus:t.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:t.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:t.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)&&t.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)&&t.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}];return function(){n=!1;var e=arguments.length>1?t.toArray(arguments):arguments[0];return t.each(i,function(i){if(i.litmus(e))return t.each(i.conversions,function(i,a){if(r=i.read(e),!1===n&&!1!==r)return n=r,r.conversionName=a,r.conversion=i,t.BREAK}),t.BREAK}),n}}(s.color.toString,s.utils.common),s.color.math={hsv_to_rgb:function(e,t,r){var n=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),a=r*(1-t),o=r*(1-i*t),s=r*(1-(1-i)*t),u=[[r,s,a],[o,r,a],[a,r,s],[a,o,r],[s,a,r],[r,a,o]][n];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(e,t,r){var n,i=Math.min(e,t,r),a=Math.max(e,t,r),o=a-i;return 0==a?{h:NaN,s:0,v:0}:(n=e==a?(t-r)/o:t==a?2+(r-e)/o:4+(e-t)/o,(n/=6)<0&&(n+=1),{h:360*n,s:o/a,v:a/255})},rgb_to_hex:function(e,t,r){var n=this.hex_with_component(0,2,e);return n=this.hex_with_component(n,1,t),n=this.hex_with_component(n,0,r)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,r){return r<<(o=8*t)|e&~(255<<o)}},s.color.toString,s.utils.common)},{}],54:[function(e,t,r){var n,i,a,o,s,u=t.exports=u||{};u.gui=u.gui||{},u.utils=u.utils||{},u.controllers=u.controllers||{},u.dom=u.dom||{},u.color=u.color||{},u.utils.css={load:function(e,t){var r=(t=t||document).createElement("link");r.type="text/css",r.rel="stylesheet",r.href=e,t.getElementsByTagName("head")[0].appendChild(r)},inject:function(e,t){t=t||document;var r=document.createElement("style");r.type="text/css",r.innerHTML=e,t.getElementsByTagName("head")[0].appendChild(r)}},u.utils.common=(n=Array.prototype.forEach,i=Array.prototype.slice,{BREAK:{},extend:function(e){return this.each(i.call(arguments,1),function(t){for(var r in t)this.isUndefined(t[r])||(e[r]=t[r])},this),e},defaults:function(e){return this.each(i.call(arguments,1),function(t){for(var r in t)this.isUndefined(e[r])&&(e[r]=t[r])},this),e},compose:function(){var e=i.call(arguments);return function(){for(var t=i.call(arguments),r=e.length-1;r>=0;r--)t=[e[r].apply(this,t)];return t[0]}},each:function(e,t,r){if(n&&e.forEach===n)e.forEach(t,r);else if(e.length===e.length+0){for(var i=0,a=e.length;i<a;i++)if(i in e&&t.call(r,e[i],i)===this.BREAK)return}else for(var i in e)if(t.call(r,e[i],i)===this.BREAK)return},defer:function(e){setTimeout(e,0)},toArray:function(e){return e.toArray?e.toArray():i.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){return e!=e},isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}}),u.controllers.Controller=(u.utils.common.extend((a=function(e,t){this.initialValue=e[t],this.domElement=document.createElement("div"),this.object=e,this.property=t,this.__onChange=void 0,this.__onFinishChange=void 0}).prototype,{onChange:function(e){return this.__onChange=e,this},onFinishChange:function(e){return this.__onFinishChange=e,this},setValue:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),a),u.dom.dom=function(e){var t={};e.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(r,n){e.each(r,function(e){t[e]=n})});var r=/(\d+(\.\d+)?)px/;function n(t){if("0"===t||e.isUndefined(t))return 0;var n=t.match(r);return e.isNull(n)?0:parseFloat(n[1])}var i={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(t,r,n){e.isUndefined(r)&&(r=!0),e.isUndefined(n)&&(n=!0),t.style.position="absolute",r&&(t.style.left=0,t.style.right=0),n&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(r,n,i,a){i=i||{};var o=t[n];if(!o)throw new Error("Event type "+n+" not supported.");var s=document.createEvent(o);switch(o){case"MouseEvents":s.initMouseEvent(n,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,i.x||i.clientX||0,i.y||i.clientY||0,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var u=s.initKeyboardEvent||s.initKeyEvent;e.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),u(n,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:s.initEvent(n,i.bubbles||!1,i.cancelable||!0)}e.defaults(s,a),r.dispatchEvent(s)},bind:function(e,t,r,n){return n=n||!1,e.addEventListener?e.addEventListener(t,r,n):e.attachEvent&&e.attachEvent("on"+t,r),i},unbind:function(e,t,r,n){return n=n||!1,e.removeEventListener?e.removeEventListener(t,r,n):e.detachEvent&&e.detachEvent("on"+t,r),i},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var r=e.className.split(/ +/);-1==r.indexOf(t)&&(r.push(t),e.className=r.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return i},removeClass:function(e,t){if(t)if(void 0===e.className);else if(e.className===t)e.removeAttribute("class");else{var r=e.className.split(/ +/),n=r.indexOf(t);-1!=n&&(r.splice(n,1),e.className=r.join(" "))}else e.className=void 0;return i},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return n(t["border-left-width"])+n(t["border-right-width"])+n(t["padding-left"])+n(t["padding-right"])+n(t.width)},getHeight:function(e){var t=getComputedStyle(e);return n(t["border-top-width"])+n(t["border-bottom-width"])+n(t["padding-top"])+n(t["padding-bottom"])+n(t.height)},getOffset:function(e){var t={left:0,top:0};if(e.offsetParent)do{t.left+=e.offsetLeft,t.top+=e.offsetTop}while(e=e.offsetParent);return t},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}};return i}(u.utils.common),u.controllers.OptionController=function(e,t,r){var n=function(e,i,a){n.superclass.call(this,e,i);var o=this;if(this.__select=document.createElement("select"),r.isArray(a)){var s={};r.each(a,function(e){s[e]=e}),a=s}r.each(a,function(e,t){var r=document.createElement("option");r.innerHTML=t,r.setAttribute("value",e),o.__select.appendChild(r)}),this.updateDisplay(),t.bind(this.__select,"change",function(){o.setValue(this.options[this.selectedIndex].value)}),this.domElement.appendChild(this.__select)};return n.superclass=e,r.extend(n.prototype,e.prototype,{setValue:function(e){var t=n.superclass.prototype.setValue.call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),t},updateDisplay:function(){return this.__select.value=this.getValue(),n.superclass.prototype.updateDisplay.call(this)}}),n}(u.controllers.Controller,u.dom.dom,u.utils.common),u.controllers.NumberController=function(e,t){var r=function(e,n,i){var a;r.superclass.call(this,e,n),this.__min=(i=i||{}).min,this.__max=i.max,this.__step=i.step,this.__impliedStep=t.isUndefined(this.__step)?0==this.initialValue?1:Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__step,this.__precision=(a=(a=this.__impliedStep).toString()).indexOf(".")>-1?a.length-a.indexOf(".")-1:0};return r.superclass=e,t.extend(r.prototype,e.prototype,{setValue:function(e){return void 0!==this.__min&&e<this.__min?e=this.__min:void 0!==this.__max&&e>this.__max&&(e=this.__max),void 0!==this.__step&&e%this.__step!=0&&(e=Math.round(e/this.__step)*this.__step),r.superclass.prototype.setValue.call(this,e)},min:function(e){return this.__min=e,this},max:function(e){return this.__max=e,this},step:function(e){return this.__step=e,this}}),r}(u.controllers.Controller,u.utils.common),u.controllers.NumberControllerBox=function(e,t,r){var n=function(e,i,a){this.__truncationSuspended=!1,n.superclass.call(this,e,i,a);var o,s=this;function u(){var e=parseFloat(s.__input.value);r.isNaN(e)||s.setValue(e)}function l(e){var t=o-e.clientY;s.setValue(s.getValue()+t*s.__impliedStep),o=e.clientY}function c(){t.unbind(window,"mousemove",l),t.unbind(window,"mouseup",c)}this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"change",u),t.bind(this.__input,"blur",function(){u(),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}),t.bind(this.__input,"mousedown",function(e){t.bind(window,"mousemove",l),t.bind(window,"mouseup",c),o=e.clientY}),t.bind(this.__input,"keydown",function(e){13===e.keyCode&&(s.__truncationSuspended=!0,this.blur(),s.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return n.superclass=e,r.extend(n.prototype,e.prototype,{updateDisplay:function(){var e,t;return this.__input.value=this.__truncationSuspended?this.getValue():(e=this.getValue(),t=Math.pow(10,this.__precision),Math.round(e*t)/t),n.superclass.prototype.updateDisplay.call(this)}}),n}(u.controllers.NumberController,u.dom.dom,u.utils.common),u.controllers.NumberControllerSlider=function(e,t,r,n,i){var a=function(e,r,n,i,o){a.superclass.call(this,e,r,{min:n,max:i,step:o});var s=this;function u(e){e.preventDefault();var r,n,i=t.getOffset(s.__background),a=t.getWidth(s.__background);return s.setValue((n=s.__min)+(e.clientX-(r=i.left))/(i.left+a-r)*(s.__max-n)),!1}function l(){t.unbind(window,"mousemove",u),t.unbind(window,"mouseup",l),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),t.bind(this.__background,"mousedown",function(e){t.bind(window,"mousemove",u),t.bind(window,"mouseup",l),u(e)}),t.addClass(this.__background,"slider"),t.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return a.superclass=e,a.useDefaultStyles=function(){r.inject(".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}")},n.extend(a.prototype,e.prototype,{updateDisplay:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",a.superclass.prototype.updateDisplay.call(this)}}),a}(u.controllers.NumberController,u.dom.dom,u.utils.css,u.utils.common),u.controllers.FunctionController=function(e,t,r){var n=function(e,r,i){n.superclass.call(this,e,r);var a=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===i?"Fire":i,t.bind(this.__button,"click",function(e){return e.preventDefault(),a.fire(),!1}),t.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return n.superclass=e,r.extend(n.prototype,e.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),n}(u.controllers.Controller,u.dom.dom,u.utils.common),u.controllers.BooleanController=function(e,t,r){var n=function(e,r){n.superclass.call(this,e,r);var i=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),t.bind(this.__checkbox,"change",function(){i.setValue(!i.__prev)},!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return n.superclass=e,r.extend(n.prototype,e.prototype,{setValue:function(e){var t=n.superclass.prototype.setValue.call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),t},updateDisplay:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,n.superclass.prototype.updateDisplay.call(this)}}),n}(u.controllers.Controller,u.dom.dom,u.utils.common),u.color.toString=(o=u.utils.common,function(e){if(1==e.a||o.isUndefined(e.a)){for(var t=e.hex.toString(16);t.length<6;)t="0"+t;return"#"+t}return"rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+e.a+")"}),u.color.interpret=function(e,t){var r,n,i=[{litmus:t.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString())}},write:e},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString())}},write:e},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:e},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:e}}},{litmus:t.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:t.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:t.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)&&t.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)&&t.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}];return function(){n=!1;var e=arguments.length>1?t.toArray(arguments):arguments[0];return t.each(i,function(i){if(i.litmus(e))return t.each(i.conversions,function(i,a){if(r=i.read(e),!1===n&&!1!==r)return n=r,r.conversionName=a,r.conversion=i,t.BREAK}),t.BREAK}),n}}(u.color.toString,u.utils.common),u.GUI=u.gui.GUI=function(e,t,r,n,i,a,o,s,u,l,c,f,d,h,p){e.inject(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n");var m,b,g="Default",v=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}(),y=!0,_=!1,x=[],w=function(e){var t=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),h.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],e=p.defaults(e=e||{},{autoPlace:!0,width:w.DEFAULT_WIDTH}),e=p.defaults(e,{resizable:e.autoPlace,hideable:e.autoPlace}),p.isUndefined(e.load)?e.load={preset:g}:e.preset&&(e.load.preset=e.preset),p.isUndefined(e.parent)&&e.hideable&&x.push(this),e.resizable=p.isUndefined(e.parent)&&e.resizable,e.autoPlace&&p.isUndefined(e.scrollable)&&(e.scrollable=!0);var r=v&&"true"===localStorage.getItem(M(this,"isLocal"));if(Object.defineProperties(this,{parent:{get:function(){return e.parent}},scrollable:{get:function(){return e.scrollable}},autoPlace:{get:function(){return e.autoPlace}},preset:{get:function(){return t.parent?t.getRoot().preset:e.load.preset},set:function(r){t.parent?t.getRoot().preset=r:e.load.preset=r,function(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value==e.preset&&(e.__preset_select.selectedIndex=t)}(this),t.revert()}},width:{get:function(){return e.width},set:function(r){e.width=r,A(t,r)}},name:{get:function(){return e.name},set:function(t){e.name=t,i&&(i.innerHTML=e.name)}},closed:{get:function(){return e.closed},set:function(r){e.closed=r,e.closed?h.addClass(t.__ul,w.CLASS_CLOSED):h.removeClass(t.__ul,w.CLASS_CLOSED),this.onResize(),t.__closeButton&&(t.__closeButton.innerHTML=r?w.TEXT_OPEN:w.TEXT_CLOSED)}},load:{get:function(){return e.load}},useLocalStorage:{get:function(){return r},set:function(e){v&&(r=e,e?h.bind(window,"unload",o):h.unbind(window,"unload",o),localStorage.setItem(M(t,"isLocal"),e))}}}),p.isUndefined(e.parent)){if(e.closed=!1,h.addClass(this.domElement,w.CLASS_MAIN),h.makeSelectable(this.domElement,!1),v&&r){t.useLocalStorage=!0;var n=localStorage.getItem(M(this,"gui"));n&&(e.load=JSON.parse(n))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=w.TEXT_CLOSED,h.addClass(this.__closeButton,w.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),h.bind(this.__closeButton,"click",function(){t.closed=!t.closed})}else{void 0===e.closed&&(e.closed=!0);var i=document.createTextNode(e.name);h.addClass(i,"controller-name");var a=k(t,i);h.addClass(this.__ul,w.CLASS_CLOSED),h.addClass(a,"title"),h.bind(a,"click",function(e){return e.preventDefault(),t.closed=!t.closed,!1}),e.closed||(this.closed=!1)}function o(){localStorage.setItem(M(t,"gui"),JSON.stringify(t.getSaveObject()))}e.autoPlace&&(p.isUndefined(e.parent)&&(y&&(b=document.createElement("div"),h.addClass(b,"dg"),h.addClass(b,w.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(b),y=!1),b.appendChild(this.domElement),h.addClass(this.domElement,w.CLASS_AUTO_PLACE)),this.parent||A(t,e.width)),h.bind(window,"resize",function(){t.onResize()}),h.bind(this.__ul,"webkitTransitionEnd",function(){t.onResize()}),h.bind(this.__ul,"transitionend",function(){t.onResize()}),h.bind(this.__ul,"oTransitionEnd",function(){t.onResize()}),this.onResize(),e.resizable&&function(e){var t;function r(r){return r.preventDefault(),t=r.clientX,h.addClass(e.__closeButton,w.CLASS_DRAG),h.bind(window,"mousemove",n),h.bind(window,"mouseup",i),!1}function n(r){return r.preventDefault(),e.width+=t-r.clientX,e.onResize(),t=r.clientX,!1}function i(){h.removeClass(e.__closeButton,w.CLASS_DRAG),h.unbind(window,"mousemove",n),h.unbind(window,"mouseup",i)}e.__resize_handle=document.createElement("div"),p.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),h.bind(e.__resize_handle,"mousedown",r),h.bind(e.__closeButton,"mousedown",r),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}(this);t.getRoot();e.parent||function(){var e=t.getRoot();e.width+=1,p.defer(function(){e.width-=1})}()};function E(e,t,r,l){if(void 0===t[r])throw new Error("Object "+t+' has no property "'+r+'"');var f;if(l.color)f=new c(t,r);else{var d=[t,r].concat(l.factoryArgs);f=n.apply(e,d)}l.before instanceof i&&(l.before=l.before.__li),P(e,f),h.addClass(f.domElement,"c");var m=document.createElement("span");h.addClass(m,"property-name"),m.innerHTML=f.property;var b=document.createElement("div");b.appendChild(m),b.appendChild(f.domElement);var g=k(e,b,l.before);return h.addClass(g,w.CLASS_CONTROLLER_ROW),h.addClass(g,typeof f.getValue()),function(e,t,r){if(r.__li=t,r.__gui=e,p.extend(r,{options:function(t){return arguments.length>1?(r.remove(),E(e,r.object,r.property,{before:r.__li.nextElementSibling,factoryArgs:[p.toArray(arguments)]})):p.isArray(t)||p.isObject(t)?(r.remove(),E(e,r.object,r.property,{before:r.__li.nextElementSibling,factoryArgs:[t]})):void 0},name:function(e){return r.__li.firstElementChild.firstElementChild.innerHTML=e,r},listen:function(){return r.__gui.listen(r),r},remove:function(){return r.__gui.remove(r),r}}),r instanceof u){var n=new s(r.object,r.property,{min:r.__min,max:r.__max,step:r.__step});p.each(["updateDisplay","onChange","onFinishChange"],function(e){var t=r[e],i=n[e];r[e]=n[e]=function(){var e=Array.prototype.slice.call(arguments);return t.apply(r,e),i.apply(n,e)}}),h.addClass(t,"has-slider"),r.domElement.insertBefore(n.domElement,r.domElement.firstElementChild)}else if(r instanceof s){var i=function(t){return p.isNumber(r.__min)&&p.isNumber(r.__max)?(r.remove(),E(e,r.object,r.property,{before:r.__li.nextElementSibling,factoryArgs:[r.__min,r.__max,r.__step]})):t};r.min=p.compose(i,r.min),r.max=p.compose(i,r.max)}else r instanceof a?(h.bind(t,"click",function(){h.fakeEvent(r.__checkbox,"click")}),h.bind(r.__checkbox,"click",function(e){e.stopPropagation()})):r instanceof o?(h.bind(t,"click",function(){h.fakeEvent(r.__button,"click")}),h.bind(t,"mouseover",function(){h.addClass(r.__button,"hover")}),h.bind(t,"mouseout",function(){h.removeClass(r.__button,"hover")})):r instanceof c&&(h.addClass(t,"color"),r.updateDisplay=p.compose(function(e){return t.style.borderLeftColor=r.__color.toString(),e},r.updateDisplay),r.updateDisplay());r.setValue=p.compose(function(t){return e.getRoot().__preset_select&&r.isModified()&&T(e.getRoot(),!0),t},r.setValue)}(e,g,f),e.__controllers.push(f),f}function k(e,t,r){var n=document.createElement("li");return t&&n.appendChild(t),r?e.__ul.insertBefore(n,params.before):e.__ul.appendChild(n),e.onResize(),n}function P(e,t){var r=e.getRoot(),n=r.__rememberedObjects.indexOf(t.object);if(-1!=n){var i=r.__rememberedObjectIndecesToControllers[n];if(void 0===i&&(r.__rememberedObjectIndecesToControllers[n]=i={}),i[t.property]=t,r.load&&r.load.remembered){var a,o=r.load.remembered;if(o[e.preset])a=o[e.preset];else{if(!o[g])return;a=o[g]}if(a[n]&&void 0!==a[n][t.property]){var s=a[n][t.property];t.initialValue=s,t.setValue(s)}}}}function M(e,t){return document.location.href+"."+t}function A(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function C(e,t){var r={};return p.each(e.__rememberedObjects,function(n,i){var a={};p.each(e.__rememberedObjectIndecesToControllers[i],function(e,r){a[r]=t?e.initialValue:e.getValue()}),r[i]=a}),r}function O(e,t,r){var n=document.createElement("option");n.innerHTML=t,n.value=t,e.__preset_select.appendChild(n),r&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function T(e,t){var r=e.__preset_select[e.__preset_select.selectedIndex];r.innerHTML=t?r.value+"*":r.value}return w.toggleHide=function(){_=!_,p.each(x,function(e){e.domElement.style.zIndex=_?-999:999,e.domElement.style.opacity=_?0:1})},w.CLASS_AUTO_PLACE="a",w.CLASS_AUTO_PLACE_CONTAINER="ac",w.CLASS_MAIN="main",w.CLASS_CONTROLLER_ROW="cr",w.CLASS_TOO_TALL="taller-than-window",w.CLASS_CLOSED="closed",w.CLASS_CLOSE_BUTTON="close-button",w.CLASS_DRAG="drag",w.DEFAULT_WIDTH=245,w.TEXT_CLOSED="Close Controls",w.TEXT_OPEN="Open Controls",h.bind(window,"keydown",function(e){"text"===document.activeElement.type||72!==e.which&&72!=e.keyCode||w.toggleHide()},!1),p.extend(w.prototype,{add:function(e,t){return E(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return E(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.slice(this.__controllers.indexOf(e),1);var t=this;p.defer(function(){t.onResize()})},destroy:function(){this.autoPlace&&b.removeChild(this.domElement)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var r=new w(t);this.__folders[e]=r;var n=k(this,r.domElement);return h.addClass(n,"folder"),r},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=h.getOffset(e.__ul).top,r=0;p.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(r+=h.getHeight(t))}),window.innerHeight-t-20<r?(h.addClass(e.domElement,w.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(h.removeClass(e.domElement,w.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&p.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},remember:function(){if(p.isUndefined(m)&&((m=new d).domElement.innerHTML='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>'),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;p.each(Array.prototype.slice.call(arguments),function(t){0==e.__rememberedObjects.length&&function(e){var t=e.__save_row=document.createElement("li");h.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),h.addClass(t,"save-row");var r=document.createElement("span");r.innerHTML="&nbsp;",h.addClass(r,"button gears");var n=document.createElement("span");n.innerHTML="Save",h.addClass(n,"button"),h.addClass(n,"save");var i=document.createElement("span");i.innerHTML="New",h.addClass(i,"button"),h.addClass(i,"save-as");var a=document.createElement("span");a.innerHTML="Revert",h.addClass(a,"button"),h.addClass(a,"revert");var o=e.__preset_select=document.createElement("select");e.load&&e.load.remembered?p.each(e.load.remembered,function(t,r){O(e,r,r==e.preset)}):O(e,g,!1);if(h.bind(o,"change",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(o),t.appendChild(r),t.appendChild(n),t.appendChild(i),t.appendChild(a),v){var s=document.getElementById("dg-save-locally"),u=document.getElementById("dg-local-explain");s.style.display="block";var l=document.getElementById("dg-local-storage");function c(){u.style.display=e.useLocalStorage?"block":"none"}"true"===localStorage.getItem(M(e,"isLocal"))&&l.setAttribute("checked","checked"),c(),h.bind(l,"change",function(){e.useLocalStorage=!e.useLocalStorage,c()})}var f=document.getElementById("dg-new-constructor");h.bind(f,"keydown",function(e){!e.metaKey||67!==e.which&&67!=e.keyCode||m.hide()}),h.bind(r,"click",function(){f.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),m.show(),f.focus(),f.select()}),h.bind(n,"click",function(){e.save()}),h.bind(i,"click",function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),h.bind(a,"click",function(){e.revert()})}(e),-1==e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&A(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=C(this)),e.folders={},p.each(this.__folders,function(t,r){e.folders[r]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=C(this),T(this,!1)},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[g]=C(this,!0)),this.load.remembered[e]=C(this),this.preset=e,O(this,e,!0)},revert:function(e){p.each(this.__controllers,function(t){this.getRoot().load.remembered?P(e||this.getRoot(),t):t.setValue(t.initialValue)},this),p.each(this.__folders,function(e){e.revert(e)}),e||T(this.getRoot(),!1)},listen:function(e){var t=0==this.__listening.length;this.__listening.push(e),t&&function e(t){0!=t.length&&f(function(){e(t)});p.each(t,function(e){e.updateDisplay()})}(this.__listening)}}),w}(u.utils.css,0,0,u.controllers.factory=function(e,t,r,n,i,a,o){return function(s,u){var l=s[u];return o.isArray(arguments[2])||o.isObject(arguments[2])?new e(s,u,arguments[2]):o.isNumber(l)?o.isNumber(arguments[2])&&o.isNumber(arguments[3])?new r(s,u,arguments[2],arguments[3]):new t(s,u,{min:arguments[2],max:arguments[3]}):o.isString(l)?new n(s,u):o.isFunction(l)?new i(s,u,""):o.isBoolean(l)?new a(s,u):void 0}}(u.controllers.OptionController,u.controllers.NumberControllerBox,u.controllers.NumberControllerSlider,u.controllers.StringController=function(e,t,r){var n=function(e,r){n.superclass.call(this,e,r);var i=this;function a(){i.setValue(i.__input.value)}this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"keyup",a),t.bind(this.__input,"change",a),t.bind(this.__input,"blur",function(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())}),t.bind(this.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return n.superclass=e,r.extend(n.prototype,e.prototype,{updateDisplay:function(){return t.isActive(this.__input)||(this.__input.value=this.getValue()),n.superclass.prototype.updateDisplay.call(this)}}),n}(u.controllers.Controller,u.dom.dom,u.utils.common),u.controllers.FunctionController,u.controllers.BooleanController,u.utils.common),u.controllers.Controller,u.controllers.BooleanController,u.controllers.FunctionController,u.controllers.NumberControllerBox,u.controllers.NumberControllerSlider,0,u.controllers.ColorController=function(e,t,r,n,i){var a=function(e,o){a.superclass.call(this,e,o),this.__color=new r(this.getValue()),this.__temp=new r(0);var u=this;this.domElement=document.createElement("div"),t.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",t.bind(this.__input,"keydown",function(e){13===e.keyCode&&h.call(this)}),t.bind(this.__input,"blur",h),t.bind(this.__selector,"mousedown",function(e){t.addClass(this,"drag").bind(window,"mouseup",function(e){t.removeClass(u.__selector,"drag")})});var l,c=document.createElement("div");function f(e){m(e),t.bind(window,"mousemove",m),t.bind(window,"mouseup",d)}function d(){t.unbind(window,"mousemove",m),t.unbind(window,"mouseup",d)}function h(){var e=n(this.value);!1!==e?(u.__color.__state=e,u.setValue(u.__color.toOriginal())):this.value=u.__color.toString()}function p(){t.unbind(window,"mousemove",b),t.unbind(window,"mouseup",p)}function m(e){e.preventDefault();var r=t.getWidth(u.__saturation_field),n=t.getOffset(u.__saturation_field),i=(e.clientX-n.left+document.body.scrollLeft)/r,a=1-(e.clientY-n.top+document.body.scrollTop)/r;return a>1?a=1:a<0&&(a=0),i>1?i=1:i<0&&(i=0),u.__color.v=a,u.__color.s=i,u.setValue(u.__color.toOriginal()),!1}function b(e){e.preventDefault();var r=t.getHeight(u.__hue_field),n=t.getOffset(u.__hue_field),i=1-(e.clientY-n.top+document.body.scrollTop)/r;return i>1?i=1:i<0&&(i=0),u.__color.h=360*i,u.setValue(u.__color.toOriginal()),!1}i.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),i.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),i.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),i.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),i.extend(c.style,{width:"100%",height:"100%",background:"none"}),s(c,"top","rgba(0,0,0,0)","#000"),i.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),(l=this.__hue_field).style.background="",l.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",l.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",l.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",l.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",l.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",i.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),t.bind(this.__saturation_field,"mousedown",f),t.bind(this.__field_knob,"mousedown",f),t.bind(this.__hue_field,"mousedown",function(e){b(e),t.bind(window,"mousemove",b),t.bind(window,"mouseup",p)}),this.__saturation_field.appendChild(c),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};a.superclass=e,i.extend(a.prototype,e.prototype,{updateDisplay:function(){var e=n(this.getValue());if(!1!==e){var t=!1;i.each(r.COMPONENTS,function(r){if(!i.isUndefined(e[r])&&!i.isUndefined(this.__color.__state[r])&&e[r]!==this.__color.__state[r])return t=!0,{}},this),t&&i.extend(this.__color.__state,e)}i.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var a=this.__color.v<.5||this.__color.s>.5?255:0,o=255-a;i.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+a+","+a+","+a+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,s(this.__saturation_field,"left","#fff",this.__temp.toString()),i.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+a+","+a+","+a+")",textShadow:this.__input_textShadow+"rgba("+o+","+o+","+o+",.7)"})}});var o=["-moz-","-o-","-webkit-","-ms-",""];function s(e,t,r,n){e.style.background="",i.each(o,function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+r+" 0%, "+n+" 100%); "})}return a}(u.controllers.Controller,u.dom.dom,u.color.Color=function(e,t,r,n){var i=function(){if(this.__state=e.apply(this,arguments),!1===this.__state)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};function a(e,t,r){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(s(this,t,r),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(s(this,t,r),this.__state.space="RGB"),this.__state[t]=e}})}function o(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(u(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(u(this),this.__state.space="HSV"),this.__state[t]=e}})}function s(e,r,i){if("HEX"===e.__state.space)e.__state[r]=t.component_from_hex(e.__state.hex,i);else{if("HSV"!==e.__state.space)throw"Corrupted color state";n.extend(e.__state,t.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}}function u(e){var r=t.rgb_to_hsv(e.r,e.g,e.b);n.extend(e.__state,{s:r.s,v:r.v}),n.isNaN(r.h)?n.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=r.h}return i.COMPONENTS=["r","g","b","h","s","v","hex","a"],n.extend(i.prototype,{toString:function(){return r(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),a(i.prototype,"r",2),a(i.prototype,"g",1),a(i.prototype,"b",0),o(i.prototype,"h"),o(i.prototype,"s"),o(i.prototype,"v"),Object.defineProperty(i.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(i.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=t.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}}),i}(u.color.interpret,u.color.math={hsv_to_rgb:function(e,t,r){var n=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),a=r*(1-t),o=r*(1-i*t),s=r*(1-(1-i)*t),u=[[r,s,a],[o,r,a],[a,r,s],[a,o,r],[s,a,r],[r,a,o]][n];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(e,t,r){var n,i=Math.min(e,t,r),a=Math.max(e,t,r),o=a-i;return 0==a?{h:NaN,s:0,v:0}:(n=e==a?(t-r)/o:t==a?2+(r-e)/o:4+(e-t)/o,(n/=6)<0&&(n+=1),{h:360*n,s:o/a,v:a/255})},rgb_to_hex:function(e,t,r){var n=this.hex_with_component(0,2,e);return n=this.hex_with_component(n,1,t),n=this.hex_with_component(n,0,r)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,r){return r<<(s=8*t)|e&~(255<<s)}},u.color.toString,u.utils.common),u.color.interpret,u.utils.common),u.utils.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)},u.dom.CenteredDiv=function(e,t){var r=function(){this.backgroundElement=document.createElement("div"),t.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),e.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),t.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var r=this;e.bind(this.backgroundElement,"click",function(){r.hide()})};return r.prototype.show=function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),t.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})},r.prototype.hide=function(){var t=this,r=function(){t.domElement.style.display="none",t.backgroundElement.style.display="none",e.unbind(t.domElement,"webkitTransitionEnd",r),e.unbind(t.domElement,"transitionend",r),e.unbind(t.domElement,"oTransitionEnd",r)};e.bind(this.domElement,"webkitTransitionEnd",r),e.bind(this.domElement,"transitionend",r),e.bind(this.domElement,"oTransitionEnd",r),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},r.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-e.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-e.getHeight(this.domElement)/2+"px"},r}(u.dom.dom,u.utils.common),u.dom.dom,u.utils.common)},{}],55:[function(e,t,r){t.exports=function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]}},{}],56:[function(e,t,r){"use strict";t.exports=function(e,t,r){switch(arguments.length){case 0:return new o([0],[0],0);case 1:if("number"==typeof e){var n=u(e);return new o(n,n,0)}return new o(e,u(e.length),0);case 2:if("number"==typeof t){var n=u(e.length);return new o(e,n,+t)}r=0;case 3:if(e.length!==t.length)throw new Error("state and velocity lengths must match");return new o(e,t,r)}};var n=e("cubic-hermite"),i=e("binary-search-bounds");function a(e,t,r){return Math.min(t,Math.max(e,r))}function o(e,t,r){this.dimension=e.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var n=0;n<this.dimension;++n)this.bounds[0][n]=-Infinity,this.bounds[1][n]=Infinity;this._state=e.slice().reverse(),this._velocity=t.slice().reverse(),this._time=[r],this._scratch=[e.slice(),e.slice(),e.slice(),e.slice(),e.slice()]}var s=o.prototype;function u(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=0;return t}s.flush=function(e){var t=i.gt(this._time,e)-1;t<=0||(this._time.splice(0,t),this._state.splice(0,t*this.dimension),this._velocity.splice(0,t*this.dimension))},s.curve=function(e){var t=this._time,r=t.length,o=i.le(t,e),s=this._scratch[0],u=this._state,l=this._velocity,c=this.dimension,f=this.bounds;if(o<0)for(var d=c-1,h=0;h<c;++h,--d)s[h]=u[d];else if(o>=r-1){d=u.length-1;var p=e-t[r-1];for(h=0;h<c;++h,--d)s[h]=u[d]+p*l[d]}else{d=c*(o+1)-1;var m=t[o],b=t[o+1]-m||1,g=this._scratch[1],v=this._scratch[2],y=this._scratch[3],_=this._scratch[4],x=!0;for(h=0;h<c;++h,--d)g[h]=u[d],y[h]=l[d]*b,v[h]=u[d+c],_[h]=l[d+c]*b,x=x&&g[h]===v[h]&&y[h]===_[h]&&0===y[h];if(x)for(h=0;h<c;++h)s[h]=g[h];else n(g,y,v,_,(e-m)/b,s)}var w=f[0],E=f[1];for(h=0;h<c;++h)s[h]=a(w[h],E[h],s[h]);return s},s.dcurve=function(e){var t=this._time,r=t.length,a=i.le(t,e),o=this._scratch[0],s=this._state,u=this._velocity,l=this.dimension;if(a>=r-1)for(var c=s.length-1,f=0;f<l;++f,--c)o[f]=u[c];else{c=l*(a+1)-1;var d=t[a],h=t[a+1]-d||1,p=this._scratch[1],m=this._scratch[2],b=this._scratch[3],g=this._scratch[4],v=!0;for(f=0;f<l;++f,--c)p[f]=s[c],b[f]=u[c]*h,m[f]=s[c+l],g[f]=u[c+l]*h,v=v&&p[f]===m[f]&&b[f]===g[f]&&0===b[f];if(v)for(f=0;f<l;++f)o[f]=0;else{n.derivative(p,b,m,g,(e-d)/h,o);for(f=0;f<l;++f)o[f]/=h}}return o},s.lastT=function(){var e=this._time;return e[e.length-1]},s.stable=function(){for(var e=this._velocity,t=e.length,r=this.dimension-1;r>=0;--r)if(e[--t])return!1;return!0},s.jump=function(e){var t=this.lastT(),r=this.dimension;if(!(e<t||arguments.length!==r+1)){var n=this._state,i=this._velocity,o=n.length-this.dimension,s=this.bounds,u=s[0],l=s[1];this._time.push(t,e);for(var c=0;c<2;++c)for(var f=0;f<r;++f)n.push(n[o++]),i.push(0);this._time.push(e);for(f=r;f>0;--f)n.push(a(u[f-1],l[f-1],arguments[f])),i.push(0)}},s.push=function(e){var t=this.lastT(),r=this.dimension;if(!(e<t||arguments.length!==r+1)){var n=this._state,i=this._velocity,o=n.length-this.dimension,s=e-t,u=this.bounds,l=u[0],c=u[1],f=s>1e-6?1/s:0;this._time.push(e);for(var d=r;d>0;--d){var h=a(l[d-1],c[d-1],arguments[d]);n.push(h),i.push((h-n[o++])*f)}}},s.set=function(e){var t=this.dimension;if(!(e<this.lastT()||arguments.length!==t+1)){var r=this._state,n=this._velocity,i=this.bounds,o=i[0],s=i[1];this._time.push(e);for(var u=t;u>0;--u)r.push(a(o[u-1],s[u-1],arguments[u])),n.push(0)}},s.move=function(e){var t=this.lastT(),r=this.dimension;if(!(e<=t||arguments.length!==r+1)){var n=this._state,i=this._velocity,o=n.length-this.dimension,s=this.bounds,u=s[0],l=s[1],c=e-t,f=c>1e-6?1/c:0;this._time.push(e);for(var d=r;d>0;--d){var h=arguments[d];n.push(a(u[d-1],l[d-1],n[o++]+h)),i.push(h*f)}}},s.idle=function(e){var t=this.lastT();if(!(e<t)){var r=this.dimension,n=this._state,i=this._velocity,o=n.length-r,s=this.bounds,u=s[0],l=s[1],c=e-t;this._time.push(e);for(var f=r-1;f>=0;--f)n.push(a(u[f],l[f],n[o]+c*i[o])),i.push(0),o+=1}}},{"binary-search-bounds":32,"cubic-hermite":51}],57:[function(e,t,r){t.exports=function(e){var t,r,n,i,a,o=e[0],s=e[1],u=e[2];if(0===s)return[a=u,a,a];r=u<.5?u*(1+s):u+s-u*s;t=2*u-r,i=[0,0,0];for(var l=0;l<3;l++)(n=o+1/3*-(l-1))<0&&n++,n>1&&n--,i[l]=a=6*n<1?t+6*(r-t)*n:2*n<1?r:3*n<2?t+(r-t)*(2/3-n)*6:t;return i}},{}],58:[function(e,t,r){t.exports=function(e){var t,r,n,i=e[0],a=e[1],o=e[2],s=Math.min(i,a,o),u=Math.max(i,a,o),l=u-s;u===s?t=0:i===u?t=(a-o)/l:a===u?t=2+(o-i)/l:o===u&&(t=4+(i-a)/l);(t=Math.min(60*t,360))<0&&(t+=360);n=(s+u)/2,r=u===s?0:n<=.5?l/(u+s):l/(2-u-s);return[t/360,r,n]}},{}],59:[function(e,t,r){t.exports=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],d=t[10],h=t[11],p=t[12],m=t[13],b=t[14],g=t[15];return e[0]=s*(d*g-h*b)-f*(u*g-l*b)+m*(u*h-l*d),e[1]=-(n*(d*g-h*b)-f*(i*g-a*b)+m*(i*h-a*d)),e[2]=n*(u*g-l*b)-s*(i*g-a*b)+m*(i*l-a*u),e[3]=-(n*(u*h-l*d)-s*(i*h-a*d)+f*(i*l-a*u)),e[4]=-(o*(d*g-h*b)-c*(u*g-l*b)+p*(u*h-l*d)),e[5]=r*(d*g-h*b)-c*(i*g-a*b)+p*(i*h-a*d),e[6]=-(r*(u*g-l*b)-o*(i*g-a*b)+p*(i*l-a*u)),e[7]=r*(u*h-l*d)-o*(i*h-a*d)+c*(i*l-a*u),e[8]=o*(f*g-h*m)-c*(s*g-l*m)+p*(s*h-l*f),e[9]=-(r*(f*g-h*m)-c*(n*g-a*m)+p*(n*h-a*f)),e[10]=r*(s*g-l*m)-o*(n*g-a*m)+p*(n*l-a*s),e[11]=-(r*(s*h-l*f)-o*(n*h-a*f)+c*(n*l-a*s)),e[12]=-(o*(f*b-d*m)-c*(s*b-u*m)+p*(s*d-u*f)),e[13]=r*(f*b-d*m)-c*(n*b-i*m)+p*(n*d-i*f),e[14]=-(r*(s*b-u*m)-o*(n*b-i*m)+p*(n*u-i*s)),e[15]=r*(s*d-u*f)-o*(n*d-i*f)+c*(n*u-i*s),e}},{}],60:[function(e,t,r){t.exports=function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},{}],61:[function(e,t,r){t.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],62:[function(e,t,r){t.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],63:[function(e,t,r){t.exports=function(e){var t=e[0],r=e[1],n=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=e[9],f=e[10],d=e[11],h=e[12],p=e[13],m=e[14],b=e[15];return(t*o-r*a)*(f*b-d*m)-(t*s-n*a)*(c*b-d*p)+(t*u-i*a)*(c*m-f*p)+(r*s-n*o)*(l*b-d*h)-(r*u-i*o)*(l*m-f*h)+(n*u-i*s)*(l*p-c*h)}},{}],64:[function(e,t,r){t.exports=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=r+r,s=n+n,u=i+i,l=r*o,c=n*o,f=n*s,d=i*o,h=i*s,p=i*u,m=a*o,b=a*s,g=a*u;return e[0]=1-f-p,e[1]=c+g,e[2]=d-b,e[3]=0,e[4]=c-g,e[5]=1-l-p,e[6]=h+m,e[7]=0,e[8]=d+b,e[9]=h-m,e[10]=1-l-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],65:[function(e,t,r){t.exports=function(e,t,r){var n,i,a,o=r[0],s=r[1],u=r[2],l=Math.sqrt(o*o+s*s+u*u);if(Math.abs(l)<1e-6)return null;return o*=l=1/l,s*=l,u*=l,n=Math.sin(t),i=Math.cos(t),e[0]=o*o*(a=1-i)+i,e[1]=s*o*a+u*n,e[2]=u*o*a-s*n,e[3]=0,e[4]=o*s*a-u*n,e[5]=s*s*a+i,e[6]=u*s*a+o*n,e[7]=0,e[8]=o*u*a+s*n,e[9]=s*u*a-o*n,e[10]=u*u*a+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],66:[function(e,t,r){t.exports=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=n+n,u=i+i,l=a+a,c=n*s,f=n*u,d=n*l,h=i*u,p=i*l,m=a*l,b=o*s,g=o*u,v=o*l;return e[0]=1-(h+m),e[1]=f+v,e[2]=d-g,e[3]=0,e[4]=f-v,e[5]=1-(c+m),e[6]=p+b,e[7]=0,e[8]=d+g,e[9]=p-b,e[10]=1-(c+h),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}},{}],67:[function(e,t,r){t.exports=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],68:[function(e,t,r){t.exports=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}},{}],69:[function(e,t,r){t.exports=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],70:[function(e,t,r){t.exports=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],71:[function(e,t,r){t.exports=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],72:[function(e,t,r){t.exports=function(e,t,r,n,i,a,o){var s=1/(r-t),u=1/(i-n),l=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*u,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(i+n)*u,e[10]=(o+a)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*l,e[15]=0,e}},{}],73:[function(e,t,r){t.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],74:[function(e,t,r){t.exports={create:e("./create"),clone:e("./clone"),copy:e("./copy"),identity:e("./identity"),transpose:e("./transpose"),invert:e("./invert"),adjoint:e("./adjoint"),determinant:e("./determinant"),multiply:e("./multiply"),translate:e("./translate"),scale:e("./scale"),rotate:e("./rotate"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),fromRotation:e("./fromRotation"),fromRotationTranslation:e("./fromRotationTranslation"),fromScaling:e("./fromScaling"),fromTranslation:e("./fromTranslation"),fromXRotation:e("./fromXRotation"),fromYRotation:e("./fromYRotation"),fromZRotation:e("./fromZRotation"),fromQuat:e("./fromQuat"),frustum:e("./frustum"),perspective:e("./perspective"),perspectiveFromFieldOfView:e("./perspectiveFromFieldOfView"),ortho:e("./ortho"),lookAt:e("./lookAt"),str:e("./str")}},{"./adjoint":59,"./clone":60,"./copy":61,"./create":62,"./determinant":63,"./fromQuat":64,"./fromRotation":65,"./fromRotationTranslation":66,"./fromScaling":67,"./fromTranslation":68,"./fromXRotation":69,"./fromYRotation":70,"./fromZRotation":71,"./frustum":72,"./identity":73,"./invert":75,"./lookAt":76,"./multiply":77,"./ortho":78,"./perspective":79,"./perspectiveFromFieldOfView":80,"./rotate":81,"./rotateX":82,"./rotateY":83,"./rotateZ":84,"./scale":85,"./str":86,"./translate":87,"./transpose":88}],75:[function(e,t,r){t.exports=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],d=t[10],h=t[11],p=t[12],m=t[13],b=t[14],g=t[15],v=r*s-n*o,y=r*u-i*o,_=r*l-a*o,x=n*u-i*s,w=n*l-a*s,E=i*l-a*u,k=c*m-f*p,P=c*b-d*p,M=c*g-h*p,A=f*b-d*m,C=f*g-h*m,O=d*g-h*b,T=v*O-y*C+_*A+x*M-w*P+E*k;if(!T)return null;return e[0]=(s*O-u*C+l*A)*(T=1/T),e[1]=(i*C-n*O-a*A)*T,e[2]=(m*E-b*w+g*x)*T,e[3]=(d*w-f*E-h*x)*T,e[4]=(u*M-o*O-l*P)*T,e[5]=(r*O-i*M+a*P)*T,e[6]=(b*_-p*E-g*y)*T,e[7]=(c*E-d*_+h*y)*T,e[8]=(o*C-s*M+l*k)*T,e[9]=(n*M-r*C-a*k)*T,e[10]=(p*w-m*_+g*v)*T,e[11]=(f*_-c*w-h*v)*T,e[12]=(s*P-o*A-u*k)*T,e[13]=(r*A-n*P+i*k)*T,e[14]=(m*y-p*x-b*v)*T,e[15]=(c*x-f*y+d*v)*T,e}},{}],76:[function(e,t,r){var n=e("./identity");t.exports=function(e,t,r,i){var a,o,s,u,l,c,f,d,h,p,m=t[0],b=t[1],g=t[2],v=i[0],y=i[1],_=i[2],x=r[0],w=r[1],E=r[2];if(Math.abs(m-x)<1e-6&&Math.abs(b-w)<1e-6&&Math.abs(g-E)<1e-6)return n(e);f=m-x,d=b-w,h=g-E,p=1/Math.sqrt(f*f+d*d+h*h),a=y*(h*=p)-_*(d*=p),o=_*(f*=p)-v*h,s=v*d-y*f,(p=Math.sqrt(a*a+o*o+s*s))?(a*=p=1/p,o*=p,s*=p):(a=0,o=0,s=0);u=d*s-h*o,l=h*a-f*s,c=f*o-d*a,(p=Math.sqrt(u*u+l*l+c*c))?(u*=p=1/p,l*=p,c*=p):(u=0,l=0,c=0);return e[0]=a,e[1]=u,e[2]=f,e[3]=0,e[4]=o,e[5]=l,e[6]=d,e[7]=0,e[8]=s,e[9]=c,e[10]=h,e[11]=0,e[12]=-(a*m+o*b+s*g),e[13]=-(u*m+l*b+c*g),e[14]=-(f*m+d*b+h*g),e[15]=1,e}},{"./identity":73}],77:[function(e,t,r){t.exports=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],d=t[9],h=t[10],p=t[11],m=t[12],b=t[13],g=t[14],v=t[15],y=r[0],_=r[1],x=r[2],w=r[3];return e[0]=y*n+_*s+x*f+w*m,e[1]=y*i+_*u+x*d+w*b,e[2]=y*a+_*l+x*h+w*g,e[3]=y*o+_*c+x*p+w*v,e[4]=(y=r[4])*n+(_=r[5])*s+(x=r[6])*f+(w=r[7])*m,e[5]=y*i+_*u+x*d+w*b,e[6]=y*a+_*l+x*h+w*g,e[7]=y*o+_*c+x*p+w*v,e[8]=(y=r[8])*n+(_=r[9])*s+(x=r[10])*f+(w=r[11])*m,e[9]=y*i+_*u+x*d+w*b,e[10]=y*a+_*l+x*h+w*g,e[11]=y*o+_*c+x*p+w*v,e[12]=(y=r[12])*n+(_=r[13])*s+(x=r[14])*f+(w=r[15])*m,e[13]=y*i+_*u+x*d+w*b,e[14]=y*a+_*l+x*h+w*g,e[15]=y*o+_*c+x*p+w*v,e}},{}],78:[function(e,t,r){t.exports=function(e,t,r,n,i,a,o){var s=1/(t-r),u=1/(n-i),l=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*u,e[14]=(o+a)*l,e[15]=1,e}},{}],79:[function(e,t,r){t.exports=function(e,t,r,n,i){var a=1/Math.tan(t/2),o=1/(n-i);return e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+n)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*n*o,e[15]=0,e}},{}],80:[function(e,t,r){t.exports=function(e,t,r,n){var i=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),u=2/(o+s),l=2/(i+a);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(o-s)*u*.5,e[9]=(i-a)*l*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e}},{}],81:[function(e,t,r){t.exports=function(e,t,r,n){var i,a,o,s,u,l,c,f,d,h,p,m,b,g,v,y,_,x,w,E,k,P,M,A,C=n[0],O=n[1],T=n[2],S=Math.sqrt(C*C+O*O+T*T);if(Math.abs(S)<1e-6)return null;C*=S=1/S,O*=S,T*=S,i=Math.sin(r),a=Math.cos(r),u=t[1],l=t[2],c=t[3],d=t[5],h=t[6],p=t[7],b=t[9],g=t[10],v=t[11],w=C*O*(o=1-a)-T*i,E=O*O*o+a,k=T*O*o+C*i,P=C*T*o+O*i,M=O*T*o-C*i,A=T*T*o+a,e[0]=(s=t[0])*(y=C*C*o+a)+(f=t[4])*(_=O*C*o+T*i)+(m=t[8])*(x=T*C*o-O*i),e[1]=u*y+d*_+b*x,e[2]=l*y+h*_+g*x,e[3]=c*y+p*_+v*x,e[4]=s*w+f*E+m*k,e[5]=u*w+d*E+b*k,e[6]=l*w+h*E+g*k,e[7]=c*w+p*E+v*k,e[8]=s*P+f*M+m*A,e[9]=u*P+d*M+b*A,e[10]=l*P+h*M+g*A,e[11]=c*P+p*M+v*A,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e}},{}],82:[function(e,t,r){t.exports=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[4],o=t[5],s=t[6],u=t[7],l=t[8],c=t[9],f=t[10],d=t[11];t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[4]=a*i+l*n,e[5]=o*i+c*n,e[6]=s*i+f*n,e[7]=u*i+d*n,e[8]=l*i-a*n,e[9]=c*i-o*n,e[10]=f*i-s*n,e[11]=d*i-u*n,e}},{}],83:[function(e,t,r){t.exports=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],o=t[1],s=t[2],u=t[3],l=t[8],c=t[9],f=t[10],d=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=a*i-l*n,e[1]=o*i-c*n,e[2]=s*i-f*n,e[3]=u*i-d*n,e[8]=a*n+l*i,e[9]=o*n+c*i,e[10]=s*n+f*i,e[11]=u*n+d*i,e}},{}],84:[function(e,t,r){t.exports=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],o=t[1],s=t[2],u=t[3],l=t[4],c=t[5],f=t[6],d=t[7];t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=a*i+l*n,e[1]=o*i+c*n,e[2]=s*i+f*n,e[3]=u*i+d*n,e[4]=l*i-a*n,e[5]=c*i-o*n,e[6]=f*i-s*n,e[7]=d*i-u*n,e}},{}],85:[function(e,t,r){t.exports=function(e,t,r){var n=r[0],i=r[1],a=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],86:[function(e,t,r){t.exports=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}},{}],87:[function(e,t,r){t.exports=function(e,t,r){var n,i,a,o,s,u,l,c,f,d,h,p,m=r[0],b=r[1],g=r[2];t===e?(e[12]=t[0]*m+t[4]*b+t[8]*g+t[12],e[13]=t[1]*m+t[5]*b+t[9]*g+t[13],e[14]=t[2]*m+t[6]*b+t[10]*g+t[14],e[15]=t[3]*m+t[7]*b+t[11]*g+t[15]):(i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],d=t[9],h=t[10],p=t[11],e[0]=n=t[0],e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=l,e[7]=c,e[8]=f,e[9]=d,e[10]=h,e[11]=p,e[12]=n*m+s*b+f*g+t[12],e[13]=i*m+u*b+d*g+t[13],e[14]=a*m+l*b+h*g+t[14],e[15]=o*m+c*b+p*g+t[15]);return e}},{}],88:[function(e,t,r){t.exports=function(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}},{}],89:[function(e,t,r){t.exports=function(e,t,r,n){var i,a,o,s,u,l=t[0],c=t[1],f=t[2],d=t[3],h=r[0],p=r[1],m=r[2],b=r[3];(a=l*h+c*p+f*m+d*b)<0&&(a=-a,h=-h,p=-p,m=-m,b=-b);1-a>1e-6?(i=Math.acos(a),o=Math.sin(i),s=Math.sin((1-n)*i)/o,u=Math.sin(n*i)/o):(s=1-n,u=n);return e[0]=s*l+u*h,e[1]=s*c+u*p,e[2]=s*f+u*m,e[3]=s*d+u*b,e}},{}],90:[function(e,t,r){t.exports=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=r[0],s=r[1],u=r[2];return e[0]=i*u-a*s,e[1]=a*o-n*u,e[2]=n*s-i*o,e}},{}],91:[function(e,t,r){t.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}},{}],92:[function(e,t,r){t.exports=function(e){var t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)}},{}],93:[function(e,t,r){t.exports=function(e,t,r,n){var i=t[0],a=t[1],o=t[2];return e[0]=i+n*(r[0]-i),e[1]=a+n*(r[1]-a),e[2]=o+n*(r[2]-o),e}},{}],94:[function(e,t,r){t.exports=function(e,t){var r=t[0],n=t[1],i=t[2],a=r*r+n*n+i*i;a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a);return e}},{}],95:[function(e,t,r){"use strict";var n=e("is-browser");t.exports=n&&function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(t){e=!1}return e}()},{"is-browser":96}],96:[function(e,t,r){t.exports=!0},{}],97:[function(e,t,r){"use strict";function n(e,t,r){var n,o,s,u,l,c=e.length,f=a(e[0],t),d=[];for(r||(r=[]),n=1;n<c;n++){for(o=e[n-1],u=l=a(s=e[n],t);;){if(!(f|u)){d.push(o),u!==l?(d.push(s),n<c-1&&(r.push(d),d=[])):n===c-1&&d.push(s);break}if(f&u)break;f?f=a(o=i(o,s,f,t),t):u=a(s=i(o,s,u,t),t)}f=l}return d.length&&r.push(d),r}function i(e,t,r,n){return 8&r?[e[0]+(t[0]-e[0])*(n[3]-e[1])/(t[1]-e[1]),n[3]]:4&r?[e[0]+(t[0]-e[0])*(n[1]-e[1])/(t[1]-e[1]),n[1]]:2&r?[n[2],e[1]+(t[1]-e[1])*(n[2]-e[0])/(t[0]-e[0])]:1&r?[n[0],e[1]+(t[1]-e[1])*(n[0]-e[0])/(t[0]-e[0])]:null}function a(e,t){var r=0;return e[0]<t[0]?r|=1:e[0]>t[2]&&(r|=2),e[1]<t[1]?r|=4:e[1]>t[3]&&(r|=8),r}t.exports=n,n.polyline=n,n.polygon=function(e,t){var r,n,o,s,u,l,c;for(n=1;n<=8;n*=2){for(r=[],s=!(a(o=e[e.length-1],t)&n),u=0;u<e.length;u++)(c=!(a(l=e[u],t)&n))!==s&&r.push(i(o,l,n,t)),c&&r.push(l),o=l,s=c;if(!(e=r).length)break}return r}},{}],98:[function(e,t,r){t.exports=e("./dist/es5/debug")},{"./dist/es5/debug":111}],99:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/typeof")),a=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),s=e("../webgl-context"),u=e("../webgl-utils"),l=e("../utils"),c=n(e("../utils/assert"));r.default=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,a.default)(this,e);var n=r.onInitialize,i=r.onFinalize,o=r.useDevicePixels,s=void 0===o||o,u=r.autoResizeDrawingBuffer,l=void 0===u||u;this.props={onInitialize:void 0===n?function(){}:n,onFinalize:void 0===i?function(){}:i},this.setProps({autoResizeDrawingBuffer:l,useDevicePixels:s}),(0,c.default)(t instanceof Worker),this.worker=t,this.canvas=null,this.width=null,this.height=null,this._stopped=!0,this._animationFrameId=null,this._startPromise=null,this._onMessage=this._onMessage.bind(this),this._onEvent=this._onEvent.bind(this),this._updateFrame=this._updateFrame.bind(this)}return(0,o.default)(e,null,[{key:"createWorker",value:function(e){return function(t){e.setProps({useDevicePixels:!1,autoResizeDrawingBuffer:!1}),t.canvas=null,t.addEventListener("message",function(r){switch(r.data.command){case"start":n=r.data.opts.canvas,i=new Map,n.addEventListener=function(e,r){t.postMessage({command:"addEventListener",type:e}),i.has(e)||i.set(e,[]),i.get(e).push(r)},n.removeEventListener=function(e,r){t.postMessage({command:"removeEventListener",type:e});var n=i.get(e);n&&n.splice(n.indexOf(r),1)},n.dispatchEvent=function(e,t){var r=i.get(e);r&&r.forEach(function(e){return e(t)})},t.canvas=n,e.start(r.data.opts);break;case"stop":e.stop();break;case"resize":t.canvas.width=r.data.width,t.canvas.height=r.data.height;break;case"event":t.canvas.dispatchEvent(r.data.type,r.data.event)}var n,i})}}}]),(0,o.default)(e,[{key:"setProps",value:function(e){return"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}},{key:"start",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._stopped=!1,this._animationFrameId||(this.worker.onmessage=this._onMessage,this._startPromise=(0,s.getPageLoadPromise)().then(function(){return e._createAndTransferCanvas(t),e.props.onInitialize(e)}).then(function(){e._stopped||(e._animationFrameId=(0,u.requestAnimationFrame)(e._updateFrame))})),this}},{key:"stop",value:function(){return this._animationFrameId&&((0,u.cancelAnimationFrame)(this._animationFrameId),this._animationFrameId=null,this._stopped=!0,this.props.onFinalize(this)),this.worker.postMessage({command:"stop"}),this}},{key:"_onMessage",value:function(e){switch(e.data.command){case"addEventListener":this.canvas.addEventListener(e.data.type,this._onEvent);break;case"removeEventListener":this.canvas.removeEventListener(e.data.type,this._onEvent)}}},{key:"_onEvent",value:function(e){var t=this.useDevicePixels&&window.devicePixelRatio||1,r=e.type,n={};for(var a in e){var o=e[a],s=(0,i.default)(o);"offsetX"!==a&&"offsetY"!==a||(o*=t),"number"!==s&&"boolean"!==s&&"string"!==s||(n[a]=o)}this.worker.postMessage({command:"event",type:r,event:n})}},{key:"_updateFrame",value:function(){this._resizeCanvasDrawingBuffer(),this._animationFrameId=(0,u.requestAnimationFrame)(this._updateFrame)}},{key:"_createAndTransferCanvas",value:function(e){var t=(0,s.getCanvas)(e);t.transferControlToOffscreen||l.log.error("OffscreenCanvas is not available in your browser.")();var r=t.transferControlToOffscreen();this.worker.postMessage({command:"start",opts:Object.assign({},e,{canvas:r})},[r]),this.canvas=t}},{key:"_resizeCanvasDrawingBuffer",value:function(){if(this.autoResizeDrawingBuffer){var e=this.useDevicePixels&&window.devicePixelRatio||1,t=this.canvas.clientWidth*e,r=this.canvas.clientHeight*e;this.width===t&&this.height===r||(this.width=t,this.height=r,this.worker.postMessage({command:"resize",width:t,height:r}))}}}]),e}()},{"../utils":190,"../utils/assert":187,"../webgl-context":206,"../webgl-utils":218,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/typeof":25}],100:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/typeof")),a=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),s=e("../webgl-context"),u=e("../webgl-context/debug-context"),l=e("../webgl-utils"),c=e("../utils"),f=n(e("../utils/assert")),d=e("../webgl"),h={preserveDrawingBuffer:!0};r.default=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.default)(this,e);var r=t.onCreateContext,n=void 0===r?function(e){return(0,s.createGLContext)(e)}:r,i=t.onAddHTML,o=void 0===i?null:i,u=t.onInitialize,l=void 0===u?function(){}:u,f=t.onRender,d=void 0===f?function(){}:f,h=t.onFinalize,p=void 0===h?function(){}:h,m=t.gl,b=void 0===m?null:m,g=t.glOptions,v=void 0===g?{}:g,y=t.debug,_=void 0!==y&&y,x=t.createFramebuffer,w=void 0!==x&&x,E=t.autoResizeViewport,k=void 0===E||E,P=t.autoResizeDrawingBuffer,M=void 0===P||P,A=t.useDevicePixels,C=void 0===A||A;return"useDevicePixelRatio"in t&&(c.log.deprecated("useDevicePixelRatio","useDevicePixels")(),C=t.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:o,onInitialize:l,onRender:d,onFinalize:p,gl:b,glOptions:v,debug:_,createFramebuffer:w},this.gl=b,this.needsRedraw=null,this._initialized=!1,this._running=!1,this._animationFrameId=null,this._startPromise=null,this.setProps({autoResizeViewport:k,autoResizeDrawingBuffer:M,useDevicePixels:C}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this),this}return(0,o.default)(e,[{key:"setNeedsRedraw",value:function(e){return(0,f.default)("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}},{key:"setProps",value:function(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}},{key:"start",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._running?this:(this._running=!0,this._startPromise=(0,s.getPageLoadPromise)().then(function(){if(!e._running||e._initialized)return null;e._createWebGLContext(t),e._createFramebuffer(),e._startEventHandling(),e._initializeCallbackData(),e._updateCallbackData(),e._resizeCanvasDrawingBuffer(),e._resizeViewport();var r=e.onInitialize(e.animationProps);return e._initialized=!0,r}).then(function(t){e._running&&(e._addCallbackData(t||{}),!1!==t&&e._startLoop())}),this)}},{key:"redraw",value:function(){return this._setupFrame(),this._updateCallbackData(),this.onRender(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this}},{key:"stop",value:function(){return this._running&&(this._finalizeCallbackData(),(0,l.cancelAnimationFrame)(this._animationFrameId),this._animationFrameId=null,this._running=!1),this}},{key:"onCreateContext",value:function(){var e;return(e=this.props).onCreateContext.apply(e,arguments)}},{key:"onInitialize",value:function(){var e;return(e=this.props).onInitialize.apply(e,arguments)}},{key:"onRender",value:function(){var e;return(e=this.props).onRender.apply(e,arguments)}},{key:"onFinalize",value:function(){var e;return(e=this.props).onFinalize.apply(e,arguments)}},{key:"getHTMLControlValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=document.getElementById(e);return r?Number(r.value):t}},{key:"setViewParameters",value:function(){return c.log.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}},{key:"_startLoop",value:function(){var e=this;(0,l.cancelAnimationFrame)(this._animationFrameId),this._animationFrameId=(0,l.requestAnimationFrame)(function t(){e._running&&(e.redraw(),e._animationFrameId=(0,l.requestAnimationFrame)(t))})}},{key:"_clearNeedsRedraw",value:function(){this.needsRedraw=null}},{key:"_setupFrame",value:function(){this._onSetupFrame?this._onSetupFrame(this.animationProps):(this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer())}},{key:"_initializeCallbackData",value:function(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),time:0,tick:0,tock:0,_loop:this,_animationLoop:this,_mousePosition:null}}},{key:"_updateCallbackData",value:function(){var e=this._getSizeAndAspect(),t=e.width,r=e.height,n=e.aspect;t===this.animationProps.width&&r===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=r,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.time=Date.now()-this.animationProps.startTime,this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps._offScreen=this.offScreen}},{key:"_finalizeCallbackData",value:function(){this.onFinalize(this.animationProps)}},{key:"_addCallbackData",value:function(e){"object"===(0,i.default)(e)&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}},{key:"_createWebGLContext",value:function(e){if(this.offScreen=e.canvas&&"undefined"!=typeof OffscreenCanvas&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,h,this.props.glOptions),this.gl=this.props.gl||this.onCreateContext(e),!(0,l.isWebGL)(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");this.props.debug&&(this.gl=(0,u.makeDebugContext)(this.gl)),(0,s.resetParameters)(this.gl),this._createInfoDiv()}},{key:"_createInfoDiv",value:function(){if(this.gl.canvas&&this.props.onAddHTML){var e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";var t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(t);var r=this.props.onAddHTML(t);r&&(t.innerHTML=r)}}},{key:"_getSizeAndAspect",value:function(){var e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight,r=1,n=this.gl.canvas,i=n.clientWidth,a=n.clientHeight;return i>=0&&a>=0?r=t>0?i/a:1:e>0&&t>0&&(r=e/t),{width:e,height:t,aspect:r}}},{key:"_resizeViewport",value:function(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}},{key:"_resizeCanvasDrawingBuffer",value:function(){this.autoResizeDrawingBuffer&&(0,s.resizeGLContext)(this.gl,{useDevicePixels:this.useDevicePixels})}},{key:"_createFramebuffer",value:function(){this.props.createFramebuffer&&(this.framebuffer=new d.Framebuffer(this.gl))}},{key:"_resizeFramebuffer",value:function(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}},{key:"_startEventHandling",value:function(){this.gl.canvas.addEventListener("mousemove",this._onMousemove),this.gl.canvas.addEventListener("mouseleave",this._onMouseleave)}},{key:"_onMousemove",value:function(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}},{key:"_onMouseleave",value:function(e){this.animationProps._mousePosition=null}}]),e}()},{"../utils":190,"../utils/assert":187,"../webgl":231,"../webgl-context":206,"../webgl-context/debug-context":205,"../webgl-utils":218,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/typeof":25}],101:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=e("../webgl"),s=e("../utils"),u=e("../webgl-context/context-features");r.default=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.default)(this,e);var n=r.id,a=void 0===n?(0,s.uid)("attribute"):n,o=r.type,l=r.isIndexed,c=void 0!==l&&l;this.gl=t,this.id=a,this.isIndexed=c,this.target=c?34963:34962,this.type=o,c&&!o&&(this.type=t&&(0,u.hasFeature)(t,u.FEATURES.ELEMENT_INDEX_UINT32)?5125:5123),this.value=null,this.externalBuffer=null,this.buffer=null,this.userData={},this.update(r),Object.seal(this),this._validateAttributeDefinition()}return(0,a.default)(e,[{key:"delete",value:function(){this.buffer&&(this.buffer.delete(),this.buffer=null)}},{key:"update",value:function(e){var t=e.value,r=e.buffer,n=e.constant,i=void 0===n?this.constant||!1:n;this.constant=i,r?(this.externalBuffer=r,this.constant=!1,this.type=r.accessor.type,void 0!==r.accessor.divisor&&(this.divisor=r.accessor.divisor)):t&&(this.externalBuffer=null,this.value=t,!i&&this.gl&&(this.buffer=this.buffer||new o.Buffer(this.gl,Object.assign({},e,{id:this.id,target:this.target,type:this.type})),this.buffer.setData({data:t}),this.type=this.buffer.accessor.type)),this._setAccessor(e)}},{key:"getBuffer",value:function(){return this.constant?null:this.externalBuffer||this.buffer}},{key:"getValue",value:function(){if(this.constant)return this.value;var e=this.externalBuffer||this.buffer;return e?[e,this]:null}},{key:"_setAccessor",value:function(e){var t=e.size,r=e.offset,n=void 0===r?this.offset||0:r,i=e.stride,a=void 0===i?this.stride||0:i,o=e.normalized,u=void 0===o?this.normalized||!1:o,l=e.integer,c=void 0===l?this.integer||!1:l,f=e.divisor,d=void 0===f?this.divisor||0:f,h=e.instanced,p=e.isInstanced;this.size=void 0===t?this.size:t,this.offset=n,this.stride=a,this.normalized=u,this.integer=c,this.divisor=d,void 0!==p&&(s.log.deprecated("Attribute.isInstanced"),this.divisor=p?1:0),void 0!==h&&(s.log.deprecated("Attribute.instanced"),this.divisor=h?1:0)}},{key:"_validateAttributeDefinition",value:function(){}}]),e}()},{"../utils":190,"../webgl":231,"../webgl-context/context-features":198,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/interopRequireDefault":13}],102:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/toConsumableArray")),a=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),u=n(e("@babel/runtime/helpers/getPrototypeOf")),l=n(e("@babel/runtime/helpers/inherits")),c=n(e("./object-3d")),f=e("math.gl"),d=n(e("../utils/assert"));r.default=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.default)(this,t);var n=(r=Array.isArray(r)?{children:r}:r).children,i=void 0===n?[]:n;return i.every(function(e){return(0,d.default)(e instanceof c.default)}),(e=(0,s.default)(this,(0,u.default)(t).call(this,r))).children=i,e}return(0,l.default)(t,c.default),(0,o.default)(t,[{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=0;n<t.length;n++){var a=t[n];Array.isArray(a)?this.add.apply(this,(0,i.default)(a)):this.children.push(a)}return this}},{key:"remove",value:function(e){var t=this.children,r=t.indexOf(e);return r>-1&&t.splice(r,1),this}},{key:"removeAll",value:function(){return this.children=[],this}},{key:"traverse",value:function(e){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).modelMatrix,n=void 0===r?new f.Matrix4:r,i=!0,a=!1,o=void 0;try{for(var s,u=this.children[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;n=n.multiplyRight(l.matrix);var c=void 0;if(c=l instanceof t?l.traverse(e,{modelMatrix:n}):e(l,{}))return c}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return null}},{key:"traverseReverse",value:function(e){for(var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).modelMatrix,n=void 0===r?new f.Matrix4:r,i=this.children.length-1;i>=0;--i){var a=this.children[i];n=n.multiplyRight(a.matrix);var o=void 0;if(o=a instanceof t?a.traverseReverse(e,{modelMatrix:n}):e(a,{}))return o}return null}}]),t}()},{"../utils/assert":187,"./object-3d":105,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20,"@babel/runtime/helpers/toConsumableArray":24,"math.gl":258}],103:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"AnimationLoop",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"AnimationLoopProxy",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"Model",{enumerable:!0,get:function(){return o.default}});var i=n(e("./animation-loop")),a=n(e("./animation-loop-proxy")),o=n(e("./model"))},{"./animation-loop":100,"./animation-loop-proxy":99,"./model":104,"@babel/runtime/helpers/interopRequireDefault":13}],104:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/defineProperty")),a=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),u=n(e("@babel/runtime/helpers/getPrototypeOf")),l=n(e("@babel/runtime/helpers/inherits")),c=n(e("./attribute")),f=n(e("./object-3d")),d=e("../geometry/geometry"),h=e("../webgl"),p=e("../webgl-utils"),m=e("../shadertools/src/shaders"),b=e("../shadertools/src"),g=e("../debug/seer-integration"),v=e("../webgl-debug/debug-uniforms"),y=e("../webgl-debug/debug-vertex-array"),_=e("../webgl-debug/debug-program-configuration"),x=e("../utils"),w=n(e("../utils/assert")),E=["renderPickingBuffer","pickingEnabled"];r.default=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.default)(this,t),r=(0,s.default)(this,(0,u.default)(t).call(this,n)),(0,w.default)((0,p.isWebGL)(e)),r.gl=e,r.lastLogTime=0,r.initialize(n),r}return(0,l.default)(t,f.default),(0,o.default)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props={},this.program=this._createProgram(e),this.vertexArray=new h.VertexArray(this.gl,{program:this.program}),this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.animatedUniforms={},this.animated=!1,this.animationLoop=null,this.timerQueryEnabled=!1,this.timeElapsedQuery=void 0,this.lastQueryReturned=!0,this.stats={accumulatedFrameTime:0,averageFrameTime:0,profileFrameCount:0},this.pickable=!0,this.setProps(e),this.setUniforms(Object.assign({},this.getModuleUniforms(),this.getModuleUniforms(e.moduleSettings))),this.isInstanced=e.isInstanced||e.instanced,this.onBeforeRender=e.onBeforeRender||function(){},this.onAfterRender=e.onAfterRender||function(){},(0,w.default)(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}},{key:"setProps",value:function(e){Object.assign(this.props,e),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"uniforms"in e&&this.setUniforms(e.uniforms,e.samplers),"pickable"in e&&(this.pickable=e.pickable),"timerQueryEnabled"in e&&(this.timerQueryEnabled=e.timerQueryEnabled&&h.Query.isSupported(this.gl,["timers"]),e.timerQueryEnabled&&!this.timerQueryEnabled&&x.log.warn("GPU timer not supported")()),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers),"_animationProps"in e&&this._setAnimationProps(e._animationProps),"_animationLoop"in e&&(this.animationLoop=e._animationLoop)}},{key:"delete",value:function(){for(var e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this.program.delete(),this.vertexArray.delete(),(0,g.removeModel)(this.id)}},{key:"destroy",value:function(){this.delete()}},{key:"getNeedsRedraw",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,t=void 0!==e&&e,r=!1;return r=r||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!t,this.geometry&&(r=r||this.geometry.getNeedsRedraw({clearRedrawFlags:t})),this.animated&&(r=r||"animated model ".concat(this.id)),r}},{key:"getDrawMode",value:function(){return this.drawMode}},{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getInstanceCount",value:function(){return this.instanceCount}},{key:"getProgram",value:function(){return this.program}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getUniforms",value:function(){return this.program.getUniforms}},{key:"setNeedsRedraw",value:function(){return this.needsRedraw=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],this}},{key:"setDrawMode",value:function(e){return this.props.drawMode=(0,d.getDrawMode)(e),this}},{key:"setVertexCount",value:function(e){return(0,w.default)(Number.isFinite(e)),this.props.vertexCount=e,this}},{key:"setInstanceCount",value:function(e){return(0,w.default)(Number.isFinite(e)),this.instanceCount=e,this}},{key:"setGeometry",value:function(e){this.geometry=e;var t=this._createBuffersFromAttributeDescriptors(this.geometry.getAttributes());return this.vertexArray.setAttributes(t),this.setNeedsRedraw(),this}},{key:"setAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,x.isObjectEmpty)(e))return this;Object.assign(this.attributes,e);var t=this._createBuffersFromAttributeDescriptors(e);return this.vertexArray.setAttributes(t),this.setNeedsRedraw(),this}},{key:"setUniforms",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object.assign({},t),(0,g.getOverrides)(this.id,t),t=this._extractAnimatedUniforms(t),this.program.setUniforms(t,r,function(){e._checkForDeprecatedUniforms(t),e.setNeedsRedraw()})}},{key:"_setAnimationProps",value:function(e){var t=this;if(this.animated){(0,w.default)(e,"Model.draw(): animated uniforms but no animationProps");var r=this._evaluateAnimateUniforms(e);this.program.setUniforms(r,{},function(){t._checkForDeprecatedUniforms(r),t.setNeedsRedraw()})}}},{key:"updateModuleSettings",value:function(e){var t=this.getModuleUniforms(e||{});return this.setUniforms(t)}},{key:"clear",value:function(e){return(0,h.clear)(this.program.gl,e),this}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.moduleSettings,r=void 0===t?null:t,n=e.framebuffer,i=e.uniforms,a=void 0===i?{}:i,o=e.attributes,s=void 0===o?{}:o,u=e.samplers,l=void 0===u?{}:u,c=e.transformFeedback,f=void 0===c?this.transformFeedback:c,d=e.parameters,h=void 0===d?{}:d,p=e.vertexArray,m=void 0===p?this.vertexArray:p,b=e.animationProps;(0,g.addModel)(this),this.setAttributes(s),this.updateModuleSettings(r),this.setUniforms(a,l),this._refreshAnimationProps(b);var v=this._logDrawCallStart(2),y=this.vertexArray.getDrawParams(this.props);y.isInstanced&&!this.isInstanced&&x.log.warn("Found instanced attributes on non-instanced model",this.id)();var _=y.isIndexed,w=y.indexType,E=this.isInstanced,k=this.instanceCount;return this.onBeforeRender(),this._timerQueryStart(),this.program.draw(Object.assign({},e,{logPriority:v,uniforms:null,framebuffer:n,parameters:h,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:m,transformFeedback:f,isIndexed:_,indexType:w,isInstanced:E,instanceCount:k})),this._timerQueryEnd(),this.onAfterRender(),this.setNeedsRedraw(!1),this._logDrawCallEnd(v,m,n),this}},{key:"transform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.discard,r=void 0===t||t,n=e.feedbackBuffers,a=e.unbindModels,o=void 0===a?[]:a,s=e.parameters;n&&this._setFeedbackBuffers(n),r&&(s=Object.assign({},s,(0,i.default)({},35977,r))),o.forEach(function(e){return e.vertexArray.unbindBuffers()});try{this.draw(Object.assign({},e,{parameters:s}))}finally{o.forEach(function(e){return e.vertexArray.bindBuffers()})}return this}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,w.default)(arguments.length<=1),this.draw({uniforms:e})}},{key:"_createProgram",value:function(e){var t=e.vs,r=void 0===t?null:t,n=e.fs,i=void 0===n?null:n,a=e.modules,o=void 0===a?null:a,s=e.defines,u=void 0===s?{}:s,l=e.inject,c=void 0===l?{}:l,f=e.shaderCache,d=void 0===f?null:f,p=e.varyings,g=void 0===p?null:p,v=e.bufferMode,y=void 0===v?35981:v,_=e.program,E=void 0===_?null:_;this.getModuleUniforms=function(e){};var k=this.id;if(!E){var P=(0,b.assembleShaders)(this.gl,{vs:r=r||m.MODULAR_SHADERS.vs,fs:i=i||m.MODULAR_SHADERS.fs,modules:o,inject:c,defines:u,log:x.log});r=P.vs,i=P.fs,E=d?d.getProgram(this.gl,{id:k,vs:r,fs:i}):new h.Program(this.gl,{id:k,vs:r,fs:i,varyings:g,bufferMode:y}),this.getModuleUniforms=P.getUniforms||function(e){}}return(0,w.default)(E instanceof h.Program,"Model needs a program"),E}},{key:"_checkForDeprecatedUniforms",value:function(e){E.forEach(function(t){t in e&&x.log.deprecated(t,"use picking shader module and Model class updateModuleSettings()")()})}},{key:"_refreshAnimationProps",value:function(e){(e=e||this.animationLoop&&this.animationLoop.animationProps)&&this._setAnimationProps(e)}},{key:"_evaluateAnimateUniforms",value:function(e){if(!this.animated)return{};var t={};for(var r in this.animatedUniforms){t[r]=(0,this.animatedUniforms[r])(e)}return t}},{key:"_extractAnimatedUniforms",value:function(e){var t=!1;for(var r in e){var n=e[r];"function"==typeof n?(this.animatedUniforms[r]=n,t=!0):delete this.animatedUniforms[r]}if(this.animated=!(0,x.isObjectEmpty)(this.animatedUniforms),!t)return e;var i={};for(var a in e)this.animatedUniforms[a]||(i[a]=e[a]);return i}},{key:"_setFeedbackBuffers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,x.isObjectEmpty)(e)?this:(this.transformFeedback=this.transformFeedback||new h.TransformFeedback(this.program.gl,{program:this.program}),this.transformFeedback.setBuffers(e),this.setNeedsRedraw(),this)}},{key:"_timerQueryStart",value:function(){!0===this.timerQueryEnabled&&(this.timeElapsedQuery||(this.timeElapsedQuery=new h.Query(this.gl)),this.lastQueryReturned&&(this.lastQueryReturned=!1,this.timeElapsedQuery.beginTimeElapsedQuery()))}},{key:"_timerQueryEnd",value:function(){if(!0===this.timerQueryEnabled&&(this.timeElapsedQuery.end(),this.timeElapsedQuery.isResultAvailable())){this.lastQueryReturned=!0;var e=this.timeElapsedQuery.getResult();this.stats.lastFrameTime=e,this.stats.accumulatedFrameTime+=e,this.stats.profileFrameCount++,this.stats.averageFrameTime=this.stats.accumulatedFrameTime/this.stats.profileFrameCount,x.log.log(2,"GPU time ".concat(this.program.id,": ").concat(this.stats.lastFrameTime,"ms average ").concat(this.stats.averageFrameTime,"ms accumulated: ").concat(this.stats.accumulatedFrameTime,"ms count: ").concat(this.stats.profileFrameCount))()}}},{key:"_createBuffersFromAttributeDescriptors",value:function(e){var t=this.program.gl,r={};for(var n in e){var i=e[n],a=this._attributes[n];i instanceof c.default?a=i:i instanceof h.Buffer?(a=a||new c.default(t,Object.assign({},i,i.layout,{id:n}))).update({buffer:i}):a?a.update(i):a=new c.default(t,Object.assign({},i,{id:n})),this._attributes[n]=a,r[n]=a.getValue()}return r}},{key:"_logDrawCallStart",value:function(e){var t=e>3?0:1e4;if(!(x.log.priority<e||Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),x.log.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:x.log.priority<=2})(),e}},{key:"_logDrawCallEnd",value:function(e,t,r,n){if(void 0!==e){var i=(0,y.getDebugTableForVertexArray)({vertexArray:t,header:"".concat(this.id," attributes"),attributes:this._attributes}),a=(0,v.getDebugTableForUniforms)({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r)}),o=a.table,s=a.unusedTable,u=a.unusedCount,l=(0,v.getDebugTableForUniforms)({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r),undefinedOnly:!0});l.count>0&&x.log.log("MISSING UNIFORMS",Object.keys(l.table))(),u>0&&x.log.log("UNUSED UNIFORMS",Object.keys(s))();var c=(0,_.getDebugTableForProgramConfiguration)(this.vertexArray.configuration);x.log.table(e,i)(),x.log.table(e,o)(),x.log.table(e+1,c)(),(0,g.logModel)(this,r),n&&n.log({priority:2,message:"Rendered to ".concat(n.id)}),x.log.groupEnd(2,">>> DRAWING MODEL ".concat(this.id))()}}},{key:"vertexCount",get:function(){return Number.isFinite(this.props.vertexCount)?this.props.vertexCount:this.geometry&&this.geometry.getVertexCount()}},{key:"drawMode",get:function(){return Number.isFinite(this.props.drawMode)?this.props.drawMode:this.geometry&&this.geometry.drawMode}}]),t}()},{"../debug/seer-integration":112,"../geometry/geometry":116,"../shadertools/src":148,"../shadertools/src/shaders":179,"../utils":190,"../utils/assert":187,"../webgl":231,"../webgl-debug/debug-program-configuration":210,"../webgl-debug/debug-uniforms":211,"../webgl-debug/debug-vertex-array":212,"../webgl-utils":218,"./attribute":101,"./object-3d":105,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/defineProperty":9,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],105:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=e("../utils"),s=e("math.gl"),u=n(e("../utils/assert"));r.default=function(){function e(t){var r=t.id;(0,i.default)(this,e),this.id=r||(0,o.uid)(this.constructor.name),this.display=!0,this.position=new s.Vector3,this.rotation=new s.Vector3,this.scale=new s.Vector3(1,1,1),this.matrix=new s.Matrix4,this.userData={}}return(0,a.default)(e,[{key:"toString",value:function(){return"{id: ".concat(this.id,", children: ").concat(this.children,")}")}},{key:"setPosition",value:function(e){return(0,u.default)(3===e.length,"setPosition requires vector argument"),this.position=e,this}},{key:"setRotation",value:function(e){return(0,u.default)(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}},{key:"setScale",value:function(e){return(0,u.default)(3===e.length,"setScale requires vector argument"),this.scale=e,this}},{key:"setMatrixComponents",value:function(e){var t=e.position,r=e.rotation,n=e.scale,i=e.update,a=void 0===i||i;return t&&this.setPosition(t),r&&this.setRotation(r),n&&this.setScale(n),a&&this.updateMatrix(),this}},{key:"updateMatrix",value:function(){var e=this.position,t=this.rotation,r=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(t),this.matrix.scale(r),this}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.position,r=e.rotation,n=e.scale;return t&&this.setPosition(t),r&&this.setRotation(r),n&&this.setScale(n),this.updateMatrix(),this}},{key:"getCoordinateUniforms",value:function(e,t){(0,u.default)(e),t=t||this.matrix;var r=new s.Matrix4(e).multiplyRight(t),n=r.invert(),i=n.transpose();return{viewMatrix:e,modelMatrix:t,objectMatrix:t,worldMatrix:r,worldInverseMatrix:n,worldInverseTransposeMatrix:i}}},{key:"transform",value:function(){if(this.parent){var e=this.parent;this.endPosition.set(this.position.add(e.endPosition)),this.endRotation.set(this.rotation.add(e.endRotation)),this.endScale.set(this.scale.add(e.endScale))}else this.endPosition.set(this.position),this.endRotation.set(this.rotation),this.endScale.set(this.scale);for(var t=this.children,r=0;r<t.length;++r)t[r].transform();return this}}]),e}()},{"../utils":190,"../utils/assert":187,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/interopRequireDefault":13,"math.gl":258}],106:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var r=t.models,n=t.position,u=t.uniforms,l=void 0===u?{}:u,c=t.parameters,f=void 0===c?{}:c,d=t.settings,h=t.useDevicePixels,p=void 0===h||h,m=t.framebuffer,b=t.context;(0,s.default)((0,a.isWebGL)(e)&&m&&n);var g=(0,i.default)(n,2),v=g[0],y=g[1];m.resize({width:e.canvas.width,height:e.canvas.height});var _=p&&"undefined"!=typeof window?window.devicePixelRatio:1,x=v*_,w=e.canvas.height-y*_;return new o.default({children:r}).traverseReverse(function(r){if(r.pickable){(0,a.clear)(e,{framebuffer:m,color:!0,depth:!0}),r.setUniforms({picking_uActive:1}),r.draw(Object.assign({},t,{uniforms:l,parameters:f,settings:d,framebuffer:m,context:b})),r.setUniforms({picking_uActive:0});var n=m.readPixels({x:x,y:w,width:1,height:1,format:6408,type:5121}),i=0!==n[0]||0!==n[1]||0!==n[2];if(i)return{model:r,color:n,x:v,y:y,deviceX:x,deviceY:w}}return null})};var i=n(e("@babel/runtime/helpers/slicedToArray")),a=e("../webgl"),o=n(e("./group")),s=n(e("../utils/assert"))},{"../utils/assert":187,"../webgl":231,"./group":102,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/slicedToArray":22}],107:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.encodePickingColor=function(e){return[e+1&255,e+1>>8&255,e+1>>16&255]},r.decodePickingColor=function(e){var t=(0,i.default)(e,3);return t[0]+256*t[1]+65536*t[2]-1},r.getNullPickingColor=function(){return a};var i=n(e("@babel/runtime/helpers/slicedToArray")),a=new Uint8Array([0,0,0])},{"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/slicedToArray":22}],108:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=e("../webgl/shader"),s=n(e("../webgl/program")),u=n(e("../utils/assert"));r.default=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.gl,n=t._cachePrograms,a=void 0!==n&&n;(0,i.default)(this,e),(0,u.default)(r),this.gl=r,this.vertexShaders={},this.fragmentShaders={},this.programs={},this._cachePrograms=a}return(0,a.default)(e,[{key:"delete",value:function(){return this}},{key:"getVertexShader",value:function(e,t){(0,u.default)("string"==typeof t),(0,u.default)(this._compareContexts(e,this.gl));var r=this.vertexShaders[t];return r||(r=new o.VertexShader(e,t),this.vertexShaders[t]=r),r}},{key:"getFragmentShader",value:function(e,t){(0,u.default)("string"==typeof t),(0,u.default)(this._compareContexts(e,this.gl));var r=this.fragmentShaders[t];return r||(r=new o.FragmentShader(e,t),this.fragmentShaders[t]=r),r}},{key:"getProgram",value:function(e,t){(0,u.default)(this._compareContexts(e,this.gl)),(0,u.default)("string"==typeof t.vs),(0,u.default)("string"==typeof t.fs),(0,u.default)("string"==typeof t.id);var r=this._getProgramKey(t),n=this.programs[r];return n?(this._resetProgram(n),n):(n=this._createNewProgram(e,t),this._cachePrograms&&this._checkProgramProp(n)&&(n._isCached=!0,this.programs[r]=n),n)}},{key:"_getProgramKey",value:function(e){return"".concat(e.id,"-").concat(e.vs,"-").concat(e.fs)}},{key:"_checkProgramProp",value:function(e){return!e.varyings}},{key:"_createNewProgram",value:function(e,t){var r=t.fs,n=this.getVertexShader(e,t.vs),i=this.getFragmentShader(e,r);return new s.default(this.gl,Object.assign({},t,{vs:n,fs:i}))}},{key:"_resetProgram",value:function(e,t){e.reset()}},{key:"_compareContexts",value:function(e,t){return(e.gl||e)===(t.gl||t)}}]),e}()},{"../utils/assert":187,"../webgl/program":233,"../webgl/shader":238,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/interopRequireDefault":13}],109:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.updateForTextures=function(e){var t=e.vs,r=e.sourceTextureMap,n=e.targetTextureVarying,o=e.targetTexture,f=Object.keys(r).length,d=null,h={},p=t,m={};if(f>0||n){var b=p.split("\n"),g=b.slice();if(b.forEach(function(e,t,i){if(f>0){var o=c(e,r);if(o){var s=o.updatedLine,u=o.inject;g[t]=s,m=(0,a.combineInjects)([m,u]),Object.assign(h,o.samplerTextureMap),f--}}n&&!d&&(d=l(e,n))}),n){(0,i.default)(o);var v="".concat(s).concat(n),y="uniform vec2 ".concat(v,";\n"),_="     vec2 ".concat(u," = transform_getPos(").concat(v,");\n     gl_Position = vec4(").concat(u,", 0, 1.);\n"),x={"vs:#decl":y,"vs:#main-start":_};m=(0,a.combineInjects)([m,x])}p=g.join("\n")}return{vs:p,targetTextureType:d,inject:m,samplerTextureMap:h}},r.getSizeUniforms=function(e){var t,r,n=e.sourceTextureMap,i=e.targetTextureVarying,a=e.targetTexture,o={};i&&(t=a.width,r=a.height,o["".concat(s).concat(i)]=[t,r]);for(var u in n){var l=n[u];t=l.width,r=l.height,o["".concat(s).concat(u)]=[t,r]}return o},r.getVaryingType=l,r.processAttributeDefinition=c;var i=n(e("assert")),a=e("../shadertools/src"),o="transform_uSampler_",s="transform_uSize_",u="transform_position";function l(e,t){var r=(0,a.getQualifierDetails)(e,["varying","out"]);return r&&r.name===t?r.type:null}function c(e,t){var r={},n=function(e){return(0,a.getQualifierDetails)(e,["attribute","in"])}(e);if(!n)return null;var i=n.type,u=n.name;if(u&&t[u]){var l="// ".concat(e," => Replaced by Transform with a sampler"),c=function(e){var t="".concat(o).concat(e),r="".concat(s).concat(e);return{samplerName:t,sizeName:r,uniformDeclerations:"  uniform sampler2D ".concat(t,";\n  uniform vec2 ").concat(r,";")}}(u),f=c.samplerName,d=c.sizeName,h=c.uniformDeclerations,p=(0,a.typeToChannelSuffix)(i),m="  ".concat(i," ").concat(u," = transform_getInput(").concat(f,", ").concat(d,").").concat(p,";\n");return r[f]=u,{updatedLine:l,inject:{"vs:#decl":h,"vs:#main-start":m},samplerTextureMap:r}}return null}},{"../shadertools/src":148,"@babel/runtime/helpers/interopRequireDefault":13,assert:28}],110:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i,a=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),s=n(e("@babel/runtime/helpers/defineProperty")),u=n(e("./model")),l=n(e("../webgl/buffer")),c=n(e("../webgl/framebuffer")),f=n(e("../webgl/texture-2d")),d=n(e("../webgl/transform-feedback")),h=e("../shadertools/src/lib/inject-shader"),p=e("../shadertools/src"),m=e("../webgl-utils"),b=n(e("../utils/assert")),g=e("../utils"),v=e("./transform-shader-utils"),y=((0,s.default)(i={},10241,9728),(0,s.default)(i,10240,9728),(0,s.default)(i,10242,33071),(0,s.default)(i,10243,33071),i);r.default=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,a.default)(this,e),(0,m.assertWebGL2Context)(t),this.gl=t,this.model=null,this.elementCount=0,this.currentIndex=0,this.sourceBuffers=new Array(2),this.sourceTextures=new Array(2),this.feedbackBuffers=new Array(2),this.targetTextures=new Array(2),this.transformFeedbacks=new Array(2),this.framebuffers=new Array(2),this._createdBuffers={},this.elementIDBuffer=null,this._targetRefTexName=null,this._initialize(r),Object.seal(this)}return(0,o.default)(e,null,[{key:"isSupported",value:function(e){return(0,m.isWebGL2)(e)}}]),(0,o.default)(e,[{key:"delete",value:function(){for(var e in this._createdBuffers)this._createdBuffers[e].delete();this.model.delete()}},{key:"getBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e?this.feedbackBuffers[this.currentIndex][e]:null;return t?t instanceof l.default?t:t.buffer:null}},{key:"_getTargetTexture",value:function(){return this.framebuffers[this.currentIndex]?this.framebuffers[this.currentIndex].attachments[36064]:null}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.varyingName,r=void 0===t?null:t,n=e.packed,i=void 0!==n&&n,a=this.getBuffer(r);if(a)return a.getData();(0,b.default)(!r||r===this.targetTextureVarying);var o=this.framebuffers[this.currentIndex].readPixels();if(!i)return o;for(var s=o.constructor,u=(0,p.typeToChannelCount)(this.targetTextureType),l=new s(o.length*u/4),c=0,f=0;f<o.length;f+=4)for(var d=0;d<u;d++)l[c++]=o[f+d];return l}},{key:"getFramebuffer",value:function(){return this.framebuffers[this.currentIndex]}},{key:"_getInputs",value:function(){var e={},t=this.currentIndex,r=Object.assign({},this.sourceBuffers[t]);if(this.hasSourceTextures||this.targetTextureVarying){for(var n in r.transform_elementID=this.elementIDBuffer,this.samplerTextureMap){e[n]=this.sourceTextures[t][this.samplerTextureMap[n]]}this._setSourceTextureParameters();var i=(0,v.getSizeUniforms)({sourceTextureMap:this.sourceTextures[t],targetTextureVarying:this.targetTextureVarying,targetTexture:this.targetTextures[t]});Object.assign(e,i)}return{attributes:r,uniforms:e}}},{key:"run",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._getInputs(),r=t.attributes,n=t.uniforms;Object.assign(n,e.uniforms);var i=Object.assign({},e.parameters),a=e.clearRenderTarget,o=void 0===a||a,s=null,u=!0;this.renderingToTexture&&(u=!1,(0,b.default)(s=this.framebuffers[this.currentIndex]),i.viewport=[0,0,s.width,s.height],o&&this.gl.clear(this.gl.COLOR_BUFFER_BIT)),this.model.setAttributes(r),this.model.transform(Object.assign({},e,{transformFeedback:this.transformFeedbacks[this.currentIndex],uniforms:n,discard:u,framebuffer:s,parameters:i}))}},{key:"swapBuffers",value:function(){g.log.deprecated("swapBuffers()","swap()"),this.swap()}},{key:"swap",value:function(){(0,b.default)(this.feedbackMap||this._swapTexture),this.currentIndex=(this.currentIndex+1)%2}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.elementCount&&this._setElementCount(e.elementCount);var t=e.sourceBuffers,r=void 0===t?null:t,n=e.feedbackBuffers,i=void 0===n?null:n,a=this.currentIndex;if(r||i){for(var o in i)(0,b.default)(i[o]instanceof l.default||i[o].buffer instanceof l.default);Object.assign(this.sourceBuffers[a],r),Object.assign(this.feedbackBuffers[a],i),this._createFeedbackBuffers({feedbackBuffers:i}),this.transformFeedbacks[a]&&this.transformFeedbacks[a].setBuffers(this.feedbackBuffers[a]),this._setupSwapBuffers()}var s=e._sourceTextures,u=e._targetTexture;(s||u)&&(Object.assign(this.sourceTextures[a],s),this._updateTargetTexture(u||this._targetRefTexName,a),this._setupSwapTextures())}},{key:"_setSourceTextureParameters",value:function(){var e=this.currentIndex;for(var t in this.sourceTextures[e])this.sourceTextures[e][t].setParameters(y)}},{key:"_setElementCount",value:function(e){this.elementCount!==e&&(this.elementCount<e&&this._updateElementIDBuffer(e),this.model.setVertexCount(e),this.elementCount=e)}},{key:"_updateTargetTexture",value:function(e,t){var r=this._buildTargetTexture(e);r&&(this.targetTextures[t]=r,this.framebuffers[t]&&(this.framebuffers[t].update({attachments:(0,s.default)({},36064,this.targetTextures[t]),resizeAttachments:!1}),this.framebuffers[t].resize({width:r.width,height:r.height})))}},{key:"_initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._validateProps(e),r=t.feedbackBuffers,n=t.feedbackMap,i=e.sourceBuffers,a=e.varyings,o=e._targetTexture,s=e._targetTextureVarying,u=e._swapTexture,l=a;n&&!Array.isArray(a)&&(l=Object.values(n)),this.varyingsArray=l,this.feedbackMap=n,this._swapTexture=u,o&&(this.targetTextureVarying=s,this.renderingToTexture=!0,(0,b.default)(this.targetTextureVarying)),this._setupBuffers({sourceBuffers:i,feedbackBuffers:r}),this._setupTextures(e),this._setupSwapBuffers(),this._setupSwapTextures(),this._buildModel(Object.assign({},e,{id:e.id||"transform-model",drawMode:e.drawMode||0,varyings:l}))}},{key:"_validateProps",value:function(e){var t=e.feedbackBuffers,r=e.feedbackMap,n=e.destinationBuffers,i=e.sourceDestinationMap;n&&(g.log.deprecated("destinationBuffers","feedbackBuffers")(),t=t||n),i&&(g.log.deprecated("sourceDestinationMap","feedbackMap")(),r=r||i);var a=e.vs,o=e.elementCount,s=e.varyings,u=e._sourceTextures,c=e._targetTexture,d=e._targetTextureVarying,h=e._swapTexture;for(var p in(0,b.default)(a&&(s||r||c)&&o),t||{})(0,b.default)(t[p]instanceof l.default||t[p].buffer instanceof l.default);for(var m in u||{})(0,b.default)(u[m]instanceof f.default);return(0,b.default)(!c||d),(0,b.default)(!h||u[h]),{feedbackBuffers:t,feedbackMap:r}}},{key:"_setupBuffers",value:function(e){var t=e.sourceBuffers,r=e.feedbackBuffers,n=void 0===r?null:r;this.sourceBuffers[0]=Object.assign({},void 0===t?null:t),this.feedbackBuffers[0]=Object.assign({},n),this._createFeedbackBuffers({feedbackBuffers:n}),this.sourceBuffers[1]={},this.feedbackBuffers[1]={}}},{key:"_setupTextures",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e._targetTexture;if(this.sourceTextures[0]=Object.assign({},e._sourceTextures),this.sourceTextures[1]={},this.hasSourceTextures=Object.keys(this.sourceTextures[0]).length>0,this.targetTextureVarying){var r=this._buildTargetTexture(t);(0,b.default)(r),this.targetTextures[0]=r,this.targetTextures[1]=null}}},{key:"_buildTargetTexture",value:function(e){var t;if(e instanceof f.default)return e;var r=this.sourceTextures[0][e];return r?(this._targetRefTexName=e,(0,m.cloneTextureFrom)(r,{parameters:(t={},(0,s.default)(t,10241,9728),(0,s.default)(t,10240,9728),(0,s.default)(t,10242,33071),(0,s.default)(t,10243,33071),t),pixelStore:(0,s.default)({},37440,!1)})):null}},{key:"_createFeedbackBuffers",value:function(e){var t=e.feedbackBuffers;if(this.feedbackMap){var r=this.currentIndex;for(var n in this.feedbackMap){var i=this.feedbackMap[n];if(!(i===this.targetTextureVarying||t&&t[i])){var a=this.sourceBuffers[r][n],o=new l.default(this.gl,{bytes:a.bytes,type:a.type,usage:a.usage,accessor:a.accessor});this._createdBuffers[i]&&this._createdBuffers[i].delete(),this._createdBuffers[i]=o,this.feedbackBuffers[r][i]=o}}}}},{key:"_createNewBuffer",value:function(e,t){var r=new l.default(this.gl,t);return this._createdBuffers[e]&&(this._createdBuffers[e].delete(),this._createdBuffers[e]=r),r}},{key:"_setupSwapBuffers",value:function(){if(this.feedbackMap){var e=this.currentIndex,t=(e+1)%2;for(var r in Object.assign(this.sourceBuffers[t],this.sourceBuffers[e]),Object.assign(this.feedbackBuffers[t],this.feedbackBuffers[e]),this.feedbackMap){var n=this.feedbackMap[r];n!==this.targetTextureVarying&&(this.sourceBuffers[t][r]=this.feedbackBuffers[e][n],this.feedbackBuffers[t][n]=this.sourceBuffers[e][r],(0,b.default)(this.feedbackBuffers[t][n]instanceof l.default))}this.transformFeedbacks[t]&&this.transformFeedbacks[t].setBuffers(this.feedbackBuffers[t])}}},{key:"_setupSwapTextures",value:function(){if(this._swapTexture&&this.targetTextureVarying){var e=this.currentIndex,t=(e+1)%2;Object.assign(this.sourceTextures[t],this.sourceTextures[e]),this.sourceTextures[t][this._swapTexture]=this.targetTextures[e],this._updateTargetTexture(this.sourceTextures[e][this._swapTexture],t)}}},{key:"_buildModel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._getShaders(e),r=t.samplerTextureMap;this.model=new u.default(this.gl,Object.assign({},e,{vs:t.vs,fs:t.fs,vertexCount:e.elementCount,modules:t.modules,uniforms:t.uniforms,inject:t.inject})),this.samplerTextureMap=r,this._setupTransformFeedback(),this._setupFramebuffers(),this._setElementCount(e.elementCount)}},{key:"_setupTransformFeedback",value:function(){(0,g.isObjectEmpty)(this.feedbackBuffers[0])||(this.transformFeedbacks[0]=new d.default(this.gl,{program:this.model.program,buffers:this.feedbackBuffers[0]}),this.feedbackMap&&(this.transformFeedbacks[1]=new d.default(this.gl,{program:this.model.program,buffers:this.feedbackBuffers[1]})))}},{key:"_setupFramebuffers",value:function(){if(this.renderingToTexture){var e=this.targetTextures[0],t=e.width,r=e.height;if(this.framebuffers[0]=new c.default(this.gl,{id:"".concat(this.id||"transform","-framebuffer-0"),width:t,height:r,attachments:(0,s.default)({},36064,this.targetTextures[0])}),this._swapTexture){var n=this.targetTextures[1];t=n.width,r=n.height,this.framebuffers[1]=new c.default(this.gl,{id:"".concat(this.id||"transform","-framebuffer-1"),width:t,height:r,attachments:(0,s.default)({},36064,this.targetTextures[1])})}}}},{key:"_updateElementIDBuffer",value:function(e){if(this.hasSourceTextures||this.targetTextureVarying){var t=new Float32Array(e);t.forEach(function(e,t,r){r[t]=t}),this.elementIDBuffer?this.elementIDBuffer.setData({data:t}):this.elementIDBuffer=new l.default(this.gl,{data:t,size:1})}}},{key:"_getShaders",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._processVertexShader(e.vs),r=t.vs,n=t.uniforms,i=t.targetTextureType,a=t.samplerTextureMap,o=(0,h.combineInjects)([e.inject||{},t.inject]);return this.targetTextureType=i,{vs:r,fs:(0,p.getPassthroughFS)({version:(0,m.getShaderVersion)(r),input:this.targetTextureVarying,inputType:i,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[p._transform].concat(e.modules||[]):e.modules,uniforms:n,inject:o,samplerTextureMap:a}}},{key:"_processVertexShader",value:function(e){return(0,v.updateForTextures)({vs:e,sourceTextureMap:this.sourceTextures[this.currentIndex],targetTextureVarying:this.targetTextureVarying,targetTexture:this.targetTextures[this.currentIndex]})}}]),e}()},{"../shadertools/src":148,"../shadertools/src/lib/inject-shader":153,"../utils":190,"../utils/assert":187,"../webgl-utils":218,"../webgl/buffer":227,"../webgl/framebuffer":230,"../webgl/texture-2d":240,"../webgl/transform-feedback":244,"./model":104,"./transform-shader-utils":109,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/defineProperty":9,"@babel/runtime/helpers/interopRequireDefault":13}],111:[function(e,t,r){(function(t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){(0,n.installParameterDefinitions)(),console.log("luma.gl: WebGL debug support installed")};var n=e("./webgl-debug/debug-parameters"),i=e("webgl-debug");(void 0!==t?t:window).WebGLDebug=i,console.log("luma.gl: WebGL debug support imported")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./webgl-debug/debug-parameters":209,"webgl-debug":318}],112:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.getOverrides=r.setOverride=r.removeModel=r.logModel=r.addModel=void 0;var i=n(e("seer")),a=e("../utils/globals"),o={};r.addModel=function(e){o[e.id]||(o[e.id]=e,i.default.listItem("luma.gl",e.id))};r.logModel=function(e,t){if(i.default.isReady()&&!i.default.throttle("luma.gl:".concat(e.id),1e3)){var r=e.geometry?Object.assign({},e.geometry.attributes,e.attributes):e.attributes,n=Object.assign({},e.uniforms,t);i.default.multiUpdate("luma.gl",e.id,[{path:"objects.uniforms",data:n},{path:"objects.attributes",data:r}])}};r.removeModel=function(e){delete o[e],i.default.deleteItem("luma.gl",e)};var s=function e(t,r,n){t&&(r.length>1?e(t[r[0]],r.slice(1),n):t[r[0]]=n)},u=new Map,l=function(e,t,r){a.window.__SEER_INITIALIZED__&&(u.has(e)||u.set(e,new Map),u.get(e).set(t,r))};r.setOverride=l;r.getOverrides=function(e,t){if(a.window.__SEER_INITIALIZED__&&e){var r=u.get(e);r&&r.forEach(function(e,r){s(t,r,e)})}},i.default.listenFor("luma.gl",function(e){var t=o[e.itemKey];if(t&&"edit"===e.type&&"uniforms"===e.valuePath[0]){var r=e.valuePath.slice(1);l(e.itemKey,r,e.value);var n=t.getUniforms();s(n,r,e.value),t.setUniforms(n)}})},{"../utils/globals":189,"@babel/runtime/helpers/interopRequireDefault":13,seer:313}],113:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),s=n(e("@babel/runtime/helpers/inherits")),u=n(e("./truncated-cone-geometry"));r.default=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,t);var r=e.radius,n=void 0===r?1:r,s=e.cap,u=void 0===s||s;return(0,a.default)(this,(0,o.default)(t).call(this,Object.assign({},e,{topRadius:0,topCap:Boolean(u),bottomCap:Boolean(u),bottomRadius:n})))}return(0,s.default)(t,u.default),t}()},{"./truncated-cone-geometry":121,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],114:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),s=n(e("@babel/runtime/helpers/inherits")),u=n(e("./geometry")),l=e("../utils");r.default=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,t);var r=e.id,n=void 0===r?(0,l.uid)("cube-geometry"):r;return(0,a.default)(this,(0,o.default)(t).call(this,Object.assign({},e,{id:n,attributes:{indices:new Uint16Array(c),positions:new Float32Array(f),normals:new Float32Array(d),texCoords:new Float32Array(h)}})))}return(0,s.default)(t,u.default),t}();var c=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),f=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),d=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),h=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1])},{"../utils":190,"./geometry":116,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],115:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),s=n(e("@babel/runtime/helpers/inherits")),u=n(e("./truncated-cone-geometry"));r.default=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,t);var r=e.radius,n=void 0===r?1:r;return(0,a.default)(this,(0,o.default)(t).call(this,Object.assign({},e,{bottomRadius:n,topRadius:n})))}return(0,s.default)(t,u.default),t}()},{"./truncated-cone-geometry":121,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],116:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.getDrawMode=l,r.default=r.DRAW_MODE=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=e("../utils"),s=n(e("../utils/assert")),u={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};function l(e){var t="string"==typeof e?u[e]||u.TRIANGLES:e;return(0,s.default)(t>=0&&t<=u.TRIANGLE_FAN,"Illegal drawMode"),t}r.DRAW_MODE=u,r.default=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,e);var r=t.drawMode,n=void 0===r?u.TRIANGLES:r,a=t.vertexCount,s=void 0===a?void 0:a,c=t.attributes;this.id=t.id||(0,o.uid)(this.constructor.name),this.drawMode=l(n),this.vertexCount=s,this.attributes={},this.needsRedraw=!0,this.userData={},Object.seal(this),c&&this.setAttributes(c)}return(0,a.default)(e,[{key:"setNeedsRedraw",value:function(){return this.needsRedraw=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],this}},{key:"getNeedsRedraw",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clearRedrawFlags,t=!1;return t=t||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!(void 0!==e&&e),t}},{key:"setVertexCount",value:function(e){this.vertexCount=e}},{key:"getVertexCount",value:function(){return void 0!==this.vertexCount?this.vertexCount:this.attributes.indices?this.attributes.indices.value.length:this.attributes.vertices?this.attributes.vertices.value.length/3:!!this.attributes.positions&&this.attributes.positions.value.length/3}},{key:"hasAttribute",value:function(e){return Boolean(this.attributes[e])}},{key:"getAttribute",value:function(e){var t=this.attributes[e];return(0,s.default)(t),t.value}},{key:"getArray",value:function(e){var t=this.attributes[e];return(0,s.default)(t),t.value}},{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(e){for(var t in e){var r=e[t];r=ArrayBuffer.isView(r)?{value:r}:r,(0,s.default)(ArrayBuffer.isView(r.value),"".concat(this._print(t),": must be typed array or object with value as typed array")),this._autoDetectAttribute(t,r),this.attributes[t]=r}return this.setNeedsRedraw(),this}},{key:"_autoDetectAttribute",value:function(e,t){var r;switch(e){case"indices":r=r||"indices";break;case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":r="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":r="vectors"}switch(r){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2;break;case"indices":t.size=t.size||1,t.isIndexed=void 0===t.isIndexed||t.isIndexed,(0,s.default)(t.value instanceof Uint16Array||t.value instanceof Uint32Array,'attribute array for "indices" must be of integer type')}(0,s.default)(t.size,"attribute ".concat(e," needs size"))}},{key:"_print",value:function(e){return"Geometry ".concat(this.id," attribute ").concat(e)}}]),e}()},{"../utils":190,"../utils/assert":187,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/interopRequireDefault":13}],117:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),s=n(e("@babel/runtime/helpers/inherits")),u=n(e("./geometry")),l=e("math.gl"),c=[-1,0,0,0,1,0,0,0,-1,0,0,1,0,-1,0,1,0,0],f=[3,4,5,3,5,1,3,1,0,3,0,4,4,0,2,4,2,5,2,0,1,5,2,1];r.default=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,t);var r=e.iterations,n=void 0===r?0:r,s=Math.PI,u=2*s,d=c.concat(),h=f.concat();d.push(),h.push();for(var p,m=(p={},function(e,t){var r=(e*=3)>(t*=3)?e:t,n="".concat(e<t?e:t,"|").concat(r);if(n in p)return p[n];var i=(d[e]+d[t])/2,a=(d[e+1]+d[t+1])/2,o=(d[e+2]+d[t+2])/2,s=Math.sqrt(i*i+a*a+o*o);return d.push(i/=s,a/=s,o/=s),p[n]=d.length/3-1}),b=0;b<n;b++){for(var g=[],v=0;v<h.length;v+=3){var y=m(h[v+0],h[v+1]),_=m(h[v+1],h[v+2]),x=m(h[v+2],h[v+0]);g.push(x,h[v+0],y,y,h[v+1],_,_,h[v+2],x,y,_,x)}h=g}for(var w=new Array(3*h.length),E=new Array(2*h.length),k=h.length-3;k>=0;k-=3){var P=h[k+0],M=h[k+1],A=h[k+2],C=3*P,O=3*M,T=3*A,S=2*P,R=2*M,L=2*A,D=d[C+0],j=d[C+1],F=d[C+2],I=Math.acos(F/Math.sqrt(D*D+j*j+F*F))/s,N=1-(Math.atan2(j,D)+s)/u,B=d[O+0],G=d[O+1],q=d[O+2],U=Math.acos(q/Math.sqrt(B*B+G*G+q*q))/s,z=1-(Math.atan2(G,B)+s)/u,W=d[T+0],V=d[T+1],H=d[T+2],X=Math.acos(H/Math.sqrt(W*W+V*V+H*H))/s,Y=1-(Math.atan2(V,W)+s)/u,Q=[D-B,j-G,F-q],K=new l.Vector3([W-B,V-G,H-q]).cross(Q).normalize(),Z=void 0;(0===N||0===z||0===Y)&&(0===N||N>.5)&&(0===z||z>.5)&&(0===Y||Y>.5)&&(d.push(d[C+0],d[C+1],d[C+2]),h.push(Z=d.length/3-1),E[2*Z+0]=1,E[2*Z+1]=I,w[3*Z+0]=K.x,w[3*Z+1]=K.y,w[3*Z+2]=K.z,d.push(d[O+0],d[O+1],d[O+2]),h.push(Z=d.length/3-1),E[2*Z+0]=1,E[2*Z+1]=U,w[3*Z+0]=K.x,w[3*Z+1]=K.y,w[3*Z+2]=K.z,d.push(d[T+0],d[T+1],d[T+2]),h.push(Z=d.length/3-1),E[2*Z+0]=1,E[2*Z+1]=X,w[3*Z+0]=K.x,w[3*Z+1]=K.y,w[3*Z+2]=K.z),w[C+0]=w[O+0]=w[T+0]=K.x,w[C+1]=w[O+1]=w[T+1]=K.y,w[C+2]=w[O+2]=w[T+2]=K.z,E[S+0]=N,E[S+1]=I,E[R+0]=z,E[R+1]=U,E[L+0]=Y,E[L+1]=X}return(0,a.default)(this,(0,o.default)(t).call(this,Object.assign({},e,{attributes:{positions:new Float32Array(d),normals:new Float32Array(w),texCoords:new Float32Array(E),indices:new Uint16Array(h)}})))}return(0,s.default)(t,u.default),t}()},{"./geometry":116,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20,"math.gl":258}],118:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Geometry",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"ConeGeometry",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"CubeGeometry",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"CylinderGeometry",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"IcoSphereGeometry",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"PlaneGeometry",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"SphereGeometry",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"TruncatedConeGeometry",{enumerable:!0,get:function(){return f.default}});var i=n(e("./geometry")),a=n(e("./cone-geometry")),o=n(e("./cube-geometry")),s=n(e("./cylinder-geometry")),u=n(e("./ico-sphere-geometry")),l=n(e("./plane-geometry")),c=n(e("./sphere-geometry")),f=n(e("./truncated-cone-geometry"))},{"./cone-geometry":113,"./cube-geometry":114,"./cylinder-geometry":115,"./geometry":116,"./ico-sphere-geometry":117,"./plane-geometry":119,"./sphere-geometry":120,"./truncated-cone-geometry":121,"@babel/runtime/helpers/interopRequireDefault":13}],119:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),s=n(e("@babel/runtime/helpers/inherits")),u=n(e("./geometry")),l=e("../utils");r.default=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,t);var r=e.type,n=void 0===r?"x,y":r,s=e.offset,u=void 0===s?0:s,c=e.flipCull,f=void 0!==c&&c,d=e.unpack,h=void 0!==d&&d,p=e.id,m=void 0===p?(0,l.uid)("plane-geometry"):p,b=n.split(","),g=e["".concat(b[0],"len")],v=e["".concat(b[1],"len")],y=e["n".concat(b[0])]||1,_=e["n".concat(b[1])]||1,x=(y+1)*(_+1),w=new Float32Array(3*x),E=new Float32Array(3*x),k=new Float32Array(2*x);f&&(g=-g);for(var P=0,M=0,A=0;A<=_;A++)for(var C=0;C<=y;C++){var O=C/y,T=A/_;switch(k[P+0]=f?1-O:O,k[P+1]=T,n){case"x,y":w[M+0]=g*O-.5*g,w[M+1]=v*T-.5*v,w[M+2]=u,E[M+0]=0,E[M+1]=0,E[M+2]=f?1:-1;break;case"x,z":w[M+0]=g*O-.5*g,w[M+1]=u,w[M+2]=v*T-.5*v,E[M+0]=0,E[M+1]=f?1:-1,E[M+2]=0;break;case"y,z":w[M+0]=u,w[M+1]=g*O-.5*g,w[M+2]=v*T-.5*v,E[M+0]=f?1:-1,E[M+1]=0,E[M+2]=0}P+=2,M+=3}for(var S=y+1,R=new Uint16Array(y*_*6),L=0;L<_;L++)for(var D=0;D<y;D++){var j=6*(L*y+D);R[j+0]=(L+0)*S+D,R[j+1]=(L+1)*S+D,R[j+2]=(L+0)*S+D+1,R[j+3]=(L+1)*S+D,R[j+4]=(L+1)*S+D+1,R[j+5]=(L+0)*S+D+1}if(h){for(var F=new Float32Array(3*R.length),I=new Float32Array(3*R.length),N=new Float32Array(2*R.length),B=0;B<R.length;++B){var G=R[B];F[3*B+0]=w[3*G+0],F[3*B+1]=w[3*G+1],F[3*B+2]=w[3*G+2],I[3*B+0]=E[3*G+0],I[3*B+1]=E[3*G+1],I[3*B+2]=E[3*G+2],N[2*B+0]=k[2*G+0],N[2*B+1]=k[2*G+1]}w=F,E=I,k=N,R=void 0}var q={positions:w,normals:E,texCoords:k};return R&&(q.indices=R),(0,a.default)(this,(0,o.default)(t).call(this,Object.assign({},e,{attributes:q,id:m})))}return(0,s.default)(t,u.default),t}()},{"../utils":190,"./geometry":116,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],120:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),s=n(e("@babel/runtime/helpers/inherits")),u=n(e("./geometry")),l=e("../utils");function c(e,t,r){var n=Math.PI-0,i=2*Math.PI-0,a=(e+1)*(t+1);if("number"==typeof r){var o=r;r=function(e,t,r,n,i){return o}}for(var s=new Float32Array(3*a),u=new Float32Array(3*a),l=new Float32Array(2*a),c=new Uint16Array(e*t*6),f=0;f<=e;f++)for(var d=0;d<=t;d++){var h=d/t,p=f/e,m=d+f*(t+1),b=2*m,g=3*m,v=i*h,y=n*p,_=Math.sin(v),x=Math.cos(v),w=Math.sin(y),E=x*w,k=Math.cos(y),P=_*w,M=r(E,k,P,h,p);s[g+0]=M*E,s[g+1]=M*k,s[g+2]=M*P,u[g+0]=E,u[g+1]=k,u[g+2]=P,l[b+0]=h,l[b+1]=p}for(var A=e+1,C=0;C<e;C++)for(var O=0;O<t;O++){var T=6*(C*t+O);c[T+0]=O*A+C,c[T+1]=O*A+C+1,c[T+2]=(O+1)*A+C,c[T+3]=(O+1)*A+C,c[T+4]=O*A+C+1,c[T+5]=(O+1)*A+C+1}return{positions:s,indices:c,normals:u,texCoords:l}}r.default=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,t);var r=e.nlat,n=void 0===r?10:r,s=e.nlong,u=void 0===s?10:s,f=e.radius,d=void 0===f?1:f,h=e.id,p=void 0===h?(0,l.uid)("sphere-geometry"):h;return(0,a.default)(this,(0,o.default)(t).call(this,Object.assign({},e,{id:p,attributes:c(n,u,d)})))}return(0,s.default)(t,u.default),t}()},{"../utils":190,"./geometry":116,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],121:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),s=n(e("@babel/runtime/helpers/inherits")),u=n(e("./geometry")),l={x:[2,0,1],y:[0,1,2],z:[1,2,0]};r.default=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,t);for(var r=e.bottomRadius,n=void 0===r?0:r,s=e.topRadius,u=void 0===s?0:s,c=e.height,f=void 0===c?1:c,d=e.nradial,h=void 0===d?10:d,p=e.nvertical,m=void 0===p?10:p,b=e.verticalAxis,g=void 0===b?"y":b,v=e.topCap,y=void 0!==v&&v,_=e.bottomCap,x=void 0!==_&&_,w=(y?2:0)+(x?2:0),E=(h+1)*(m+1+w),k=Math.atan2(n-u,f),P=Math.sin,M=Math.cos,A=Math.PI,C=M(k),O=P(k),T=y?-2:0,S=m+(x?2:0),R=h+1,L=new Float32Array(3*E),D=new Float32Array(3*E),j=new Float32Array(2*E),F=new Uint16Array(h*(m+w)*6),I=l[g],N=0,B=0,G=T;G<=S;G++){var q=G/m,U=f*q,z=void 0;G<0?(U=0,q=1,z=n):G>m?(U=f,q=1,z=u):z=n+G/m*(u-n),-2!==G&&G!==m+2||(z=0,q=0),U-=f/2;for(var W=0;W<R;W++){var V=P(W*A*2/h),H=M(W*A*2/h);L[N+I[0]]=V*z,L[N+I[1]]=U,L[N+I[2]]=H*z,D[N+I[0]]=G<0||G>m?0:V*C,D[N+I[1]]=G<0?-1:G>m?1:O,D[N+I[2]]=G<0||G>m?0:H*C,j[B+0]=W/h,j[B+1]=q,B+=2,N+=3}}for(var X=0;X<m+w;X++)for(var Y=0;Y<h;Y++){var Q=6*(X*h+Y);F[Q+0]=R*(X+0)+0+Y,F[Q+1]=R*(X+0)+1+Y,F[Q+2]=R*(X+1)+1+Y,F[Q+3]=R*(X+0)+0+Y,F[Q+4]=R*(X+1)+1+Y,F[Q+5]=R*(X+1)+0+Y}return(0,a.default)(this,(0,o.default)(t).call(this,Object.assign({},e,{attributes:{positions:L,normals:D,texCoords:j,indices:F}})))}return(0,s.default)(t,u.default),t}()},{"./geometry":116,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],122:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isWebGL",{enumerable:!0,get:function(){return i.isWebGL}}),Object.defineProperty(r,"isWebGL2",{enumerable:!0,get:function(){return i.isWebGL2}}),Object.defineProperty(r,"cloneTextureFrom",{enumerable:!0,get:function(){return a.cloneTextureFrom}}),Object.defineProperty(r,"getKeyValue",{enumerable:!0,get:function(){return o.getKeyValue}}),Object.defineProperty(r,"getKey",{enumerable:!0,get:function(){return o.getKey}}),Object.defineProperty(r,"glGet",{enumerable:!0,get:function(){return o.glGet}}),Object.defineProperty(r,"glKey",{enumerable:!0,get:function(){return o.glKey}}),Object.defineProperty(r,"glKeyType",{enumerable:!0,get:function(){return o.glKeyType}}),Object.defineProperty(r,"createGLContext",{enumerable:!0,get:function(){return s.createGLContext}}),Object.defineProperty(r,"destroyGLContext",{enumerable:!0,get:function(){return s.destroyGLContext}}),Object.defineProperty(r,"resizeGLContext",{enumerable:!0,get:function(){return s.resizeGLContext}}),Object.defineProperty(r,"pollGLContext",{enumerable:!0,get:function(){return s.pollGLContext}}),Object.defineProperty(r,"setContextDefaults",{enumerable:!0,get:function(){return s.setContextDefaults}}),Object.defineProperty(r,"trackContextState",{enumerable:!0,get:function(){return u.trackContextState}}),Object.defineProperty(r,"resetParameters",{enumerable:!0,get:function(){return l.resetParameters}}),Object.defineProperty(r,"getParameter",{enumerable:!0,get:function(){return l.getParameter}}),Object.defineProperty(r,"getParameters",{enumerable:!0,get:function(){return l.getParameters}}),Object.defineProperty(r,"setParameter",{enumerable:!0,get:function(){return l.setParameter}}),Object.defineProperty(r,"setParameters",{enumerable:!0,get:function(){return l.setParameters}}),Object.defineProperty(r,"withParameters",{enumerable:!0,get:function(){return l.withParameters}}),Object.defineProperty(r,"getModifiedParameters",{enumerable:!0,get:function(){return l.getModifiedParameters}}),Object.defineProperty(r,"getContextInfo",{enumerable:!0,get:function(){return c.getContextInfo}}),Object.defineProperty(r,"getGLContextInfo",{enumerable:!0,get:function(){return c.getGLContextInfo}}),Object.defineProperty(r,"getContextLimits",{enumerable:!0,get:function(){return c.getContextLimits}}),Object.defineProperty(r,"glGetDebugInfo",{enumerable:!0,get:function(){return c.glGetDebugInfo}}),Object.defineProperty(r,"FEATURES",{enumerable:!0,get:function(){return f.FEATURES}}),Object.defineProperty(r,"hasFeature",{enumerable:!0,get:function(){return f.hasFeature}}),Object.defineProperty(r,"hasFeatures",{enumerable:!0,get:function(){return f.hasFeatures}}),Object.defineProperty(r,"getFeatures",{enumerable:!0,get:function(){return f.getFeatures}}),Object.defineProperty(r,"canCompileGLGSExtension",{enumerable:!0,get:function(){return f.canCompileGLGSExtension}}),Object.defineProperty(r,"Buffer",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"Shader",{enumerable:!0,get:function(){return h.Shader}}),Object.defineProperty(r,"VertexShader",{enumerable:!0,get:function(){return h.VertexShader}}),Object.defineProperty(r,"FragmentShader",{enumerable:!0,get:function(){return h.FragmentShader}}),Object.defineProperty(r,"Program",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(r,"Framebuffer",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(r,"Renderbuffer",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(r,"Texture2D",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(r,"TextureCube",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(r,"clear",{enumerable:!0,get:function(){return y.clear}}),Object.defineProperty(r,"clearBuffer",{enumerable:!0,get:function(){return y.clearBuffer}}),Object.defineProperty(r,"_clearBuffer",{enumerable:!0,get:function(){return y.clearBuffer}}),Object.defineProperty(r,"FenceSync",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(r,"Query",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(r,"Sampler",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(r,"Texture3D",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(r,"Texture2DArray",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(r,"TransformFeedback",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(r,"VertexArrayObject",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(r,"VertexArray",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(r,"UniformBufferLayout",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(r,"_Accessor",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(r,"Object3D",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(r,"Group",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(r,"Model",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(r,"AnimationLoop",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(r,"pickModels",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(r,"encodePickingColor",{enumerable:!0,get:function(){return j.encodePickingColor}}),Object.defineProperty(r,"decodePickingColor",{enumerable:!0,get:function(){return j.decodePickingColor}}),Object.defineProperty(r,"getNullPickingColor",{enumerable:!0,get:function(){return j.getNullPickingColor}}),Object.defineProperty(r,"Transform",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(r,"_Attribute",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(r,"_ShaderCache",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(r,"_AnimationLoopProxy",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(r,"_MultiPassRenderer",{enumerable:!0,get:function(){return G.default}}),Object.defineProperty(r,"_RenderState",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(r,"_Pass",{enumerable:!0,get:function(){return U.default}}),Object.defineProperty(r,"_CompositePass",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(r,"_ClearPass",{enumerable:!0,get:function(){return W.default}}),Object.defineProperty(r,"_RenderPass",{enumerable:!0,get:function(){return V.default}}),Object.defineProperty(r,"_CopyPass",{enumerable:!0,get:function(){return H.default}}),Object.defineProperty(r,"_TexturePass",{enumerable:!0,get:function(){return X.default}}),Object.defineProperty(r,"_PickingPass",{enumerable:!0,get:function(){return Y.default}}),Object.defineProperty(r,"_ShaderModulePass",{enumerable:!0,get:function(){return Q.default}}),Object.defineProperty(r,"_Canvas",{enumerable:!0,get:function(){return K.default}}),Object.defineProperty(r,"Geometry",{enumerable:!0,get:function(){return Z.default}}),Object.defineProperty(r,"ConeGeometry",{enumerable:!0,get:function(){return J.default}}),Object.defineProperty(r,"CubeGeometry",{enumerable:!0,get:function(){return $.default}}),Object.defineProperty(r,"CylinderGeometry",{enumerable:!0,get:function(){return ee.default}}),Object.defineProperty(r,"IcoSphereGeometry",{enumerable:!0,get:function(){return te.default}}),Object.defineProperty(r,"PlaneGeometry",{enumerable:!0,get:function(){return re.default}}),Object.defineProperty(r,"SphereGeometry",{enumerable:!0,get:function(){return ne.default}}),Object.defineProperty(r,"TruncatedConeGeometry",{enumerable:!0,get:function(){return ie.default}}),Object.defineProperty(r,"Cone",{enumerable:!0,get:function(){return ae.default}}),Object.defineProperty(r,"Cube",{enumerable:!0,get:function(){return oe.default}}),Object.defineProperty(r,"Cylinder",{enumerable:!0,get:function(){return se.default}}),Object.defineProperty(r,"IcoSphere",{enumerable:!0,get:function(){return ue.default}}),Object.defineProperty(r,"Plane",{enumerable:!0,get:function(){return le.default}}),Object.defineProperty(r,"Sphere",{enumerable:!0,get:function(){return ce.default}}),Object.defineProperty(r,"TruncatedCone",{enumerable:!0,get:function(){return fe.default}}),Object.defineProperty(r,"ClipSpace",{enumerable:!0,get:function(){return de.default}}),Object.defineProperty(r,"ClipSpaceQuad",{enumerable:!0,get:function(){return de.default}}),Object.defineProperty(r,"setPathPrefix",{enumerable:!0,get:function(){return he.setPathPrefix}}),Object.defineProperty(r,"loadFile",{enumerable:!0,get:function(){return he.loadFile}}),Object.defineProperty(r,"loadImage",{enumerable:!0,get:function(){return he.loadImage}}),Object.defineProperty(r,"loadTexture",{enumerable:!0,get:function(){return he.loadTexture}}),Object.defineProperty(r,"loadFiles",{enumerable:!0,get:function(){return he.loadFiles}}),Object.defineProperty(r,"loadImages",{enumerable:!0,get:function(){return he.loadImages}}),Object.defineProperty(r,"loadTextures",{enumerable:!0,get:function(){return he.loadTextures}}),Object.defineProperty(r,"loadProgram",{enumerable:!0,get:function(){return he.loadProgram}}),Object.defineProperty(r,"loadModel",{enumerable:!0,get:function(){return he.loadModel}}),Object.defineProperty(r,"parseModel",{enumerable:!0,get:function(){return he.parseModel}}),Object.defineProperty(r,"setDefaultShaderModules",{enumerable:!0,get:function(){return pe.setDefaultShaderModules}}),Object.defineProperty(r,"registerShaderModules",{enumerable:!0,get:function(){return pe.registerShaderModules}}),Object.defineProperty(r,"assembleShaders",{enumerable:!0,get:function(){return me.assembleShaders}}),Object.defineProperty(r,"normalizeShaderModule",{enumerable:!0,get:function(){return be.normalizeShaderModule}}),Object.defineProperty(r,"fp32",{enumerable:!0,get:function(){return ge.default}}),Object.defineProperty(r,"fp64",{enumerable:!0,get:function(){return ve.default}}),Object.defineProperty(r,"project",{enumerable:!0,get:function(){return ye.default}}),Object.defineProperty(r,"lighting",{enumerable:!0,get:function(){return _e.default}}),Object.defineProperty(r,"dirlight",{enumerable:!0,get:function(){return xe.default}}),Object.defineProperty(r,"picking",{enumerable:!0,get:function(){return we.default}}),Object.defineProperty(r,"diffuse",{enumerable:!0,get:function(){return Ee.default}}),Object.defineProperty(r,"pbr",{enumerable:!0,get:function(){return ke.default}}),Object.defineProperty(r,"assert",{enumerable:!0,get:function(){return Pe.default}}),Object.defineProperty(r,"log",{enumerable:!0,get:function(){return Me.default}}),Object.defineProperty(r,"global",{enumerable:!0,get:function(){return Ae.global}}),Object.defineProperty(r,"window",{enumerable:!0,get:function(){return Ae.window}}),Object.defineProperty(r,"document",{enumerable:!0,get:function(){return Ae.document}}),Object.defineProperty(r,"self",{enumerable:!0,get:function(){return Ae.self}}),Object.defineProperty(r,"isBrowser",{enumerable:!0,get:function(){return Ce.default}}),Object.defineProperty(r,"isOldIE",{enumerable:!0,get:function(){return Oe.default}}),Object.defineProperty(r,"stubRemovedMethods",{enumerable:!0,get:function(){return Te.stubRemovedMethods}}),Object.defineProperty(r,"makeDebugContext",{enumerable:!0,get:function(){return Se.makeDebugContext}});var i=e("./webgl-utils/webgl-checks"),a=e("./webgl-utils/texture-utils"),o=e("./webgl-utils/constants-to-keys"),s=e("./webgl-context/context"),u=e("./webgl-context"),l=e("./webgl-context/context-state"),c=e("./webgl-context/context-limits"),f=e("./webgl-context/context-features"),d=n(e("./webgl/buffer")),h=e("./webgl/shader"),p=n(e("./webgl/program")),m=n(e("./webgl/framebuffer")),b=n(e("./webgl/renderbuffer")),g=n(e("./webgl/texture-2d")),v=n(e("./webgl/texture-cube")),y=e("./webgl/clear"),_=n(e("./webgl/fence-sync")),x=n(e("./webgl/query")),w=n(e("./webgl/sampler")),E=n(e("./webgl/texture-3d")),k=n(e("./webgl/texture-2d-array")),P=n(e("./webgl/transform-feedback")),M=n(e("./webgl/vertex-array-object")),A=n(e("./webgl/vertex-array")),C=n(e("./webgl/uniform-buffer-layout")),O=n(e("./webgl/accessor")),T=n(e("./core/object-3d")),S=n(e("./core/group")),R=n(e("./core/model")),L=n(e("./core/animation-loop")),D=n(e("./core/pick-models")),j=e("./core/picking-colors"),F=n(e("./core/transform")),I=n(e("./core/attribute")),N=n(e("./core/shader-cache")),B=n(e("./core/animation-loop-proxy")),G=n(e("./multipass/multi-pass-renderer")),q=n(e("./multipass/render-state")),U=n(e("./multipass/pass")),z=n(e("./multipass/composite-pass")),W=n(e("./multipass/clear-pass")),V=n(e("./multipass/render-pass")),H=n(e("./multipass/copy-pass")),X=n(e("./multipass/texture-pass")),Y=n(e("./multipass/picking-pass")),Q=n(e("./multipass/shader-module-pass")),K=n(e("./multipass/canvas")),Z=n(e("./geometry/geometry")),J=n(e("./geometry/cone-geometry")),$=n(e("./geometry/cube-geometry")),ee=n(e("./geometry/cylinder-geometry")),te=n(e("./geometry/ico-sphere-geometry")),re=n(e("./geometry/plane-geometry")),ne=n(e("./geometry/sphere-geometry")),ie=n(e("./geometry/truncated-cone-geometry")),ae=n(e("./models/cone")),oe=n(e("./models/cube")),se=n(e("./models/cylinder")),ue=n(e("./models/ico-sphere")),le=n(e("./models/plane")),ce=n(e("./models/sphere")),fe=n(e("./models/truncated-cone")),de=n(e("./models/clip-space")),he=e("./io"),pe=e("./shadertools/src/lib/resolve-modules"),me=e("./shadertools/src/lib/assemble-shaders"),be=e("./shadertools/src/lib/filters/normalize-module"),ge=n(e("./shadertools/src/modules/fp32/fp32")),ve=n(e("./shadertools/src/modules/fp64/fp64")),ye=n(e("./shadertools/src/modules/project/project")),_e=n(e("./shadertools/src/modules/lighting/lighting")),xe=n(e("./shadertools/src/modules/dirlight/dirlight")),we=n(e("./shadertools/src/modules/picking/picking")),Ee=n(e("./shadertools/src/modules/diffuse/diffuse")),ke=n(e("./shadertools/src/modules/pbr/pbr")),Pe=n(e("./utils/assert")),Me=n(e("./utils/log")),Ae=e("./utils/globals"),Ce=n(e("./utils/is-browser")),Oe=n(e("./utils/is-old-ie")),Te=e("./utils/stub-methods"),Se=e("./webgl-context/debug-context");e("./init")},{"./core/animation-loop":100,"./core/animation-loop-proxy":99,"./core/attribute":101,"./core/group":102,"./core/model":104,"./core/object-3d":105,"./core/pick-models":106,"./core/picking-colors":107,"./core/shader-cache":108,"./core/transform":110,"./geometry/cone-geometry":113,"./geometry/cube-geometry":114,"./geometry/cylinder-geometry":115,"./geometry/geometry":116,"./geometry/ico-sphere-geometry":117,"./geometry/plane-geometry":119,"./geometry/sphere-geometry":120,"./geometry/truncated-cone-geometry":121,"./init":123,"./io":126,"./models/clip-space":128,"./models/cone":129,"./models/cube":130,"./models/cylinder":131,"./models/ico-sphere":132,"./models/plane":134,"./models/sphere":135,"./models/truncated-cone":136,"./multipass/canvas":137,"./multipass/clear-pass":138,"./multipass/composite-pass":139,"./multipass/copy-pass":140,"./multipass/multi-pass-renderer":141,"./multipass/pass":142,"./multipass/picking-pass":143,"./multipass/render-pass":144,"./multipass/render-state":145,"./multipass/shader-module-pass":146,"./multipass/texture-pass":147,"./shadertools/src/lib/assemble-shaders":149,"./shadertools/src/lib/filters/normalize-module":151,"./shadertools/src/lib/resolve-modules":155,"./shadertools/src/modules/diffuse/diffuse":159,"./shadertools/src/modules/dirlight/dirlight":160,"./shadertools/src/modules/fp32/fp32":161,"./shadertools/src/modules/fp64/fp64":165,"./shadertools/src/modules/lighting/lighting":169,"./shadertools/src/modules/pbr/pbr":173,"./shadertools/src/modules/picking/picking":174,"./shadertools/src/modules/project/project":175,"./utils/assert":187,"./utils/globals":189,"./utils/is-browser":191,"./utils/is-old-ie":193,"./utils/log":194,"./utils/stub-methods":196,"./webgl-context":206,"./webgl-context/context":201,"./webgl-context/context-features":198,"./webgl-context/context-limits":199,"./webgl-context/context-state":200,"./webgl-context/debug-context":205,"./webgl-utils/constants-to-keys":214,"./webgl-utils/texture-utils":222,"./webgl-utils/webgl-checks":224,"./webgl/accessor":226,"./webgl/buffer":227,"./webgl/clear":228,"./webgl/fence-sync":229,"./webgl/framebuffer":230,"./webgl/program":233,"./webgl/query":234,"./webgl/renderbuffer":235,"./webgl/sampler":237,"./webgl/shader":238,"./webgl/texture-2d":240,"./webgl/texture-2d-array":239,"./webgl/texture-3d":241,"./webgl/texture-cube":242,"./webgl/transform-feedback":244,"./webgl/uniform-buffer-layout":245,"./webgl/vertex-array":248,"./webgl/vertex-array-object":247,"@babel/runtime/helpers/interopRequireDefault":13}],123:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"global",{enumerable:!0,get:function(){return a.global}}),r.default=void 0;var i=n(e("./utils/is-browser")),a=e("./utils/globals"),o=n(e("./utils/log"));e("./webgl1");if(a.global.luma&&"6.4.3"!==a.global.luma.VERSION)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(a.global.luma.VERSION," vs ").concat("6.4.3"));a.global.luma||(i.default&&o.default.log(0,"luma.gl ".concat("6.4.3"," - ").concat("set luma.log.priority=1 (or higher) to trace rendering"))(),a.global.luma=a.global.luma||{VERSION:"6.4.3",version:"6.4.3",log:o.default,stats:{},globals:{modules:{},nodeIO:{}}}),r.default=a.global.luma},{"./utils/globals":189,"./utils/is-browser":191,"./utils/log":194,"./webgl1":249,"@babel/runtime/helpers/interopRequireDefault":13}],124:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setPathPrefix=function(e){i=e},r.loadFile=function(e,t){"string"==typeof e||t||(e=(t=e).url);return t.url=i?i+e:e,(0,n.requestFile)(t)},r.loadImage=function(e,t){if(e=i?i+e:e,"undefined"==typeof Image)return e=new URL(e,location.pathname).href,(0,n.requestFile)({url:e,responseType:"arraybuffer"}).then(function(e){var t=new Blob([new Uint8Array(e)]);return createImageBitmap(t)});return new Promise(function(r,n){try{var i=new Image;i.onload=function(){return r(i)},i.onerror=function(){return n(new Error("Could not load image ".concat(e,".")))},i.crossOrigin=t&&t.crossOrigin||"anonymous",i.src=e}catch(e){n(e)}})};var n=e("./browser-request-file"),i=""},{"./browser-request-file":125}],125:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.requestFile=function(e){return new u(e).sendAsync()};var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass"));function o(){}var s=4,u=function(){function e(t){var r=t.url,n=t.path,a=void 0===n?null:n,s=t.method,u=void 0===s?"GET":s,l=t.asynchronous,c=void 0===l||l,f=t.noCache,d=void 0!==f&&f,h=t.sendAsBinary,p=void 0!==h&&h,m=t.responseType,b=void 0!==m&&m,g=t.onProgress,v=void 0===g?o:g,y=t.onError,_=void 0===y?o:y,x=t.onAbort,w=void 0===x?o:x,E=t.onComplete,k=void 0===E?o:E;(0,i.default)(this,e),this.url=a?a.join(a,r):r,this.method=u,this.async=c,this.noCache=d,this.sendAsBinary=p,this.responseType=b,this.req=new XMLHttpRequest,this.req.onload=function(e){return k(e)},this.req.onerror=function(e){return _(e)},this.req.onabort=function(e){return w(e)},this.req.onprogress=function(e){v(e,e.lengthComputable?Math.round(e.loaded/e.total*100):-1)}}return(0,a.default)(e,[{key:"setRequestHeader",value:function(e,t){return this.req.setRequestHeader(e,t),this}},{key:"sendAsync",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.body||null;return new Promise(function(r,n){try{var i=e.req,a=e.method,o=e.sendAsBinary,u=e.responseType,l=e.noCache?e.url+(e.url.indexOf("?")>=0?"&":"?")+Date.now():e.url;i.open(a,l,e.async),u&&(i.responseType=u),e.async&&(i.onreadystatechange=function(e){i.readyState===s&&(200===i.status?r(i.responseType?i.response:i.responseText):n(new Error("".concat(i.status,": ").concat(l))))}),o?i.sendAsBinary(t):i.send(t),e.async||(200===i.status?r(i.responseType?i.response:i.responseText):n(new Error("".concat(i.status,": ").concat(l))))}catch(e){n(e)}})}}]),e}()},{"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/interopRequireDefault":13}],126:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"setPathPrefix",{enumerable:!0,get:function(){return n.setPathPrefix}}),Object.defineProperty(r,"loadFile",{enumerable:!0,get:function(){return n.loadFile}}),Object.defineProperty(r,"loadImage",{enumerable:!0,get:function(){return n.loadImage}}),Object.defineProperty(r,"loadTexture",{enumerable:!0,get:function(){return i.loadTexture}}),Object.defineProperty(r,"loadFiles",{enumerable:!0,get:function(){return i.loadFiles}}),Object.defineProperty(r,"loadImages",{enumerable:!0,get:function(){return i.loadImages}}),Object.defineProperty(r,"loadTextures",{enumerable:!0,get:function(){return i.loadTextures}}),Object.defineProperty(r,"loadProgram",{enumerable:!0,get:function(){return i.loadProgram}}),Object.defineProperty(r,"loadModel",{enumerable:!0,get:function(){return i.loadModel}}),Object.defineProperty(r,"parseModel",{enumerable:!0,get:function(){return i.parseModel}});var n=e("./browser-load"),i=e("./load-files")},{"./browser-load":124,"./load-files":127}],127:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.loadTexture=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,a.default)("string"==typeof t,"loadTexture: url must be string"),(0,o.loadImage)(t,r).then(function(n){return new s.Texture2D(e,Object.assign({id:t},r,{data:n}))})},r.loadFiles=f,r.loadImages=d,r.loadTextures=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.urls,n=t.onProgress,i=void 0===n?c:n;return(0,a.default)(r.every(function(e){return"string"==typeof e}),"loadTextures: {urls} must be array of strings"),d(Object.assign({urls:r,onProgress:i},t)).then(function(n){return n.map(function(n,i){return new s.Texture2D(e,Object.assign({id:r[i]},t,{data:n}))})})},r.loadProgram=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.onProgress;return f(Object.assign({urls:[t.vs,t.fs],onProgress:void 0===r?c:r},t)).then(function(r){var n=(0,i.default)(r,2),a=n[0],o=n[1];return new s.Program(e,Object.assign({vs:a,fs:o},t))})},r.loadModel=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.onProgress;return f(Object.assign({urls:[t.url],onProgress:void 0===r?c:r},t)).then(function(r){var n=(0,i.default)(r,1),a=n[0];return h(e,Object.assign({file:a},t))})},r.parseModel=h;var i=n(e("@babel/runtime/helpers/slicedToArray")),a=n(e("../utils/assert")),o=e("./browser-load"),s=e("../webgl"),u=e("../core"),l=e("../geometry");function c(){}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.urls,r=e.onProgress,n=void 0===r?c:r;(0,a.default)(t.every(function(e){return"string"==typeof e}),"loadImages: {urls} must be array of strings");var i=0;return Promise.all(t.map(function(r){var a=(0,o.loadFile)(Object.assign({url:r},e));return a.then(function(e){return n({progress:++i/t.length,count:i,total:t.length,url:r})}),a}))}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.urls,r=e.onProgress,n=void 0===r?c:r;(0,a.default)(t.every(function(e){return"string"==typeof e}),"loadImages: {urls} must be array of strings");var i=0;return Promise.all(t.map(function(r){var a=(0,o.loadImage)(r,e);return a.then(function(e){return n({progress:++i/t.length,count:i,total:t.length,url:r})}),a}))}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.file,n=t.program,i=void 0===n?new s.Program(e):n,a="string"==typeof r?function(e){try{return JSON.parse(e)}catch(e){throw new Error("Failed to parse JSON: ".concat(e))}}(r):r,o={},c={};for(var f in a){var d=a[f];Array.isArray(d)?o[f]="indices"===f?new Uint16Array(d):new Float32Array(d):c[f]=d}return new u.Model(e,Object.assign({program:i,geometry:new l.Geometry({attributes:o})},c,t))}},{"../core":103,"../geometry":118,"../utils/assert":187,"../webgl":231,"./browser-load":124,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/slicedToArray":22}],128:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),s=n(e("@babel/runtime/helpers/inherits")),u=e("../core"),l=e("../geometry"),c="attribute vec2 aClipSpacePosition;\nattribute vec2 aTexCoord;\nattribute vec2 aCoordinate;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main(void) {\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n  position = aClipSpacePosition;\n  coordinate = aCoordinate;\n  uv = aTexCoord;\n}\n",f=[-1,-1,1,-1,-1,1,1,1];r.default=function(e){function t(e,r){var n;(0,i.default)(this,t);var s=f.map(function(e){return-1===e?0:e});return(n=(0,a.default)(this,(0,o.default)(t).call(this,e,Object.assign({},r,{vs:c,geometry:new l.Geometry({drawMode:5,vertexCount:4,attributes:{aClipSpacePosition:{size:2,value:new Float32Array(f)},aTexCoord:{size:2,value:new Float32Array(s)},aCoordinate:{size:2,value:new Float32Array(s)}}})})))).setVertexCount(4),n}return(0,s.default)(t,u.Model),t}()},{"../core":103,"../geometry":118,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],129:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),s=n(e("@babel/runtime/helpers/inherits")),u=e("../geometry"),l=e("../core");r.default=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.default)(this,t),(0,a.default)(this,(0,o.default)(t).call(this,e,Object.assign({},r,{geometry:new u.ConeGeometry(r)})))}return(0,s.default)(t,l.Model),t}()},{"../core":103,"../geometry":118,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],130:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),s=n(e("@babel/runtime/helpers/inherits")),u=e("../geometry"),l=e("../core"),c=e("../utils");r.default=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.default)(this,t);var n=r.id,s=void 0===n?(0,c.uid)("cube"):n;return(0,a.default)(this,(0,o.default)(t).call(this,e,Object.assign({},r,{id:s,geometry:new u.CubeGeometry(r)})))}return(0,s.default)(t,l.Model),t}()},{"../core":103,"../geometry":118,"../utils":190,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],131:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),s=n(e("@babel/runtime/helpers/inherits")),u=e("../geometry"),l=n(e("../core/model"));r.default=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.default)(this,t),(0,a.default)(this,(0,o.default)(t).call(this,e,Object.assign({},r,{geometry:new u.CylinderGeometry(r)})))}return(0,s.default)(t,l.default),t}()},{"../core/model":104,"../geometry":118,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],132:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),s=n(e("@babel/runtime/helpers/inherits")),u=e("../core"),l=e("../geometry");r.default=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.default)(this,t),(0,a.default)(this,(0,o.default)(t).call(this,e,Object.assign({},r,{geometry:new l.IcoSphereGeometry(r)})))}return(0,s.default)(t,u.Model),t}()},{"../core":103,"../geometry":118,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],133:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Cone",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"Cube",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"Cylinder",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"IcoSphere",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"Plane",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"Sphere",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"TruncatedCone",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"ClipSpace",{enumerable:!0,get:function(){return f.default}});var i=n(e("./cone")),a=n(e("./cube")),o=n(e("./cylinder")),s=n(e("./ico-sphere")),u=n(e("./plane")),l=n(e("./sphere")),c=n(e("./truncated-cone")),f=n(e("./clip-space"))},{"./clip-space":128,"./cone":129,"./cube":130,"./cylinder":131,"./ico-sphere":132,"./plane":134,"./sphere":135,"./truncated-cone":136,"@babel/runtime/helpers/interopRequireDefault":13}],134:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),s=n(e("@babel/runtime/helpers/inherits")),u=e("../geometry"),l=n(e("../core/model")),c=e("../utils");r.default=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.default)(this,t);var n=r.id,s=void 0===n?(0,c.uid)("plane"):n;return(0,a.default)(this,(0,o.default)(t).call(this,e,Object.assign({},r,{id:s,geometry:new u.PlaneGeometry(r)})))}return(0,s.default)(t,l.default),t}()},{"../core/model":104,"../geometry":118,"../utils":190,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],135:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),s=n(e("@babel/runtime/helpers/inherits")),u=e("../core"),l=e("../geometry"),c=e("../utils");r.default=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.default)(this,t);var n=r.id,s=void 0===n?(0,c.uid)("sphere"):n;return(0,a.default)(this,(0,o.default)(t).call(this,e,Object.assign({},r,{id:s,geometry:new l.SphereGeometry(r)})))}return(0,s.default)(t,u.Model),t}()},{"../core":103,"../geometry":118,"../utils":190,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],136:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),s=n(e("@babel/runtime/helpers/inherits")),u=e("../geometry"),l=e("../core");r.default=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.default)(this,t),(0,a.default)(this,(0,o.default)(t).call(this,e,Object.assign({},r,{geometry:new u.TruncatedConeGeometry(r)})))}return(0,s.default)(t,l.Model),t}()},{"../core":103,"../geometry":118,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],137:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass"));e("luma.gl/debug");var o=e("luma.gl"),s=n(e("./shader-module-pass"));r.default=function(){function e(){if((0,i.default)(this,e),this.canvas=document.createElement("canvas"),this.width=this.canvas.clientWidth,this.height=this.canvas.clientHeight,this.gl=(0,o.createGLContext)({canvas:this.canvas,opts:{premultipliedAlpha:!1}}),!this.gl)throw new Error("This browser does not support WebGL");this.texture=null,this.spareTexture=null,this.flippedModel=null}return(0,a.default)(e,[{key:"installFiltersAsMethods",value:function(e){var t=this,r=function(r){"canvas"!==r&&(t[r]=function(n){return t.filter(e[r],n).bind(t)})};for(var n in e)r(n)}},{key:"setTexture",value:function(e){return this.texture=new o.Texture2D(this.gl,{pixels:e}),this.resize(this.gl,this.texture.width,this.texture.height),this}},{key:"resize",value:function(e,t,r){if(e.canvas.width!==t||e.canvas.height!==r){e.canvas.width=t,e.canvas.height=r;var n=Math.floor(t/1),i=Math.floor(r/1);e.canvas.style.width="".concat(n,"px"),e.canvas.style.height="".concat(i,"px"),e.viewport(0,0,t,r),this.width=n,this.height=i}}},{key:"replace",value:function(e){return e.parentNode.insertBefore(this.canvas,e),e.parentNode.removeChild(e),this}},{key:"draw",value:function(){return this.multiPassRenderer=new o._MultiPassRenderer(this.gl,[new o._ClearPass(this.gl),new o._TexturePass(this.gl,{texture:this.texture}),new o._CopyPass(this.gl,{screen:!0})]),this.multiPassRenderer.render(),this}},{key:"update",value:function(){return this.multiPassRenderer.render({}),this}},{key:"filter",value:function(e,t){return this.multiPassRenderer=new o._MultiPassRenderer(this.gl,[new o._ClearPass(this.gl),new o._TexturePass(this.gl,{texture:this.texture}),new s.default(this.gl,e,t),new o._CopyPass(this.gl,{screen:!0})]),this.multiPassRenderer.render(),this}},{key:"getPixelArray",value:function(){var e=this.gl,t=this.texture.width,r=this.texture.height,n=new Uint8Array(t*r*4);return this.texture.drawTo(function(){return e.readPixels(0,0,t,r,6408,5121,n)}),n}},{key:"_initialize",value:function(e,t){var r=this.gl,n=5121;if(this.gl.getExtension("OES_texture_float")&&r.getExtension("OES_texture_float_linear")){var i=new o.Texture2D(this.gl,{width:100,height:100,format:6408,type:5126});try{i.drawTo(function(){n=5126})}catch(e){}i.destroy()}this.spareTexture&&this.spareTexture.destroy(),this.width=e,this.height=t,this.texture=new o.Texture2D(this.gl,{width:e,height:t,format:6408,type:n}),this.spareTexture=new o.Texture2D(this.gl,{width:e,height:t,format:6408,type:n}),this.extraTexture=this.extraTexture||new o.Texture2D(this.gl,{width:0,height:0,format:6408,type:n}),this.flippedModel=this.flippedModel||new o.Model(this.gl,{vs:"attribute vec2 vertex;\nattribute vec2 _texCoord;\nvarying vec2 texCoord;\nvoid main() {\n  texCoord = _texCoord;\n  gl_Position = vec4(vertex * 2.0 - 1.0, 0.0, 1.0);\n}\n",fs:"uniform sampler2D texture;\nvarying vec2 texCoord;\nvoid main() {\n  gl_FragColor = texture2D(texture, vec2(texCoord.x, 1.0 - texCoord.y));\n}\n"}),this.isInitialized=!0}}]),e}()},{"./shader-module-pass":146,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/interopRequireDefault":13,"luma.gl":122,"luma.gl/debug":98}],138:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/inherits")),l=n(e("./pass"));r.default=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.default)(this,t),(0,o.default)(this,(0,s.default)(t).call(this,e,Object.assign({id:"clear-pass"},r)))}return(0,u.default)(t,l.default),(0,a.default)(t,[{key:"_renderPass",value:function(e){var t=this.props.clearBits;e.gl.clear(void 0===t?16640:t)}}]),t}()},{"./pass":142,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],139:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/inherits")),l=n(e("./pass"));r.default=function(e){function t(e,r){return(0,i.default)(this,t),r=Array.isArray(r)?{passes:r}:r,(0,o.default)(this,(0,s.default)(t).call(this,e,Object.assign({id:"composite-pass"},r)))}return(0,u.default)(t,l.default),(0,a.default)(t,[{key:"render",value:function(){var e=this.props.passes,t=void 0===e?[]:e,r=!0,n=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value;s.render.apply(s,arguments)}}catch(e){n=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}}}]),t}()},{"./pass":142,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],140:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/inherits")),l=e("../models"),c=n(e("./pass")),f="uniform sampler2D uDiffuseSampler;\nuniform float uOpacity;\n\nvarying vec2 uv;\n\nvoid main() {\n  vec4 texel = texture2D(uDiffuseSampler, uv);\n  gl_FragColor = uOpacity * texel;\n}\n";r.default=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.default)(this,t),(r=(0,o.default)(this,(0,s.default)(t).call(this,e,Object.assign({id:"copy-pass",swap:!0},n)))).clipspace=new l.ClipSpace(e,{id:"copy-pass",fs:f}),r}return(0,u.default)(t,c.default),(0,a.default)(t,[{key:"_renderPass",value:function(e){var t=this.props.opacity;this.clipspace.draw({uniforms:{uDiffuseSampler:e.inputBuffer,uOpacity:void 0===t?1:t},parameters:{depthWrite:!1,depthTest:!1}})}}]),t}()},{"../models":133,"./pass":142,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],141:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/inherits")),l=n(e("./composite-pass")),c=n(e("./render-state"));r.default=function(e){function t(e,r){var n;return(0,i.default)(this,t),r=Array.isArray(r)?{passes:r}:r,(n=(0,o.default)(this,(0,s.default)(t).call(this,e,Object.assign({id:"multi-pass"},r)))).renderState=new c.default(e,r),n}return(0,u.default)(t,l.default),(0,a.default)(t,[{key:"render",value:function(e){this.renderState.reset();var t=this.props.passes,r=void 0===t?[]:t,n=!0,i=!1,a=void 0;try{for(var o,s=r[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){o.value.render(this.renderState,e)}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return this}}]),t}()},{"./composite-pass":139,"./render-state":145,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],142:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=e("../webgl"),s=e("../webgl-context");r.default=function(){function e(t,r){(0,i.default)(this,e);var n=r.id;this.id=void 0===n?"pass":n,this.gl=t,this.props={enabled:!0,screen:!1,swap:!1},Object.assign(this.props,r)}return(0,a.default)(e,[{key:"setProps",value:function(e){Object.assign(this.props,e)}},{key:"render",value:function(e,t){var r=this;if(this.props.enabled){var n=this.gl,i={gl:n,outputBuffer:e.writeBuffer,inputBuffer:e.readBuffer,animationProps:t,swapBuffers:function(){return e._swapFramebuffers()}};this.props.screen?(i.inputBuffer=i.outputBuffer,i.outputBuffer=o.Framebuffer.getDefaultFramebuffer(n)):this.props.swap&&(i.inputBuffer=e.writeBuffer,i.outputBuffer=e.readBuffer),(0,s.withParameters)(n,{framebuffer:i.outputBuffer},function(){return r._renderPass(i)}),this.props.debug&&i.outputBuffer.log(0,this.id),this.props.swap&&e._swapFramebuffers()}}},{key:"_renderPass",value:function(e){}}]),e}()},{"../webgl":231,"../webgl-context":206,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/interopRequireDefault":13}],143:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/inherits")),l=n(e("./pass")),c=n(e("../core/pick-models"));r.default=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.default)(this,t),(0,o.default)(this,(0,s.default)(t).call(this,e,Object.assign({id:"picking-pass"},r)))}return(0,u.default)(t,l.default),(0,a.default)(t,[{key:"_renderPass",value:function(e){var t=e.animationProps,r=this.props,n=t?t._mousePosition:r.mousePosition;if(n){var i=(0,c.default)(e.gl,{models:this.props.models,position:n,useDevicePixels:t?t.useDevicePixels:r.useDevicePixels,framebuffer:e.inputBuffer}),a=!0,o=!1,s=void 0;try{for(var u,l=this.props.models[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var f=u.value;if(i&&i.model===f)f.updateModuleSettings({pickingSelectedColor:i&&i.color||null})}}catch(e){o=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}}else{var d=!0,h=!1,p=void 0;try{for(var m,b=this.props.models[Symbol.iterator]();!(d=(m=b.next()).done);d=!0){m.value.updateModuleSettings({pickingSelectedColor:null})}}catch(e){h=!0,p=e}finally{try{d||null==b.return||b.return()}finally{if(h)throw p}}}}}]),t}()},{"../core/pick-models":106,"./pass":142,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],144:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/inherits")),l=n(e("./pass"));r.default=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.default)(this,t),(0,o.default)(this,(0,s.default)(t).call(this,e,Object.assign({id:"render-pass"},r)))}return(0,u.default)(t,l.default),(0,a.default)(t,[{key:"_renderPass",value:function(e){var t=e.animationProps,r=this.props,n=r.models,i=void 0===n?[]:n,a=r.drawParams,o=!0,s=!1,u=void 0;try{for(var l,c=i[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){l.value.draw(Object.assign({},a,{animationProps:t}))}}catch(e){s=!0,u=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw u}}}}]),t}()},{"./pass":142,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],145:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=e("../webgl");r.default=function(){function e(t){(0,i.default)(this,e),this.gl=t,this.framebuffer1=new o.Framebuffer(t,{id:"multi-pass-1",stencil:!0}),this.framebuffer2=new o.Framebuffer(t,{id:"multi-pass-2",stencil:!0}),this.reset()}return(0,a.default)(e,[{key:"reset",value:function(){this.framebuffer1.resize(),this.framebuffer2.resize(),this.writeBuffer=this.framebuffer1,this.readBuffer=this.framebuffer2,this.maskActive=!1}},{key:"_swapFramebuffers",value:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}}]),e}()},{"../webgl":231,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/interopRequireDefault":13}],146:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/inherits")),l=n(e("./pass")),c=n(e("./composite-pass")),f=n(e("../models/clip-space")),d=e("../shadertools/src/lib/filters/normalize-module"),h=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.default)(this,t),(0,o.default)(this,(0,s.default)(t).call(this,e,Object.assign({swap:!0},r)))}return(0,u.default)(t,l.default),(0,a.default)(t,[{key:"_renderPass",value:function(e){var t=e.inputBuffer;this.props.model.setUniforms(this.props),this.props.model.draw({uniforms:{texture:t,texSize:[t.width,t.height]},parameters:{depthWrite:!1,depthTest:!1}})}}]),t}();function p(e,t,r,n,i){var a=new f.default(e,{id:n,fs:r,modules:[t]}),o=Object.assign(t.getUniforms(),t.getUniforms(i));return a.setUniforms(o),a}r.default=function(e){function t(e,r){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,i.default)(this,t);var u="".concat(r.name,"-pass");(0,d.normalizeShaderModule)(r);var l=function(e,t,r,n){if(t.filter||t.sampler){var i=g(t),a=new h(e,{id:r,model:p(e,t,i,r,n),uniforms:null});return[a]}var o=t.passes||[];return o.map(function(i){var a=g(t,i),s="".concat(r,"-").concat(o.length+1);return new h(e,Object.assign({id:s,model:p(e,t,a,s,n),uniforms:i.uniforms},n))})}(e,r,u,a);return(n=(0,o.default)(this,(0,s.default)(t).call(this,e,Object.assign({id:u,passes:l},a)))).module=r,n}return(0,u.default)(t,c.default),(0,a.default)(t,[{key:"_renderPass",value:function(e){var t=e.inputBuffer,r=e.swapBuffers,n=!0,i=!0,a=!1,o=void 0;try{for(var s,u=this.module.passes[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;n||r(),n=!1,l.uniforms&&l.model.setUniforms(l.uniforms),l.model.draw({uniforms:{texture:t,texSize:[t.width,t.height]},parameters:{depthWrite:!1,depthTest:!1}})}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}}]),t}();var m=function(e){return"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = texture2D(texture, texCoord);\n  gl_FragColor = ".concat(e,"(gl_FragColor, texSize, texCoord);\n}\n")},b=function(e){return"uniform sampler2D texture;\nuniform vec2 texSize;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main() {\n  vec2 texCoord = coordinate;\n\n  gl_FragColor = ".concat(e,"(texture, texSize, texCoord);\n}\n")};function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(t.filter){var r="string"==typeof t.filter?t.filter:"".concat(e.name,"_filterColor");return m(r)}if(t.sampler){var n="string"==typeof t.sampler?t.sampler:"".concat(e.name,"_sampleColor");return b(n)}return null}},{"../models/clip-space":128,"../shadertools/src/lib/filters/normalize-module":151,"./composite-pass":139,"./pass":142,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],147:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/inherits")),l=e("../models"),c=n(e("./pass")),f="uniform sampler2D uDiffuseSampler;\nuniform float uOpacity;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 texel = texture2D(uDiffuseSampler, uv);\n  gl_FragColor = uOpacity * texel;\n}\n";r.default=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.default)(this,t),r=(0,o.default)(this,(0,s.default)(t).call(this,e,Object.assign({id:"texture-pass"},n)));var a=n.opacity;return r.clipspace=new l.ClipSpace(e,{id:"texture-pass",fs:f,uniforms:{uDiffuseSampler:n.texture,uOpacity:void 0===a?1:a}}),r}return(0,u.default)(t,c.default),(0,a.default)(t,[{key:"_renderPass",value:function(){this.clipspace.draw({parameters:{depthWrite:!1,depthTest:!1}})}}]),t}()},{"../models":133,"./pass":142,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],148:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"assembleShaders",{enumerable:!0,get:function(){return i.assembleShaders}}),Object.defineProperty(r,"registerShaderModules",{enumerable:!0,get:function(){return a.registerShaderModules}}),Object.defineProperty(r,"setDefaultShaderModules",{enumerable:!0,get:function(){return a.setDefaultShaderModules}}),Object.defineProperty(r,"combineInjects",{enumerable:!0,get:function(){return o.combineInjects}}),Object.defineProperty(r,"fp32",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"fp64",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"project",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"lighting",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"dirlight",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"picking",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"diffuse",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"getQualifierDetails",{enumerable:!0,get:function(){return p.getQualifierDetails}}),Object.defineProperty(r,"getPassthroughFS",{enumerable:!0,get:function(){return p.getPassthroughFS}}),Object.defineProperty(r,"typeToChannelSuffix",{enumerable:!0,get:function(){return p.typeToChannelSuffix}}),Object.defineProperty(r,"typeToChannelCount",{enumerable:!0,get:function(){return p.typeToChannelCount}}),Object.defineProperty(r,"convertToVec4",{enumerable:!0,get:function(){return p.convertToVec4}}),Object.defineProperty(r,"_transform",{enumerable:!0,get:function(){return m.default}});var i=e("./lib/assemble-shaders"),a=e("./lib/resolve-modules"),o=e("./lib/inject-shader"),s=n(e("./modules/fp32/fp32")),u=n(e("./modules/fp64/fp64")),l=n(e("./modules/project/project")),c=n(e("./modules/lighting/lighting")),f=n(e("./modules/dirlight/dirlight")),d=n(e("./modules/picking/picking")),h=n(e("./modules/diffuse/diffuse")),p=e("./utils/shader-utils"),m=n(e("./modules/transform/transform"))},{"./lib/assemble-shaders":149,"./lib/inject-shader":153,"./lib/resolve-modules":155,"./modules/diffuse/diffuse":159,"./modules/dirlight/dirlight":160,"./modules/fp32/fp32":161,"./modules/fp64/fp64":165,"./modules/lighting/lighting":169,"./modules/picking/picking":174,"./modules/project/project":175,"./modules/transform/transform":178,"./utils/shader-utils":184,"@babel/runtime/helpers/interopRequireDefault":13}],149:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.assembleShaders=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.vs,n=t.fs,i=(0,s.resolveModules)(t.modules||[]);return{gl:e,vs:h(e,Object.assign({},t,{source:r,type:o.VERTEX_SHADER,modules:i})),fs:h(e,Object.assign({},t,{source:n,type:o.FRAGMENT_SHADER,modules:i})),getUniforms:p(i),modules:m(i)}};var i,a=n(e("@babel/runtime/helpers/defineProperty")),o=e("./constants"),s=e("./resolve-modules"),u=e("./platform-defines"),l=n(e("./inject-shader")),c=n(e("../utils/assert")),f=((0,a.default)(i={},o.VERTEX_SHADER,"vertex"),(0,a.default)(i,o.FRAGMENT_SHADER,"fragment"),i),d="precision highp float;\n\n";function h(e,t){var r=t.id,n=t.source,i=t.type,a=t.modules,s=void 0===a?[]:a,h=t.defines,p=void 0===h?{}:h,m=t.inject,b=void 0===m?{}:m,g=t.prologue,v=void 0===g||g,y=t.log;(0,c.default)("string"==typeof n,"shader source must be a string");var _=i===o.VERTEX_SHADER,x=n.split("\n"),w=100,E="",k=n;0===x[0].indexOf("#version ")&&(w=300,E=x[0],k=x.slice(1).join("\n"));var P=v?"".concat(E,"\n").concat(function(e){var t=e.id,r=e.source,n=e.type;return t&&"string"==typeof t&&-1===r.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(t,"_").concat(f[n],"\n\n"):""}({id:r,source:n,type:i}),"\n").concat((0,u.getPlatformShaderDefines)(e),"\n").concat((0,u.getVersionDefines)(e,w,!_),"\n").concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0,r="";for(var n in e){0===t&&(r+="\n// APPLICATION DEFINES\n"),t++;var i=e[n];(i||Number.isFinite(i))&&(r+="#define ".concat(n.toUpperCase()," ").concat(e[n],"\n"))}0===t&&(r+="\n");return r}(p),"\n").concat(_?"":d,"\n"):"".concat(E,"\n"),M=!1,A=!0,C=!1,O=void 0;try{for(var T,S=s[Symbol.iterator]();!(A=(T=S.next()).done);A=!0){var R=T.value;switch(R.name){case"inject":M=!0;break;default:R.checkDeprecations(k,y),P+=R.getModuleSource(i,w)}}}catch(e){C=!0,O=e}finally{try{A||null==S.return||S.return()}finally{if(C)throw O}}return P=(0,l.default)(P+=k,i,b,M)}function p(e){return function(t){var r={},n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value.getUniforms(t,r);Object.assign(r,u)}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r}}function m(e){var t={},r=!0,n=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var u=a.value,l=(0,s.getShaderModule)(u);t[u]=l}}catch(e){n=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return t}},{"../utils/assert":182,"./constants":150,"./inject-shader":153,"./platform-defines":154,"./resolve-modules":155,"@babel/runtime/helpers/defineProperty":9,"@babel/runtime/helpers/interopRequireDefault":13}],150:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FRAGMENT_SHADER=r.VERTEX_SHADER=void 0;r.VERTEX_SHADER="vs";r.FRAGMENT_SHADER="fs"},{}],151:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.normalizeShaderModule=function(e){if(!e.normalized){if(e.normalized=!0,e.uniforms){var t=(0,n.parsePropTypes)(e.uniforms),r=t.propTypes;e.uniforms=r}e.uniforms&&!e.getUniforms&&(e.getUniforms=function(e,t){var r={};if(void 0===t){for(var n in e.uniforms)r[n]=e.uniforms[n].value;return r}for(var i in t)r[i]=t[i];return r}.bind(null,e))}return e};var n=e("./prop-types")},{"./prop-types":152}],152:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.parsePropTypes=function(e){for(var t={},r={},n=Object.entries(e),i=0;i<n.length;i++){var s=(0,a.default)(n[i],2),u=s[0],l=s[1],c=o(u,l);t[u]=c,r[u]=c.value}return{propTypes:t,defaultProps:r}};var i=n(e("@babel/runtime/helpers/typeof")),a=n(e("@babel/runtime/helpers/slicedToArray"));function o(e,t){switch(s(t)){case"object":return function(e){return e}(t=function(e,t){if(!("type"in t))return"value"in t?Object.assign({name:e,type:s(t.value)},t):{name:e,type:"object",value:t};return Object.assign({name:e},t)}(e,t));case"array":return function(e,t){if(/color/i.test(e)&&(3===t.length||4===t.length))return{name:e,type:"color",value:t};return{name:e,type:"array",value:t}}(e,t);case"boolean":return{name:e,type:"boolean",value:t};case"number":return function(e,t){var r=/radius|scale|width|height|pixel|size|miter/i.test(e)&&/^((?!scale).)*$/.test(e);return{name:e,type:"number",max:Math.max(t,r?100:1),min:Math.min(t,0),value:t}}(e,t);case"function":return{name:e,type:"function",value:t};default:return{name:e,type:"unknown",value:t}}}function s(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":null===e?"null":(0,i.default)(e)}},{"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/slicedToArray":22,"@babel/runtime/helpers/typeof":25}],153:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t,r,n){var i=t===s.VERTEX_SHADER,a=function(t){var n=r[t];switch(t){case"vs:#decl":i&&(e=e.replace(c,function(e){return"".concat(n,"\n").concat(e)}));break;case"vs:#main-start":i&&(e=e.replace(c,function(e){return e+n}));break;case"vs:#main-end":i&&(e=e.replace(f,function(e){return n+e}));break;case"fs:#decl":i||(e=e.replace(c,function(e){return"".concat(n,"\n").concat(e)}));break;case"fs:#main-start":i||(e=e.replace(c,function(e){return e+n}));break;case"fs:#main-end":i||(e=e.replace(f,function(e){return n+e}));break;default:e=e.replace(t,function(e){return e+n})}};for(var o in r)a(o);n&&(e=e.replace("}s*$",function(e){return e+l[t]}));return e},r.combineInjects=function(e){var t={};return(0,u.default)(Array.isArray(e)&&e.length>1),e.forEach(function(e){for(var r in e)t[r]=t[r]?"".concat(t[r],"\n").concat(e[r]):e[r]}),t};var i,a=n(e("@babel/runtime/helpers/defineProperty")),o=e("../modules/module-injectors"),s=e("./constants"),u=n(e("assert")),l=((0,a.default)(i={},s.VERTEX_SHADER,o.MODULE_INJECTORS_VS),(0,a.default)(i,s.FRAGMENT_SHADER,o.MODULE_INJECTORS_FS),i),c=/void main\s*\([^\)]*\)\s*\{\n?/,f=/}\n?[^{}]*$/},{"../modules/module-injectors":170,"./constants":150,"@babel/runtime/helpers/defineProperty":9,"@babel/runtime/helpers/interopRequireDefault":13,assert:28}],154:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getPlatformShaderDefines=function(e){switch((0,n.getContextInfo)(e).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}},r.getVersionDefines=function(e,t,r){var i="#if (__VERSION__ > 120)\n\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";(0,n.hasFeatures)(e,n.FEATURES.GLSL_FRAG_DEPTH)&&(i+="// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n");(0,n.hasFeatures)(e,n.FEATURES.GLSL_DERIVATIVES)&&(0,n.canCompileGLGSExtension)(e,n.FEATURES.GLSL_DERIVATIVES)&&(i+="// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define DERIVATIVES\n#endif\n");(0,n.hasFeatures)(e,n.FEATURES.GLSL_FRAG_DATA)&&(0,n.canCompileGLGSExtension)(e,n.FEATURES.GLSL_FRAG_DATA,{behavior:"require"})&&(i+="// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define DRAW_BUFFERS\n#endif\n");(0,n.hasFeatures)(e,n.FEATURES.GLSL_TEXTURE_LOD)&&(i+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n# define TEXTURE_LOD\n#define texture2DLod texture2DLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define textureCubeLod textureCubeLodEXT\n#define texture2DGrad texture2DGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define textureCubeGrad textureCubeGradEXT\n#endif\n");return i};var n=e("../utils/webgl-info")},{"../utils/webgl-info":185}],155:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.setDefaultShaderModules=function(e){i.setDefaultShaderModules(e)},r.registerShaderModules=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ignoreMultipleRegistrations;i.registerShaderModules(e,{ignoreMultipleRegistrations:void 0!==t&&t})},r.resolveModules=function(e){return e=e.concat(i.defaultShaderModules),a(e=i.resolveModules(e))},r.getShaderModule=function(e){return i.getShaderModule(e)},r.TEST_EXPORTS=void 0;var i=new(n(e("./shader-module-registry")).default);function a(e){var t={},r={};return o({modules:e,level:0,moduleMap:t,moduleDepth:r}),Object.keys(r).sort(function(e,t){return r[t]-r[e]}).map(function(e){return t[e]})}function o(e){var t=e.modules,r=e.level,n=e.moduleMap,i=e.moduleDepth;if(r>=5)throw new Error("Possible loop in shader dependency graph");var a=!0,s=!1,u=void 0;try{for(var l,c=t[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value;n[f.name]=f,(void 0===i[f.name]||i[f.name]<r)&&(i[f.name]=r)}}catch(e){s=!0,u=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw u}}var d=!0,h=!1,p=void 0;try{for(var m,b=t[Symbol.iterator]();!(d=(m=b.next()).done);d=!0){var g=m.value;g.dependencies&&o({modules:g.dependencies,level:r+1,moduleMap:n,moduleDepth:i})}}catch(e){h=!0,p=e}finally{try{d||null==b.return||b.return()}finally{if(h)throw p}}}r.TEST_EXPORTS={getShaderDependencies:a,getDependencyGraph:o}},{"./shader-module-registry":156,"@babel/runtime/helpers/interopRequireDefault":13}],156:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=n(e("./shader-module")),s=n(e("../utils/assert"));r.default=function(){function e(){(0,i.default)(this,e),this.shaderModules={},this.defaultShaderModules=[]}return(0,a.default)(e,[{key:"setDefaultShaderModules",value:function(e){this.defaultShaderModules=this.resolveModules(e)}},{key:"registerShaderModules",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ignoreMultipleRegistrations,r=void 0!==t&&t,n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){this._registerShaderModule(o.value,r)}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}}},{key:"getShaderModule",value:function(e){if(e instanceof o.default)return e;if("string"!=typeof e)return this._registerShaderModule(e,!0);var t=this.shaderModules[e];return t||(0,s.default)(!1,"Unknown shader module ".concat(e)),t}},{key:"resolveModules",value:function(e){var t=this;return e.map(function(e){return t.getShaderModule(e)})}},{key:"_registerShaderModule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e instanceof o.default)return e;if((0,s.default)(e.name,"shader module has no name"),this.shaderModules[e.name]&&!t)throw new Error("shader module ".concat(e.name," already registered"));return(e=new o.default(e)).dependencies=this.resolveModules(e.dependencies),this.shaderModules[e.name]=e,this.shaderModules[e.name]}}]),e}()},{"../utils/assert":182,"./shader-module":157,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/interopRequireDefault":13}],157:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=n(e("./transpile-shader")),s=n(e("../utils/assert"));r.default=function(){function e(t){var r=t.name,n=t.vs,a=t.fs,o=t.dependencies,u=void 0===o?[]:o,l=t.getUniforms,c=void 0===l?function(){return{}}:l,f=t.deprecations,d=void 0===f?[]:f,h=t.vertexShader,p=t.fragmentShader;(0,i.default)(this,e),(0,s.default)("string"==typeof r),this.name=r,this.vs=n||h,this.fs=a||p,this.getModuleUniforms=c,this.dependencies=u,this.deprecations=this._parseDeprecationDefinitions(d)}return(0,a.default)(e,[{key:"getModuleSource",value:function(e,t){var r;switch(e){case"vs":r=(0,o.default)(this.vs||"",t,!0);break;case"fs":r=(0,o.default)(this.fs||"",t,!1);break;default:(0,s.default)(!1)}return"string"!=typeof r?"":"#define MODULE_".concat(this.name.toUpperCase(),"\n").concat(r,"// END MODULE_").concat(this.name,"\n\n")}},{key:"getUniforms",value:function(e,t){return this.getModuleUniforms(e,t)}},{key:"checkDeprecations",value:function(e,t){this.deprecations.forEach(function(r){r.regex.test(e)&&(r.deprecated&&t?t.deprecated(r.old,r.new)():t&&t.removed(r.old,r.new)())})}},{key:"_parseDeprecationDefinitions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.forEach(function(e){switch(e.type){case"function":e.regex=new RegExp("\\b".concat(e.old,"\\("));break;default:e.regex=new RegExp("".concat(e.type," ").concat(e.old,";"))}}),e}}]),e}()},{"../utils/assert":182,"./transpile-shader":158,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/interopRequireDefault":13}],158:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t,r){switch(t){case 300:return r?function(e){return e.replace(/attribute\s+/g,"in ").replace(/varying\s+/g,"out ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(+/g,"texture(")}(e):function(e){return e.replace(/varying\s+/g,"in ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(/g,"texture(")}(e);case 100:return r?function(e){return e.replace(/^in\s+/gm,"attribute ").replace(/^out\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}(e):function(e){return e.replace(/^in\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}(e);default:throw new Error("unknown GLSL version ".concat(t))}}},{}],159:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n={diffuseTexture:null,diffuseColor:[.5,.5,.5,1]};r.default={name:"diffuse",getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t={};return void 0!==e.diffuseTexture&&(t.diffuse_uHasTexture=Boolean(e.diffuseTexture),t.diffuse_uTexture=e.diffuseTexture),void 0!==e.diffuseColor&&(t.diffuse_uColor=e.diffuseColor),t},vs:"out vec2 diffuse_vTexCoord;\nvoid diffuse_setTextureCoordinate(vec2 uv) {\n  diffuse_vTexCoord = uv;\n}\n",fs:"uniform vec4 diffuse_uColor;\nuniform bool diffuse_uHasTexture;\nuniform sampler2D diffuse_uTexture;\n\nin vec2 diffuse_vTexCoord;\n\n\n\nvec4 diffuse_getColor() {\n  vec2 texCoord = diffuse_vTexCoord;\n  return diffuse_uHasTexture ?\n    texture2D(diffuse_uTexture, vec2(texCoord.s, texCoord.t)) :\n    diffuse_uColor;\n}\n\nvec4 diffuse_filterColor(vec4 color) {\n  return diffuse_getColor();\n}\n"}},{}],160:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("../project/project")),a={lightDirection:new Float32Array([1,1,2])};r.default={name:"dirlight",vs:null,fs:"uniform vec3 dirlight_uLightDirection;\nvec4 dirlight_filterColor(vec4 color) {\n  vec3 normal = project_getNormal_World();\n  float d = abs(dot(normalize(normal), normalize(dirlight_uLightDirection)));\n  return vec4(color.rgb * d, color.a);\n}\n",getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t={};return e.lightDirection&&(t.dirlight_uLightDirection=e.lightDirection),t},dependencies:[i.default]}},{"../project/project":175,"@babel/runtime/helpers/interopRequireDefault":13}],161:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 0.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 0.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null}},{}],162:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default="uniform float ONE;\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float a_hi = t * ONE - (t - a);\n  float a_lo = a * ONE - a_hi;\n#else\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n#endif\n  return vec2(a_hi, a_lo);\n}\nvec2 split2(vec2 a) {\n  vec2 b = split(a.x);\n  b.y += a.y;\n  return b;\n}\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float sum = (a + b) * ONE;\n  float err = b - (sum - a) * ONE;\n#else\n  float sum = a + b;\n  float err = b - (sum - a);\n#endif\n  return vec2(sum, err);\n}\nvec2 twoSum(float a, float b) {\n  float s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSub(float a, float b) {\n  float s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\n    a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n#else\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\n  return vec2(prod, err);\n}\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  prod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  prod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  vec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\n  vec2 yn = a * xn;\n#endif\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  return sum_fp64(split(yn), prod);\n#else\n  return sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n"},{}],163:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default="const vec2 E_FP64 = vec2(2.7182817459106445e+00, 8.254840366817007e-08);\nconst vec2 LOG2_FP64 = vec2(0.6931471824645996e+00, -1.9046542121259336e-09);\nconst vec2 PI_FP64 = vec2(3.1415927410125732, -8.742278012618954e-8);\nconst vec2 TWO_PI_FP64 = vec2(6.2831854820251465, -1.7484556025237907e-7);\nconst vec2 PI_2_FP64 = vec2(1.5707963705062866, -4.371139006309477e-8);\nconst vec2 PI_4_FP64 = vec2(0.7853981852531433, -2.1855695031547384e-8);\nconst vec2 PI_16_FP64 = vec2(0.19634954631328583, -5.463923757886846e-9);\nconst vec2 PI_16_2_FP64 = vec2(0.39269909262657166, -1.0927847515773692e-8);\nconst vec2 PI_16_3_FP64 = vec2(0.5890486240386963, -1.4906100798128818e-9);\nconst vec2 PI_180_FP64 = vec2(0.01745329238474369, 1.3519960498364902e-10);\n\nconst vec2 SIN_TABLE_0_FP64 = vec2(0.19509032368659973, -1.6704714833615242e-9);\nconst vec2 SIN_TABLE_1_FP64 = vec2(0.3826834261417389, 6.22335089017767e-9);\nconst vec2 SIN_TABLE_2_FP64 = vec2(0.5555702447891235, -1.1769521357507529e-8);\nconst vec2 SIN_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617041793133e-8);\n\nconst vec2 COS_TABLE_0_FP64 = vec2(0.9807852506637573, 2.9739473106360492e-8);\nconst vec2 COS_TABLE_1_FP64 = vec2(0.9238795042037964, 2.8307490351764386e-8);\nconst vec2 COS_TABLE_2_FP64 = vec2(0.8314695954322815, 1.6870263741530778e-8);\nconst vec2 COS_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617152815436e-8);\n\nconst vec2 INVERSE_FACTORIAL_3_FP64 = vec2(1.666666716337204e-01, -4.967053879312289e-09);\nconst vec2 INVERSE_FACTORIAL_4_FP64 = vec2(4.16666679084301e-02, -1.2417634698280722e-09);\nconst vec2 INVERSE_FACTORIAL_5_FP64 = vec2(8.333333767950535e-03, -4.34617203337595e-10);\nconst vec2 INVERSE_FACTORIAL_6_FP64 = vec2(1.3888889225199819e-03, -3.3631094437103215e-11);\nconst vec2 INVERSE_FACTORIAL_7_FP64 = vec2(1.9841270113829523e-04,  -2.725596874933456e-12);\nconst vec2 INVERSE_FACTORIAL_8_FP64 = vec2(2.4801587642286904e-05, -3.406996025904184e-13);\nconst vec2 INVERSE_FACTORIAL_9_FP64 = vec2(2.75573188446287533e-06, 3.7935713937038186e-14);\nconst vec2 INVERSE_FACTORIAL_10_FP64 = vec2(2.755731998149713e-07, -7.575112367869873e-15);\n\nfloat nint(float d) {\n    if (d == floor(d)) return d;\n    return floor(d + 0.5);\n}\n\nvec2 nint_fp64(vec2 a) {\n    float hi = nint(a.x);\n    float lo;\n    vec2 tmp;\n    if (hi == a.x) {\n        lo = nint(a.y);\n        tmp = quickTwoSum(hi, lo);\n    } else {\n        lo = 0.0;\n        if (abs(hi - a.x) == 0.5 && a.y < 0.0) {\n            hi -= 1.0;\n        }\n        tmp = vec2(hi, lo);\n    }\n    return tmp;\n}\n\nvec2 exp_fp64(vec2 a) {\n\n  const int k_power = 4;\n  const float k = 16.0;\n\n  const float inv_k = 1.0 / k;\n\n  if (a.x <= -88.0) return vec2(0.0, 0.0);\n  if (a.x >= 88.0) return vec2(1.0 / 0.0, 1.0 / 0.0);\n  if (a.x == 0.0 && a.y == 0.0) return vec2(1.0, 0.0);\n  if (a.x == 1.0 && a.y == 0.0) return E_FP64;\n\n  float m = floor(a.x / LOG2_FP64.x + 0.5);\n  vec2 r = sub_fp64(a, mul_fp64(LOG2_FP64, vec2(m, 0.0))) * inv_k;\n  vec2 s, t, p;\n\n  p = mul_fp64(r, r);\n  s = sum_fp64(r, p * 0.5);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_3_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_4_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_5_FP64);\n\n\n\n\n\n\n  s = sum_fp64(s, t);\n  for (int i = 0; i < k_power; i++) {\n    s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  }\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = sum_fp64(s, vec2(ONE, 0.0));\n#else\n  s = sum_fp64(s, vec2(1.0, 0.0));\n#endif\n\n  return s * pow(2.0, m);\n}\n\nvec2 log_fp64(vec2 a)\n{\n  if (a.x == 1.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x <= 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n  vec2 x = vec2(log(a.x), 0.0);\n  vec2 s;\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = vec2(ONE, 0.0);\n#else\n  s = vec2(1.0, 0.0);\n#endif\n\n  x = sub_fp64(sum_fp64(x, mul_fp64(a, exp_fp64(-x))), s);\n  return x;\n}\n\nvec2 sin_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(0.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  s = a;\n  r = a;\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_3_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_5_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvec2 cos_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(1.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  r = x;\n  s = sum_fp64(vec2(1.0, 0.0), r * 0.5);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_4_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_6_FP64);\n  s = sum_fp64(s, t);\n\n\n\n\n\n\n  return s;\n}\n\nvoid sincos_taylor_fp64(vec2 a, out vec2 sin_t, out vec2 cos_t) {\n  if (a.x == 0.0 && a.y == 0.0) {\n    sin_t = vec2(0.0, 0.0);\n    cos_t = vec2(1.0, 0.0);\n  }\n\n  sin_t = sin_taylor_fp64(a);\n  cos_t = sqrt_fp64(sub_fp64(vec2(1.0, 0.0), mul_fp64(sin_t, sin_t)));\n}\n\nvec2 sin_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return sin_taylor_fp64(t);\n        } else if (j == 1) {\n            return cos_taylor_fp64(t);\n        } else if (j == -1) {\n            return -cos_taylor_fp64(t);\n        } else {\n            return -sin_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 cos_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(1.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return cos_taylor_fp64(t);\n        } else if (j == 1) {\n            return -sin_taylor_fp64(t);\n        } else if (j == -1) {\n            return sin_taylor_fp64(t);\n        } else {\n            return -cos_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 tan_fp64(vec2 a) {\n    vec2 sin_a;\n    vec2 cos_a;\n\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n    vec2 sin_t, cos_t;\n    vec2 s, c;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#else\n        if (abs_k == 1) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs_k == 2) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs_k == 3) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs_k == 4) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#endif\n        if (k > 0) {\n            s = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            s = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return div_fp64(sin_a, cos_a);\n}\n\nvec2 radians_fp64(vec2 degree) {\n  return mul_fp64(degree, PI_180_FP64);\n}\n\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\n  vec2 range = sub_fp64(b, a);\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\n}\n\nvoid vec2_sum_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sum_fp64(a[0], b[0]);\n    out_val[1] = sum_fp64(a[1], b[1]);\n}\n\nvoid vec2_sub_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sub_fp64(a[0], b[0]);\n    out_val[1] = sub_fp64(a[1], b[1]);\n}\n\nvoid vec2_mul_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = mul_fp64(a[0], b[0]);\n    out_val[1] = mul_fp64(a[1], b[1]);\n}\n\nvoid vec2_div_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = div_fp64(a[0], b[0]);\n    out_val[1] = div_fp64(a[1], b[1]);\n}\n\nvoid vec2_mix_fp64(vec2 x[2], vec2 y[2], float a, out vec2 out_val[2]) {\n  vec2 range[2];\n  vec2_sub_fp64(y, x, range);\n  vec2 portion[2];\n  portion[0] = range[0] * a;\n  portion[1] = range[1] * a;\n  vec2_sum_fp64(x, portion, out_val);\n}\n\nvec2 vec2_length_fp64(vec2 x[2]) {\n  return sqrt_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])));\n}\n\nvoid vec2_normalize_fp64(vec2 x[2], out vec2 out_val[2]) {\n  vec2 length = vec2_length_fp64(x);\n  vec2 length_vec2[2];\n  length_vec2[0] = length;\n  length_vec2[1] = length;\n\n  vec2_div_fp64(x, length_vec2, out_val);\n}\n\nvec2 vec2_distance_fp64(vec2 x[2], vec2 y[2]) {\n  vec2 diff[2];\n  vec2_sub_fp64(x, y, diff);\n  return vec2_length_fp64(diff);\n}\n\nvec2 vec2_dot_fp64(vec2 a[2], vec2 b[2]) {\n  vec2 v[2];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n\n  return sum_fp64(v[0], v[1]);\n}\nvoid vec3_sub_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec3_sum_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvec2 vec3_length_fp64(vec2 x[3]) {\n  return sqrt_fp64(sum_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])),\n    mul_fp64(x[2], x[2])));\n}\n\nvec2 vec3_distance_fp64(vec2 x[3], vec2 y[3]) {\n  vec2 diff[3];\n  vec3_sub_fp64(x, y, diff);\n  return vec3_length_fp64(diff);\n}\nvoid vec4_fp64(vec4 a, out vec2 out_val[4]) {\n  out_val[0].x = a[0];\n  out_val[0].y = 0.0;\n\n  out_val[1].x = a[1];\n  out_val[1].y = 0.0;\n\n  out_val[2].x = a[2];\n  out_val[2].y = 0.0;\n\n  out_val[3].x = a[3];\n  out_val[3].y = 0.0;\n}\n\nvoid vec4_scalar_mul_fp64(vec2 a[4], vec2 b, out vec2 out_val[4]) {\n  out_val[0] = mul_fp64(a[0], b);\n  out_val[1] = mul_fp64(a[1], b);\n  out_val[2] = mul_fp64(a[2], b);\n  out_val[3] = mul_fp64(a[3], b);\n}\n\nvoid vec4_sum_fp64(vec2 a[4], vec2 b[4], out vec2 out_val[4]) {\n  for (int i = 0; i < 4; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec4_dot_fp64(vec2 a[4], vec2 b[4], out vec2 out_val) {\n  vec2 v[4];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n  v[2] = mul_fp64(a[2], b[2]);\n  v[3] = mul_fp64(a[3], b[3]);\n\n  out_val = sum_fp64(sum_fp64(v[0], v[1]), sum_fp64(v[2], v[3]));\n}\n\nvoid mat4_vec4_mul_fp64(vec2 b[16], vec2 a[4], out vec2 out_val[4]) {\n  vec2 tmp[4];\n\n  for (int i = 0; i < 4; i++)\n  {\n    for (int j = 0; j < 4; j++)\n    {\n      tmp[j] = b[j + i * 4];\n    }\n    vec4_dot_fp64(a, tmp, out_val[i]);\n  }\n}\n"},{}],164:[function(e,t,r){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=Math.fround(e),i=e-n;return t[r]=n,t[r+1]=i,t}Object.defineProperty(r,"__esModule",{value:!0}),r.fp64ify=n,r.fp64LowPart=function(e){return e-Math.fround(e)},r.fp64ifyMatrix4=function(e){for(var t=new Float32Array(32),r=0;r<4;++r)for(var i=0;i<4;++i){var a=4*r+i;n(e[4*i+r],t,2*a)}return t}},{}],165:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"fp64ify",{enumerable:!0,get:function(){return i.fp64ify}}),Object.defineProperty(r,"fp64LowPart",{enumerable:!0,get:function(){return i.fp64LowPart}}),Object.defineProperty(r,"fp64ifyMatrix4",{enumerable:!0,get:function(){return i.fp64ifyMatrix4}}),r.fp64fs=r.fp64arithmetic=r.default=void 0;var i=e("./fp64-utils"),a=n(e("./fp64-arithmetic.glsl")),o=n(e("./fp64-functions.glsl")),s="".concat(a.default,"\n").concat(o.default),u={ONE:1};r.default={name:"fp64",vs:s,fs:null,fp64ify:i.fp64ify,fp64LowPart:i.fp64LowPart,fp64ifyMatrix4:i.fp64ifyMatrix4,getUniforms:function(){return Object.assign({},u)}};var l={name:"fp64-arithmetic",vs:"".concat(a.default),fs:null};r.fp64arithmetic=l,r.fp64fs={name:"fp64-fs",vs:null,fs:s}},{"./fp64-arithmetic.glsl":162,"./fp64-functions.glsl":163,"./fp64-utils":164,"@babel/runtime/helpers/interopRequireDefault":13}],166:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default="\n"},{}],167:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default="precision highp float;\n\n#define LIGHT_MAX 4\n\nvarying vec3 lighting_vLightWeighting;\n\nvec4 lighting_apply(vec4 color) {\n  return vec4(color.rgb * lighting_vLightWeighting, color.a);\n}\n\nuniform mat4 viewMatrix;\n\n\nvarying vec4 lighting_vColor;\nvarying vec4 lighting_vTransformedNormal;\nvarying vec4 lighting_vPosition;\n\nuniform float shininess;\nuniform bool enableSpecularMap;\nuniform bool enableLights;\n\nuniform vec3 ambientColor;\nuniform vec3 directionalColor;\nuniform vec3 lightingDirection;\n\nuniform vec3 lighting_uPointLocation[LIGHT_MAX];\nuniform vec3 lighting_uPointColor[LIGHT_MAX];\nuniform float lighting_uPointSpecularEnable[LIGHT_MAX];\nuniform vec3 lighting_uPointSpecularColor[LIGHT_MAX];\nuniform int numberPoints;\n\n\nvec3 lighting__calculate_light_weighting() {\n\treturn lighting__calculate_light_weighting(shininess);\n}\n\nvec3 lighting__calculate_light_weighting(shininess) {\n  vec3 normal = vTransformedNormal.xyz;\n  vec3 eyeDirection = normalize(-vPosition.xyz);\n\n  vec3 specularLight = vec3(0., 0., 0.);\n  vec3 diffuseLight = vec3(0., 0., 0.);\n\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec3 transformedPointLocation = (viewMatrix * vec4(lighting_uPointLocation[i], 1.0)).xyz;\n      vec3 lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n      if (lighting_uPointSpecularEnable > 0.) {\n        vec3 reflectionDirection = reflect(-lightDirection, normal);\n        float specularLightWeighting =\n          pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininessVal);\n        specularLight += specularLightWeighting * lighting_uPointSpecularColor[i];\n      }\n\n      float diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n      diffuseLight += diffuseLightWeighting * lighting_uPointColor[i];\n    } else {\n      break;\n    }\n  }\n\n  return ambientColor + diffuseLight + specularLight;\n}\n\nvoid lighting_filterColor(fragmentColor) {\n  if (!lighting_enable) {\n  \treturn fragmentColor;\n  } else {\n  \tvec3 lightWeighting = lighting__calculate_light_weighting();\n  \treturn vec4(fragmentColor.rgb * lightWeighting, fragmentColor.a);\n  }\n}\n\nuniform vec3 material_uAmbientColor;\nuniform vec3 material_uDiffuseColor;\nuniform vec3 material_uSpecularColor;\nuniform vec3 material_uEmissiveColor;\n\nuniform bool hasTexture1;\nuniform sampler2D sampler1;\n\nuniform mat4 viewMatrix;\n\nvoid apply_lighting(color) {\n  vec3 ambientLightWeighting = ambientColor;\n\n  vec3 normal = vTransformedNormal.xyz;\n  vec3 eyeDirection = normalize(-vPosition.xyz);\n\n  vec3 specularLight = vec3(0.0, 0.0, 0.0);\n  vec3 diffuseLight = vec3(0.0, 0.0, 0.0);\n\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec3 transformedPointLocation = (viewMatrix * vec4(pointLocation[i], 1.0)).xyz;\n      vec3 lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n      if (enableSpecularHighlights) {\n        vec3 reflectionDirection = reflect(-lightDirection, normal);\n        float specularLightWeighting =\n          pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n        specularLight += specularLightWeighting * pointSpecularColor[i];\n      }\n\n      float diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n      diffuseLight += diffuseLightWeighting * pointColor[i];\n    } else {\n        break;\n    }\n  }\n\n  vec3 matAmbientColor = material_uAmbientColor * color.rgb;\n  vec3 matDiffuseColor = material_uDiffuseColor * color.rgb;\n  vec3 matSpecularColor = material_uSpecularColor * color.rgb;\n  vec3 matEmissiveColor = material_uEmissiveColor * color.rgb;\n  gl_FragColor = vec4(\n    matAmbientColor * ambientLightWeighting\n    + matDiffuseColor * diffuseLightWeighting\n    + matSpecularColor * specularLightWeighting\n    + matEmissiveColor,\n    color.a\n  );\n}\n\n  vec3 lightWeighting;\n  if (!enableLights) {\n    lightWeighting = vec3(1.0, 1.0, 1.0);\n  } else {\n    vec3 lightDirection;\n    float specularLightWeighting = 0.0;\n    float diffuseLightWeighting = 0.0;\n    vec3  specularLight = vec3(0.0, 0.0, 0.0);\n    vec3  diffuseLight = vec3(0.0, 0.0, 0.0);\n\n    vec3 transformedPointLocation;\n    vec3 normal = vTransformedNormal.xyz;\n\n    vec3 eyeDirection = normalize(-vPosition.xyz);\n    vec3 reflectionDirection;\n\n    vec3 pointWeight = vec3(0.0, 0.0, 0.0);\n\n    for (int i = 0; i < LIGHT_MAX; i++) {\n      if (i < numberPoints) {\n        transformedPointLocation = (viewMatrix * vec4(pointLocation[i], 1.0)).xyz;\n        lightDirection = normalize(transformedPointLocation - vPosition.xyz);\n\n        if (enableSpecular[i] > 0.0) {\n          reflectionDirection = reflect(-lightDirection, normal);\n          specularLightWeighting = pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n          specularLight += specularLightWeighting * pointSpecularColor[i];\n        }\n\n        diffuseLightWeighting = max(dot(normal, lightDirection), 0.0);\n        diffuseLight += diffuseLightWeighting * pointColor[i];\n      } else {\n        break;\n      }\n    }\n\n    lightWeighting = ambientColor + diffuseLight + specularLight;\n  }\nuniform float reflection;\nuniform float refraction;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{}],168:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default="#define LIGHT_MAX 4\n\nuniform bool lighting_uEnableLights;\nuniform vec3 lighting_uAmbientColor;\nuniform vec3 lighting_uDirection;\nuniform vec3 lighting_uDirectionalColor;\nuniform int  lighting_uPointCount;\nuniform vec3 lighting_uPointLocation[LIGHT_MAX];\nuniform vec3 lighting_uPointColor[LIGHT_MAX];\nuniform bool lighting_uEnableReflections;\nvarying vec4 lighting_vPosition;\nvarying vec4 lighting_vNormal;\nvarying vec3 lighting_vColor;\nvarying vec3 lighting_vLightWeighting;\nvarying vec3 lighting_vReflection;\n\nvoid lighting_setPositionAndNormal(vec3 position, vec3 normal) {\n  lighting_vPosition = worldMatrix * vec4(position, 1.);\n  lighting_vNormal = worldInverseTransposeMatrix * vec4(normal, 1.);;\n}\n\nvoid lighting__getLightWeigting() {\n  float directionalLightWeighting = max(dot(lighting_vNormal.xyz, lighting_uDirection), 0.);\n  vec3 pointWeight = vec3(0., 0., 0.);\n  for (int i = 0; i < LIGHT_MAX; i++) {\n    if (i < numberPoints) {\n      vec4 mvLightPosition = viewMatrix * vec4(lighting_uPointLocation[i], 1.);\n      vec3 pointLightDirection = normalize(mvLightPosition.xyz - lighting_vPosition.xyz);\n      pointWeight += max(dot(lighting_vNormal.xyz, pointLightDirection), 0.) * pointColor[i];\n     } else {\n       break;\n     }\n   }\n   return ambientColor + (directionalColor * directionalLightWeighting) + pointWeight;\n}\n\nvoid lighting_apply(vec3 position, vec3 normal) {\n  lighting_setPositionAndNormal(position, normal);\n  if(!lighting_uEnableLights) {\n    lighting_vLightWeighting = vec3(1., 1., 1.);\n  } else {\n    lighting_vLightWeighting = lighting__getLightWeighting();\n  }\n}\n\nvoid lighting_set_reflection(vec3 position) {\n  if (lighting_uEnableReflections) {\n    lighting_vReflection = (viewInverseMatrix[3] - (worldMatrix * vec4(position, 1.))).xyz;\n  } else {\n    lighting_vReflection = vec3(1., 1., 1.);\n  }\n}\n"},{}],169:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.getUniforms=c,r.default=r.config=r.name=r.fragmentShader=r.vertexShader=void 0;var i=e("math.gl"),a=n(e("./lighting-common.glsl")),o=n(e("./lighting-vertex.glsl")),s=n(e("./lighting-fragment.glsl")),u="".concat(a.default,"\n").concat(o.default,"\n");r.vertexShader=u;var l="".concat(a.default,"\n").concat(s.default,"\n");r.fragmentShader=l;r.name="lighting";function c(e){var t,r,n,a,o=e.lightingEnable,s=e.lightingAmbientColor,u=e.lightingDirection,l=e.lightingPointLights,c=void 0===l?[]:l;return Object.assign({lightingEnable:void 0!==o&&o,lightingAmbientColor:void 0===s?[.2,.2,.2]:s},(r=(t=void 0===u?[1,1,1]:u).color,a=new i.Vector3((n=t.direction).x,n.y,n.z).normalize().scale(-1,-1,-1),{directionalColor:[r.r,r.g,r.b],lightingDirection:[a.x,a.y,a.z]}),function(e){var t=(e=e instanceof Array?e:[e]).length,r=[],n=[],i=[],a=[],o=!0,s=!1,u=void 0;try{for(var l,c=e[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var f=l.value,d=f.position,h=f.color,p=f.diffuse,m=f.specular,b=h||p;r.push(d.x,d.y,d.z),n.push(b.r,b.g,b.b),i.push(Number(Boolean(m))),m?a.push(m.r,m.g,m.b):a.push(0,0,0)}}catch(e){s=!0,u=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw u}}return{numberPoints:t,pointLocation:r,pointColor:n,enableSpecular:i,pointSpecularColor:a}}(c))}r.config={MAX_POINT_LIGHTS:4},r.default={name:"lighting",vs:u,fs:l,getUniforms:c}},{"./lighting-common.glsl":166,"./lighting-fragment.glsl":167,"./lighting-vertex.glsl":168,"@babel/runtime/helpers/interopRequireDefault":13,"math.gl":258}],170:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MODULE_INJECTORS_FS=r.MODULE_INJECTORS_VS=void 0;r.MODULE_INJECTORS_VS="#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n";r.MODULE_INJECTORS_FS="#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},{}],171:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default="#extension GL_EXT_shader_texture_lod: enable\n#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n\nuniform vec3 u_LightDirection;\nuniform vec3 u_LightColor;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\nuniform vec4 u_ScaleIBLAmbient;\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n  #ifdef MANUAL_SRGB\n  #ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n  #else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n  #endif\n  return vec4(linOut,srgbIn.w);;\n  #else\n  return srgbIn;\n  #endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLodEXT(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n\n\n  float perceptualRoughness = u_MetallicRoughnessValues.y;\n  float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n  vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n  perceptualRoughness = mrSample.g * perceptualRoughness;\n  metallic = mrSample.b * metallic;\n#endif\n  perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n  metallic = clamp(metallic, 0.0, 1.0);\n\n  float alphaRoughness = perceptualRoughness * perceptualRoughness;\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n  vec3 f0 = vec3(0.04);\n  vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n  diffuseColor *= 1.0 - metallic;\n  vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n  float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n  float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n  vec3 specularEnvironmentR0 = specularColor.rgb;\n  vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n  vec3 n = getNormal();\n  vec3 v = normalize(u_Camera - pbr_vPosition);\n  vec3 l = normalize(u_LightDirection);\n  vec3 h = normalize(l+v);\n  vec3 reflection = -normalize(reflect(v, n));\n\n  float NdotL = clamp(dot(n, l), 0.001, 1.0);\n  float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n  float NdotH = clamp(dot(n, h), 0.0, 1.0);\n  float LdotH = clamp(dot(l, h), 0.0, 1.0);\n  float VdotH = clamp(dot(v, h), 0.0, 1.0);\n\n  PBRInfo pbrInputs = PBRInfo(\n    NdotL,\n    NdotV,\n    NdotH,\n    LdotH,\n    VdotH,\n    perceptualRoughness,\n    metallic,\n    specularEnvironmentR0,\n    specularEnvironmentR90,\n    alphaRoughness,\n    diffuseColor,\n    specularColor\n  );\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * NdotL * NdotV);\n  vec3 color = NdotL * u_LightColor * (diffuseContrib + specContrib);\n#ifdef USE_IBL\n  color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n  float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n  color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n  vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n  color += emissive;\n#endif\n\n  color = mix(color, F, u_ScaleFGDSpec.x);\n  color = mix(color, vec3(G), u_ScaleFGDSpec.y);\n  color = mix(color, vec3(D), u_ScaleFGDSpec.z);\n  color = mix(color, specContrib, u_ScaleFGDSpec.w);\n\n  color = mix(color, diffuseContrib, u_ScaleDiffBaseMR.x);\n  color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n  color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n  color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n"},{}],172:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default="varying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n"},{}],173:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("../project2/project2")),a=n(e("./pbr-vertex.glsl")),o=n(e("./pbr-fragment.glsl"));r.default={name:"pbr",vs:a.default,fs:o.default,dependencies:[i.default]}},{"../project2/project2":176,"./pbr-fragment.glsl":171,"./pbr-vertex.glsl":172,"@babel/runtime/helpers/interopRequireDefault":13}],174:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingThreshold:1,pickingActive:!1};r.default={name:"picking",vs:"uniform vec3 picking_uSelectedColor;\nuniform float picking_uThreshold;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    abs(vertexColor.r - picking_uSelectedColor.r) < picking_uThreshold &&\n    abs(vertexColor.g - picking_uSelectedColor.g) < picking_uThreshold &&\n    abs(vertexColor.b - picking_uSelectedColor.b) < picking_uThreshold;\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  picking_vRGBcolor_Aselected.a =\n    float(isVertexPicked(pickingColor));\n  picking_vRGBcolor_Aselected.rgb = pickingColor * COLOR_SCALE;\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\nvec4 picking_filterHighlightColor(vec4 color) {\n  bool selected = bool(picking_vRGBcolor_Aselected.a);\n\n  if (selected) {\n    vec4 highLightColor = picking_uHighlightColor * COLOR_SCALE;\n\n    float highLightAlpha = highLightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  vec3 pickingColor = picking_vRGBcolor_Aselected.rgb;\n  if (picking_uActive && length(pickingColor) < 0.001) {\n    discard;\n  }\n  return picking_uActive ? vec4(pickingColor, 1.0) : color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t={};if(void 0!==e.pickingSelectedColor)if(null===e.pickingSelectedColor)t.picking_uSelectedColorValid=0;else{var r=[e.pickingSelectedColor[0],e.pickingSelectedColor[1],e.pickingSelectedColor[2]];t.picking_uSelectedColorValid=1,t.picking_uSelectedColor=r}return void 0!==e.pickingHighlightColor&&(t.picking_uHighlightColor=e.pickingHighlightColor),void 0!==e.pickingThreshold&&(t.picking_uThreshold=e.pickingThreshold),void 0!==e.pickingActive&&(t.picking_uActive=e.pickingActive?1:0),t}}},{}],175:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("math.gl"),i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],a={modelMatrix:i,viewMatrix:i,projectionMatrix:i,cameraPositionWorld:[0,0,0]};var o="varying vec4 project_vPositionWorld;\nvarying vec3 project_vNormalWorld;\n\nvec4 project_getPosition_World() {\n  return project_vPositionWorld;\n}\n\nvec3 project_getNormal_World() {\n  return project_vNormalWorld;\n}\n",s="".concat(o,"\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewProjectionMatrix;\nuniform vec3 cameraPositionWorld;\n\nstruct World {\n  vec3 position;\n  vec3 normal;\n};\n\nWorld world;\n\nvoid project_setPosition(vec4 position) {\n  project_vPositionWorld = position;\n}\n\nvoid project_setNormal(vec3 normal) {\n  project_vNormalWorld = normal;\n}\n\nvoid project_setPositionAndNormal_World(vec3 position, vec3 normal) {\n  world.position = position;\n  world.normal = normal;\n}\n\nvoid project_setPositionAndNormal_Model(vec3 position, vec3 normal) {\n  world.position = (modelMatrix * vec4(position, 1.)).xyz;\n  world.normal = mat3(modelMatrix) * normal;\n}\n\nvec4 project_model_to_clipspace(vec4 position) {\n  return viewProjectionMatrix * modelMatrix * position;\n}\n\nvec4 project_model_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * modelMatrix * vec4(position, 1.);\n}\n\nvec4 project_world_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_view_to_clipspace(vec3 position) {\n  return projectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n"),u="\n".concat(o);r.default={name:"project",getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t={};return void 0!==e.modelMatrix&&(t.modelMatrix=e.modelMatrix),void 0!==e.viewMatrix&&(t.viewMatrix=e.viewMatrix),void 0!==e.projectionMatrix&&(t.projectionMatrix=e.projectionMatrix),void 0!==e.cameraPositionWorld&&(t.cameraPositionWorld=e.cameraPositionWorld),void 0===e.projectionMatrix&&void 0===e.viewMatrix||(t.viewProjectionMatrix=new n.Matrix4(e.projectionMatrix).multiplyRight(e.viewMatrix)),t},vs:s,fs:u}},{"math.gl":258}],176:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("./project2.vertex.glsl"));r.default={name:"project2",vs:i.default,fs:i.default}},{"./project2.vertex.glsl":177,"@babel/runtime/helpers/interopRequireDefault":13}],177:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default="uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n"},{}],178:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null}},{}],179:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.MODULAR_SHADERS=void 0;var i=n(e("./modular-vertex.glsl")),a=n(e("./modular-fragment.glsl"));r.MODULAR_SHADERS={vs:i.default,fs:a.default,defaultUniforms:{}}},{"./modular-fragment.glsl":180,"./modular-vertex.glsl":181,"@babel/runtime/helpers/interopRequireDefault":13}],180:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default="#define SHADER_NAME luma-modular-fragment\n\nprecision highp float;\n\n// varyings\nvarying vec4 vColor;\n\nvoid main(){\n  gl_FragColor = vec4(1., 0., 1., 1.);\n\n#ifdef MODULE_DIFFUSE\n  gl_FragColor = diffuse_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth(gl_Position);\n#endif\n}\n"},{}],181:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default="#define SHADER_NAME luma_modular_vertex\n\n// object attributes\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec4 colors;\nattribute vec2 texCoords;\nattribute vec3 pickingColors;\n\nvoid main(void) {\n\n  // Set up position\n#ifdef MODULE_GEOMETRY\n  geometry_setPosition(positions);\n  geometry_setNormal(normals);\n#endif\n\n#ifdef MODULE_PROJECT\n  project_setPositionAndNormal_Model(positions, normals);\n  gl_Position = project_model_to_clipspace(positions);\n#endif\n\n  // Set up depth\n#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n\n#ifdef MODULE_DIFFUSE\n  diffuse_setTextureCoordinate(texCoords);\n#endif\n\n  // Set up color calculations\n#ifdef MODULE_MATERIAL\n  material_setDiffuseColor(colors);\n  material_setDiffuseTextureCoordinates(texCoords);\n#endif\n\n#ifdef MODULE_LIGHTING\n  lighting_setPositionAndNormal(positions, normals);\n  lighting_apply_light(positions);\n  lighting_apply_reflection(positions);\n#endif\n\n#ifdef MODULE_PICKING\n  picking_setPickingColor(pickingColors);\n#endif\n\n}\n"},{}],182:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}},{}],183:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="undefined"!=typeof window&&window.navigator||{},r=e.userAgent||t.userAgent||"",n=-1!==r.indexOf("MSIE "),i=-1!==r.indexOf("Trident/");return n||i}},{}],184:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.getQualifierDetails=function(e,t){t=Array.isArray(t)?t:[t];var r=e.replace(/^\s+/,"").split(/\s+/),n=(0,i.default)(r,3),a=n[0],o=n[1],s=n[2];if(!t.includes(a)||!o||!s)return null;var u=s.split(";")[0];return{qualifier:a,type:o,name:u}},r.getPassthroughFS=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.version,r=void 0===t?100:t,n=e.input,i=e.inputType,a=e.output;if(!n)return 300===r?s:o;var l=u(n,i);if(300===r)return"#version 300 es\nin ".concat(i," ").concat(n,";\nout vec4 ").concat(a,";\nvoid main() {\n  ").concat(a," = ").concat(l,";\n}");return"varying ".concat(i," ").concat(n,";\nvoid main() {\n  gl_FragColor = ").concat(l,";\n}")},r.typeToChannelSuffix=function(e){switch(e){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return(0,a.default)(!1),null}},r.typeToChannelCount=function(e){switch(e){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return(0,a.default)(!1),null}},r.convertToVec4=u;var i=n(e("@babel/runtime/helpers/slicedToArray")),a=n(e("assert")),o="void main() {}",s="#version 300 es\n".concat(o);function u(e,t){switch(t){case"float":return"vec4(".concat(e,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(e,", 0.0, 1.0)");case"vec3":return"vec4(".concat(e,", 1.0)");case"vec4":return e;default:return(0,a.default)(!1),null}}},{"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/slicedToArray":22,assert:28}],185:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.getContextInfo=function(e){var t=e.getExtension("WEBGL_debug_renderer_info"),r=e.getParameter(t&&t.UNMASKED_VENDOR_WEBGL||s),n=e.getParameter(t&&t.UNMASKED_RENDERER_WEBGL||u);return{gpuVendor:h(r,n),vendor:r,renderer:n,version:e.getParameter(l),shadingLanguageVersion:e.getParameter(c)}},r.canCompileGLGSExtension=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=f[t];if((0,a.default)(n,t),!(0,i.default)(r))return!0;if(t in p)return p[t];var o=r.behavior||"enable",s="#extension GL_".concat(n[0]," : ").concat(o,"\nvoid main(void) {}"),u=e.createShader(35633);e.shaderSource(u,s),e.compileShader(u);var l=e.getShaderParameter(u,35713);return e.deleteShader(u),p[t]=l,l},r.hasFeatures=function(e,t){return(t=Array.isArray(t)?t:[t]).every(function(t){return function(e,t){var r=f[t];(0,a.default)(r,t);var n=function(e){return Boolean(e&&("undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||32874===o))}(e)&&r[1]||r[0],i="string"==typeof n?Boolean(e.getExtension(n)):n;return(0,a.default)(!1===i||!0===i),i}(e,t)})},r.FEATURES=void 0;var i=n(e("./is-old-ie")),a=n(e("./assert")),o=32874,s=7936,u=7937,l=7938,c=35724,f={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},d={};function h(e,t){return e.match(/NVIDIA/i)||t.match(/NVIDIA/i)?"NVIDIA":e.match(/INTEL/i)||t.match(/INTEL/i)?"INTEL":e.match(/AMD/i)||t.match(/AMD/i)||e.match(/ATI/i)||t.match(/ATI/i)?"AMD":"UNKNOWN GPU"}r.FEATURES=d,Object.keys(f).forEach(function(e){d[e]=e});var p={}},{"./assert":182,"./is-old-ie":183,"@babel/runtime/helpers/interopRequireDefault":13}],186:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getScratchArrayBuffer=i,r.getScratchArray=function(e,t){var r=i(e.BYTES_PER_ELEMENT*t);return new e(r,0,t)},r.fillArray=function(e){for(var t=e.target,r=e.source,n=e.start,i=void 0===n?0:n,a=e.count,o=r.length,s=(void 0===a?1:a)*o,u=0,l=i;u<o;u++)t[l++]=r[u];for(;u<s;)u<s-u?(t.copyWithin(i+u,i,i+u),u*=2):(t.copyWithin(i+u,i,i+s-u),u=s);return t};var n=null;function i(e){return(!n||n.byteLength<e)&&(n=new ArrayBuffer(e)),n}},{}],187:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}},{}],188:[function(e,t,r){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.isInteger,i=void 0!==r&&r;if(Array.isArray(e)||ArrayBuffer.isView(e))return function(e,t){for(var r=t.maxElts,i=void 0===r?16:r,a=t.size,o=void 0===a?1:a,s="[",u=0;u<e.length&&u<i;++u)u>0&&(s+=",".concat(u%o==0?" ":"")),s+=n(e[u],t);var l=e.length>i?"...":"]";return"".concat(s).concat(l)}(e,t);if(!Number.isFinite(e))return String(e);if(Math.abs(e)<1e-16)return i?"0":"0.";if(i)return e.toFixed(0);if(Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);var a=e.toPrecision(2);return a.indexOf(".0")===a.length-2?a.slice(0,-1):a}Object.defineProperty(r,"__esModule",{value:!0}),r.formatValue=n},{}],189:[function(e,t,r){(function(e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.document=r.global=r.window=r.self=void 0;var t={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document};r.self=t.self||t.window||t.global,r.window=t.window||t.self||t.global,r.global=t.global||t.self||t.window,r.document=t.document||{}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],190:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isBrowser",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"isOldIE",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"promisify",{enumerable:!0,get:function(){return o.promisify}}),Object.defineProperty(r,"uid",{enumerable:!0,get:function(){return s.uid}}),Object.defineProperty(r,"isPowerOfTwo",{enumerable:!0,get:function(){return s.isPowerOfTwo}}),Object.defineProperty(r,"isObjectEmpty",{enumerable:!0,get:function(){return s.isObjectEmpty}}),Object.defineProperty(r,"log",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"formatValue",{enumerable:!0,get:function(){return l.formatValue}}),Object.defineProperty(r,"assert",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"stubRemovedMethods",{enumerable:!0,get:function(){return f.stubRemovedMethods}});var i=n(e("./is-browser")),a=n(e("./is-old-ie")),o=e("./promise-utils"),s=e("./utils"),u=n(e("./log")),l=e("./format-value"),c=n(e("./assert")),f=e("./stub-methods")},{"./assert":187,"./format-value":188,"./is-browser":191,"./is-old-ie":193,"./log":194,"./promise-utils":195,"./stub-methods":196,"./utils":197,"@babel/runtime/helpers/interopRequireDefault":13}],191:[function(e,t,r){(function(t){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.isBrowserMainThread=void 0;var i=n(e("@babel/runtime/helpers/typeof")),a=n(e("./is-electron")),o=!("object"===(void 0===t?"undefined":(0,i.default)(t))&&"[object process]"===String(t)&&!t.browser)||a.default,s=o&&"undefined"!=typeof document;r.isBrowserMainThread=s,r.default=o}).call(this,e("_process"))},{"./is-electron":192,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/typeof":25,_process:308}],192:[function(e,t,r){(function(t){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/typeof"));var a="undefined"!=typeof window&&"object"===(0,i.default)(window.process)&&"renderer"===window.process.type||!(void 0===t||"object"!==(0,i.default)(t.versions)||!Boolean(t.versions.electron))||"object"===("undefined"==typeof navigator?"undefined":(0,i.default)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0;r.default=a}).call(this,e("_process"))},{"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/typeof":25,_process:308}],193:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.window.navigator||{},r=e.userAgent||t.userAgent||"",i=-1!==r.indexOf("MSIE "),a=-1!==r.indexOf("Trident/");return i||a};var n=e("./globals")},{"./globals":189}],194:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=new(e("probe.gl").Log)({id:"luma"}).enable();r.default=n},{"probe.gl":296}],195:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.promisify=function(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return new Promise(function(t,n){e.apply(void 0,r.concat([function(e,r){try{e?n(e):t(r)}catch(e){n(e)}}]))})}}},{}],196:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.stubRemovedMethods=function(e,t,r,n){var a="See luma.gl ".concat(r," Upgrade Guide at http://uber.github.io/luma.gl/#/documentation/overview/upgrade-guide"),o=Object.getPrototypeOf(e);n.forEach(function(e){o.methodName||(o[e]=function(){throw i.default.removed("Calling removed method ".concat(t,".").concat(e,": "),a),new Error(e)})})};var i=n(e("./log"))},{"./log":194,"@babel/runtime/helpers/interopRequireDefault":13}],197:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.uid=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";a[e]=a[e]||1;var t=a[e]++;return"".concat(e,"-").concat(t)},r.isPowerOfTwo=function(e){return(0,i.default)("number"==typeof e,"Input must be a number"),e&&0==(e&e-1)},r.isObjectEmpty=function(e){var t=!0;for(var r in e){t=!1;break}return t};var i=n(e("./assert")),a={}},{"./assert":187,"@babel/runtime/helpers/interopRequireDefault":13}],198:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.canCompileGLGSExtension=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=s[t];if((0,o.default)(n,t),!(0,a.isOldIE)(r))return!0;if(t in l)return l[t];var i="#extension GL_".concat(n[0]," : enable\nvoid main(void) {}"),u=e.createShader(35633);e.shaderSource(u,i),e.compileShader(u);var c=e.getShaderParameter(u,35713);return e.deleteShader(u),l[t]=c,c},r.hasFeature=function(e,t){return f(e,t)},r.hasFeatures=f,r.getFeatures=function(e){if(e.luma=e.luma||{},!e.luma.caps)for(var t in e.luma.caps={},e.luma.caps.webgl2=(0,i.isWebGL2)(e),s)e.luma.caps[t]=c(e,t);return e.luma.caps},r.TEST_EXPORTS=r.FEATURES=void 0;var i=e("../webgl-utils"),a=e("../utils"),o=n(e("../utils/assert")),s={VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:["WEBGL_color_buffer_float","EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:[!1,"EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},u={};r.FEATURES=u,Object.keys(s).forEach(function(e){u[e]=e});var l={};function c(e,t){var r=s[t];(0,o.default)(r,t);var n=(0,i.isWebGL2)(e)&&r[1]||r[0],a="string"==typeof n?Boolean(e.getExtension(n)):n;return(0,o.default)(!1===a||!0===a),a}function f(e,t){return(t=Array.isArray(t)?t:[t]).every(function(t){return c(e,t)})}r.TEST_EXPORTS={WEBGL_FEATURES:s}},{"../utils":190,"../utils/assert":187,"../webgl-utils":218,"@babel/runtime/helpers/interopRequireDefault":13}],199:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.getContextLimits=u,r.getGLContextInfo=l,r.getGLContextInfo2=d,r.getContextInfo=function(e){var t=u(e),r=l(e);return{vendor:r[c]||r[7936],renderer:r[f]||r[7937],version:r[7938],shadingLanguageVersion:r[35724],info:r,limits:t,webgl1MinLimits:e.luma.webgl1MinLimits,webgl2MinLimits:e.luma.webgl2MinLimits}},r.glGetDebugInfo=function(e){return d(e)},r.TEST_EXPORTS=void 0;var i,a=n(e("@babel/runtime/helpers/defineProperty")),o=e("../webgl-utils"),s=((0,a.default)(i={},33902,{gl1:new Float32Array([1,1])}),(0,a.default)(i,33901,{gl1:new Float32Array([1,1])}),(0,a.default)(i,3379,{gl1:64,gl2:2048}),(0,a.default)(i,34076,{gl1:16}),(0,a.default)(i,34930,{gl1:8}),(0,a.default)(i,35661,{gl1:8}),(0,a.default)(i,35660,{gl1:0}),(0,a.default)(i,34024,{gl1:1}),(0,a.default)(i,36348,{gl1:8}),(0,a.default)(i,34921,{gl1:8}),(0,a.default)(i,36347,{gl1:128}),(0,a.default)(i,36349,{gl1:16}),(0,a.default)(i,3386,{gl1:new Int32Array([0,0])}),(0,a.default)(i,32883,{gl1:0,gl2:256}),(0,a.default)(i,35071,{gl1:0,gl2:256}),(0,a.default)(i,37447,{gl1:0,gl2:0}),(0,a.default)(i,36063,{gl1:0,gl2:4}),(0,a.default)(i,35379,{gl1:0,gl2:0}),(0,a.default)(i,35374,{gl1:0,gl2:0}),(0,a.default)(i,35377,{gl1:0,gl2:0}),(0,a.default)(i,34852,{gl1:0,gl2:4}),(0,a.default)(i,36203,{gl1:0,gl2:0}),(0,a.default)(i,33001,{gl1:0,gl2:0}),(0,a.default)(i,33e3,{gl1:0,gl2:0}),(0,a.default)(i,37157,{gl1:0,gl2:0}),(0,a.default)(i,35373,{gl1:0,gl2:0}),(0,a.default)(i,35657,{gl1:0,gl2:0}),(0,a.default)(i,36183,{gl1:0,gl2:0}),(0,a.default)(i,37137,{gl1:0,gl2:0}),(0,a.default)(i,34045,{gl1:0,gl2:0}),(0,a.default)(i,35978,{gl1:0,gl2:0}),(0,a.default)(i,35979,{gl1:0,gl2:0}),(0,a.default)(i,35968,{gl1:0,gl2:0}),(0,a.default)(i,35376,{gl1:0,gl2:0}),(0,a.default)(i,35375,{gl1:0,gl2:0}),(0,a.default)(i,35659,{gl1:0,gl2:0}),(0,a.default)(i,37154,{gl1:0,gl2:0}),(0,a.default)(i,35371,{gl1:0,gl2:0}),(0,a.default)(i,35658,{gl1:0,gl2:0}),(0,a.default)(i,35076,{gl1:0,gl2:-8,negative:!0}),(0,a.default)(i,35077,{gl1:0,gl2:7}),(0,a.default)(i,35380,{gl1:0,gl2:0}),i);function u(e){if(e.luma=e.luma||{},!e.luma.limits){e.luma.limits={},e.luma.webgl1MinLimits={},e.luma.webgl2MinLimits={};var t=(0,o.isWebGL2)(e);for(var r in s){var n=s[r],i=n.gl1,a="gl2"in n?n.gl2:n.gl1,u=t?a:i,l="gl2"in n&&!t||"extension"in n&&!e.getExtension(n.extension)?u:e.getParameter(r);e.luma.limits[r]=l,e.luma.webgl1MinLimits[r]=i,e.luma.webgl2MinLimits[r]=a}}return e.luma.limits}function l(e){if(e.luma=e.luma||{},!e.luma.info){var t,r=e.getExtension("WEBGL_debug_renderer_info");e.luma.info=((0,a.default)(t={},7936,e.getParameter(7936)),(0,a.default)(t,7937,e.getParameter(7937)),(0,a.default)(t,37445,e.getParameter(r&&r.UNMASKED_VENDOR_WEBGL||7936)),(0,a.default)(t,37446,e.getParameter(r&&r.UNMASKED_RENDERER_WEBGL||7937)),(0,a.default)(t,7938,e.getParameter(7938)),(0,a.default)(t,35724,e.getParameter(35724)),t)}return e.luma.info}var c=37445,f=37446;function d(e){var t=e.getParameter(7936),r=e.getParameter(7937),n=e.getExtension("WEBGL_debug_renderer_info");return{vendor:n&&e.getParameter(n.UNMASKED_VENDOR_WEBGL||7936)||t,renderer:n&&e.getParameter(n.UNMASKED_RENDERER_WEBGL||7937)||r,vendorMasked:t,rendererMasked:r,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}r.TEST_EXPORTS={WEBGL_LIMITS:s}},{"../webgl-utils":218,"@babel/runtime/helpers/defineProperty":9,"@babel/runtime/helpers/interopRequireDefault":13}],200:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.setParameters=d,r.withParameters=function(e,t,r){if((0,u.isObjectEmpty)(t))return r(e);var n,i=t.nocatch,a=void 0===i||i;if((0,l.default)(!t.frameBuffer),(0,o.pushContextState)(e),d(e,t),a)n=r(e),(0,o.popContextState)(e);else try{n=r(e)}finally{(0,o.popContextState)(e)}return n},Object.defineProperty(r,"getParameter",{enumerable:!0,get:function(){return s.getParameter}}),Object.defineProperty(r,"getParameters",{enumerable:!0,get:function(){return s.getParameters}}),Object.defineProperty(r,"setParameter",{enumerable:!0,get:function(){return s.setParameter}}),Object.defineProperty(r,"resetParameters",{enumerable:!0,get:function(){return s.resetParameters}}),Object.defineProperty(r,"getModifiedParameters",{enumerable:!0,get:function(){return s.getModifiedParameters}}),r.LUMA_SETTERS=void 0;var i=n(e("@babel/runtime/helpers/slicedToArray")),a=n(e("@babel/runtime/helpers/toConsumableArray")),o=e("../webgl-context/track-context-state"),s=e("../webgl-context/set-parameters"),u=e("../utils"),l=n(e("../utils/assert")),c={framebuffer:function(e,t){return e.bindFramebuffer(36160,t&&"handle"in t?t.handle:t)},blend:function(e,t){return t?e.enable(3042):e.disable(3042)},blendColor:function(e,t){return e.blendColor.apply(e,(0,a.default)(t))},blendEquation:function(e,t){t=f(t)?t:[t,t],e.blendEquationSeparate.apply(e,(0,a.default)(t))},blendFunc:function(e,t){t=f(t)&&2===t.length?(0,a.default)(t).concat((0,a.default)(t)):t,e.blendFuncSeparate.apply(e,(0,a.default)(t))},clearColor:function(e,t){return e.clearColor.apply(e,(0,a.default)(t))},clearDepth:function(e,t){return e.clearDepth(t)},clearStencil:function(e,t){return e.clearStencil(t)},colorMask:function(e,t){return e.colorMask.apply(e,(0,a.default)(t))},cull:function(e,t){return t?e.enable(2884):e.disable(2884)},cullFace:function(e,t){return e.cullFace(t)},depthTest:function(e,t){return t?e.enable(2929):e.disable(2929)},depthFunc:function(e,t){return e.depthFunc(t)},depthMask:function(e,t){return e.depthMask(t)},depthRange:function(e,t){return e.depthRange.apply(e,(0,a.default)(t))},dither:function(e,t){return t?e.enable(3024):e.disable(3024)},derivativeHint:function(e,t){e.hint(35723,t)},frontFace:function(e,t){return e.frontFace(t)},mipmapHint:function(e,t){return e.hint(33170,t)},lineWidth:function(e,t){return e.lineWidth(t)},polygonOffsetFill:function(e,t){return t?e.enable(32823):e.disable(32823)},polygonOffset:function(e,t){return e.polygonOffset.apply(e,(0,a.default)(t))},sampleCoverage:function(e,t){return e.sampleCoverage.apply(e,(0,a.default)(t))},scissorTest:function(e,t){return t?e.enable(3089):e.disable(3089)},scissor:function(e,t){return e.scissor.apply(e,(0,a.default)(t))},stencilTest:function(e,t){return t?e.enable(2960):e.disable(2960)},stencilMask:function(e,t){t=f(t)?t:[t,t];var r=(0,i.default)(t,2),n=r[1];e.stencilMaskSeparate(1028,r[0]),e.stencilMaskSeparate(1029,n)},stencilFunc:function(e,t){t=f(t)&&3===t.length?(0,a.default)(t).concat((0,a.default)(t)):t;var r=(0,i.default)(t,6),n=r[3],o=r[4],s=r[5];e.stencilFuncSeparate(1028,r[0],r[1],r[2]),e.stencilFuncSeparate(1029,n,o,s)},stencilOp:function(e,t){t=f(t)&&3===t.length?(0,a.default)(t).concat((0,a.default)(t)):t;var r=(0,i.default)(t,6),n=r[3],o=r[4],s=r[5];e.stencilOpSeparate(1028,r[0],r[1],r[2]),e.stencilOpSeparate(1029,n,o,s)},viewport:function(e,t){return e.viewport.apply(e,(0,a.default)(t))}};function f(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function d(e,t){for(var r in(0,s.setParameters)(e,t),t){var n=c[r];n&&n(e,t[r],r)}}r.LUMA_SETTERS=c},{"../utils":190,"../utils/assert":187,"../webgl-context/set-parameters":207,"../webgl-context/track-context-state":208,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/slicedToArray":22,"@babel/runtime/helpers/toConsumableArray":24}],201:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.isWebGL=v,r.isWebGL2=y,r.assertWebGLContext=function(e){(0,h.default)(v(e),b)},r.assertWebGL2Context=function(e){(0,h.default)(y(e),g)},r.setContextDefaults=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(_,{width:1,height:1},e)},r.createGLContext=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(t=Object.assign({},_,t),t.canvas),n=t.width,i=t.height,f=t.throwOnError,h=t.manageState,p=t.debug;function m(e){if(f)throw new Error(e);return null}if(d.isBrowser){var b=(0,o.getCanvas)({canvas:r,width:n,height:i,onError:m});e=(0,s.createBrowserContext)({canvas:b,opts:t})}else e=(0,a.createHeadlessContext)({width:n,height:i,opts:t,onError:m});if(!e)return null;h&&(0,u.default)(e,{copyState:!1,log:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return d.log.log.apply(d.log,[1].concat(t))()}});d.isBrowser&&p&&(e=(0,l.makeDebugContext)(e,{debug:p}),d.log.priority=Math.max(d.log.priority,1));return function(e){var t=y(e)?"WebGL2":"WebGL1",r=(0,c.glGetDebugInfo)(e),n=r?"(".concat(r.vendor,",").concat(r.renderer,")"):"",i=e.debug?" debug":"";d.log.once(0,"".concat(t).concat(i," context ").concat(n))()}(e),e},r.destroyGLContext=function(e){var t=e.getExtension("STACKGL_destroy_context");t&&t.destroy()},r.resizeGLContext=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.canvas){var r=t.useDevicePixels&&window.devicePixelRatio||1,n="width"in t?t.width:e.canvas.clientWidth,i="height"in t?t.height:e.canvas.clientHeight;return e.canvas.width=n*r,void(e.canvas.height=i*r)}var a=e.getExtension("STACKGL_resize_drawingbuffer");a&&"width"in t&&"height"in t&&a.resize(t.width,t.height)},r.pollGLContext=function(e){f.default.poll(e)},r.ERR_WEBGL2=r.ERR_WEBGL=r.ERR_CONTEXT=void 0;var i=e("../webgl-utils"),a=e("./create-headless-context"),o=e("./create-canvas"),s=e("./create-browser-context"),u=n(e("./track-context-state")),l=e("./debug-context"),c=e("./context-limits"),f=n(e("../webgl-utils/query-manager")),d=e("../utils"),h=n(e("../utils/assert")),p=34962,m=32874,b="Invalid WebGLRenderingContext";r.ERR_CONTEXT=b,r.ERR_WEBGL=b;var g="Requires WebGL2";function v(e){return Boolean(e&&(e instanceof i.WebGLRenderingContext||e.ARRAY_BUFFER===p))}function y(e){return Boolean(e&&(e instanceof i.WebGL2RenderingContext||e.TEXTURE_BINDING_3D===m))}r.ERR_WEBGL2=g;var _={webgl2:!0,webgl1:!0,throwOnFailure:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600}},{"../utils":190,"../utils/assert":187,"../webgl-utils":218,"../webgl-utils/query-manager":219,"./context-limits":199,"./create-browser-context":202,"./create-canvas":203,"./create-headless-context":204,"./debug-context":205,"./track-context-state":208,"@babel/runtime/helpers/interopRequireDefault":13}],202:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createBrowserContext=function(e){var t=e.canvas,r=e.opts,n=void 0===r?{}:r,i=e.onError,a=void 0===i?function(e){return null}:i;function o(e){a("WebGL context: ".concat(e.statusMessage||"Unknown error"))}t.addEventListener("webglcontextcreationerror",o,!1);var s=n.webgl1,u=void 0===s||s,l=n.webgl2,c=void 0===l||l,f=null;c&&(f=(f=f||t.getContext("webgl2",n))||t.getContext("experimental-webgl2",n));u&&(f=(f=f||t.getContext("webgl",n))||t.getContext("experimental-webgl",n));if(t.removeEventListener("webglcontextcreationerror",o,!1),!f)return a("Failed to create ".concat(c&&!u?"WebGL2":"WebGL"," context"));return f}},{}],203:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getPageLoadPromise=function(){n||(n=i?new Promise(function(e,t){if(i&&"complete"===document.readyState)return a=!0,void e(document);window.onload=function(){a=!0,e(document)}}):Promise.resolve({}));return n},r.createCanvas=o,r.getCanvas=function(e){var t,r=e.canvas,n=e.width,i=e.height,s=e.onError,u=void 0===s?function(){}:s;"string"==typeof r?(a||u("createGLContext called on canvas '".concat(r,"' before page was loaded")),t=document.getElementById(r)):t=r||o({id:"lumagl-canvas",width:n,height:i,onError:u});return t};var n,i=e("../utils").isBrowser&&"undefined"!=typeof document,a=i&&"complete"===document.readyState;function o(e){var t=e.width,r=void 0===t?800:t,n=e.height,i=void 0===n?600:n,a=e.id,o=void 0===a?"gl-canvas":a,s=e.insert,u=void 0===s||s,l=document.createElement("canvas");if(l.id=o,l.style.width=Number.isFinite(r)?"".concat(r,"px"):"100%",l.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",u){var c=document.body;c.insertBefore(l,c.firstChild)}return l}},{"../utils":190}],204:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createHeadlessContext=function(e){var t=e.width,r=e.height,o=e.opts,s=e.onError,u=o.webgl1;if(o.webgl2&&!u)return s("headless-gl does not support WebGL2");if(!n.headlessGL)return s(i);var l=(0,n.headlessGL)(t,r,o);if(!l)return s(a);return l};var n=e("../webgl-utils/webgl-types"),i="Failed to create WebGL context in Node.js, headless gl not available",a="Failed to create WebGL context in Node.js, headless gl returned null"},{"../webgl-utils/webgl-types":225}],205:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.enableDebug=function(e){o.log.debug=e},r.makeDebugContext=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).debug,r=void 0===t||t;if(null===e)return null;return r?l(e):u(e)},r.getRealContext=u,r.getDebugContext=l;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=e("../utils/globals"),o=e("../utils");function s(e){return e.luma=e.luma||{},e.luma}function u(e){if(null===e)return null;var t=s(e);return t.realContext?t.realContext:e}function l(e){if(null===e)return null;if(!a.global.WebGLDebug)return o.log.warn('WebGL debug mode not activated. import "luma.gl/debug" to enable.')(),e;var t=s(e);if(t.realContext)return e;if(t.debugContext)return t.debugContext;var r=a.global.WebGLDebug.makeDebugContext(e,f,d);return Object.assign(function e(){(0,i.default)(this,e)}.prototype,r),t.debugContext=r,r.debug=!0,r.gl=e,o.log.info("debug context actived."),r}function c(e,t){var r=a.global.WebGLDebug.glFunctionArgsToString(e,t);return r="".concat(r.slice(0,100)).concat(r.length>100?"...":""),"gl.".concat(e,"(").concat(r,")")}function f(e,t,r){var n=a.global.WebGLDebug.glEnumToString(e),i=a.global.WebGLDebug.glFunctionArgsToString(t,r),s="".concat(n," in gl.").concat(t,"(").concat(i,")");if(o.log.throw)throw new Error(s);o.log.error(s)()}function d(e,t){var r;if(o.log.priority>=4&&(r=c(e,t),o.log.log(4,r)()),o.log.break){r=r||c(e,t);o.log.break&&o.log.break.every(function(e){return-1!==r.indexOf(e)})}var n=!0,i=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(n=(s=u.next()).done);n=!0){if(void 0===s.value){if(r=r||c(e,t),o.log.throw)throw new Error("Undefined argument: ".concat(r));o.log.error("Undefined argument: ".concat(r))}}}catch(e){i=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(i)throw a}}}},{"../utils":190,"../utils/globals":189,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/interopRequireDefault":13}],206:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"createGLContext",{enumerable:!0,get:function(){return i.createGLContext}}),Object.defineProperty(r,"destroyGLContext",{enumerable:!0,get:function(){return i.destroyGLContext}}),Object.defineProperty(r,"resizeGLContext",{enumerable:!0,get:function(){return i.resizeGLContext}}),Object.defineProperty(r,"pollGLContext",{enumerable:!0,get:function(){return i.pollGLContext}}),Object.defineProperty(r,"withParameters",{enumerable:!0,get:function(){return a.withParameters}}),Object.defineProperty(r,"resetParameters",{enumerable:!0,get:function(){return a.resetParameters}}),Object.defineProperty(r,"getContextInfo",{enumerable:!0,get:function(){return o.getContextInfo}}),Object.defineProperty(r,"getPageLoadPromise",{enumerable:!0,get:function(){return s.getPageLoadPromise}}),Object.defineProperty(r,"createCanvas",{enumerable:!0,get:function(){return s.createCanvas}}),Object.defineProperty(r,"getCanvas",{enumerable:!0,get:function(){return s.getCanvas}}),Object.defineProperty(r,"createHeadlessContext",{enumerable:!0,get:function(){return u.createHeadlessContext}}),Object.defineProperty(r,"createBrowserContext",{enumerable:!0,get:function(){return l.createBrowserContext}}),Object.defineProperty(r,"trackContextState",{enumerable:!0,get:function(){return c.default}});var i=e("./context"),a=e("./context-state"),o=e("./context-limits"),s=e("./create-canvas"),u=e("./create-headless-context"),l=e("./create-browser-context"),c=n(e("./track-context-state"))},{"./context":201,"./context-limits":199,"./context-state":200,"./create-browser-context":202,"./create-canvas":203,"./create-headless-context":204,"./track-context-state":208,"@babel/runtime/helpers/interopRequireDefault":13}],207:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.setParameter=function(e,t,r){var n=v[t],i=n?n(e,Number(t)):e.getParameter(Number(t)),a=m[t];return(0,c.default)("function"==typeof a),a(e,r,Number(t)),i},r.setParameters=_,r.getParameter=x,r.getParameters=w,r.getDefaultParameters=E,r.resetParameters=function(e){_(e,E(e))},r.getModifiedParameters=function(e){var t=w(f),r={};for(var n in f)y(t[n],f[n])||(r[n]=t[n]);return r},r.GL_PARAMETER_GETTERS=r.GL_PARAMETER_SETTERS=r.GL_PARAMETER_DEFAULTS=void 0;var i,a,o,s=n(e("@babel/runtime/helpers/toConsumableArray")),u=n(e("@babel/runtime/helpers/defineProperty")),l=e("../webgl-utils"),c=n(e("../utils/assert")),f=((0,u.default)(i={},3042,!1),(0,u.default)(i,32773,new Float32Array([0,0,0,0])),(0,u.default)(i,32777,32774),(0,u.default)(i,34877,32774),(0,u.default)(i,32969,1),(0,u.default)(i,32968,0),(0,u.default)(i,32971,1),(0,u.default)(i,32970,0),(0,u.default)(i,3106,new Float32Array([0,0,0,0])),(0,u.default)(i,3107,[!0,!0,!0,!0]),(0,u.default)(i,2884,!1),(0,u.default)(i,2885,1029),(0,u.default)(i,2929,!1),(0,u.default)(i,2931,1),(0,u.default)(i,2932,513),(0,u.default)(i,2928,new Float32Array([0,1])),(0,u.default)(i,2930,!0),(0,u.default)(i,3024,!0),(0,u.default)(i,36006,null),(0,u.default)(i,2886,2305),(0,u.default)(i,33170,4352),(0,u.default)(i,2849,1),(0,u.default)(i,32823,!1),(0,u.default)(i,32824,0),(0,u.default)(i,10752,0),(0,u.default)(i,32938,1),(0,u.default)(i,32939,!1),(0,u.default)(i,3089,!1),(0,u.default)(i,3088,new Int32Array([0,0,1024,1024])),(0,u.default)(i,2960,!1),(0,u.default)(i,2961,0),(0,u.default)(i,2968,4294967295),(0,u.default)(i,36005,4294967295),(0,u.default)(i,2962,519),(0,u.default)(i,2967,0),(0,u.default)(i,2963,4294967295),(0,u.default)(i,34816,519),(0,u.default)(i,36003,0),(0,u.default)(i,36004,4294967295),(0,u.default)(i,2964,7680),(0,u.default)(i,2965,7680),(0,u.default)(i,2966,7680),(0,u.default)(i,34817,7680),(0,u.default)(i,34818,7680),(0,u.default)(i,34819,7680),(0,u.default)(i,2978,new Int32Array([0,0,1024,1024])),(0,u.default)(i,3333,4),(0,u.default)(i,3317,4),(0,u.default)(i,37440,!1),(0,u.default)(i,37441,!1),(0,u.default)(i,37443,37444),(0,u.default)(i,35723,4352),(0,u.default)(i,36010,null),(0,u.default)(i,35977,!1),(0,u.default)(i,3330,0),(0,u.default)(i,3332,0),(0,u.default)(i,3331,0),(0,u.default)(i,3314,0),(0,u.default)(i,32878,0),(0,u.default)(i,3316,0),(0,u.default)(i,3315,0),(0,u.default)(i,32877,0),i);r.GL_PARAMETER_DEFAULTS=f;var d=function(e,t,r){return t?e.enable(r):e.disable(r)},h=function(e,t,r){return e.hint(r,t)},p=function(e,t,r){return e.pixelStorei(r,t)},m=((0,u.default)(a={},3042,d),(0,u.default)(a,32773,function(e,t){return e.blendColor.apply(e,(0,s.default)(t))}),(0,u.default)(a,32777,"blendEquation"),(0,u.default)(a,34877,"blendEquation"),(0,u.default)(a,32969,"blendFunc"),(0,u.default)(a,32968,"blendFunc"),(0,u.default)(a,32971,"blendFunc"),(0,u.default)(a,32970,"blendFunc"),(0,u.default)(a,3106,function(e,t){return e.clearColor.apply(e,(0,s.default)(t))}),(0,u.default)(a,3107,function(e,t){return e.colorMask.apply(e,(0,s.default)(t))}),(0,u.default)(a,2884,d),(0,u.default)(a,2885,function(e,t){return e.cullFace(t)}),(0,u.default)(a,2929,d),(0,u.default)(a,2931,function(e,t){return e.clearDepth(t)}),(0,u.default)(a,2932,function(e,t){return e.depthFunc(t)}),(0,u.default)(a,2928,function(e,t){return e.depthRange.apply(e,(0,s.default)(t))}),(0,u.default)(a,2930,function(e,t){return e.depthMask(t)}),(0,u.default)(a,3024,d),(0,u.default)(a,35723,h),(0,u.default)(a,36006,function(e,t){var r=(0,l.isWebGL2)(e)?36009:36160;return e.bindFramebuffer(r,t)}),(0,u.default)(a,2886,function(e,t){return e.frontFace(t)}),(0,u.default)(a,33170,h),(0,u.default)(a,2849,function(e,t){return e.lineWidth(t)}),(0,u.default)(a,32823,d),(0,u.default)(a,32824,"polygonOffset"),(0,u.default)(a,10752,"polygonOffset"),(0,u.default)(a,35977,d),(0,u.default)(a,32938,"sampleCoverage"),(0,u.default)(a,32939,"sampleCoverage"),(0,u.default)(a,3089,d),(0,u.default)(a,3088,function(e,t){return e.scissor.apply(e,(0,s.default)(t))}),(0,u.default)(a,2960,d),(0,u.default)(a,2961,function(e,t){return e.clearStencil(t)}),(0,u.default)(a,2968,function(e,t){return e.stencilMaskSeparate(1028,t)}),(0,u.default)(a,36005,function(e,t){return e.stencilMaskSeparate(1029,t)}),(0,u.default)(a,2962,"stencilFuncFront"),(0,u.default)(a,2967,"stencilFuncFront"),(0,u.default)(a,2963,"stencilFuncFront"),(0,u.default)(a,34816,"stencilFuncBack"),(0,u.default)(a,36003,"stencilFuncBack"),(0,u.default)(a,36004,"stencilFuncBack"),(0,u.default)(a,2964,"stencilOpFront"),(0,u.default)(a,2965,"stencilOpFront"),(0,u.default)(a,2966,"stencilOpFront"),(0,u.default)(a,34817,"stencilOpBack"),(0,u.default)(a,34818,"stencilOpBack"),(0,u.default)(a,34819,"stencilOpBack"),(0,u.default)(a,2978,function(e,t){return e.viewport.apply(e,(0,s.default)(t))}),(0,u.default)(a,3333,p),(0,u.default)(a,3317,p),(0,u.default)(a,37440,p),(0,u.default)(a,37441,p),(0,u.default)(a,37443,p),(0,u.default)(a,3330,p),(0,u.default)(a,3332,p),(0,u.default)(a,3331,p),(0,u.default)(a,36010,function(e,t){return e.bindFramebuffer(36008,t)}),(0,u.default)(a,3314,p),(0,u.default)(a,32878,p),(0,u.default)(a,3316,p),(0,u.default)(a,3315,p),(0,u.default)(a,32877,p),a);r.GL_PARAMETER_SETTERS=m;var b={blendEquation:function(e,t){return e.blendEquationSeparate(t[32777],t[34877])},blendFunc:function(e,t){return e.blendFuncSeparate(t[32969],t[32968],t[32971],t[32970])},polygonOffset:function(e,t){return e.polygonOffset(t[32824],t[10752])},sampleCoverage:function(e,t){return e.sampleCoverage(t[32938],t[32939])},stencilFuncFront:function(e,t){return e.stencilFuncSeparate(1028,t[2962],t[2967],t[2963])},stencilFuncBack:function(e,t){return e.stencilFuncSeparate(1029,t[34816],t[36003],t[36004])},stencilOpFront:function(e,t){return e.stencilOpSeparate(1028,t[2964],t[2965],t[2966])},stencilOpBack:function(e,t){return e.stencilOpSeparate(1029,t[34817],t[34818],t[34819])}},g=function(e,t){return e.isEnabled(t)},v=((0,u.default)(o={},3042,g),(0,u.default)(o,2884,g),(0,u.default)(o,2929,g),(0,u.default)(o,3024,g),(0,u.default)(o,32823,g),(0,u.default)(o,32926,g),(0,u.default)(o,32928,g),(0,u.default)(o,3089,g),(0,u.default)(o,2960,g),(0,u.default)(o,35977,g),o);r.GL_PARAMETER_GETTERS=v;var y=function(e,t){if(e===t)return!0;var r=Array.isArray(e)||ArrayBuffer.isView(e),n=Array.isArray(t)||ArrayBuffer.isView(t);if(r&&n&&e.length===t.length){for(var i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}return!1};function _(e,t){var r={};for(var n in t){var i=Number(n),a=m[n];a&&("string"==typeof a?r[a]=!0:a(e,t[n],i))}var o=e.state&&e.state.cache;if(o){var s=Object.assign({},o,t);for(var u in r){(0,b[u])(e,s)}}}function x(e,t){var r=v[t];return r?r(e,Number(t)):e.getParameter(Number(t))}function w(e,t){t=t||f;var r=Array.isArray(t)?t:Object.keys(t),n={},i=!0,a=!1,o=void 0;try{for(var s,u=r[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;n[l]=x(e,l)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return n}function E(e){return Object.assign({},f,{})}},{"../utils/assert":187,"../webgl-utils":218,"@babel/runtime/helpers/defineProperty":9,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/toConsumableArray":24}],208:[function(e,t,r){(function(t){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=p,r.pushContextState=function(e){e.state||p(e,{copyState:!1});e.state.push()},r.popContextState=function(e){(0,u.default)(e.state),e.state.pop()},r.GL_STATE_SETTERS=r.deepEqual=r.clone=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/defineProperty")),s=e("./set-parameters"),u=n(e("../utils/assert"));r.clone=function(e){return Array.isArray(e)||ArrayBuffer.isView(e)?e.slice():e};var l=function(e,t){var r=Array.isArray(e)||ArrayBuffer.isView(e),n=Array.isArray(t)||ArrayBuffer.isView(t);if(r&&n&&e.length===t.length){for(var i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}return e===t};r.deepEqual=l;var c={enable:function(e,t){return e((0,o.default)({},t,!0))},disable:function(e,t){return e((0,o.default)({},t,!1))},pixelStorei:function(e,t,r){return e((0,o.default)({},t,r))},hint:function(e,t,r){return e((0,o.default)({},t,r))},bindFramebuffer:function(e,t,r){var n;switch(t){case 36160:return e(((0,o.default)(n={},36006,r),(0,o.default)(n,36010,r),n));case 36009:return e((0,o.default)({},36006,r));case 36008:return e((0,o.default)({},36010,r));default:return null}},blendColor:function(e,t,r,n,i){return e((0,o.default)({},32773,new Float32Array([t,r,n,i])))},blendEquation:function(e,t){var r;return e(((0,o.default)(r={},32777,t),(0,o.default)(r,34877,t),r))},blendEquationSeparate:function(e,t,r){var n;return e(((0,o.default)(n={},32777,t),(0,o.default)(n,34877,r),n))},blendFunc:function(e,t,r){var n;return e(((0,o.default)(n={},32969,t),(0,o.default)(n,32968,r),(0,o.default)(n,32971,t),(0,o.default)(n,32970,r),n))},blendFuncSeparate:function(e,t,r,n,i){var a;return e(((0,o.default)(a={},32969,t),(0,o.default)(a,32968,r),(0,o.default)(a,32971,n),(0,o.default)(a,32970,i),a))},clearColor:function(e,t,r,n,i){return e((0,o.default)({},3106,new Float32Array([t,r,n,i])))},clearDepth:function(e,t){return e((0,o.default)({},2931,t))},clearStencil:function(e,t){return e((0,o.default)({},2961,t))},colorMask:function(e,t,r,n,i){return e((0,o.default)({},3107,[t,r,n,i]))},cullFace:function(e,t){return e((0,o.default)({},2885,t))},depthFunc:function(e,t){return e((0,o.default)({},2932,t))},depthRange:function(e,t,r){return e((0,o.default)({},2928,new Float32Array([t,r])))},depthMask:function(e,t){return e((0,o.default)({},2930,t))},frontFace:function(e,t){return e((0,o.default)({},2886,t))},lineWidth:function(e,t){return e((0,o.default)({},2849,t))},polygonOffset:function(e,t,r){var n;return e(((0,o.default)(n={},32824,t),(0,o.default)(n,10752,r),n))},sampleCoverage:function(e,t,r){var n;return e(((0,o.default)(n={},32938,t),(0,o.default)(n,32939,r),n))},scissor:function(e,t,r,n,i){return e((0,o.default)({},3088,new Int32Array([t,r,n,i])))},stencilMask:function(e,t){var r;return e(((0,o.default)(r={},2968,t),(0,o.default)(r,36005,t),r))},stencilMaskSeparate:function(e,t,r){return e((0,o.default)({},1028===t?2968:36005,r))},stencilFunc:function(e,t,r,n){var i;return e(((0,o.default)(i={},2962,t),(0,o.default)(i,2967,r),(0,o.default)(i,2963,n),(0,o.default)(i,34816,t),(0,o.default)(i,36003,r),(0,o.default)(i,36004,n),i))},stencilFuncSeparate:function(e,t,r,n,i){var a;return e(((0,o.default)(a={},1028===t?2962:34816,r),(0,o.default)(a,1028===t?2967:36003,n),(0,o.default)(a,1028===t?2963:36004,i),a))},stencilOp:function(e,t,r,n){var i;return e(((0,o.default)(i={},2964,t),(0,o.default)(i,2965,r),(0,o.default)(i,2966,n),(0,o.default)(i,34817,t),(0,o.default)(i,34818,r),(0,o.default)(i,34819,n),i))},stencilOpSeparate:function(e,t,r,n,i){var a;return e(((0,o.default)(a={},1028===t?2964:34817,r),(0,o.default)(a,1028===t?2965:34818,n),(0,o.default)(a,1028===t?2966:34819,i),a))},viewport:function(e,t,r,n,i){return e((0,o.default)({},2978,new Int32Array([t,r,n,i])))}};function f(e,t){var r=e[t].bind(e);e[t]=function(){var t=arguments.length<=0?void 0:arguments[0];return t in e.state.cache||(e.state.cache[t]=r.apply(void 0,arguments)),e.state.enable?e.state.cache[t]:r.apply(void 0,arguments)},Object.defineProperty(e[t],"name",{value:"".concat(t,"-from-cache"),configurable:!1})}function d(e,t,r){var n=e[t].bind(e);e[t]=function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var s,u=r.apply(void 0,[e.state._updateCache].concat(a)),l=u.oldValue;u.valueChanged&&((s=e.state).log.apply(s,["gl.".concat(t)].concat(a)),n.apply(void 0,a));return l},Object.defineProperty(e[t],"name",{value:"".concat(t,"-to-cache"),configurable:!1})}r.GL_STATE_SETTERS=c;var h=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.copyState,a=void 0!==n&&n,o=r.log,u=void 0===o?function(){}:o;(0,i.default)(this,e),this.gl=t,this.stateStack=[],this.enable=!0,this.cache=a?(0,s.getParameters)(t):Object.assign({},s.GL_PARAMETER_DEFAULTS),this.log=u,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return(0,a.default)(e,[{key:"push",value:function(){this.stateStack.push({})}},{key:"pop",value:function(){(0,u.default)(this.stateStack.length>0),(0,s.setParameters)(this.gl,this.stateStack[this.stateStack.length-1],this.cache),this.stateStack.pop()}},{key:"_updateCache",value:function(e){var t,r=!1,n=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var i in e)(0,u.default)(void 0!==i),l(e[i],this.cache[i])||(r=!0,t=this.cache[i],!n||i in n||(n[i]=this.cache[i]),this.cache[i]=e[i]);return{valueChanged:r,oldValue:t}}}]),e}();function p(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.enable,i=void 0===n||n,a=r.copyState;if((0,u.default)(void 0!==a),!e.state){var o=void 0!==t?t:window;for(var s in o.polyfillContext&&o.polyfillContext(e),e.state=new h(e,{copyState:a,enable:i}),c){d(e,s,c[s])}f(e,"getParameter"),f(e,"isEnabled")}return e.state.enable=i,e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/assert":187,"./set-parameters":207,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/defineProperty":9,"@babel/runtime/helpers/interopRequireDefault":13}],209:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.installParameterDefinitions=function(){},r.TEXTURE_PARAMETERS=r.SAMPLER_PARAMETERS=r.RENDERBUFFER_PARAMETERS=r.PROGRAM_PARAMETERS=r.FRAMEBUFFER_STATUS=r.FRAMEBUFFER_ATTACHMENT_PARAMETERS=r.FENCE_SYNC_PARAMETERS=r.BUFFER_PARAMETERS=r.GLboolean=r.GLuint=r.GLint=r.GLfloat=r.GLenum=void 0;var i,a,o,s,u,l,c=n(e("@babel/runtime/helpers/defineProperty"));r.GLenum="GLenum";r.GLfloat="GLfloat";r.GLint="GLint";r.GLuint="GLint";r.GLboolean="GLboolean";var f=((0,c.default)(i={},34660,{webgl1:0}),(0,c.default)(i,34661,{webgl1:0}),i);r.BUFFER_PARAMETERS=f;r.FENCE_SYNC_PARAMETERS=[37138,37140,37139,37141];r.FRAMEBUFFER_ATTACHMENT_PARAMETERS=[36049,36048,36051,36050,33296,36052,33298,33299,33300,33301,33302,33303,33297];var d=((0,c.default)(a={},36053,"Success. Framebuffer is correctly set up"),(0,c.default)(a,36054,"Framebuffer attachment types mismatched or some attachment point not attachment complete"),(0,c.default)(a,36055,"Framebuffer has no attachment"),(0,c.default)(a,36057,"Framebuffer attachments do not have the same size"),(0,c.default)(a,36061,"Framebuffer attachment format not supported or depth and stencil attachments are not same"),(0,c.default)(a,36182,"Framebuffer attachement SAMPLES differs among renderbuffers, or are mixed with textures"),a);r.FRAMEBUFFER_STATUS=d;var h=((0,c.default)(o={},35712,{webgl1:0}),(0,c.default)(o,35714,{webgl1:0}),(0,c.default)(o,35715,{webgl1:0}),(0,c.default)(o,35717,{webgl1:0}),(0,c.default)(o,35721,{webgl1:0}),(0,c.default)(o,35718,{webgl1:0}),(0,c.default)(o,35967,{webgl2:0}),(0,c.default)(o,35971,{webgl2:0}),(0,c.default)(o,35382,{webgl2:0}),o);r.PROGRAM_PARAMETERS=h;var p=((0,c.default)(s={},36162,{webgl1:0}),(0,c.default)(s,36163,{webgl1:0}),(0,c.default)(s,36164,{type:"GLenum",webgl1:32854}),(0,c.default)(s,36177,{webgl1:0}),(0,c.default)(s,36178,{webgl1:0}),(0,c.default)(s,36176,{webgl1:0}),(0,c.default)(s,36179,{webgl1:0}),(0,c.default)(s,36180,{webgl1:0}),(0,c.default)(s,36181,{webgl1:0}),(0,c.default)(s,36011,{webgl2:1}),s);r.RENDERBUFFER_PARAMETERS=p;var m=((0,c.default)(u={},10240,{webgl2:!0}),(0,c.default)(u,10241,{webgl2:!0}),(0,c.default)(u,10242,{webgl2:!0}),(0,c.default)(u,10243,{webgl2:!0}),(0,c.default)(u,32882,{webgl2:!0}),(0,c.default)(u,33084,{webgl2:!0}),(0,c.default)(u,33085,{webgl2:!0}),(0,c.default)(u,34893,{webgl2:!0}),(0,c.default)(u,34892,{webgl2:!0}),(0,c.default)(u,33082,{webgl2:!0}),(0,c.default)(u,33083,{webgl2:!0}),u);r.SAMPLER_PARAMETERS=m;var b=((0,c.default)(l={},10240,{type:"GLenum",webgl1:9729}),(0,c.default)(l,10241,{type:"GLenum",webgl1:9986}),(0,c.default)(l,10242,{type:"GLenum",webgl1:10497}),(0,c.default)(l,10243,{type:"GLenum",webgl1:10497}),(0,c.default)(l,32882,{type:"GLenum",webgl2:10497}),(0,c.default)(l,33084,{webgl2:0}),(0,c.default)(l,33085,{webgl2:1e3}),(0,c.default)(l,34893,{type:"GLenum",webgl2:515}),(0,c.default)(l,34892,{type:"GLenum",webgl2:0}),(0,c.default)(l,33082,{webgl2:-1e3}),(0,c.default)(l,33083,{webgl2:1e3}),(0,c.default)(l,4096,{webgl1:0}),(0,c.default)(l,4097,{webgl1:0}),l);r.TEXTURE_PARAMETERS=b},{"@babel/runtime/helpers/defineProperty":9,"@babel/runtime/helpers/interopRequireDefault":13}],210:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.getDebugTableForProgramConfiguration=function(e){var t={},r="Accessors for ".concat(e.id),n=!0,a=!1,s=void 0;try{for(var u,l=e.attributeInfos[Symbol.iterator]();!(n=(u=l.next()).done);n=!0){var c=u.value;if(c){var f=o(c);t["in ".concat(f)]=(0,i.default)({},r,JSON.stringify(c.accessor))}}}catch(e){a=!0,s=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw s}}var d=!0,h=!1,p=void 0;try{for(var m,b=e.varyingInfos[Symbol.iterator]();!(d=(m=b.next()).done);d=!0){var g=m.value;if(g){var v=o(g);t["out ".concat(v)]=(0,i.default)({},r,JSON.stringify(g.accessor))}}}catch(e){h=!0,p=e}finally{try{d||null==b.return||b.return()}finally{if(h)throw p}}return t};var i=n(e("@babel/runtime/helpers/defineProperty")),a=e("../webgl-utils/attribute-utils");function o(e){var t=e.accessor,r=(0,a.getCompositeGLType)(t.type,t.size);return r?"".concat(r.name," ").concat(e.name):e.name}},{"../webgl-utils/attribute-utils":213,"@babel/runtime/helpers/defineProperty":9,"@babel/runtime/helpers/interopRequireDefault":13}],211:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.getDebugTableForUniforms=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.header,r=void 0===t?"Uniforms":t,n=e.program,u=e.uniforms,l=e.undefinedOnly,c=void 0!==l&&l;(0,o.default)(n);var f={},d=Object.keys(n._uniformSetters).sort(),h=0,p=!0,m=!1,b=void 0;try{for(var g,v=d[Symbol.iterator]();!(p=(g=v.next()).done);p=!0){var y=g.value;y.match(".*_.*")||y.match(".*Matrix")||s({table:f,header:r,uniforms:u,uniformName:y,undefinedOnly:c})&&h++}}catch(e){m=!0,b=e}finally{try{p||null==v.return||v.return()}finally{if(m)throw b}}var _=!0,x=!1,w=void 0;try{for(var E,k=d[Symbol.iterator]();!(_=(E=k.next()).done);_=!0){var P=E.value;P.match(".*Matrix")&&s({table:f,header:r,uniforms:u,uniformName:P,undefinedOnly:c})&&h++}}catch(e){x=!0,w=e}finally{try{_||null==k.return||k.return()}finally{if(x)throw w}}var M=!0,A=!1,C=void 0;try{for(var O,T=d[Symbol.iterator]();!(M=(O=T.next()).done);M=!0){var S=O.value;f[S]||s({table:f,header:r,uniforms:u,uniformName:S,undefinedOnly:c})&&h++}}catch(e){A=!0,C=e}finally{try{M||null==T.return||T.return()}finally{if(A)throw C}}var R=0,L={};if(!c)for(var D in u){var j=u[D];f[D]||(R++,L[D]=(0,i.default)({Type:"NOT USED: ".concat(j)},r,(0,a.formatValue)(j)))}return{table:f,count:h,unusedTable:L,unusedCount:R}};var i=n(e("@babel/runtime/helpers/defineProperty")),a=e("../utils"),o=n(e("../utils/assert"));function s(e){var t,r=e.table,n=e.header,o=e.uniformName,s=e.undefinedOnly,u=e.uniforms[o],l=function(e){return null!=e}(u);return(!s||!l)&&(r[o]=((0,i.default)(t={},n,l?(0,a.formatValue)(u):"N/A"),(0,i.default)(t,"Uniform Type",l?u:"NOT PROVIDED"),t),!0)}},{"../utils":190,"../utils/assert":187,"@babel/runtime/helpers/defineProperty":9,"@babel/runtime/helpers/interopRequireDefault":13}],212:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.getDebugTableForVertexArray=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.vertexArray,r=e.header,n=void 0===r?"Attributes":r;if(!t.configuration)return{};var i={};t.elements&&(i.ELEMENT_ARRAY_BUFFER=l(t,t.elements,null,n));var a=t.values;for(var o in a){var s=t._getAttributeInfo(o);if(s){var u="".concat(o,": ").concat(s.name),f=t.accessors[s.location];f&&(u="".concat(o,": ").concat(c(s.name,f))),i[u]=l(t,a[o],f,n)}}return i};var i=n(e("@babel/runtime/helpers/defineProperty")),a=n(e("../webgl/buffer")),o=e("../webgl-utils/constants-to-keys"),s=e("../webgl-utils/attribute-utils"),u=e("../utils");function l(e,t,r,n){var s,l,c,f,d=e.gl,h="NOT PROVIDED",p="N/A",m="N/A",b="N/A";if(r&&(h=r.type,p=r.size,l=-1!==(h=String(h).replace("Array","")).indexOf("nt")),t instanceof a.default){var g,v,y=t,_=y.getDebugData(),x=_.data;if(c=_.modified?"*":"",f=x,m=(b=y.byteLength)/x.BYTES_PER_ELEMENT/p,r)v="".concat(r.divisor>0?"I ":"P "," ").concat(m," (x").concat(p,"=").concat(b," bytes ").concat((0,o.glKey)(d,h),")");else l=!0,v="".concat(b," bytes");return(0,i.default)(g={},n,"".concat(c).concat((0,u.formatValue)(f,{size:p,isInteger:l}))),(0,i.default)(g,"Format ",v),g}return f=t,p=t.length,l=-1!==(h=String(t.constructor.name).replace("Array","")).indexOf("nt"),(0,i.default)(s={},n,"".concat((0,u.formatValue)(f,{size:p,isInteger:l})," (constant)")),(0,i.default)(s,"Format ","".concat(p,"x").concat(h," (constant)")),s}function c(e,t){var r=(0,s.getCompositeGLType)(t.type,t.size);return r?"".concat(e," (").concat(r.name,")"):e}},{"../utils":190,"../webgl-utils/attribute-utils":213,"../webgl-utils/constants-to-keys":214,"../webgl/buffer":227,"@babel/runtime/helpers/defineProperty":9,"@babel/runtime/helpers/interopRequireDefault":13}],213:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.getPrimitiveDrawMode=x,r.getPrimitiveCount=w,r.getVertexCount=function(e){var t=e.drawMode,r=w({drawMode:t,vertexCount:e.vertexCount});switch(x(t)){case d:return r;case h:return 2*r;case b:return 3*r;default:return(0,s.default)(!1),0}},r.decomposeCompositeGLType=function(e){var t=_[e];if(!t)return null;var r=(0,a.default)(t,2);return{type:r[0],components:r[1]}},r.getCompositeGLType=function(e,t){switch(e){case u:case l:case c:case f:e=y}for(var r in _){var n=(0,a.default)(_[r],3),i=n[0],o=n[1],s=n[2];if(i===e&&o===t)return{glType:r,name:s}}return null};var i,a=n(e("@babel/runtime/helpers/slicedToArray")),o=n(e("@babel/runtime/helpers/defineProperty")),s=n(e("../utils/assert")),u=5120,l=5121,c=5122,f=5123,d=0,h=1,p=2,m=3,b=4,g=5,v=6,y=5126,_=((0,o.default)(i={},y,[y,1,"float"]),(0,o.default)(i,35664,[y,2,"vec2"]),(0,o.default)(i,35665,[y,3,"vec3"]),(0,o.default)(i,35666,[y,4,"vec4"]),(0,o.default)(i,5124,[5124,1,"int"]),(0,o.default)(i,35667,[5124,2,"ivec2"]),(0,o.default)(i,35668,[5124,3,"ivec3"]),(0,o.default)(i,35669,[5124,4,"ivec4"]),(0,o.default)(i,5125,[5125,1,"uint"]),(0,o.default)(i,36294,[5125,2,"uvec2"]),(0,o.default)(i,36295,[5125,3,"uvec3"]),(0,o.default)(i,36296,[5125,4,"uvec4"]),(0,o.default)(i,35670,[y,1,"bool"]),(0,o.default)(i,35671,[y,2,"bvec2"]),(0,o.default)(i,35672,[y,3,"bvec3"]),(0,o.default)(i,35673,[y,4,"bvec4"]),(0,o.default)(i,35674,[y,8,"mat2"]),(0,o.default)(i,35685,[y,8,"mat2x3"]),(0,o.default)(i,35686,[y,8,"mat2x4"]),(0,o.default)(i,35675,[y,12,"mat3"]),(0,o.default)(i,35687,[y,12,"mat3x2"]),(0,o.default)(i,35688,[y,12,"mat3x4"]),(0,o.default)(i,35676,[y,16,"mat4"]),(0,o.default)(i,35689,[y,16,"mat4x2"]),(0,o.default)(i,35690,[y,16,"mat4x3"]),i);function x(e){switch(e){case d:return d;case h:case m:case p:return h;case b:case g:case v:return b;default:return(0,s.default)(!1),0}}function w(e){var t=e.vertexCount;switch(e.drawMode){case d:case p:return t;case h:return t/2;case m:return t-1;case b:return t/3;case g:case v:return t-2;default:return(0,s.default)(!1),0}}},{"../utils/assert":187,"@babel/runtime/helpers/defineProperty":9,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/slicedToArray":22}],214:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.getKeyValue=o,r.getKey=s,r.getKeyType=u,r.glGet=function(e,t){t||a.default.removed("glGet(name)","glGet(gl, name)","6.0")();return o(e,t)},r.glKey=function(e,t){void 0===t&&a.default.removed("glKey(value)","glKey(gl, value)","6.0")();return s(e,t)},r.glKeyType=function(e,t){void 0===t&&a.default.removed("glKeyType(value)","glKeyType(gl, value)","6.0")();return u(e,t)};var i=n(e("../utils/assert")),a=n(e("../utils/log"));function o(e,t){if("string"!=typeof t)return t;var r=Number(t);if(!isNaN(r))return r;var n=e[t=t.replace(/^.*\./,"")];return(0,i.default)(void 0!==n,"Accessing undefined constant GL.".concat(t)),n}function s(e,t){for(var r in t=Number(t),e)if(e[r]===t)return"GL.".concat(r);return String(t)}function u(e,t){for(var r in(0,i.default)(void 0!==t,"undefined key"),t=Number(t),e)if(e[r]===t)return"GL.".concat(r);return String(t)}},{"../utils/assert":187,"../utils/log":194,"@babel/runtime/helpers/interopRequireDefault":13}],215:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(r,"__esModule",{value:!0}),r.parseGLSLCompilerError=a,r.default=function(e,t,r){var n=a(e,t,r),i=n.errors,o=n.warnings;return"GLSL compilation error in ".concat(n.shaderName,"\n\n").concat(i,"\n").concat(o)};var i=n(e("./get-shader-name"));function a(e,t,r,n){for(var a=e.split(/\r?\n/),u={},l={},c=n||(0,i.default)(t)||"(unnamed)",f="".concat((0,i.getShaderTypeName)(r)," shader ").concat(c),d=0;d<a.length;d++){var h=a[d];if(!(h.length<=1)){var p=h.split(":"),m=p[0],b=parseInt(p[2],10);if(isNaN(b))throw new Error("GLSL compilation error in ".concat(f,": ").concat(e));"WARNING"!==m?u[b]=h:l[b]=h}}var g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",n=e.split(/\r?\n/),i=String(n.length+t-1).length;return n.map(function(e,n){var a=n+t,o=String(a).length,u=s(a,i-o);return u+r+e})}(t);return{shaderName:f,errors:o(u,g),warnings:o(l,g)}}function o(e,t){for(var r="",n=0;n<t.length;n++){if((e[n+3]||e[n+2]||e[n+1])&&(r+="".concat(t[n],"\n"),e[n+1])){var i=e[n+1],a=i.split(":",3),o=a[0],u=parseInt(a[1],10)||0,l=i.substring(a.join(":").length+1).trim();r+=s("^^^ ".concat(o,": ").concat(l,"\n\n"),u)}}return r}function s(e,t){for(var r="",n=0;n<t;++n)r+=" ";return"".concat(r).concat(e)}},{"./get-shader-name":217,"@babel/runtime/helpers/interopRequireWildcard":14}],216:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.glFormatToComponents=function(e){switch(e){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return(0,i.default)(!1),0}},r.glTypeToBytes=function(e){switch(e){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return(0,i.default)(!1),0}};var i=n(e("../utils/assert"))},{"../utils/assert":187,"@babel/runtime/helpers/interopRequireDefault":13}],217:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed",r=e.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return r?r[1]:t},r.getShaderTypeName=function(e){switch(e){case n:return"fragment";case i:return"vertex";default:return"unknown type"}};var n=35632,i=35633},{}],218:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=e("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Image",{enumerable:!0,get:function(){return a.Image}}),Object.defineProperty(r,"WebGLRenderingContext",{enumerable:!0,get:function(){return a.WebGLRenderingContext}}),Object.defineProperty(r,"WebGL2RenderingContext",{enumerable:!0,get:function(){return a.WebGL2RenderingContext}}),Object.defineProperty(r,"WebGLProgram",{enumerable:!0,get:function(){return a.WebGLProgram}}),Object.defineProperty(r,"WebGLShader",{enumerable:!0,get:function(){return a.WebGLShader}}),Object.defineProperty(r,"WebGLBuffer",{enumerable:!0,get:function(){return a.WebGLBuffer}}),Object.defineProperty(r,"WebGLFramebuffer",{enumerable:!0,get:function(){return a.WebGLFramebuffer}}),Object.defineProperty(r,"WebGLRenderbuffer",{enumerable:!0,get:function(){return a.WebGLRenderbuffer}}),Object.defineProperty(r,"WebGLTexture",{enumerable:!0,get:function(){return a.WebGLTexture}}),Object.defineProperty(r,"WebGLUniformLocation",{enumerable:!0,get:function(){return a.WebGLUniformLocation}}),Object.defineProperty(r,"WebGLActiveInfo",{enumerable:!0,get:function(){return a.WebGLActiveInfo}}),Object.defineProperty(r,"WebGLShaderPrecisionFormat",{enumerable:!0,get:function(){return a.WebGLShaderPrecisionFormat}}),Object.defineProperty(r,"webGLTypesAvailable",{enumerable:!0,get:function(){return a.webGLTypesAvailable}}),Object.defineProperty(r,"isWebGL",{enumerable:!0,get:function(){return o.isWebGL}}),Object.defineProperty(r,"isWebGL2",{enumerable:!0,get:function(){return o.isWebGL2}}),Object.defineProperty(r,"assertWebGLContext",{enumerable:!0,get:function(){return o.assertWebGLContext}}),Object.defineProperty(r,"assertWebGL2Context",{enumerable:!0,get:function(){return o.assertWebGL2Context}}),Object.defineProperty(r,"requestAnimationFrame",{enumerable:!0,get:function(){return s.requestAnimationFrame}}),Object.defineProperty(r,"cancelAnimationFrame",{enumerable:!0,get:function(){return s.cancelAnimationFrame}}),Object.defineProperty(r,"formatGLSLCompilerError",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"parseGLSLCompilerError",{enumerable:!0,get:function(){return u.parseGLSLCompilerError}}),Object.defineProperty(r,"getShaderName",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"getGLTypeFromTypedArray",{enumerable:!0,get:function(){return c.getGLTypeFromTypedArray}}),Object.defineProperty(r,"getTypedArrayFromGLType",{enumerable:!0,get:function(){return c.getTypedArrayFromGLType}}),Object.defineProperty(r,"flipRows",{enumerable:!0,get:function(){return c.flipRows}}),Object.defineProperty(r,"scalePixels",{enumerable:!0,get:function(){return c.scalePixels}}),Object.defineProperty(r,"getKeyValue",{enumerable:!0,get:function(){return f.getKeyValue}}),Object.defineProperty(r,"getKey",{enumerable:!0,get:function(){return f.getKey}}),Object.defineProperty(r,"getKeyType",{enumerable:!0,get:function(){return f.getKeyType}}),Object.defineProperty(r,"getShaderVersion",{enumerable:!0,get:function(){return d.getShaderVersion}}),Object.defineProperty(r,"cloneTextureFrom",{enumerable:!0,get:function(){return h.cloneTextureFrom}});var a=e("./webgl-types"),o=e("./webgl-checks"),s=e("./request-animation-frame"),u=i(e("./format-glsl-error")),l=n(e("./get-shader-name")),c=e("./typed-array-utils"),f=e("./constants-to-keys"),d=e("./shader-utils"),h=e("./texture-utils")},{"./constants-to-keys":214,"./format-glsl-error":215,"./get-shader-name":217,"./request-animation-frame":220,"./shader-utils":221,"./texture-utils":222,"./typed-array-utils":223,"./webgl-checks":224,"./webgl-types":225,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/interopRequireWildcard":14}],219:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=function(e){return e},s=new(function(){function e(){(0,i.default)(this,e),this.pendingQueries=new Set,this.invalidQueryType=null,this.invalidErrorMessage="",this.checkInvalid=function(){return!1}}return(0,a.default)(e,[{key:"poll",value:function(e){this.cancelInvalidQueries(e);var t=!0,r=!1,n=void 0;try{for(var i,a=this.pendingQueries.values()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if(o.isResultAvailable()){var s=o.getResult();this.resolveQuery(o,s)}}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}}},{key:"setInvalidator",value:function(e){var t=e.errorMessage,r=e.checkInvalid;this.invalidQueryType=e.queryType,this.invalidErrorMessage=t,this.checkInvalid=r}},{key:"beginQuery",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;this.cancelInvalidQueries(e.gl),this.cancelQuery(e);var n={};return e.promise=new Promise(function(e,t){n.resolve=e,n.reject=t}),Object.assign(e.promise,n),this.pendingQueries.add(e),e.promise.then(t).catch(r)}},{key:"resolveQuery",value:function(e,t){this.pendingQueries.delete(e),e.promise.resolve(t)}},{key:"rejectQuery",value:function(e,t){this.pendingQueries.delete(e),e.promise&&e.promise.reject(new Error(t))}},{key:"deleteQuery",value:function(e){return this.rejectQuery(e,"Query was deleted before result was available")}},{key:"cancelQuery",value:function(e){return this.rejectQuery(e,"Query was canceled before result was available")}},{key:"invalidateQuery",value:function(e){e instanceof this.invalidQueryType&&this.rejectQuery(e,this.invalidErrorMessage)}},{key:"cancelInvalidQueries",value:function(e){if(this.checkInvalid(e)){var t=!0,r=!1,n=void 0;try{for(var i,a=this.pendingQueries.values()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){this.invalidateQuery(i.value)}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}}}}]),e}());r.default=s},{"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/interopRequireDefault":13}],220:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.requestAnimationFrame=function(e){return"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60)},r.cancelAnimationFrame=function(e){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e)}},{}],221:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getShaderVersion=function(e){var t=100,r=e.match(/[^\s]+/g);if(r.length>=2&&"#version"===r[0]){var n=parseInt(r[1],10);Number.isFinite(n)&&(t=n)}return t}},{}],222:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.cloneTextureFrom=function(e,t){(0,s.default)(e instanceof i.default||e instanceof a.default||e instanceof o.default);var r=e.constructor,n=e.gl,u=Object.assign({width:e.width,height:e.height,format:e.format,type:e.type,dataFormat:e.dataFormat,border:e.border,mipmaps:e.mipmaps},t);return new r(n,u)};var i=n(e("../webgl/texture-2d")),a=n(e("../webgl/texture-cube")),o=n(e("../webgl/texture-3d")),s=n(e("assert"))},{"../webgl/texture-2d":240,"../webgl/texture-3d":241,"../webgl/texture-cube":242,"@babel/runtime/helpers/interopRequireDefault":13,assert:28}],223:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getGLTypeFromTypedArray=function(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(n)}},r.getTypedArrayFromGLType=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clamped,r=void 0===t||t;switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return r?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}},r.flipRows=function(e){var t=e.data,r=e.height,n=e.bytesPerPixel,i=e.temp,a=e.width*(void 0===n?4:n);i=i||new Uint8Array(a);for(var o=0;o<r/2;++o){var s=o*a,u=(r-o-1)*a;i.set(t.subarray(s,s+a)),t.copyWithin(s,u,u+a),t.set(i,u)}},r.scalePixels=function(e){for(var t=e.data,r=e.width,n=e.height,i=Math.round(r/2),a=Math.round(n/2),o=new Uint8Array(i*a*4),s=0;s<a;s++)for(var u=0;u<i;u++)for(var l=0;l<4;l++)o[4*(s*i+u)+l]=t[4*(2*s*r+2*u)+l];return{data:o,width:i,height:a}};var n="Failed to deduce GL constant from typed array"},{}],224:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.isWebGL=c,r.isWebGL2=f,r.assertWebGLContext=function(e){(0,a.default)(c(e),u)},r.assertWebGL2Context=function(e){(0,a.default)(f(e),l)},r.ERR_WEBGL2=r.ERR_WEBGL=r.ERR_CONTEXT=void 0;var i=e("./webgl-types"),a=n(e("../utils/assert")),o=34962,s=32874,u="Invalid WebGLRenderingContext";r.ERR_CONTEXT=u,r.ERR_WEBGL=u;var l="Requires WebGL2";function c(e){return Boolean(e&&(e instanceof i.WebGLRenderingContext||e.ARRAY_BUFFER===o))}function f(e){return Boolean(e&&(e instanceof i.WebGL2RenderingContext||e.TEXTURE_BINDING_3D===s))}r.ERR_WEBGL2=l},{"../utils/assert":187,"./webgl-types":225,"@babel/runtime/helpers/interopRequireDefault":13}],225:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.WebGL2RenderingContext=r.WebGLShaderPrecisionFormat=r.WebGLActiveInfo=r.WebGLUniformLocation=r.WebGLTexture=r.WebGLRenderbuffer=r.WebGLFramebuffer=r.WebGLBuffer=r.WebGLShader=r.WebGLProgram=r.WebGLRenderingContext=r.Image=r.webGLTypesAvailable=r.headlessGL=r.headlessTypes=r.ERR_HEADLESSGL_LOAD=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=e("../utils/globals"),o=n(e("../utils/is-browser")),s="luma.gl: loaded under Node.js without headless gl installed, meaning that WebGL contexts can not be created. This may not be an error. For example, this is a typical configuration for isorender applications running on the server.";r.ERR_HEADLESSGL_LOAD=s;var u=null;r.headlessTypes=u;var l=function(){throw new Error(s)};if(r.headlessGL=l,!o.default)try{r.headlessGL=l=t.require("gl"),r.headlessTypes=u=t.require("gl/wrap")}catch(e){}var c=function e(){(0,i.default)(this,e)},f=u||a.global,d=f.WebGLRenderingContext,h=void 0===d?c:d,p=f.WebGLProgram,m=void 0===p?c:p,b=f.WebGLShader,g=void 0===b?c:b,v=f.WebGLBuffer,y=void 0===v?c:v,_=f.WebGLFramebuffer,x=void 0===_?c:_,w=f.WebGLRenderbuffer,E=void 0===w?c:w,k=f.WebGLTexture,P=void 0===k?c:k,M=f.WebGLUniformLocation,A=void 0===M?c:M,C=f.WebGLActiveInfo,O=void 0===C?c:C,T=f.WebGLShaderPrecisionFormat,S=void 0===T?c:T;r.WebGLShaderPrecisionFormat=S,r.WebGLActiveInfo=O,r.WebGLUniformLocation=A,r.WebGLTexture=P,r.WebGLRenderbuffer=E,r.WebGLFramebuffer=x,r.WebGLBuffer=y,r.WebGLShader=g,r.WebGLProgram=m,r.WebGLRenderingContext=h,r.webGLTypesAvailable=h!==c&&m!==c&&g!==c&&y!==c&&x!==c&&E!==c&&P!==c&&A!==c&&O!==c&&S!==c,r.WebGL2RenderingContext=a.global.WebGL2RenderingContext||function e(){(0,i.default)(this,e)},r.Image=a.global.Image||function e(){(0,i.default)(this,e)}},{"../utils/globals":189,"../utils/is-browser":191,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/interopRequireDefault":13}],226:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_ACCESSOR_VALUES=r.default=void 0;var i=n(e("@babel/runtime/helpers/construct")),a=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),s=e("../webgl-utils/typed-array-utils"),u=n(e("../utils/log")),l=n(e("../utils/assert")),c={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1};r.DEFAULT_ACCESSOR_VALUES=c,r.default=function(){function e(){var t=this;(0,a.default)(this,e);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];n.forEach(function(e){return t._assign(e)}),Object.freeze(this)}return(0,o.default)(e,null,[{key:"getBytesPerElement",value:function(e){return(0,s.getTypedArrayFromGLType)(e.type||5126).BYTES_PER_ELEMENT}},{key:"getBytesPerVertex",value:function(e){return(0,l.default)(e.size),(0,s.getTypedArrayFromGLType)(e.type||5126).BYTES_PER_ELEMENT*e.size}},{key:"resolve",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(0,i.default)(e,[c].concat(r))}}]),(0,o.default)(e,[{key:"toString",value:function(){return JSON.stringify(this)}},{key:"_assign",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==e.type&&(this.type!==e.type&&u.default.warn("accessor type mismatch"),this.type=e.type,5124!==e.type&&5125!==e.type||(this.integer=!0)),void 0!==e.size&&(this.size!==e.size&&u.default.warn("accessor size mismatch"),this.size=e.size),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.instanced&&(u.default.deprecated("Accessor.instanced","Accessor.divisor"),this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(u.default.deprecated("Accessor.isInstanced","Accessor.divisor"),this.divisor=e.isInstanced?1:0),void 0!==e.index&&(this.index=e.index?1:0),this}},{key:"BYTES_PER_ELEMENT",get:function(){return e.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function(){return e.getBytesPerVertex(this)}}]),e}()},{"../utils/assert":187,"../utils/log":194,"../webgl-utils/typed-array-utils":223,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/construct":7,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/interopRequireDefault":13}],227:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/inherits")),l=n(e("@babel/runtime/helpers/assertThisInitialized")),c=n(e("./resource")),f=n(e("./accessor")),d=e("../webgl-utils"),h=e("../webgl-utils/typed-array-utils"),p=e("../utils"),m=n(e("../utils/assert"));r.default=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.default)(this,t),(r=(0,o.default)(this,(0,s.default)(t).call(this,e,n))).stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),r.target=n.target||(r.gl.webgl2?36662:34962),r._initialize(n),Object.seal((0,l.default)((0,l.default)(r))),r}return(0,u.default)(t,c.default),(0,a.default)(t,[{key:"getElementCount",value:function(){return Math.round(this.byteLength/f.default.getBytesPerElement(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}},{key:"getVertexCount",value:function(){return Math.round(this.byteLength/f.default.getBytesPerVertex(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}},{key:"initialize",value:function(e){return this._initialize(e)}},{key:"setProps",value:function(e){return"data"in e&&this.setData(e),this}},{key:"setAccessor",value:function(e){return this.accessor=e,this}},{key:"reallocate",value:function(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}},{key:"setData",value:function(e){return this.initialize(e)}},{key:"subData",value:function(e){ArrayBuffer.isView(e)&&(e={data:e});var t=e.data,r=e.offset,n=void 0===r?0:r,i=e.srcOffset,a=void 0===i?0:i,o=e.byteLength||e.length;(0,m.default)(t);var s=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(s,this.handle),0!==a||void 0!==o?((0,d.assertWebGL2Context)(this.gl),this.gl.bufferSubData(this.target,n,t,a,o)):this.gl.bufferSubData(s,n,t),this.gl.bindBuffer(s,null),this.debugData=null,this.accessor.type||this.setAccessor(new f.default(this.accessor,{type:(0,h.getGLTypeFromTypedArray)(t)})),this}},{key:"copyData",value:function(e){var t=e.sourceBuffer,r=e.readOffset,n=void 0===r?0:r,i=e.writeOffset,a=void 0===i?0:i,o=e.size,s=this.gl;return(0,d.assertWebGL2Context)(s),s.bindBuffer(36662,t.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,n,a,o),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dstData,r=void 0===t?null:t,n=e.srcByteOffset,i=void 0===n?0:n,a=e.dstOffset,o=void 0===a?0:a,s=e.length,u=void 0===s?0:s;(0,d.assertWebGL2Context)(this.gl);var l,c,f=(0,h.getTypedArrayFromGLType)(this.accessor.type||5126,{clamped:!1}),p=this._getAvailableElementCount(i);r?l=(c=r.length)-o:c=o+(l=Math.min(p,u||p));var b=Math.min(p,l);return(0,m.default)((u=u||b)<=b),r=r||new f(c),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,i,r,o,u),this.gl.bindBuffer(36662,null),r}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,r=void 0===t?this.target:t,n=e.index,i=void 0===n?this.accessor&&this.accessor.index:n,a=e.offset,o=void 0===a?0:a,s=e.size;return 35345===r||35982===r?void 0!==s?this.gl.bindBufferRange(r,i,this.handle,o,s):((0,m.default)(0===o),this.gl.bindBufferBase(r,i,this.handle)):this.gl.bindBuffer(r,this.handle),this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,r=void 0===t?this.target:t,n=e.index;return 35345===r||35982===r?this.gl.bindBufferBase(r,void 0===n?this.accessor&&this.accessor.index:n,null):this.gl.bindBuffer(r,null),this}},{key:"getDebugData",value:function(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:10}),{data:this.debugData,changed:!0})}},{key:"invalidateDebugData",value:function(){this.debugData=null}},{key:"_initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e.bytes&&p.log.deprecated("bytes","byteLength");var t=e.byteLength||e.bytes||0;return this.usage=e.usage||35044,this.setAccessor(new f.default(e,e.accessor)),e.data?this._setData(e.data):this._setByteLength(t)}},{key:"_setData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;(0,m.default)(ArrayBuffer.isView(e));var r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,e,t),this.gl.bindBuffer(r,null),this.usage=t,this.debugData=e.slice(0,10),this.byteLength=e.byteLength,this.bytesUsed=e.byteLength;var n=(0,h.getGLTypeFromTypedArray)(e);return(0,m.default)(n),this.setAccessor(new f.default(this.accessor,{type:n})),this}},{key:"_setByteLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;(0,m.default)(e>=0);var r=e;0===e&&(r=new Float32Array(0));var n=this._getTarget();return this.gl.bindBuffer(n,this.handle),this.gl.bufferData(n,r,t),this.gl.bindBuffer(n,null),this.usage=t,this.debugData=null,this.byteLength=e,this.bytesUsed=e,this}},{key:"_getTarget",value:function(){return this.gl.webgl2?36663:this.target}},{key:"_getAvailableElementCount",value:function(e){var t=e/(0,h.getTypedArrayFromGLType)(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-t}},{key:"_createHandle",value:function(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteBuffer(this.handle)}},{key:"_getParameter",value:function(e){this.gl.bindBuffer(this.target,this.handle);var t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}},{key:"updateAccessor",value:function(e){return p.log.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)"),this.accessor=new f.default(this.accessor,e),this}},{key:"setByteLength",value:function(e){return p.log.deprecated("setByteLength","reallocate"),this.reallocate(e)}},{key:"data",get:function(){p.log.removed("Buffer.data","N/A","v6.0")}},{key:"bytes",get:function(){return p.log.deprecated("Buffer.bytes","Buffer.byteLength","v6.1"),this.byteLength}}]),t}()},{"../utils":190,"../utils/assert":187,"../webgl-utils":218,"../webgl-utils/typed-array-utils":223,"./accessor":226,"./resource":236,"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],228:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.clear=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.framebuffer,n=void 0===r?null:r,i=t.color,o=void 0===i?null:i,f=t.depth,d=void 0===f?null:f,h=t.stencil,p=void 0===h?null:h,b={};n&&(b.framebuffer=n);var g=0;o&&(g|=c,!0!==o&&(b.clearColor=o));d&&(g|=u,!0!==d&&(b.clearDepth=d));p&&(g|=l,!0!==d&&(b.clearStencil=d));(0,s.default)(0!==g,m),(0,a.withParameters)(e,b,function(){e.clear(g)})},r.clearBuffer=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.framebuffer,n=void 0===r?null:r,u=t.buffer,l=void 0===u?f:u,c=t.drawBuffer,b=void 0===c?0:c,g=t.value,v=void 0===g?[0,0,0,0]:g;(0,o.assertWebGL2Context)(e),(0,a.withParameters)(e,{framebuffer:n},function(){switch(l){case f:switch(v.constructor){case Int32Array:e.clearBufferiv(l,b,v);break;case Uint32Array:e.clearBufferuiv(l,b,v);break;case Float32Array:default:e.clearBufferfv(l,b,v)}break;case d:e.clearBufferfv(d,0,[v]);break;case h:e.clearBufferiv(h,0,[v]);break;case p:var t=(0,i.default)(v,2),r=t[0],n=t[1];e.clearBufferfi(p,0,r,n);break;default:(0,s.default)(!1,m)}})};var i=n(e("@babel/runtime/helpers/slicedToArray")),a=e("../webgl-context/context-state"),o=e("../webgl-utils"),s=n(e("../utils/assert")),u=256,l=1024,c=16384,f=6144,d=6145,h=6146,p=34041,m="clear: bad arguments"},{"../utils/assert":187,"../webgl-context/context-state":200,"../webgl-utils":218,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/slicedToArray":22}],229:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/inherits")),l=n(e("@babel/runtime/helpers/assertThisInitialized")),c=n(e("./resource")),f=e("../webgl-utils"),d=n(e("../webgl-utils/query-manager"));r.default=function(e){function t(e,r){var n;return(0,i.default)(this,t),(0,f.assertWebGL2Context)(e),(n=(0,o.default)(this,(0,s.default)(t).call(this,e,r))).promise=null,Object.seal((0,l.default)((0,l.default)(n))),n}return(0,u.default)(t,c.default),(0,a.default)(t,[{key:"wait",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.flags,r=e.timeout;return this.gl.waitSync(this.handle,void 0===t?0:t,void 0===r?-1:r),this}},{key:"clientWait",value:function(e){var t=e.flags,r=this.gl.clientWaitSync(this.handle,void 0===t?1:t,e.timeout);return r}},{key:"cancel",value:function(){d.default.cancelQuery(this)}},{key:"isSignaled",value:function(){return 37145===this.getParameter(37140)}},{key:"isResultAvailable",value:function(){return this.isSignaled()}},{key:"getResult",value:function(){return this.isSignaled()}},{key:"getParameter",value:function(e){return this.gl.getSyncParameter(this.handle,e)}},{key:"_createHandle",value:function(){return this.gl.fenceSync(37143,0)}},{key:"_deleteHandle",value:function(){d.default.deleteQuery(this),this.gl.deleteSync(this.handle)}}]),t}()},{"../webgl-utils":218,"../webgl-utils/query-manager":219,"./resource":236,"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],230:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.FRAMEBUFFER_ATTACHMENT_PARAMETERS=r.default=void 0;var i=n(e("@babel/runtime/helpers/defineProperty")),a=n(e("@babel/runtime/helpers/slicedToArray")),o=n(e("@babel/runtime/helpers/classCallCheck")),s=n(e("@babel/runtime/helpers/possibleConstructorReturn")),u=n(e("@babel/runtime/helpers/getPrototypeOf")),l=n(e("@babel/runtime/helpers/createClass")),c=n(e("@babel/runtime/helpers/inherits")),f=n(e("@babel/runtime/helpers/assertThisInitialized")),d=n(e("./resource")),h=n(e("./texture-2d")),p=n(e("./renderbuffer")),m=n(e("./buffer")),b=e("./clear"),g=e("../webgl-context"),v=e("../webgl-context/context-features"),y=e("../webgl-utils/typed-array-utils"),_=e("../webgl-utils/format-utils"),x=e("../webgl-utils"),w=e("../webgl-utils/constants-to-keys"),E=e("../utils"),k=n(e("../utils/assert")),P=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,o.default)(this,t),(r=(0,s.default)(this,(0,u.default)(t).call(this,e,n))).width=null,r.height=null,r.attachments={},r.readBuffer=36064,r.drawBuffers=[36064],r.initialize(n),Object.seal((0,f.default)((0,f.default)(r))),r}return(0,c.default)(t,d.default),(0,l.default)(t,[{key:"MAX_COLOR_ATTACHMENTS",get:function(){return this.gl.getParameter(this.gl.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function(){return this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS)}}],[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.colorBufferHalfFloat;return t.colorBufferFloat&&e.getExtension((0,x.isWebGL2)(e)?"EXT_color_buffer_float":"WEBGL.color_buffer_float"),r&&e.getExtension((0,x.isWebGL2)(e)?"EXT_color_buffer_float":"EXT_color_buffer_half_float")}},{key:"getDefaultFramebuffer",value:function(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new t(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}}]),(0,l.default)(t,[{key:"initialize",value:function(e){var t=e.width,r=void 0===t?1:t,n=e.height,i=void 0===n?1:n,a=e.attachments,o=void 0===a?null:a,s=e.color,u=void 0===s||s,l=e.depth,c=void 0===l||l,f=e.stencil,d=void 0!==f&&f,h=e.check,p=void 0===h||h,m=e.readBuffer,b=e.drawBuffers;if((0,k.default)(r>=0&&i>=0,"Width and height need to be integers"),this.width=r,this.height=i,o)for(var g in o){var v=o[g];(Array.isArray(v)?v[0]:v).resize({width:r,height:i})}else o=this._createDefaultAttachments(u,c,d,r,i);this.update({clearAttachments:!0,attachments:o,readBuffer:m,drawBuffers:b}),o&&p&&this.checkStatus()}},{key:"update",value:function(e){var t=e.attachments,r=e.readBuffer,n=e.drawBuffers,i=e.clearAttachments,a=e.resizeAttachments;this.attach(void 0===t?{}:t,{clearAttachments:void 0!==i&&i,resizeAttachments:void 0===a||a});var o=this.gl,s=o.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),n&&this._setDrawBuffers(n),o.bindFramebuffer(36160,s||null),this}},{key:"resize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,r=e.height;if(null===this.handle)return(0,k.default)(void 0===t&&void 0===r),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;for(var n in void 0===t&&(t=this.gl.drawingBufferWidth),void 0===r&&(r=this.gl.drawingBufferHeight),t!==this.width&&r!==this.height&&E.log.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(t,"x").concat(r)),this.attachments)this.attachments[n].resize({width:t,height:r});return this.width=t,this.height=r,this}},{key:"attach",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.clearAttachments,i=r.resizeAttachments,o=void 0===i||i,s={};void 0!==n&&n&&Object.keys(this.attachments).forEach(function(e){s[e]=null}),Object.assign(s,e);var u=this.gl.bindFramebuffer(36160,this.handle);for(var l in s){(0,k.default)(void 0!==l,"Misspelled framebuffer binding point?");var c=Number(l),f=s[c],d=f;if(d)if(d instanceof p.default)this._attachRenderbuffer({attachment:c,renderbuffer:d});else if(Array.isArray(f)){var h=(0,a.default)(f,3),m=h[0],b=h[1],g=h[2];d=m,this._attachTexture({attachment:c,texture:m,layer:void 0===b?0:b,level:void 0===g?0:g})}else this._attachTexture({attachment:c,texture:d,layer:0,level:0});else this._unattach(c);o&&d&&d.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,u||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(function(e){return!t.attachments[e]}).forEach(function(e){delete t.attachments[e]})}},{key:"checkStatus",value:function(){var e=this.gl,t=e.bindFramebuffer(36160,this.handle),r=e.checkFramebufferStatus(36160);if(e.bindFramebuffer(36160,t||null),36053!==r)throw new Error(M(r));return this}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,r=e.depth,n=e.stencil,i=e.drawBuffers,a=void 0===i?[]:i,o=this.gl.bindFramebuffer(36160,this.handle);return(t||r||n)&&(0,b.clear)(this.gl,{color:t,depth:r,stencil:n}),a.forEach(function(e,t){(0,b.clearBuffer)({drawBuffer:t,value:e})}),this.gl.bindFramebuffer(36160,o||null),this}},{key:"readPixels",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.x,r=void 0===t?0:t,n=e.y,i=void 0===n?0:n,a=e.width,o=void 0===a?this.width:a,s=e.height,u=void 0===s?this.height:s,l=e.format,c=void 0===l?6408:l,f=e.type,d=e.pixelArray,h=void 0===d?null:d,p=e.attachment,m=void 0===p?36064:p;if(36064===m&&null===this.handle&&(m=1028),(0,k.default)(this.attachments[m]),f=f||this.attachments[m].type,!h){var b=(0,y.getTypedArrayFromGLType)(f=f||5121,{clamped:!1}),g=(0,_.glFormatToComponents)(c);h=h||new b(o*u*g)}f=f||(0,y.getGLTypeFromTypedArray)(h);var v=this.gl.bindFramebuffer(36160,this.handle);return this.gl.readPixels(r,i,o,u,c,f,h),this.gl.bindFramebuffer(36160,v||null),h}},{key:"readPixelsToBuffer",value:function(e){var t=e.x,r=void 0===t?0:t,n=e.y,i=void 0===n?0:n,a=e.width,o=void 0===a?this.width:a,s=e.height,u=void 0===s?this.height:s,l=e.format,c=void 0===l?6408:l,f=e.type,d=e.buffer,h=void 0===d?null:d,p=e.byteOffset,b=void 0===p?0:p,v=this.gl;if((0,x.assertWebGL2Context)(v),f=f||(h?h.type:5121),!h){var y=(0,_.glFormatToComponents)(c),w=(0,_.glTypeToBytes)(f);h=new m.default(v,{bytes:b+o*u*y*w,type:f,size:y})}return h.bind({target:35051}),(0,g.withParameters)(v,{framebuffer:this},function(){v.readPixels(r,i,o,u,c,f,b)}),h.unbind({target:35051}),h}},{key:"copyToDataUrl",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.attachment,r=e.maxHeight,n=void 0===r?Number.MAX_SAFE_INTEGER:r,i=this.readPixels({attachment:void 0===t?36064:t}),a=this.width,o=this.height;o>n;){var s=(0,x.scalePixels)({data:i,width:a,height:o});i=s.data,a=s.width,o=s.height}(0,x.flipRows)({data:i,width:a,height:o});var u=document.createElement("canvas");u.width=a,u.height=o;var l=u.getContext("2d"),c=l.createImageData(a,o);return c.data.set(i),l.putImageData(c,0,0),u.toDataURL()}},{key:"copyToImage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.image,r=void 0===t?null:t,n=e.attachment,i=e.maxHeight,a=(void 0===i&&Number,this.readDataUrl({attachment:void 0===n?36064:n}));return(r=r||new Image).src=a,r}},{key:"copyToTexture",value:function(e){var t=e.texture,r=e.target,n=e.xoffset,i=void 0===n?0:n,a=e.yoffset,o=void 0===a?0:a,s=e.zoffset,u=void 0===s?0:s,l=e.mipmapLevel,c=void 0===l?0:l,f=e.x,d=void 0===f?0:f,h=e.y,p=void 0===h?0:h,m=e.width,b=e.height,g=this.gl,v=g.bindFramebuffer(36160,this.handle);switch((0,k.default)(r||t),t&&(m=Number.isFinite(m)?m:t.width,b=Number.isFinite(b)?b:t.height,t.bind(0)),t.target){case 3553:case 34067:g.copyTexSubImage2D(r||t.target,c,i,o,d,p,m,b);break;case 35866:case 32879:g.copyTexSubImage3D(r||t.target,c,i,o,u,d,p,m,b)}return t&&t.unbind(),g.bindFramebuffer(36160,v||null),t}},{key:"blit",value:function(e){var t=e.srcFramebuffer,r=e.attachment,n=void 0===r?36064:r,i=e.srcX0,a=void 0===i?0:i,o=e.srcY0,s=void 0===o?0:o,u=e.srcX1,l=e.srcY1,c=e.dstX0,f=void 0===c?0:c,d=e.dstY0,h=void 0===d?0:d,p=e.dstX1,m=e.dstY1,b=e.color,g=void 0===b||b,v=e.depth,y=void 0!==v&&v,_=e.stencil,w=void 0!==_&&_,E=e.mask,P=void 0===E?0:E,M=e.filter,A=void 0===M?9728:M,C=this.gl;(0,x.assertWebGL2Context)(C),t.handle||36064!==n||(n=1028),g&&(P|=16384),y&&(P|=256),w&&(P|=1024),(0,k.default)(P),u=void 0===u?t.width:u,l=void 0===l?t.height:l,p=void 0===p?this.width:p,m=void 0===m?this.height:m;var O=C.bindFramebuffer(36009,this.handle),T=C.bindFramebuffer(36008,t.handle);return C.readBuffer(n),C.blitFramebuffer(a,s,u,l,f,h,p,m,P,A),C.readBuffer(this.readBuffer),C.bindFramebuffer(36008,T||null),C.bindFramebuffer(36009,O||null),this}},{key:"invalidate",value:function(e){var t=e.attachments,r=void 0===t?[]:t,n=e.x,i=void 0===n?0:n,a=e.y,o=void 0===a?0:a,s=e.width,u=e.height,l=this.gl;(0,x.assertWebGL2Context)(l);var c=l.bindFramebuffer(36008,this.handle);return 0===i&&0===o&&void 0===s&&void 0===u?l.invalidateFramebuffer(36008,r):l.invalidateFramebuffer(36008,r,i,o,s,u),l.bindFramebuffer(36008,c),this}},{key:"getAttachmentParameter",value:function(e,t,r){var n=this._getAttachmentParameterFallback(t);return null===n&&(this.gl.bindFramebuffer(36160,this.handle),n=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),r&&n>1e3&&(n=(0,w.glKey)(this.gl,n)),n}},{key:"getAttachmentParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],n={},i=!0,a=!1,o=void 0;try{for(var s,u=r[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;n[t?(0,w.glKey)(this.gl,l):l]=this.getAttachmentParameter(e,l,t)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return n}},{key:"getParameters",value:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object.keys(this.attachments),r={},n=0;n<t.length;n++){var i=Number(t[n]);r[e?(0,w.glKey)(this.gl,i):i]=this.getAttachmentParameters(i,e)}return r}},{key:"show",value:function(){return"undefined"!=typeof window&&window.open(this.copyToDataUrl(),"luma-debug-texture"),this}},{key:"log",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>E.log.priority||"undefined"==typeof window)return this;t=t||"Framebuffer ".concat(this.id);var r=this.copyToDataUrl({maxHeight:100});return E.log.image({priority:e,message:t,image:r},t)(),this}},{key:"bind",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target;return this.gl.bindFramebuffer(void 0===e?36160:e,this.handle),this}},{key:"unbind",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).target;return this.gl.bindFramebuffer(void 0===e?36160:e,null),this}},{key:"_createDefaultAttachments",value:function(e,t,r,n,a){var o,s=null;e&&((s=s||{})[36064]=new h.default(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:n,height:a,mipmaps:!1,parameters:(o={},(0,i.default)(o,10241,9728),(0,i.default)(o,10240,9728),(0,i.default)(o,10242,33071),(0,i.default)(o,10243,33071),o)}));return t&&r?(s=s||{})[33306]=new p.default(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:n,height:111}):t?(s=s||{})[36096]=new p.default(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:n,height:a}):r&&(0,k.default)(!1),s}},{key:"_unattach",value:function(e){var t=this.attachments[e];t&&(t instanceof p.default?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}},{key:"_attachRenderbuffer",value:function(e){var t=e.attachment,r=void 0===t?36064:t,n=e.renderbuffer;this.gl.framebufferRenderbuffer(36160,r,36161,n.handle),this.attachments[r]=n}},{key:"_attachTexture",value:function(e){var t=e.attachment,r=void 0===t?36064:t,n=e.texture,i=e.layer,a=e.level,o=this.gl;switch(o.bindTexture(n.target,n.handle),n.target){case 35866:case 32879:o.framebufferTextureLayer(36160,r,n.target,a,i);break;case 34067:var s=function(e){return e<34069?e+34069:e}(i);o.framebufferTexture2D(36160,r,s,n.handle,a);break;case 3553:o.framebufferTexture2D(36160,r,3553,n.handle,a);break;default:(0,k.default)(!1,"Illegal texture type")}o.bindTexture(n.target,null),this.attachments[r]=n}},{key:"_setReadBuffer",value:function(e,t){(0,x.isWebGL2)(e)?e.readBuffer(t):(0,k.default)(36064===t||1029===t,"Multiple render targets not supported"),this.readBuffer=t}},{key:"_setDrawBuffers",value:function(e,t){if((0,x.isWebGL2)(e))e.drawBuffers(t);else{var r=e.getExtension("WEBGL.draw_buffers");r?r.drawBuffersWEBGL(t):(0,k.default)(1===t.length&&(36064===t[0]||1029===t[0]),"Multiple render targets not supported")}this.drawBuffers=t}},{key:"_getAttachmentParameterFallback",value:function(e){var t=(0,v.getFeatures)(this.gl);switch(e){case 36052:return t.webgl2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.webgl2?null:8;case 33297:return t.webgl2?null:5125;case 33296:return t.webgl2||t.EXT_sRGB?null:9729;default:return null}}},{key:"_createHandle",value:function(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:"_bindHandle",value:function(e){return this.gl.bindFramebuffer(36160,e)}},{key:"color",get:function(){return this.attachments[36064]||null}},{key:"texture",get:function(){return this.attachments[36064]||null}},{key:"depth",get:function(){return this.attachments[36096]||this.attachments[33306]||null}},{key:"stencil",get:function(){return this.attachments[36128]||this.attachments[33306]||null}}]),t}();function M(e){return(P.STATUS||{})[e]||"Framebuffer error ".concat(e)}r.default=P;var A=[36049,36048,33296,33298,33299,33300,33301,33302,33303];r.FRAMEBUFFER_ATTACHMENT_PARAMETERS=A,P.ATTACHMENT_PARAMETERS=A},{"../utils":190,"../utils/assert":187,"../webgl-context":206,"../webgl-context/context-features":198,"../webgl-utils":218,"../webgl-utils/constants-to-keys":214,"../webgl-utils/format-utils":216,"../webgl-utils/typed-array-utils":223,"./buffer":227,"./clear":228,"./renderbuffer":235,"./resource":236,"./texture-2d":240,"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/defineProperty":9,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20,"@babel/runtime/helpers/slicedToArray":22}],231:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Image",{enumerable:!0,get:function(){return i.Image}}),Object.defineProperty(r,"WebGLRenderingContext",{enumerable:!0,get:function(){return i.WebGLRenderingContext}}),Object.defineProperty(r,"WebGLProgram",{enumerable:!0,get:function(){return i.WebGLProgram}}),Object.defineProperty(r,"WebGLShader",{enumerable:!0,get:function(){return i.WebGLShader}}),Object.defineProperty(r,"WebGLBuffer",{enumerable:!0,get:function(){return i.WebGLBuffer}}),Object.defineProperty(r,"WebGLFramebuffer",{enumerable:!0,get:function(){return i.WebGLFramebuffer}}),Object.defineProperty(r,"WebGLRenderbuffer",{enumerable:!0,get:function(){return i.WebGLRenderbuffer}}),Object.defineProperty(r,"WebGLTexture",{enumerable:!0,get:function(){return i.WebGLTexture}}),Object.defineProperty(r,"WebGLUniformLocation",{enumerable:!0,get:function(){return i.WebGLUniformLocation}}),Object.defineProperty(r,"WebGLActiveInfo",{enumerable:!0,get:function(){return i.WebGLActiveInfo}}),Object.defineProperty(r,"WebGLShaderPrecisionFormat",{enumerable:!0,get:function(){return i.WebGLShaderPrecisionFormat}}),Object.defineProperty(r,"WebGL2RenderingContext",{enumerable:!0,get:function(){return i.WebGL2RenderingContext}}),Object.defineProperty(r,"webGLTypesAvailable",{enumerable:!0,get:function(){return i.webGLTypesAvailable}}),Object.defineProperty(r,"isWebGL",{enumerable:!0,get:function(){return a.isWebGL}}),Object.defineProperty(r,"isWebGL2",{enumerable:!0,get:function(){return a.isWebGL2}}),Object.defineProperty(r,"createGLContext",{enumerable:!0,get:function(){return a.createGLContext}}),Object.defineProperty(r,"destroyGLContext",{enumerable:!0,get:function(){return a.destroyGLContext}}),Object.defineProperty(r,"withParameters",{enumerable:!0,get:function(){return o.withParameters}}),Object.defineProperty(r,"resetParameters",{enumerable:!0,get:function(){return o.resetParameters}}),Object.defineProperty(r,"getContextInfo",{enumerable:!0,get:function(){return s.getContextInfo}}),Object.defineProperty(r,"clear",{enumerable:!0,get:function(){return u.clear}}),Object.defineProperty(r,"parseUniformName",{enumerable:!0,get:function(){return l.parseUniformName}}),Object.defineProperty(r,"getUniformSetter",{enumerable:!0,get:function(){return l.getUniformSetter}}),Object.defineProperty(r,"Buffer",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"Shader",{enumerable:!0,get:function(){return f.Shader}}),Object.defineProperty(r,"VertexShader",{enumerable:!0,get:function(){return f.VertexShader}}),Object.defineProperty(r,"FragmentShader",{enumerable:!0,get:function(){return f.FragmentShader}}),Object.defineProperty(r,"Program",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"Framebuffer",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"Renderbuffer",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(r,"Texture2D",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(r,"TextureCube",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(r,"VertexArray",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(r,"TransformFeedback",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(r,"Query",{enumerable:!0,get:function(){return y.default}});var i=e("../webgl-utils"),a=e("../webgl-context/context"),o=e("../webgl-context/context-state"),s=e("../webgl-context/context-limits"),u=e("./clear"),l=e("./uniforms"),c=n(e("./buffer")),f=e("./shader"),d=n(e("./program")),h=n(e("./framebuffer")),p=n(e("./renderbuffer")),m=n(e("./texture-2d")),b=n(e("./texture-cube")),g=n(e("./vertex-array")),v=n(e("./transform-feedback")),y=n(e("./query"))},{"../webgl-context/context":201,"../webgl-context/context-limits":199,"../webgl-context/context-state":200,"../webgl-utils":218,"./buffer":227,"./clear":228,"./framebuffer":230,"./program":233,"./query":234,"./renderbuffer":235,"./shader":238,"./texture-2d":240,"./texture-cube":242,"./transform-feedback":244,"./uniforms":246,"./vertex-array":248,"@babel/runtime/helpers/interopRequireDefault":13}],232:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=n(e("./accessor")),s=e("../webgl-utils"),u=e("../webgl-utils/attribute-utils");r.default=function(){function e(t){(0,i.default)(this,e),this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}return(0,a.default)(e,[{key:"getAttributeInfo",value:function(e){var t=Number(e);return Number.isFinite(t)?this.attributeInfos[t]:this.attributeInfosByName[e]||null}},{key:"getAttributeLocation",value:function(e){var t=this.getAttributeInfo(e);return t?t.location:-1}},{key:"getAttributeAccessor",value:function(e){var t=this.getAttributeInfo(e);return t?t.accessor:null}},{key:"getVaryingInfo",value:function(e){var t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}},{key:"getVaryingIndex",value:function(e){var t=this.getVaryingInfo();return t?t.location:-1}},{key:"getVaryingAccessor",value:function(e){var t=this.getVaryingInfo();return t?t.accessor:null}},{key:"_readAttributesFromProgram",value:function(e){for(var t=e.gl,r=t.getProgramParameter(e.handle,35721),n=0;n<r;n++){var i=t.getActiveAttrib(e.handle,n),a=i.name,o=i.type,s=i.size,u=t.getAttribLocation(e.handle,a);u>=0&&this._addAttribute(u,a,o,s)}this.attributeInfos.sort(function(e,t){return e.location-t.location})}},{key:"_readVaryingsFromProgram",value:function(e){var t=e.gl;if((0,s.isWebGL2)(t)){for(var r=t.getProgramParameter(e.handle,35971),n=0;n<r;n++){var i=t.getTransformFeedbackVarying(e.handle,n);this._addVarying(n,i.name,i.type,i.size)}this.varyingInfos.sort(function(e,t){return e.location-t.location})}}},{key:"_addAttribute",value:function(e,t,r,n){var i=(0,u.decomposeCompositeGLType)(r),a={type:i.type,size:n*i.components};this._inferProperties(e,t,a);var s={location:e,name:t,accessor:new o.default(a)};this.attributeInfos.push(s),this.attributeInfosByName[s.name]=s}},{key:"_inferProperties",value:function(e,t,r){/instance/i.test(t)&&(r.divisor=1)}},{key:"_addVarying",value:function(e,t,r,n){var i=(0,u.decomposeCompositeGLType)(r),a={location:e,name:t,accessor:new o.default({type:i.type,size:n*i.components})};this.varyingInfos.push(a),this.varyingInfosByName[a.name]=a}}]),e}()},{"../webgl-utils":218,"../webgl-utils/attribute-utils":213,"./accessor":226,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/interopRequireDefault":13}],233:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/get")),l=n(e("@babel/runtime/helpers/inherits")),c=n(e("@babel/runtime/helpers/assertThisInitialized")),f=n(e("./resource")),d=n(e("./texture")),h=n(e("./framebuffer")),p=e("./uniforms"),m=e("./shader"),b=n(e("./program-configuration")),g=e("../webgl-context/context-state"),v=e("../webgl/uniforms"),y=e("../webgl-utils"),_=e("../webgl-utils/attribute-utils"),x=e("../webgl-utils/constants-to-keys"),w=e("../utils"),E=n(e("../utils/assert"));r.default=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.default)(this,t),(r=(0,o.default)(this,(0,s.default)(t).call(this,e,n))).stubRemovedMethods("Program","v6.0",["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"]),r._isCached=!1,r.initialize(n),Object.seal((0,c.default)((0,c.default)(r))),r._setId(n.id),r}return(0,l.default)(t,f.default),(0,a.default)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.vs,r=e.fs,n=e.varyings,i=e.bufferMode,a=void 0===i?35981:i;return this.vs="string"==typeof t?new m.VertexShader(this.gl,{id:"".concat(e.id,"-vs"),source:t}):t,this.fs="string"==typeof r?new m.FragmentShader(this.gl,{id:"".concat(e.id,"-fs"),source:r}):r,(0,E.default)(this.vs instanceof m.VertexShader),(0,E.default)(this.fs instanceof m.FragmentShader),this.uniforms={},this.samplers={},n&&((0,y.assertWebGL2Context)(this.gl),this.varyings=n,this.gl.transformFeedbackVaryings(this.handle,n,a)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new b.default(this),this.setProps(e)}},{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:(0,u.default)((0,s.default)(t.prototype),"delete",this).call(this,e)}},{key:"setProps",value:function(e){return"uniforms"in e&&this.setUniforms(e.uniforms,e.samplers),this}},{key:"draw",value:function(e){var t=this,r=e.logPriority,n=e.drawMode,i=void 0===n?4:n,a=e.vertexCount,o=e.offset,s=void 0===o?0:o,u=e.start,l=e.end,c=e.isIndexed,f=void 0!==c&&c,d=e.indexType,h=void 0===d?5123:d,p=e.isInstanced,m=void 0!==p&&p,b=e.instanceCount,v=void 0===b?0:b,k=e.vertexArray,P=void 0===k?null:k,M=e.transformFeedback,A=e.framebuffer,C=e.parameters,O=void 0===C?{}:C,T=e.uniforms,S=void 0===T?{}:T,R=e.samplers,L=void 0===R?{}:R;if(void 0!==r){var D=A?A.id:"default",j="mode=".concat((0,x.getKey)(this.gl,i)," verts=").concat(a," ")+"instances=".concat(v," indexType=").concat((0,x.getKey)(this.gl,h)," ")+"isInstanced=".concat(m," isIndexed=").concat(f," ")+"Framebuffer=".concat(D);w.log.log(r,j)()}return this.gl.useProgram(this.handle),(0,E.default)(P),P.bindForDraw(a,v,function(){if(S&&(w.log.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)"),t.setUniforms(S,L)),t._bindTextures(),void 0!==A&&(O=Object.assign({},O,{framebuffer:A})),M){var e=(0,_.getPrimitiveDrawMode)(i);M.begin(e)}(0,g.withParameters)(t.gl,O,function(){f&&m?t.gl.drawElementsInstanced(i,a,h,s,v):f&&(0,y.isWebGL2)(t.gl)&&!isNaN(u)&&!isNaN(l)?t.gl.drawRangeElements(i,u,l,a,h,s):f?t.gl.drawElements(i,a,h,s):m?t.gl.drawArraysInstanced(i,s,a,v):t.gl.drawArrays(i,s,a)}),M&&M.end()}),this}},{key:"setSamplers",value:function(e){Object.assign(this.samplers,e)}},{key:"setUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},n=!1,i={};for(var a in e)(0,v.areUniformsEqual)(this.uniforms[a],e[a])||(n=!0,i[a]=e[a],this.uniforms[a]=(0,v.getUniformCopy)(e[a]));return n&&(r(),(0,v.checkUniformValues)(i,this.id,this._uniformSetters),Object.assign(this.samplers,t),this._setUniforms(i)),this}},{key:"_bindTextures",value:function(){for(var e in this.uniforms){var t=this._uniformSetters[e];if(t&&void 0!==t.textureIndex){var r=this.uniforms[e],n=this.samplers[e];r instanceof h.default&&(r=r.texture),r instanceof d.default&&r.bind(t.textureIndex),n&&n.bind(t.textureIndex)}}}},{key:"_setUniforms",value:function(e){for(var t in this.gl.useProgram(this.handle),e){var r=e[t],n=this._uniformSetters[t];if(n)if(r instanceof h.default&&(r=r.texture),r instanceof d.default){void 0===n.textureIndex&&(n.textureIndex=this._textureIndexCounter++);var i=n.textureIndex;r.bind(i),n(i)}else n(r)}return this}},{key:"_createHandle",value:function(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function(){this.gl.deleteProgram(this.handle)}},{key:"_getOptionsFromHandle",value:function(e){var t=this.gl.getAttachedShaders(e),r={},n=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:r.vs=new m.VertexShader({handle:u});break;case 35632:r.fs=new m.FragmentShader({handle:u})}}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r}},{key:"_getParameter",value:function(e){return this.gl.getProgramParameter(this.handle,e)}},{key:"_setId",value:function(e){if(!e){var t=this._getName();this.id=(0,w.uid)(t)}}},{key:"_getName",value:function(){var e=this.vs.getName()||this.fs.getName();return e=(e=e.replace(/shader/i,""))?"".concat(e,"-program"):"program"}},{key:"_compileAndLink",value:function(){var e=this.gl;if((e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),w.log.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),w.log.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||w.log.priority>0)&&(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35714)))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)))}},{key:"_readUniformLocationsFromLinkedProgram",value:function(){var e=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(var t=0;t<this._uniformCount;t++){var r=this.gl.getActiveUniform(this.handle,t),n=(0,p.parseUniformName)(r.name),i=n.name,a=n.isArray,o=e.getUniformLocation(this.handle,i);this._uniformSetters[i]=(0,p.getUniformSetter)(e,o,r,a)}this._textureIndexCounter=0}},{key:"reset",value:function(){}},{key:"getActiveUniforms",value:function(e,t){return this.gl.getActiveUniforms(this.handle,e,t)}},{key:"getUniformBlockIndex",value:function(e){return this.gl.getUniformBlockIndex(this.handle,e)}},{key:"getActiveUniformBlockParameter",value:function(e,t){return this.gl.getActiveUniformBlockParameter(this.handle,e,t)}},{key:"uniformBlockBinding",value:function(e,t){this.gl.uniformBlockBinding(this.handle,e,t)}}]),t}()},{"../utils":190,"../utils/assert":187,"../webgl-context/context-state":200,"../webgl-utils":218,"../webgl-utils/attribute-utils":213,"../webgl-utils/constants-to-keys":214,"../webgl/uniforms":246,"./framebuffer":230,"./program-configuration":232,"./resource":236,"./shader":238,"./texture":243,"./uniforms":246,"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/get":10,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],234:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),s=n(e("@babel/runtime/helpers/createClass")),u=n(e("@babel/runtime/helpers/inherits")),l=n(e("@babel/runtime/helpers/assertThisInitialized")),c=n(e("./resource")),f=e("../webgl-context/context-features"),d=e("../webgl-utils"),h=n(e("../webgl-utils/query-manager")),p=n(e("../utils/assert")),m=function(e){return e},b=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.default)(this,t),r=(0,a.default)(this,(0,o.default)(t).call(this,e,n));var s=n.onComplete,u=void 0===s?m:s,c=n.onError,f=void 0===c?m:c;return r.target=null,r.onComplete=u,r.onError=f,r.promise=null,Object.seal((0,l.default)((0,l.default)(r))),r}return(0,u.default)(t,c.default),(0,s.default)(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=(0,d.isWebGL2)(e),n=(0,f.hasFeatures)(e,f.FEATURES.TIMER_QUERY),i=r||n,a=!0,o=!1,s=void 0;try{for(var u,l=t[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){switch(u.value){case"queries":i=i&&r;break;case"timers":i=i&&n;break;case"timestamps":var c=n?e.getQuery(36392,34916):0;i=i&&c>0;break;default:(0,p.default)(!1)}}}catch(e){o=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}return i}}]),(0,s.default)(t,[{key:"beginTimeElapsedQuery",value:function(){return this.begin(35007)}},{key:"beginOcclusionQuery",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).conservative;return this.begin(void 0!==e&&e?36202:35887)}},{key:"beginTransformFeedbackQuery",value:function(){return this.begin(35976)}},{key:"getTimestamp",value:function(){h.default.beginQuery(this,this.onComplete,this.onError);try{this.gl.queryCounter(this.handle,36392)}catch(e){h.default.rejectQuery(this,'Timer queries require "EXT_disjoint_timer_query" extension')}return this}},{key:"begin",value:function(e){h.default.beginQuery(this,this.onComplete,this.onError),this.target=e;try{this.gl.beginQuery(this.target,this.handle)}catch(e){h.default.rejectQuery(this,"Query not supported")}return this}},{key:"end",value:function(){return this.target&&(this.gl.endQuery(this.target),this.target=null),this}},{key:"cancel",value:function(){return this.end(),h.default.cancelQuery(this),this}},{key:"isResultAvailable",value:function(){return this.gl.getQueryParameter(this.handle,34919)}},{key:"getResult",value:function(){var e=this.gl.getQueryParameter(this.handle,34918);return Number.isFinite(e)?e/1e6:0}},{key:"_createHandle",value:function(){return t.isSupported(this.gl)?this.gl.createQuery():null}},{key:"_deleteHandle",value:function(){h.default.deleteQuery(this),this.gl.deleteQuery(this.handle)}}],[{key:"poll",value:function(e){h.default.poll(e)}}]),t}();r.default=b,h.default.setInvalidator({queryType:b,errorMessage:"Disjoint GPU operation invalidated timer queries",checkInvalid:function(e){return e.getParameter(36795)}})},{"../utils/assert":187,"../webgl-context/context-features":198,"../webgl-utils":218,"../webgl-utils/query-manager":219,"./resource":236,"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],235:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.RENDERBUFFER_FORMATS=void 0;var i,a=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/createClass")),l=n(e("@babel/runtime/helpers/inherits")),c=n(e("@babel/runtime/helpers/assertThisInitialized")),f=n(e("@babel/runtime/helpers/defineProperty")),d=e("../webgl-utils"),h=n(e("./resource")),p=n(e("../utils/assert")),m="EXT_color_buffer_float",b=((0,f.default)(i={},33189,{}),(0,f.default)(i,33190,{gl2:!0}),(0,f.default)(i,36012,{gl2:!0}),(0,f.default)(i,36168,{}),(0,f.default)(i,34041,{}),(0,f.default)(i,35056,{gl2:!0}),(0,f.default)(i,36013,{gl2:!0}),(0,f.default)(i,32854,{}),(0,f.default)(i,36194,{}),(0,f.default)(i,32855,{}),(0,f.default)(i,33321,{gl2:!0}),(0,f.default)(i,33330,{gl2:!0}),(0,f.default)(i,33329,{gl2:!0}),(0,f.default)(i,33332,{gl2:!0}),(0,f.default)(i,33331,{gl2:!0}),(0,f.default)(i,33334,{gl2:!0}),(0,f.default)(i,33333,{gl2:!0}),(0,f.default)(i,33323,{gl2:!0}),(0,f.default)(i,33336,{gl2:!0}),(0,f.default)(i,33335,{gl2:!0}),(0,f.default)(i,33338,{gl2:!0}),(0,f.default)(i,33337,{gl2:!0}),(0,f.default)(i,33340,{gl2:!0}),(0,f.default)(i,33339,{gl2:!0}),(0,f.default)(i,32849,{gl2:!0}),(0,f.default)(i,32856,{gl2:!0}),(0,f.default)(i,32857,{gl2:!0}),(0,f.default)(i,36220,{gl2:!0}),(0,f.default)(i,36238,{gl2:!0}),(0,f.default)(i,36975,{gl2:!0}),(0,f.default)(i,36214,{gl2:!0}),(0,f.default)(i,36232,{gl2:!0}),(0,f.default)(i,36226,{gl2:!0}),(0,f.default)(i,36208,{gl2:!0}),(0,f.default)(i,33325,{gl2:m}),(0,f.default)(i,33327,{gl2:m}),(0,f.default)(i,34842,{gl2:m}),(0,f.default)(i,33326,{gl2:m}),(0,f.default)(i,33328,{gl2:m}),(0,f.default)(i,34836,{gl2:m}),(0,f.default)(i,35898,{gl2:m}),i);r.RENDERBUFFER_FORMATS=b,r.default=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.default)(this,t),(r=(0,o.default)(this,(0,s.default)(t).call(this,e,n))).initialize(n),Object.seal((0,c.default)((0,c.default)(r))),r}return(0,l.default)(t,h.default),(0,u.default)(t,null,[{key:"isSupported",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).format;return!t||function(e,t,r){var n=r[t];if(!n)return!1;var i=(0,d.isWebGL2)(e)&&n.gl2||n.gl1;return"string"==typeof i?e.getExtension(i):i}(e,t,b)}},{key:"getSamplesForFormat",value:function(e,t){return e.getInternalformatParameter(36161,t.format,32937)}}]),(0,u.default)(t,[{key:"initialize",value:function(e){var t=e.format,r=e.width,n=void 0===r?1:r,i=e.height,a=void 0===i?1:i,o=e.samples,s=void 0===o?0:o;return(0,p.default)(t,"Needs format"),this.gl.bindRenderbuffer(36161,this.handle),0!==s&&(0,d.isWebGL2)(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,t,n,a):this.gl.renderbufferStorage(36161,t,n,a),this.format=t,this.width=n,this.height=a,this.samples=s,this}},{key:"resize",value:function(e){var t=e.width,r=e.height;return t!==this.width||r!==this.height?this.initialize({width:t,height:r,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteRenderbuffer(this.handle)}},{key:"_bindHandle",value:function(e){this.gl.bindRenderbuffer(36161,e)}},{key:"_syncHandle",value:function(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}]),t}()},{"../utils/assert":187,"../webgl-utils":218,"./resource":236,"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/defineProperty":9,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],236:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=n(e("../init")),s=e("../webgl-utils"),u=e("../utils"),l=n(e("../utils/assert")),c="Resource subclass must define virtual methods";r.default=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.default)(this,e),(0,s.assertWebGLContext)(t);var n=r.id,a=r.userData,o=void 0===a?{}:a;this.gl=t,this.id=n||(0,u.uid)(this.constructor.name),this.userData=o,this._bound=!1,this._handle=r.handle,void 0===this._handle&&(this._handle=this._createHandle()),this._addStats()}return(0,a.default)(e,[{key:"toString",value:function(){return"".concat(this.constructor.name,"(").concat(this.id,")")}},{key:"delete",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).deleteChildren,t=void 0!==e&&e,r=this._handle&&this._deleteHandle(this._handle);return this._handle=null,this._removeStats(),r&&t&&r.filter(Boolean).forEach(function(e){e.delete()}),this}},{key:"bind",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof t?(this._bindHandle(t),this):(this._bound?e=t():(this._bindHandle(this.handle),this._bound=!0,e=t(),this._bound=!1,this._bindHandle(null)),e)}},{key:"unbind",value:function(){this.bind(null)}},{key:"getParameter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=(0,s.getKeyValue)(this.gl,e),(0,l.default)(e);var r=(this.constructor.PARAMETERS||{})[e];if(r){var n=(0,s.isWebGL2)(this.gl);if(!((!("webgl2"in r)||n)&&(!("extension"in r)||this.gl.getExtension(r.extension))))return n?"webgl2"in r?r.webgl2:r.webgl1:r.webgl1}return this._getParameter(e,t)}},{key:"getParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},r=t.parameters,n=t.keys,i=this.constructor.PARAMETERS||{},a=(0,s.isWebGL2)(this.gl),o={},u=r||Object.keys(i),l=!0,c=!1,f=void 0;try{for(var d,h=u[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var p=d.value,m=i[p];if(m&&(!("webgl2"in m)||a)&&(!("extension"in m)||this.gl.getExtension(m.extension))){var b=n?(0,s.getKey)(this.gl,p):p;o[b]=this.getParameter(p,e),n&&"GLenum"===m.type&&(o[b]=(0,s.getKey)(this.gl,o[b]))}}}catch(e){c=!0,f=e}finally{try{l||null==h.return||h.return()}finally{if(c)throw f}}return o}},{key:"setParameter",value:function(e,t){e=(0,s.getKeyValue)(this.gl,e),(0,l.default)(e);var r=(this.constructor.PARAMETERS||{})[e];if(r){var n=(0,s.isWebGL2)(this.gl);if(!((!("webgl2"in r)||n)&&(!("extension"in r)||this.gl.getExtension(r.extension))))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(t=(0,s.getKeyValue)(t))}return this._setParameter(e,t),this}},{key:"setParameters",value:function(e){for(var t in e)this.setParameter(t,e[t]);return this}},{key:"stubRemovedMethods",value:function(e,t,r){return(0,u.stubRemovedMethods)(this,e,t,r)}},{key:"initialize",value:function(e){}},{key:"_createHandle",value:function(){throw new Error(c)}},{key:"_deleteHandle",value:function(){throw new Error(c)}},{key:"_bindHandle",value:function(){throw new Error(c)}},{key:"_getOptsFromHandle",value:function(){throw new Error(c)}},{key:"_getParameter",value:function(e,t){throw new Error(c)}},{key:"_setParameter",value:function(e,t){throw new Error(c)}},{key:"_context",value:function(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_addStats",value:function(){var e=this.constructor.name,t=o.default.stats;t.resourceCount=t.resourceCount||0,t.resourceMap=t.resourceMap||{},t.resourceCount++,t.resourceMap[e]=t.resourceMap[e]||{created:0,active:0},t.resourceMap[e].created++,t.resourceMap[e].active++}},{key:"_removeStats",value:function(){o.default.stats.resourceMap[this.constructor.name].active--}},{key:"handle",get:function(){return this._handle}}]),e}()},{"../init":123,"../utils":190,"../utils/assert":187,"../webgl-utils":218,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/interopRequireDefault":13}],237:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),s=n(e("@babel/runtime/helpers/createClass")),u=n(e("@babel/runtime/helpers/inherits")),l=n(e("@babel/runtime/helpers/assertThisInitialized")),c=e("../webgl-utils"),f=n(e("./resource"));r.default=function(e){function t(e,r){var n;return(0,i.default)(this,t),(0,c.assertWebGL2Context)(e),n=(0,a.default)(this,(0,o.default)(t).call(this,e,r)),Object.seal((0,l.default)((0,l.default)(n))),n}return(0,u.default)(t,f.default),(0,s.default)(t,null,[{key:"isSupported",value:function(e){return(0,c.isWebGL2)(e)}}]),(0,s.default)(t,[{key:"bind",value:function(e){return this.gl.bindSampler(e,this.handle),this}},{key:"unbind",value:function(e){return this.gl.bindSampler(e,null),this}},{key:"_createHandle",value:function(){return this.gl.createSampler()}},{key:"_deleteHandle",value:function(){this.gl.deleteSampler(this.handle)}},{key:"_getParameter",value:function(e){return this.gl.getSamplerParameter(this.handle,e)}},{key:"_setParameter",value:function(e,t){switch(e){case 33082:case 33083:this.gl.samplerParameterf(this.handle,e,t);break;default:this.gl.samplerParameteri(this.handle,e,t)}return this}}]),t}()},{"../webgl-utils":218,"./resource":236,"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],238:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.FragmentShader=r.VertexShader=r.Shader=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),s=n(e("@babel/runtime/helpers/createClass")),u=n(e("@babel/runtime/helpers/inherits")),l=n(e("./resource")),c=e("../webgl-utils"),f=e("../utils"),d=n(e("../utils/assert")),h="Shader: GLSL source code must be a JavaScript string",p=35632,m=35633,b=function(e){function t(e,r){var n;(0,i.default)(this,t),(0,c.assertWebGLContext)(e),(0,d.default)("string"==typeof r.source,h);var s=(0,c.getShaderName)(r.source,null)||r.id||(0,f.uid)("unnamed ".concat(t.getTypeName(r.shaderType)));return(n=(0,a.default)(this,(0,o.default)(t).call(this,e,{id:s}))).shaderType=r.shaderType,n.source=r.source,n.initialize(r),n}return(0,u.default)(t,l.default),(0,s.default)(t,null,[{key:"getTypeName",value:function(e){switch(e){case m:return"vertex-shader";case p:return"fragment-shader";default:return(0,d.default)(!1),"unknown"}}}]),(0,s.default)(t,[{key:"initialize",value:function(e){var t=e.source,r=(0,c.getShaderName)(t,null);r&&(this.id=(0,f.uid)(r)),this._compile(t)}},{key:"getParameter",value:function(e){return this.gl.getShaderParameter(this.handle,e)}},{key:"toString",value:function(){return"".concat(this.getTypeName(this.shaderType),":").concat(this.id)}},{key:"getName",value:function(){return(0,c.getShaderName)(this.source)||"unnamed-shader"}},{key:"getSource",value:function(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function(){var e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}},{key:"_compile",value:function(){if(this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){var e=this.gl.getShaderInfoLog(this.handle),t=(0,c.parseGLSLCompilerError)(e,this.source,this.shaderType,this.id),r=t.shaderName,n=t.errors,i=t.warnings;throw f.log.error("GLSL compilation errors in ".concat(r,"\n").concat(n))(),f.log.warn("GLSL compilation warnings in ".concat(r,"\n").concat(i))(),new Error("GLSL compilation errors in ".concat(r))}}},{key:"_deleteHandle",value:function(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function(){return{type:this.getParameter(35663),source:this.getSource()}}}]),t}();r.Shader=b,r.VertexShader=function(e){function t(e,r){return(0,i.default)(this,t),"string"==typeof r&&(f.log.deprecated("new FragmentShader(gl, source)","new FragmentShader(gl, {source})","6.1"),r={source:r}),(0,a.default)(this,(0,o.default)(t).call(this,e,Object.assign({},r,{shaderType:m})))}return(0,u.default)(t,b),(0,s.default)(t,[{key:"_createHandle",value:function(){return this.gl.createShader(m)}}]),t}(),r.FragmentShader=function(e){function t(e,r){return(0,i.default)(this,t),"string"==typeof r&&(f.log.deprecated("new FragmentShader(gl, source)","new FragmentShader(gl, {source})","6.1"),r={source:r}),(0,a.default)(this,(0,o.default)(t).call(this,e,Object.assign({},r,{shaderType:p})))}return(0,u.default)(t,b),(0,s.default)(t,[{key:"_createHandle",value:function(){return this.gl.createShader(p)}}]),t}()},{"../utils":190,"../utils/assert":187,"../webgl-utils":218,"./resource":236,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],239:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),s=n(e("@babel/runtime/helpers/createClass")),u=n(e("@babel/runtime/helpers/inherits")),l=n(e("../webgl/texture")),c=e("../webgl-utils");r.default=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};throw(0,i.default)(this,t),(0,a.default)(this,(0,o.default)(t).call(this,e,r)),new Error("Texture2DArray not yet implemented")}return(0,u.default)(t,l.default),(0,s.default)(t,null,[{key:"isSupported",value:function(e){return(0,c.isWebGL2)(e)}}]),t}()},{"../webgl-utils":218,"../webgl/texture":243,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],240:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),s=n(e("@babel/runtime/helpers/createClass")),u=n(e("@babel/runtime/helpers/inherits")),l=n(e("@babel/runtime/helpers/assertThisInitialized")),c=n(e("./texture")),f=e("../webgl-utils");r.default=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.default)(this,t),(0,f.assertWebGLContext)(e),(r=(0,a.default)(this,(0,o.default)(t).call(this,e,Object.assign({},n,{target:3553})))).initialize(n),Object.seal((0,l.default)((0,l.default)(r))),r}return(0,u.default)(t,c.default),(0,s.default)(t,null,[{key:"isSupported",value:function(e,t){return c.default.isSupported(e,t)}}]),(0,s.default)(t,[{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,t=this.gl;if(void 0===e)throw new Error("Texture.bind: must specify texture unit");return this.textureUnit=e,t.activeTexture(33984+e),t.bindTexture(this.target,this.handle),e}},{key:"unbind",value:function(){var e=this.gl;if(void 0===this.textureUnit)throw new Error("Texture.unbind: texture unit not specified");return e.activeTexture(33984+this.textureUnit),e.bindTexture(this.target,null),this.textureUnit}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}}]),t}()},{"../webgl-utils":218,"./texture":243,"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],241:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),s=n(e("@babel/runtime/helpers/createClass")),u=n(e("@babel/runtime/helpers/inherits")),l=n(e("@babel/runtime/helpers/assertThisInitialized")),c=e("../webgl-utils"),f=e("../webgl-context/context-state"),d=n(e("../webgl/texture")),h=n(e("./buffer"));r.default=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.default)(this,t),(0,c.assertWebGL2Context)(e),(r=(0,a.default)(this,(0,o.default)(t).call(this,e,Object.assign({},n,{target:n.target||32879})))).width=null,r.height=null,r.depth=null,Object.seal((0,l.default)((0,l.default)(r))),r.setImageData(n),n.generateMipmap&&r.generateMipmap(),r}return(0,u.default)(t,d.default),(0,s.default)(t,null,[{key:"isSupported",value:function(e){return(0,c.isWebGL2)(e)}}]),(0,s.default)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opts=Object.assign({},this.opts,t);var r=this.opts,n=r.pixels,i=r.settings;i&&((0,f.withParameters)(i,function(){n&&e.setImage3D(e.opts)}),this.setParameters(t))}},{key:"setImage3D",value:function(e){var t=e.level,r=void 0===t?0:t,n=e.internalformat,i=void 0===n?6408:n,a=e.width,o=e.height,s=e.depth,u=void 0===s?1:s,l=e.border,c=void 0===l?0:l,f=e.format,d=e.type,p=void 0===d?5121:d,m=e.offset,b=void 0===m?0:m,g=e.pixels;ArrayBuffer.isView(g)?this.gl.texImage3D(this.target,r,i,a,o,u,c,f,p,g):g instanceof h.default&&(this.gl.bindBuffer(35052,g.handle),this.gl.texImage3D(this.target,r,i,a,o,u,c,f,p,b),this.gl.bindBuffer(35052,g.handle))}}]),t}()},{"../webgl-context/context-state":200,"../webgl-utils":218,"../webgl/texture":243,"./buffer":227,"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],242:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/inherits")),l=n(e("@babel/runtime/helpers/assertThisInitialized")),c=n(e("./texture")),f=n(e("../utils/assert")),d=[34069,34070,34071,34072,34073,34074],h=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.default)(this,t),(r=(0,o.default)(this,(0,s.default)(t).call(this,e,Object.assign({},n,{target:34067})))).initialize(n),Object.seal((0,l.default)((0,l.default)(r))),r}return(0,u.default)(t,c.default),(0,a.default)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.format,r=e.mipmaps,n=void 0===r||r,i=e.width,a=void 0===i?1:i,o=e.height,s=void 0===o?1:o,u=e.type,l=void 0===u?5121:u,c=e.dataFormat,d=this._deduceParameters({format:void 0===t?6408:t,type:l,dataFormat:c});l=d.type,c=d.dataFormat;var h=this._deduceImageSize({data:e[34069],width:a,height:s});(0,f.default)((a=h.width)===(s=h.height)),this.setCubeMapImageData(e),n&&this.generateMipmap(e),this.opts=e}},{key:"subImage",value:function(e){var t=e.x,r=e.y,n=e.mipmapLevel;return this._subImage({target:e.face,data:e.data,x:void 0===t?0:t,y:void 0===r?0:r,mipmapLevel:void 0===n?0:n})}},{key:"setCubeMapImageData",value:function(e){var t=e.width,r=e.height,n=e.pixels,i=e.border,a=void 0===i?0:i,o=e.format,s=void 0===o?6408:o,u=e.type,l=void 0===u?5121:u,c=this.gl;if(n=n||e.data,this.bind(),this.width||this.height)for(var f=0;f<d.length;f++){var h=d[f];c.texImage2D(h,0,s,t,r,a,s,l,n[h])}else for(var p=0;p<d.length;p++){var m=d[p];c.texImage2D(m,0,s,s,l,n[m])}}},{key:"bind",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).index;return void 0!==e&&this.gl.activeTexture(33984+e),this.gl.bindTexture(34067,this.handle),e}},{key:"unbind",value:function(){return this.gl.bindTexture(34067,null),this}}]),t}();r.default=h,h.FACES=d},{"../utils/assert":187,"./texture":243,"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],243:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.TEXTURE_FORMATS=void 0;var i,a=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/createClass")),l=n(e("@babel/runtime/helpers/inherits")),c=n(e("@babel/runtime/helpers/defineProperty")),f=n(e("./resource")),d=n(e("./buffer")),h=e("../webgl-context/context-state"),p=e("../webgl-utils"),m=e("../utils"),b=n(e("../utils/assert")),g=[9729,9728],v=((0,c.default)(i={},6407,{dataFormat:6407,types:[5121,33635]}),(0,c.default)(i,6408,{dataFormat:6408,types:[5121,32819,32820]}),(0,c.default)(i,6406,{dataFormat:6406,types:[5121]}),(0,c.default)(i,6409,{dataFormat:6409,types:[5121]}),(0,c.default)(i,6410,{dataFormat:6410,types:[5121]}),(0,c.default)(i,33326,{dataFormat:6403,types:[5126],gl2:!0}),(0,c.default)(i,33328,{dataFormat:33319,types:[5126],gl2:!0}),(0,c.default)(i,34837,{dataFormat:6407,types:[5126],gl2:!0}),(0,c.default)(i,34836,{dataFormat:6408,types:[5126],gl2:!0}),i);r.TEXTURE_FORMATS=v,r.default=function(e){function t(e,r){var n;(0,a.default)(this,t);var i=r.id,u=void 0===i?(0,m.uid)("texture"):i,l=r.handle,c=r.target;return(n=(0,o.default)(this,(0,s.default)(t).call(this,e,{id:u,handle:l}))).target=c,n.hasFloatTexture=e.getExtension("OES_texture_float"),n.textureUnit=void 0,n}return(0,l.default)(t,f.default),(0,u.default)(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.format,n=t.linearFiltering,i=!0;return r&&(i=(i=i&&function(e,t){var r=v[t];if(!r)return!1;if(void 0===r.gl1&&void 0===r.gl2)return!0;var n=(0,p.isWebGL2)(e)&&r.gl2||r.gl1;return"string"==typeof n?e.getExtension(n):n}(e,r))&&(!n||function(e,t){var r=v[t];switch(r&&r.types[0]){case 5126:return e.getExtension("OES_texture_float_linear");case 5131:return e.getExtension("OES_texture_half_float_linear");default:return!0}}(e,r))),i}}]),(0,u.default)(t,[{key:"toString",value:function(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=e.pixels,n=e.format,i=void 0===n?6408:n,a=e.type,o=void 0===a?5121:a,s=e.border,u=void 0===s?0:s,l=e.recreate,f=void 0!==l&&l,d=e.parameters,h=void 0===d?{}:d,p=e.pixelStore,b=void 0===p?{}:p,g=e.textureUnit,v=void 0===g?void 0:g,y=e.unpackFlipY,_=void 0===y||y,x=e.mipmaps,w=void 0===x||x;t||(t=void 0===r?null:r);var E=e.width,k=e.height,P=e.dataFormat,M=this._deduceParameters({format:i,type:o,dataFormat:P,compressed:!1,data:t,width:E,height:k});k=M.height,P=M.dataFormat,this.width=E=M.width,this.height=k,this.format=i,this.type=o,this.dataFormat=P,this.border=u,this.textureUnit=v,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle));var A=(0,c.default)({},37440,_),C=Object.assign({},A,b);this._isNPOT()&&w&&(m.log.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),w=!1,this._updateForNPOT(h)),this.mipmaps=w,this.setImageData({data:t,width:E,height:k,format:i,type:o,dataFormat:P,border:u,mipmaps:w,parameters:C}),w&&this.generateMipmap(),this.setParameters(h),f&&(this.data=t)}},{key:"resize",value:function(e){var t=e.width,r=e.height;return t!==this.width||r!==this.height?this.initialize({width:t,height:r,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:!1}):this}},{key:"generateMipmap",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindTexture(this.target,this.handle),(0,h.withParameters)(this.gl,t,function(){e.gl.generateMipmap(e.target)}),this.gl.bindTexture(this.target,null),this}},{key:"setImageData",value:function(e){var t=e.target,r=void 0===t?this.target:t,n=e.pixels,i=e.data,a=void 0===i?null:i,o=e.width,s=void 0===o?this.width:o,u=e.height,l=void 0===u?this.height:u,c=e.level,f=void 0===c?0:c,d=e.format,m=void 0===d?this.format:d,g=e.type,v=void 0===g?this.type:g,y=e.dataFormat,_=void 0===y?this.dataFormat:y,x=e.offset,w=void 0===x?0:x,E=e.border,k=void 0===E?this.border:E,P=e.compressed,M=void 0!==P&&P,A=e.parameters,C=void 0===A?{}:A;a||(a=void 0===n?null:n);var O=this._deduceParameters({format:m,type:v,dataFormat:_,compressed:M,data:a,width:s,height:l});v=O.type,_=O.dataFormat,M=O.compressed,s=O.width,l=O.height;var T=this.gl;T.bindTexture(this.target,this.handle);var S,R=this._getDataType({data:a,compressed:M});a=R.data,S=R.dataType,(0,h.withParameters)(this.gl,C,function(){switch(S){case"null":T.texImage2D(r,f,m,s,l,k,_,v,a);break;case"typed-array":T.texImage2D(r,f,m,s,l,k,_,v,a,w);break;case"buffer":(0,p.assertWebGL2Context)(T),T.bindBuffer(35052,a.handle||a),T.texImage2D(r,f,m,s,l,k,_,v,w),T.bindBuffer(35052,null);break;case"browser-object":(0,p.isWebGL2)(T)?T.texImage2D(r,f,m,s,l,k,_,v,a):T.texImage2D(r,f,m,_,v,a);break;case"compressed":T.compressedTexImage2D(r,f,m,s,l,k,a);break;default:(0,b.default)(!1,"Unknown image data type")}})}},{key:"setSubImageData",value:function(e){var t=this,r=e.target,n=void 0===r?this.target:r,i=e.pixels,a=void 0===i?null:i,o=e.data,s=void 0===o?null:o,u=e.x,l=void 0===u?0:u,c=e.y,f=void 0===c?0:c,m=e.width,b=void 0===m?this.width:m,g=e.height,v=void 0===g?this.height:g,y=e.level,_=void 0===y?0:y,x=e.format,w=void 0===x?this.format:x,E=e.type,k=void 0===E?this.type:E,P=e.dataFormat,M=void 0===P?this.dataFormat:P,A=e.compressed,C=void 0!==A&&A,O=e.offset,T=void 0===O?0:O,S=e.parameters,R=void 0===S?{}:S,L=this._deduceParameters({format:w,type:k,dataFormat:M,compressed:C,data:s,width:b,height:v});if(k=L.type,M=L.dataFormat,C=L.compressed,b=L.width,v=L.height,s||(s=a),s&&s.data){var D=s;s=D.data,b=D.shape[0],v=D.shape[1]}s instanceof d.default&&(s=s.handle),this.gl.bindTexture(this.target,this.handle),(0,h.withParameters)(this.gl,R,function(){C?t.gl.compressedTexSubImage2D(n,_,l,f,b,v,w,s):null===s?t.gl.texSubImage2D(n,_,l,f,b,v,M,k,null):ArrayBuffer.isView(s)?t.gl.texSubImage2D(n,_,l,f,b,v,M,k,s,T):s instanceof p.WebGLBuffer?((0,p.assertWebGL2Context)(t.gl),t.gl.bindBuffer(35052,s),t.gl.texSubImage2D(n,_,l,f,b,v,M,k,T),t.gl.bindBuffer(35052,null)):(0,p.isWebGL2)(t.gl)?t.gl.texSubImage2D(n,_,l,f,b,v,M,k,s):t.gl.texSubImage2D(n,_,l,f,M,k,s)}),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function(e){var t=e.framebuffer,r=e.x,n=void 0===r?0:r,i=e.y,a=void 0===i?0:i,o=e.width,s=e.height,u=e.level,l=void 0===u?0:u,c=e.internalFormat,f=void 0===c?6408:c,d=e.border,h=void 0===d?0:d;t&&t.bind(),this.bind(0),this.gl.copyTexImage2D(this.target,l,f,n,a,o,s,h),this.unbind(),t&&t.unbind()}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;if(void 0===e)throw new Error("Texture.bind: must specify texture unit");return this.textureUnit=e,this.gl.activeTexture(33984+e),this.gl.bindTexture(this.target,this.handle),e}},{key:"unbind",value:function(){if(void 0===this.textureUnit)throw new Error("Texture.unbind: texture unit not specified");return this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,null),this.textureUnit}},{key:"_getDataType",value:function(e){var t=e.data,r=e.compressed;return void 0!==r&&r?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof d.default?{data:t.handle,dataType:"buffer"}:t instanceof p.WebGLBuffer?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}},{key:"setImage3D",value:function(e){var t=e.level,r=void 0===t?0:t,n=e.internalformat,i=void 0===n?6408:n,a=e.width,o=e.height,s=e.depth,u=void 0===s?1:s,l=e.border,c=void 0===l?0:l,f=e.format,h=e.type,p=void 0===h?5121:h,m=e.offset,b=void 0===m?0:m,g=e.pixels;return ArrayBuffer.isView(g)?(this.gl.texImage3D(this.target,r,i,a,o,u,c,f,p,g),this):(g instanceof d.default&&(this.gl.bindBuffer(35052,g.handle),this.gl.texImage3D(this.target,r,i,a,o,u,c,f,p,b)),this)}},{key:"_deduceParameters",value:function(e){var t=e.format,r=e.data,n=e.width,i=e.height,a=e.dataFormat,o=e.type,s=e.compressed,u=v[t];a=a||u&&u.dataFormat,o=o||u&&u.types[0],s=s||u&&u.compressed;var l=this._deduceImageSize(r,n,i);return{dataFormat:a,type:o,compressed:s,width:n=l.width,height:i=l.height,format:t,data:r}}},{key:"_deduceImageSize",value:function(e,t,r){var n;return n="undefined"!=typeof ImageData&&e instanceof ImageData?{width:e.width,height:e.height}:"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement?{width:e.width,height:e.height}:"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:r}:{width:t>=0?t:1,height:r>=0?r:1},(0,b.default)(n,"Could not deduced texture size"),(0,b.default)(void 0===t||n.width===t,"Deduced texture width does not match supplied width"),(0,b.default)(void 0===r||n.height===r,"Deduced texture height does not match supplied height"),n}},{key:"_createHandle",value:function(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function(){this.gl.deleteTexture(this.handle)}},{key:"_getParameter",value:function(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}},{key:"_setParameter",value:function(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:(0,b.default)(!1);break;default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function(){return!((0,p.isWebGL2)(this.gl)||(0,m.isPowerOfTwo)(this.width)&&(0,m.isPowerOfTwo)(this.height))}},{key:"_updateForNPOT",value:function(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function(e,t){if(this._isNPOT())switch(e){case 10241:-1===g.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071)}return t}}]),t}()},{"../utils":190,"../utils/assert":187,"../webgl-context/context-state":200,"../webgl-utils":218,"./buffer":227,"./resource":236,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/defineProperty":9,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],244:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),s=n(e("@babel/runtime/helpers/createClass")),u=n(e("@babel/runtime/helpers/inherits")),l=n(e("@babel/runtime/helpers/assertThisInitialized")),c=n(e("./resource")),f=n(e("./buffer")),d=e("../webgl-utils"),h=e("../utils");r.default=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.default)(this,t),(0,d.assertWebGL2Context)(e),(r=(0,a.default)(this,(0,o.default)(t).call(this,e,n))).initialize(n),r.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal((0,l.default)((0,l.default)(r))),r}return(0,u.default)(t,c.default),(0,s.default)(t,null,[{key:"isSupported",value:function(e){return(0,d.isWebGL2)(e)}}]),(0,s.default)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,(0,h.isObjectEmpty)(this.buffers)||this.bind(function(){return e._unbindBuffers()}),this.setProps(t),this}},{key:"setProps",value:function(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}},{key:"setBuffers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(function(){for(var r in t)e.setBuffer(r,t[r])}),this}},{key:"setBuffer",value:function(e,t){var r=this,n=this._getVaryingIndex(e),i=this._getBufferParams(t),a=i.buffer,o=i.sizeInBytes,s=i.offsetInBytes;return n<0?(this.unused[e]=a,h.log.warn(function(){return"".concat(r.id," unused varying buffer ").concat(e)})(),this):(this.buffers[n]=t,this.bindOnUse||this._bindBuffer(n,a,s,o),this)}},{key:"begin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}},{key:"end",value:function(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}},{key:"_getBufferParams",value:function(e){var t,r,n;return e instanceof f.default==!1?(n=e.buffer,r=e.sizeInBytes,t=e.offsetInBytes):n=e,void 0===t&&void 0===r||(t=t||0,r=r||n.byteLength-t),{buffer:n,offsetInBytes:t,sizeInBytes:r}}},{key:"_getVaryingInfo",value:function(e){return this.configuration&&this.configuration.getVaryingInfo(e)}},{key:"_getVaryingIndex",value:function(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;var t=Number(e);return Number.isFinite(t)?t:-1}},{key:"_bindBuffers",value:function(){if(this.bindOnUse)for(var e in this.buffers){var t=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,t.buffer,t.offsetInBytes,t.sizeInBytes)}}},{key:"_unbindBuffers",value:function(){if(this.bindOnUse)for(var e in this.buffers)this._bindBuffer(e,null)}},{key:"_bindBuffer",value:function(e,t){var r=arguments.length>3?arguments[3]:void 0,n=t&&t.handle;return n&&void 0!==r?this.gl.bindBufferRange(35982,e,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r):this.gl.bindBufferBase(35982,e,n),this}},{key:"_createHandle",value:function(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function(){this.gl.deleteTransformFeedback(this.handle)}},{key:"_bindHandle",value:function(e){this.gl.bindTransformFeedback(36386,this.handle)}}]),t}()},{"../utils":190,"../webgl-utils":218,"./buffer":227,"./resource":236,"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],245:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/defineProperty")),a=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/createClass")),s=e("../webgl-utils/attribute-utils"),u=n(e("../utils/assert")),l=5126,c=5124,f=5125;r.default=function(){function e(t){var r;for(var n in(0,a.default)(this,e),this.layout={},this.size=0,t)this._addUniform(n,t[n]);var o=new Float32Array(this.size);this.typedArray=((0,i.default)(r={},l,o),(0,i.default)(r,c,new Int32Array(o.buffer)),(0,i.default)(r,f,new Uint32Array(o.buffer)),r)}return(0,o.default)(e,[{key:"getBytes",value:function(){return 4*this.size}},{key:"getData",value:function(){return this.typedArray[l]}},{key:"getSubData",value:function(e){var t,r;if(void 0===e)t=this.data,r=0;else{var n=this.offsets[e];t=this.data.subarray(n,n+this.sizes[e]),r=4*n}return{data:t,offset:r}}},{key:"setUniforms",value:function(e){for(var t in e)this._setValue(t,e[t]);return this}},{key:"_setValue",value:function(e,t){var r=this.layout[e];(0,u.default)(r,"UniformLayoutStd140 illegal argument");var n=this.typedArray[r.type];1===r.size?n[r.offset]=t:n.set(t,r.offset)}},{key:"_addUniform",value:function(e,t){var r=(0,s.decomposeCompositeGLType)(t);(0,u.default)(r,"UniformBufferLayout illegal argument");var n=r.type,i=r.components;this.size=this._alignTo(this.size,i);var a=this.size;this.size+=i,this.layout[e]={type:n,size:i,offset:a}}},{key:"_alignTo",value:function(e,t){switch(t){case 1:return e;case 2:return e+e%2;default:return e+(4-e%4)%4}}}]),e}()},{"../utils/assert":187,"../webgl-utils/attribute-utils":213,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/defineProperty":9,"@babel/runtime/helpers/interopRequireDefault":13}],246:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.parseUniformName=function(e){if("]"!==e[e.length-1])return{name:e,length:1,isArray:!1};var t=e.match(/([^\[]*)(\[[0-9]+\])?/);if(!t||t.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:t[1],length:t[2]||1,isArray:Boolean(t[2])}},r.getUniformSetter=function(e,t,r){var n=f[r.type];if(!n)throw new Error("Unknown GLSL uniform type ".concat(r.type));return n.bind(null,e,t)},r.checkUniformValues=function(e,t,r){for(var n in e){var i=e[n],a=!r||Boolean(r[n]);if(a&&!_(i))throw t=t?"".concat(t," "):"",console.error("".concat(t," Bad uniform ").concat(n),i),new Error("".concat(t," Bad uniform ").concat(n))}return!0},r.areUniformsEqual=function(e,t){if(Array.isArray(e)||ArrayBuffer.isView(e)){if(!t)return!1;var r=e.length;if(t.length!==r)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}return e===t},r.getUniformCopy=function(e){if(Array.isArray(e)||ArrayBuffer.isView(e))return e.slice();return e};var i,a=n(e("@babel/runtime/helpers/defineProperty")),o=n(e("./framebuffer")),s=n(e("./renderbuffer")),u=n(e("./texture")),l=n(e("./sampler")),c=e("../utils"),f=((0,a.default)(i={},5126,function(e,t,r){return e.uniform1fv(t,g(r,1))}),(0,a.default)(i,35664,function(e,t,r){return e.uniform2fv(t,g(r,2))}),(0,a.default)(i,35665,function(e,t,r){return e.uniform3fv(t,g(r,3))}),(0,a.default)(i,35666,function(e,t,r){return e.uniform4fv(t,g(r,4))}),(0,a.default)(i,5124,function(e,t,r){return e.uniform1iv(t,v(r,1))}),(0,a.default)(i,35667,function(e,t,r){return e.uniform2iv(t,v(r,2))}),(0,a.default)(i,35668,function(e,t,r){return e.uniform3iv(t,v(r,3))}),(0,a.default)(i,35669,function(e,t,r){return e.uniform4iv(t,v(r,4))}),(0,a.default)(i,35670,function(e,t,r){return e.uniform1iv(t,v(r,1))}),(0,a.default)(i,35671,function(e,t,r){return e.uniform2iv(t,v(r,2))}),(0,a.default)(i,35672,function(e,t,r){return e.uniform3iv(t,v(r,3))}),(0,a.default)(i,35673,function(e,t,r){return e.uniform4iv(t,v(r,4))}),(0,a.default)(i,35674,function(e,t,r){return e.uniformMatrix2fv(t,!1,g(r,4))}),(0,a.default)(i,35675,function(e,t,r){return e.uniformMatrix3fv(t,!1,g(r,9))}),(0,a.default)(i,35676,function(e,t,r){return e.uniformMatrix4fv(t,!1,g(r,16))}),(0,a.default)(i,35678,function(e,t,r){return e.uniform1i(t,r)}),(0,a.default)(i,35680,function(e,t,r){return e.uniform1i(t,r)}),(0,a.default)(i,5125,function(e,t,r){return e.uniform1uiv(t,y(r,1))}),(0,a.default)(i,36294,function(e,t,r){return e.uniform2uiv(t,y(r,2))}),(0,a.default)(i,36295,function(e,t,r){return e.uniform3uiv(t,y(r,3))}),(0,a.default)(i,36296,function(e,t,r){return e.uniform4uiv(t,y(r,4))}),(0,a.default)(i,35685,function(e,t,r){return e.uniformMatrix2x3fv(t,!1,g(r,6))}),(0,a.default)(i,35686,function(e,t,r){return e.uniformMatrix2x4fv(t,!1,g(r,8))}),(0,a.default)(i,35687,function(e,t,r){return e.uniformMatrix3x2fv(t,!1,g(r,6))}),(0,a.default)(i,35688,function(e,t,r){return e.uniformMatrix3x4fv(t,!1,g(r,12))}),(0,a.default)(i,35689,function(e,t,r){return e.uniformMatrix4x2fv(t,!1,g(r,8))}),(0,a.default)(i,35690,function(e,t,r){return e.uniformMatrix4x3fv(t,!1,g(r,12))}),(0,a.default)(i,35679,function(e,t,r){return e.uniform1i(t,r)}),(0,a.default)(i,35682,function(e,t,r){return e.uniform1i(t,r)}),(0,a.default)(i,36289,function(e,t,r){return e.uniform1i(t,r)}),(0,a.default)(i,36292,function(e,t,r){return e.uniform1i(t,r)}),(0,a.default)(i,36293,function(e,t,r){return e.uniform1i(t,r)}),(0,a.default)(i,36298,function(e,t,r){return e.uniform1i(t,r)}),(0,a.default)(i,36299,function(e,t,r){return e.uniform1i(t,r)}),(0,a.default)(i,36300,function(e,t,r){return e.uniform1i(t,r)}),(0,a.default)(i,36303,function(e,t,r){return e.uniform1i(t,r)}),(0,a.default)(i,36306,function(e,t,r){return e.uniform1i(t,r)}),(0,a.default)(i,36307,function(e,t,r){return e.uniform1i(t,r)}),(0,a.default)(i,36308,function(e,t,r){return e.uniform1i(t,r)}),(0,a.default)(i,36311,function(e,t,r){return e.uniform1i(t,r)}),i),d={},h={},p={},m=[0];function b(e,t,r,n){1===t&&"boolean"==typeof e&&(e=e?1:0),Number.isFinite(e)&&(m[0]=e,e=m);var i=e.length;if(i%t&&c.log.warn("Uniform size should be multiples of ".concat(t),e)(),e instanceof r)return e;var a=n[i];a||(a=new r(i),n[i]=a);for(var o=0;o<i;o++)a[o]=e[o];return a}function g(e,t){return b(e,t,Float32Array,d)}function v(e,t){return b(e,t,Int32Array,h)}function y(e,t){return b(e,t,Uint32Array,p)}function _(e){return Array.isArray(e)||ArrayBuffer.isView(e)?function(e){if(0===e.length)return!1;for(var t=Math.min(e.length,16),r=0;r<t;++r)if(!Number.isFinite(e[r]))return!1;return!0}(e):!!isFinite(e)||(!0===e||!1===e||(e instanceof u.default||e instanceof l.default||(e instanceof s.default||e instanceof o.default&&Boolean(e.texture))))}},{"../utils":190,"./framebuffer":230,"./renderbuffer":235,"./sampler":237,"./texture":243,"@babel/runtime/helpers/defineProperty":9,"@babel/runtime/helpers/interopRequireDefault":13}],247:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),o=n(e("@babel/runtime/helpers/getPrototypeOf")),s=n(e("@babel/runtime/helpers/get")),u=n(e("@babel/runtime/helpers/createClass")),l=n(e("@babel/runtime/helpers/inherits")),c=n(e("@babel/runtime/helpers/assertThisInitialized")),f=n(e("./resource")),d=n(e("./buffer")),h=e("../webgl-utils"),p=e("../utils/array-utils-flat"),m=e("../utils"),b=e("probe.gl");r.default=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.default)(this,t);var s=n.id||n.program&&n.program.id;return(r=(0,a.default)(this,(0,o.default)(t).call(this,e,Object.assign({},n,{id:s})))).hasVertexArrays=t.isSupported(e),r.buffer=null,r.bufferValue=null,r.initialize(n),Object.seal((0,c.default)((0,c.default)(r))),r}return(0,l.default)(t,f.default),(0,u.default)(t,null,[{key:"isSupported",value:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero?(0,h.isWebGL2)(e)||"Chrome"===(0,b.getBrowser)():(0,h.isWebGL2)(e)||e.getExtension("OES_vertex_array_object")}},{key:"getDefaultArray",value:function(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new t(e,{handle:null})),e.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function(e){return t.MAX_ATTRIBUTES=t.MAX_ATTRIBUTES||e.getParameter(34921)}},{key:"setConstant",value:function(e,r,n){switch(n.constructor){case Float32Array:t._setConstantFloatArray(e,r,n);break;case Int32Array:t._setConstantIntArray(e,r,n);break;case Uint32Array:t._setConstantUintArray(e,r,n);break;default:(0,m.assert)(!1)}}}]),(0,u.default)(t,[{key:"delete",value:function(){(0,s.default)((0,o.default)(t.prototype),"delete",this).call(this),this.buffer&&this.buffer.delete()}},{key:"initialize",value:function(){return this.setProps(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}},{key:"setProps",value:function(e){return this}},{key:"setElementBuffer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(0,m.assert)(!t||34963===t.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(function(){e.gl.bindBuffer(34963,t?t.handle:null)}),this}},{key:"setBuffer",value:function(e,t,r){if(34963===t.target)return this.setElementBuffer(t,r);var n=r.size,i=r.type,a=r.stride,o=r.offset,s=r.normalized,u=r.integer,l=r.divisor,c=this.gl;return e=Number(e),this.bind(function(){c.bindBuffer(34962,t.handle),u?((0,m.assert)((0,h.isWebGL2)(c)),c.vertexAttribIPointer(e,n,i,a,o)):c.vertexAttribPointer(e,n,i,s,a,o),c.enableVertexAttribArray(e),c.vertexAttribDivisor(e,l||0)}),this}},{key:"enable",value:function(e){var r=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!n&&0===e&&!t.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(function(){return n?r.gl.enableVertexAttribArray(e):r.gl.disableVertexAttribArray(e)})),this}},{key:"getConstantBuffer",value:function(e,t,r){var n=this._normalizeConstantArrayValue(t,r),i=n.byteLength*e,a=n.length*e,o=!this.buffer;if(this.buffer=this.buffer||new d.default(this.gl,i),o=(o=o||this.buffer.setByteLength(i))||!this._compareConstantArrayValues(n,this.bufferValue)){var s=(0,p.getScratchArray)(t.constructor,a);(0,p.fillArray)({target:s,source:n,start:0,count:a}),this.buffer.subData(s),this.bufferValue=t}return this.buffer}},{key:"_normalizeConstantArrayValue",value:function(e,t){return Array.isArray(e)?new Float32Array(e):e}},{key:"_compareConstantArrayValues",value:function(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}},{key:"_createHandle",value:function(){return this.hasVertexArrays=t.isSupported(this.gl),this.hasVertexArrays?this.gl.createVertexArray():null}},{key:"_deleteHandle",value:function(e){return this.hasVertexArrays&&this.gl.deleteVertexArray(e),[this.elements]}},{key:"_bindHandle",value:function(e){this.hasVertexArrays&&this.gl.bindVertexArray(e)}},{key:"_getParameter",value:function(e,t){var r=this,n=t.location;return(0,m.assert)(Number.isFinite(n)),this.bind(function(){switch(e){case 34373:return r.gl.getVertexAttribOffset(n,e);default:return r.gl.getVertexAttrib(n,e)}})}},{key:"MAX_ATTRIBUTES",get:function(){return t.getMaxAttributes(this.gl)}}],[{key:"_setConstantFloatArray",value:function(e,t,r){switch(r.length){case 1:e.vertexAttrib1fv(t,r);break;case 2:e.vertexAttrib2fv(t,r);break;case 3:e.vertexAttrib3fv(t,r);break;case 4:e.vertexAttrib4fv(t,r);break;default:(0,m.assert)(!1)}}},{key:"_setConstantIntArray",value:function(e,t,r){switch((0,m.assert)((0,h.isWebGL2)(e)),r.length){case 1:e.vertexAttribI1iv(t,r);break;case 2:e.vertexAttribI2iv(t,r);break;case 3:e.vertexAttribI3iv(t,r);break;case 4:e.vertexAttribI4iv(t,r);break;default:(0,m.assert)(!1)}}},{key:"_setConstantUintArray",value:function(e,t,r){switch((0,m.assert)((0,h.isWebGL2)(e)),r.length){case 1:e.vertexAttribI1uiv(t,r);break;case 2:e.vertexAttribI2uiv(t,r);break;case 3:e.vertexAttribI3uiv(t,r);break;case 4:e.vertexAttribI4uiv(t,r);break;default:(0,m.assert)(!1)}}}]),t}()},{"../utils":190,"../utils/array-utils-flat":186,"../webgl-utils":218,"./buffer":227,"./resource":236,"@babel/runtime/helpers/assertThisInitialized":5,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/get":10,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20,"probe.gl":296}],248:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=n(e("./accessor")),s=n(e("./buffer")),u=n(e("./vertex-array-object")),l=e("../utils");r.default=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.default)(this,e),this.id=r.id||r.program&&r.program.id,this.gl=t,this.configuration=null,this.elements=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.vertexArrayObject=u.default.isSupported(t)?new u.default(t):u.default.getDefaultArray(t),(0,l.stubRemovedMethods)(this,"VertexArray","v6.0",["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"]),this.initialize(r),Object.seal(this)}return(0,a.default)(e,[{key:"delete",value:function(){this.buffer&&this.buffer.delete()}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}},{key:"reset",value:function(){this.elements=null;var e=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}},{key:"setProps",value:function(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}},{key:"clearDrawParams",value:function(){this.drawParams=null}},{key:"getDrawParams",value:function(e){return this.drawParams=this.drawParams||this._updateDrawParams(),Object.assign({},this.drawParams,e)}},{key:"setAttributes",value:function(e){var t=this;return this.vertexArrayObject.bind(function(){for(var r in e){var n=e[r];if(n instanceof s.default)t.setBuffer(r,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof s.default){t.setBuffer(r,n[0],n[1])}else{if(!ArrayBuffer.isView(n)&&!Array.isArray(n))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");t.setConstant(r,n)}}t.gl.bindBuffer(34962,null)}),this}},{key:"setElementBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setElementBuffer(e,t),this}},{key:"setBuffer",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===t.target)return this.setElementBuffer(t);var n=this._resolveLocationAndAccessor(e,t,t.accessor,r),i=n.location,a=n.accessor;return i>=0&&(this.values[i]=t,this.accessors[i]=a,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setBuffer(i,t,a)),this}},{key:"setConstant",value:function(e,t){var r=this._resolveLocationAndAccessor(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),n=r.location,i=r.accessor;return n>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t,i),this.values[n]=t,this.accessors[n]=i,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.enable(n,!1)),this}},{key:"unbindBuffers",value:function(){var e=this;return this.vertexArrayObject.bind(function(){e.elements&&e.setElementBuffer(null),e.buffer=e.buffer||new s.default(e.gl,{size:4});for(var t=0;t<e.vertexArrayObject.MAX_ATTRIBUTES;t++)e.values[t]instanceof s.default&&(e.gl.disableVertexAttribArray(t),e.gl.bindBuffer(34962,e.buffer.handle),e.gl.vertexAttribPointer(t,1,5126,!1,0,0))}),this}},{key:"bindBuffers",value:function(){var e=this;return this.vertexArrayObject.bind(function(){e.elements&&e.setElementBuffer(e.elements);for(var t=0;t<e.vertexArrayObject.MAX_ATTRIBUTES;t++){var r=e.values[t];r instanceof s.default&&e.setBuffer(t,r)}}),this}},{key:"bindForDraw",value:function(e,t,r){var n,i=this;return this.vertexArrayObject.bind(function(){i._setConstantAttributes(e,t),i.vertexArrayObject.hasVertexArrays||i.bindBuffers(),n=r(),i.vertexArrayObject.hasVertexArrays||i.unbindBuffers()}),n}},{key:"_resolveLocationAndAccessor",value:function(e,t,r,n){var i=this,a=this._getAttributeIndex(e);if(!Number.isFinite(a)||a<0)return this.unused[e]=t,l.log.once(3,function(){return"unused value ".concat(e," in ").concat(i.id)})(),this;var s=this._getAttributeInfo(e),u=o.default.resolve(s.accessor,r,n),c=u.type;return(0,l.assert)(Number.isFinite(u.size)&&Number.isFinite(c)),{location:a,accessor:u}}},{key:"_getAttributeInfo",value:function(e){return this.configuration&&this.configuration.getAttributeInfo(e)}},{key:"_getAttributeIndex",value:function(e){if(this.configuration)return this.configuration.getAttributeLocation(e);var t=Number(e);return Number.isFinite(t)?t:-1}},{key:"_setConstantAttributes",value:function(e,t){var r=Math.max(0|e,0|t),n=this.values[0];ArrayBuffer.isView(n)&&this._setConstantAttributeZero(n,r);for(var i=1;i<this.vertexArrayObject.MAX_ATTRIBUTES;i++)n=this.values[i],ArrayBuffer.isView(n)&&this._setConstantAttribute(i,n)}},{key:"_setConstantAttributeZero",value:function(e,t){if(u.default.isSupported(this.gl,{constantAttributeZero:!0}))this._setConstantAttribute(0,e);else{var r=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}}},{key:"_setConstantAttribute",value:function(e,t){u.default.setConstant(this.gl,e,t),this.vertexArrayObject.isDefault&&this.vertexArrayObject.enable(e,!1)}},{key:"_updateDrawParams",value:function(){for(var e={isIndexed:!1,isInstanced:!1,indexCount:Infinity,vertexCount:Infinity,instanceCount:Infinity},t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elements.accessor.type),Infinity===e.indexCount&&(e.indexCount=0),Infinity===e.vertexCount&&(e.vertexCount=0),Infinity===e.instanceCount&&(e.instanceCount=0),e}},{key:"_updateDrawParamsForLocation",value:function(e,t){var r=this.values[t],n=this.accessors[t];if(r){var i=n.divisor>0;if(e.isInstanced=e.isInstanced||i,r instanceof s.default){var a=r;if(i){var o=a.getVertexCount(n);e.instanceCount=Math.min(e.instanceCount,o)}else{var u=a.getVertexCount(n);e.vertexCount=Math.min(e.vertexCount,u)}}}}},{key:"setElements",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l.log.deprecated("setElements","setElementBuffer"),this.setElementBuffer(e,t)}}]),e}()},{"../utils":190,"./accessor":226,"./buffer":227,"./vertex-array-object":247,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/interopRequireDefault":13}],249:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"polyfillContext",{enumerable:!0,get:function(){return i.default}});var i=n(e("./polyfill-context"))},{"./polyfill-context":250,"@babel/runtime/helpers/interopRequireDefault":13}],250:[function(e,t,r){(function(t){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=f;var i,a=n(e("@babel/runtime/helpers/defineProperty")),o=e("./polyfill-get-parameter");function s(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}function u(e){return e&&!0}var l=((0,a.default)(i={},"OES_vertex_array_object",{meta:{suffix:"OES"},createVertexArray:function(){s(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:function(){},bindVertexArray:function(){},isVertexArray:function(){return!1}}),(0,a.default)(i,"ANGLE_instanced_arrays",{meta:{suffix:"ANGLE"},vertexAttribDivisor:function(e,t){s(0===t,"WebGL instanced rendering not supported")},drawElementsInstanced:function(){},drawArraysInstanced:function(){}}),(0,a.default)(i,"WEBGL_draw_buffers",{meta:{suffix:"WEBGL"},drawBuffers:function(){s(!1)}}),(0,a.default)(i,"EXT_disjoint_timer_query",{meta:{suffix:"EXT"},createQuery:function(){s(!1)},deleteQuery:function(){s(!1)},beginQuery:function(){s(!1)},endQuery:function(){},getQuery:function(e,t){return this.getQueryObject(e,t)},getQueryParameter:function(e,t){return this.getQueryObject(e,t)},queryCounter:function(){},getQueryObject:function(){}}),(0,a.default)(i,"EXT_disjoint_timer_query_webgl2",{meta:{suffix:"EXT"},queryCounter:null}),(0,a.default)(i,"OVERRIDES",{readBuffer:function(e,t,r){u(e)&&t(r)},getVertexAttrib:function(e,t,r,n){var i,a=function(e,t){return{webgl2:u(e),ext:e.getExtension(t)}}(e,"ANGLE_instanced_arrays"),o=a.webgl2,s=a.ext;switch(n){case 35069:i=!!o&&void 0;break;case 35070:i=o||s?void 0:0}return void 0!==i?i:t(r,n)},getProgramParameter:function(e,t,r,n){if(!u(e))switch(n){case 35967:return 35981;case 35971:case 35382:return 0}return t(r,n)},getInternalformatParameter:function(e,t,r,n,i){if(!u(e))switch(i){case 32937:return new Int32Array([0])}return e.getInternalformatParameter(r,n,i)},getTexParameter:function(e,t,r,n){switch(n){case 34046:var i=e.luma.extensions.EXT_texture_filter_anisotropic;n=i&&i.TEXTURE_MAX_ANISOTROPY_EXT||34046}return t(r,n)},getParameter:o.getParameterPolyfill,hint:function(e,t,r,n){return t(r,n)}}),i);function c(e,t){var r=t.extension,n=t.target,i=t.target2,a=l[r];s(a);var o=a.meta,u=(void 0===o?{}:o).suffix,c=void 0===u?"":u,f=e.getExtension(r);Object.keys(a).forEach(function(t){var r="".concat(t).concat(c),o=null;"meta"===t||"function"==typeof e[t]||(f&&"function"==typeof f[r]?o=function(){return f[r].apply(f,arguments)}:"function"==typeof a[t]&&(o=a[t].bind(n))),o&&(n[t]=o,i[t]=o)})}function f(e){if(e.luma=e.luma||{},function(e){e.luma.extensions={};var t=e.getSupportedExtensions()||[],r=!0,n=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value;e.luma[s]=e.getExtension(s)}}catch(e){n=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}}(e),!e.luma.polyfilled){for(var t in l)"overrides"!==t&&c(e,{extension:t,target:e.luma,target2:e});!function(e,t){var r=t.target,n=t.target2,i=l.OVERRIDES;Object.keys(i).forEach(function(t){if("function"==typeof i[t]){var a=e[t]?e[t].bind(e):function(){},o=i[t].bind(null,e,a);r[t]=o,n[t]=o}})}(e,{target:e.luma,target2:e}),e.luma.polyfilled=!0}return e}(void 0!==t?t:window).polyfillContext=f}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polyfill-get-parameter":251,"@babel/runtime/helpers/defineProperty":9,"@babel/runtime/helpers/interopRequireDefault":13}],251:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.getParameterPolyfill=function(e,t,r){var n=s[r],i="function"==typeof n?n(e,t,r):n;return void 0!==i?i:t(r)};var i,a=n(e("@babel/runtime/helpers/defineProperty")),o=function(e){return u(e)?void 0:0},s=((0,a.default)(i={},3074,function(e){return u(e)?void 0:36064}),(0,a.default)(i,35723,function(e){return u(e)?void 0:4352}),(0,a.default)(i,35977,o),(0,a.default)(i,32937,o),(0,a.default)(i,36795,function(e,t){var r=u(e)?e.getExtension("EXT_disjoint_timer_query_webgl2"):e.getExtension("EXT_disjoint_timer_query");return r&&r.GPU_DISJOINT_EXT?t(r.GPU_DISJOINT_EXT):0}),(0,a.default)(i,37445,function(e,t){var r=e.getExtension("WEBGL_debug_renderer_info");return t(r&&r.UNMASKED_VENDOR_WEBGL||7936)}),(0,a.default)(i,37446,function(e,t){var r=e.getExtension("WEBGL_debug_renderer_info");return t(r&&r.UNMASKED_RENDERER_WEBGL||7937)}),(0,a.default)(i,34047,function(e,t){var r=e.luma.extensions.EXT_texture_filter_anisotropic;return r?t(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1}),(0,a.default)(i,32883,o),(0,a.default)(i,35071,o),(0,a.default)(i,37447,o),(0,a.default)(i,36063,function(e,t){if(!u(e)){var r=e.getExtension("WEBGL_draw_buffers");return r?t(r.MAX_COLOR_ATTACHMENTS_WEBGL):0}}),(0,a.default)(i,35379,o),(0,a.default)(i,35374,o),(0,a.default)(i,35377,o),(0,a.default)(i,34852,function(e){if(!u(e)){var t=e.getExtension("WEBGL_draw_buffers");return t?t.MAX_DRAW_BUFFERS_WEBGL:0}}),(0,a.default)(i,36203,function(e){return e.getExtension("OES_element_index")?2147483647:65535}),(0,a.default)(i,33001,function(e){return e.getExtension("OES_element_index")?16777216:65535}),(0,a.default)(i,33e3,function(e){return 16777216}),(0,a.default)(i,37157,o),(0,a.default)(i,35373,o),(0,a.default)(i,35657,o),(0,a.default)(i,36183,o),(0,a.default)(i,37137,o),(0,a.default)(i,34045,o),(0,a.default)(i,35978,o),(0,a.default)(i,35979,o),(0,a.default)(i,35968,o),(0,a.default)(i,35376,o),(0,a.default)(i,35375,o),(0,a.default)(i,35659,o),(0,a.default)(i,37154,o),(0,a.default)(i,35371,o),(0,a.default)(i,35658,o),(0,a.default)(i,35076,o),(0,a.default)(i,35077,o),(0,a.default)(i,35380,o),i);function u(e){return e&&!0}},{"@babel/runtime/helpers/defineProperty":9,"@babel/runtime/helpers/interopRequireDefault":13}],252:[function(e,t,r){var n=e("./normalize"),i=e("gl-mat4/create"),a=e("gl-mat4/clone"),o=e("gl-mat4/determinant"),s=e("gl-mat4/invert"),u=e("gl-mat4/transpose"),l={length:e("gl-vec3/length"),normalize:e("gl-vec3/normalize"),dot:e("gl-vec3/dot"),cross:e("gl-vec3/cross")},c=i(),f=i(),d=[0,0,0,0],h=[[0,0,0],[0,0,0],[0,0,0]],p=[0,0,0];function m(e,t,r,n,i){e[0]=t[0]*n+r[0]*i,e[1]=t[1]*n+r[1]*i,e[2]=t[2]*n+r[2]*i}t.exports=function(e,t,r,i,b,g){if(t||(t=[0,0,0]),r||(r=[0,0,0]),i||(i=[0,0,0]),b||(b=[0,0,0,1]),g||(g=[0,0,0,1]),!n(c,e))return!1;if(a(f,c),f[3]=0,f[7]=0,f[11]=0,f[15]=1,Math.abs(o(f)<1e-8))return!1;var v,y,_,x,w,E,k,P=c[3],M=c[7],A=c[11],C=c[12],O=c[13],T=c[14],S=c[15];if(0!==P||0!==M||0!==A){if(d[0]=P,d[1]=M,d[2]=A,d[3]=S,!s(f,f))return!1;u(f,f),(v=b)[0]=(_=f)[0]*(x=(y=d)[0])+_[4]*(w=y[1])+_[8]*(E=y[2])+_[12]*(k=y[3]),v[1]=_[1]*x+_[5]*w+_[9]*E+_[13]*k,v[2]=_[2]*x+_[6]*w+_[10]*E+_[14]*k,v[3]=_[3]*x+_[7]*w+_[11]*E+_[15]*k}else b[0]=b[1]=b[2]=0,b[3]=1;if(t[0]=C,t[1]=O,t[2]=T,function(e,t){e[0][0]=t[0],e[0][1]=t[1],e[0][2]=t[2],e[1][0]=t[4],e[1][1]=t[5],e[1][2]=t[6],e[2][0]=t[8],e[2][1]=t[9],e[2][2]=t[10]}(h,c),r[0]=l.length(h[0]),l.normalize(h[0],h[0]),i[0]=l.dot(h[0],h[1]),m(h[1],h[1],h[0],1,-i[0]),r[1]=l.length(h[1]),l.normalize(h[1],h[1]),i[0]/=r[1],i[1]=l.dot(h[0],h[2]),m(h[2],h[2],h[0],1,-i[1]),i[2]=l.dot(h[1],h[2]),m(h[2],h[2],h[1],1,-i[2]),r[2]=l.length(h[2]),l.normalize(h[2],h[2]),i[1]/=r[2],i[2]/=r[2],l.cross(p,h[1],h[2]),l.dot(h[0],p)<0)for(var R=0;R<3;R++)r[R]*=-1,h[R][0]*=-1,h[R][1]*=-1,h[R][2]*=-1;return g[0]=.5*Math.sqrt(Math.max(1+h[0][0]-h[1][1]-h[2][2],0)),g[1]=.5*Math.sqrt(Math.max(1-h[0][0]+h[1][1]-h[2][2],0)),g[2]=.5*Math.sqrt(Math.max(1-h[0][0]-h[1][1]+h[2][2],0)),g[3]=.5*Math.sqrt(Math.max(1+h[0][0]+h[1][1]+h[2][2],0)),h[2][1]>h[1][2]&&(g[0]=-g[0]),h[0][2]>h[2][0]&&(g[1]=-g[1]),h[1][0]>h[0][1]&&(g[2]=-g[2]),!0}},{"./normalize":253,"gl-mat4/clone":60,"gl-mat4/create":62,"gl-mat4/determinant":63,"gl-mat4/invert":75,"gl-mat4/transpose":88,"gl-vec3/cross":90,"gl-vec3/dot":91,"gl-vec3/length":92,"gl-vec3/normalize":94}],253:[function(e,t,r){t.exports=function(e,t){var r=t[15];if(0===r)return!1;for(var n=1/r,i=0;i<16;i++)e[i]=t[i]*n;return!0}},{}],254:[function(e,t,r){var n=e("gl-vec3/lerp"),i=e("mat4-recompose"),a=e("mat4-decompose"),o=e("gl-mat4/determinant"),s=e("quat-slerp"),u=f(),l=f(),c=f();function f(){return{translate:d(),scale:d(1),skew:d(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function d(e){return[e||0,e||0,e||0]}t.exports=function(e,t,r,f){if(0===o(t)||0===o(r))return!1;var d=a(t,u.translate,u.scale,u.skew,u.perspective,u.quaternion),h=a(r,l.translate,l.scale,l.skew,l.perspective,l.quaternion);return!(!d||!h||(n(c.translate,u.translate,l.translate,f),n(c.skew,u.skew,l.skew,f),n(c.scale,u.scale,l.scale,f),n(c.perspective,u.perspective,l.perspective,f),s(c.quaternion,u.quaternion,l.quaternion,f),i(e,c.translate,c.scale,c.skew,c.perspective,c.quaternion),0))}},{"gl-mat4/determinant":63,"gl-vec3/lerp":93,"mat4-decompose":252,"mat4-recompose":255,"quat-slerp":309}],255:[function(e,t,r){var n={identity:e("gl-mat4/identity"),translate:e("gl-mat4/translate"),multiply:e("gl-mat4/multiply"),create:e("gl-mat4/create"),scale:e("gl-mat4/scale"),fromRotationTranslation:e("gl-mat4/fromRotationTranslation")},i=(n.create(),n.create());t.exports=function(e,t,r,a,o,s){return n.identity(e),n.fromRotationTranslation(e,s,t),e[3]=o[0],e[7]=o[1],e[11]=o[2],e[15]=o[3],n.identity(i),0!==a[2]&&(i[9]=a[2],n.multiply(e,e,i)),0!==a[1]&&(i[9]=0,i[8]=a[1],n.multiply(e,e,i)),0!==a[0]&&(i[8]=0,i[4]=a[0],n.multiply(e,e,i)),n.scale(e,e,r),e}},{"gl-mat4/create":62,"gl-mat4/fromRotationTranslation":66,"gl-mat4/identity":73,"gl-mat4/multiply":77,"gl-mat4/scale":85,"gl-mat4/translate":87}],256:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=e("../lib/common"),s=function(){function e(t){(0,i.default)(this,e),this.points=t,this.isClosed=(0,o.equals)(this.points[this.points.length-1],this.points[0]),Object.freeze(this)}return(0,a.default)(e,[{key:"getSignedArea",value:function(){var e=0;return this.forEachSegment(function(t,r){e+=(t[0]+r[0])*(t[1]-r[1])}),e/2}},{key:"getArea",value:function(){return Math.abs(this.getSignedArea())}},{key:"getWindingDirection",value:function(){return Math.sign(this.getSignedArea())}},{key:"forEachSegment",value:function(e){for(var t=this.points.length,r=0;r<t-1;r++)e(this.points[r],this.points[r+1],r,r+1);this.isPolygon&&!this.isClosed()&&e(this.points[t-1],this.points[0],t-1,0)}}]),e}();r.default=s},{"../lib/common":259,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/interopRequireDefault":13}],257:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/slicedToArray")),a=n(e("@babel/runtime/helpers/classCallCheck")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/createClass")),l=n(e("@babel/runtime/helpers/inherits")),c=n(e("./lib/math-array")),f=e("./lib/common"),d=n(e("./matrix4")),h=n(e("./quaternion")),p=n(e("./vector3")),m="Unknown Euler angle order";var b=function(e){function t(){var e,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DefaultOrder;((0,a.default)(this,t),e=(0,o.default)(this,(0,s.default)(t).call(this,4)),arguments.length>0&&Array.isArray(arguments[0]))?(r=e).fromVector3.apply(r,arguments):e.set(n,i,u,l);return e}return(0,l.default)(t,c.default),(0,u.default)(t,[{key:"ELEMENTS",get:function(){return 4}}],[{key:"rotationOrder",value:function(e){return t.RotationOrders[e]}},{key:"ZYX",get:function(){return 0}},{key:"YXZ",get:function(){return 1}},{key:"XZY",get:function(){return 2}},{key:"ZXY",get:function(){return 3}},{key:"YZX",get:function(){return 4}},{key:"XYZ",get:function(){return 5}},{key:"RollPitchYaw",get:function(){return 0}},{key:"DefaultOrder",get:function(){return t.ZYX}},{key:"RotationOrders",get:function(){return["ZYX","YXZ","XZY","ZXY","YZX","XYZ"]}}]),(0,u.default)(t,[{key:"fromQuaternion",value:function(e){var r=(0,i.default)(e,4),n=r[0],a=r[1],o=r[2],s=r[3],u=a*a,l=-2*(u+o*o)+1,c=2*(n*a+s*o),f=-2*(n*o-s*a);return f=(f=f>1?1:f)<-1?-1:f,new t(Math.atan2(2*(a*o+s*n),-2*(n*n+u)+1),Math.asin(f),Math.atan2(c,l),t.RollPitchYaw)}},{key:"copy",value:function(e){for(var t=0;t<3;++t)this[t]=e[t];return this[3]=Number.isFinite(e[3])||this.order,this.check()}},{key:"set",value:function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;return this[0]=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,this[1]=e,this[2]=t,this[3]=Number.isFinite(r)?r:this[3],this.check()}},{key:"validate",value:function(){return(e=this[3])>=0&&e<6&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2]);var e}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}},{key:"toArray4",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e}},{key:"toVector3",value:function(e){return e?e.set(this[0],this[1],this[2]):new p.default(this[0],this[1],this[2])}},{key:"fromVector3",value:function(e,t){return this.set(e[0],e[1],e[2],Number.isFinite(t)?t:this[3])}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=e[0+t],this[1]=e[1+t],this[2]=e[2+t],void 0!==e[3]&&(this[3]=e[3]),this.check()}},{key:"fromRollPitchYaw",value:function(e,r,n){return this.set(e,r,n,t.ZYX)}},{key:"fromRotationMatrix",value:function(e){return this._fromRotationMatrix(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.DefaultOrder),this.check()}},{key:"getRotationMatrix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new d.default;return this._getRotationMatrix(e),e}},{key:"getQuaternion",value:function(){var e=new h.default;switch(this[4]){case t.XYZ:return e.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case t.YXZ:return e.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case t.ZXY:return e.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case t.ZYX:return e.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case t.YZX:return e.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case t.XZY:return e.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(m)}}},{key:"_fromRotationMatrix",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.DefaultOrder,n=e.elements,i=n[0],a=n[4],o=n[8],s=n[1],u=n[5],l=n[9],c=n[2],d=n[6],h=n[10];switch(r=r||this[3]){case t.XYZ:this[1]=Math.asin((0,f.clamp)(o,-1,1)),Math.abs(o)<.99999?(this[0]=Math.atan2(-l,h),this[2]=Math.atan2(-a,i)):(this[0]=Math.atan2(d,u),this[2]=0);break;case t.YXZ:this[0]=Math.asin(-(0,f.clamp)(l,-1,1)),Math.abs(l)<.99999?(this[1]=Math.atan2(o,h),this[2]=Math.atan2(s,u)):(this[1]=Math.atan2(-c,i),this[2]=0);break;case t.ZXY:this[0]=Math.asin((0,f.clamp)(d,-1,1)),Math.abs(d)<.99999?(this[1]=Math.atan2(-c,h),this[2]=Math.atan2(-a,u)):(this[1]=0,this[2]=Math.atan2(s,i));break;case t.ZYX:this[1]=Math.asin(-(0,f.clamp)(c,-1,1)),Math.abs(c)<.99999?(this[0]=Math.atan2(d,h),this[2]=Math.atan2(s,i)):(this[0]=0,this[2]=Math.atan2(-a,u));break;case t.YZX:this[2]=Math.asin((0,f.clamp)(s,-1,1)),Math.abs(s)<.99999?(this[0]=Math.atan2(-l,u),this[1]=Math.atan2(-c,i)):(this[0]=0,this[1]=Math.atan2(o,h));break;case t.XZY:this[2]=Math.asin(-(0,f.clamp)(a,-1,1)),Math.abs(a)<.99999?(this[0]=Math.atan2(d,u),this[1]=Math.atan2(o,i)):(this[0]=Math.atan2(-l,h),this[1]=0);break;default:throw new Error(m)}return this[3]=r,this}},{key:"_getRotationMatrix",value:function(){var e=new d.default,r=this.x,n=this.y,i=this.z,a=Math.cos(r),o=Math.cos(n),s=Math.cos(i),u=Math.sin(r),l=Math.sin(n),c=Math.sin(i);switch(this[3]){case t.XYZ:var f=a*s,h=a*c,p=u*s,b=u*c;e[0]=o*s,e[4]=-o*c,e[8]=l,e[1]=h+p*l,e[5]=f-b*l,e[9]=-u*o,e[2]=b-f*l,e[6]=p+h*l,e[10]=a*o;break;case t.YXZ:var g=o*s,v=o*c,y=l*s,_=l*c;e[0]=g+_*u,e[4]=y*u-v,e[8]=a*l,e[1]=a*c,e[5]=a*s,e[9]=-u,e[2]=v*u-y,e[6]=_+g*u,e[10]=a*o;break;case t.ZXY:var x=o*s,w=o*c,E=l*s,k=l*c;e[0]=x-k*u,e[4]=-a*c,e[8]=E+w*u,e[1]=w+E*u,e[5]=a*s,e[9]=k-x*u,e[2]=-a*l,e[6]=u,e[10]=a*o;break;case t.ZYX:var P=a*s,M=a*c,A=u*s,C=u*c;e[0]=o*s,e[4]=A*l-M,e[8]=P*l+C,e[1]=o*c,e[5]=C*l+P,e[9]=M*l-A,e[2]=-l,e[6]=u*o,e[10]=a*o;break;case t.YZX:var O=a*o,T=a*l,S=u*o,R=u*l;e[0]=o*s,e[4]=R-O*c,e[8]=S*c+T,e[1]=c,e[5]=a*s,e[9]=-u*s,e[2]=-l*s,e[6]=T*c+S,e[10]=O-R*c;break;case t.XZY:var L=a*o,D=a*l,j=u*o,F=u*l;e[0]=o*s,e[4]=-c,e[8]=l*s,e[1]=L*c+F,e[5]=a*s,e[9]=D*c-j,e[2]=j*c-D,e[6]=u*s,e[10]=F*c+L;break;default:throw new Error(m)}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}},{key:"toQuaternion",value:function(){var e=Math.cos(.5*this.yaw),t=Math.sin(.5*this.yaw),r=Math.cos(.5*this.roll),n=Math.sin(.5*this.roll),i=Math.cos(.5*this.pitch),a=Math.sin(.5*this.pitch);return new h.default(e*n*i-t*r*a,e*r*a+t*n*i,t*r*i-e*n*a,e*r*i+t*n*a)}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=(0,f.checkNumber)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=(0,f.checkNumber)(e)}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=(0,f.checkNumber)(e)}},{key:"alpha",get:function(){return this[0]},set:function(e){return this[0]=(0,f.checkNumber)(e)}},{key:"beta",get:function(){return this[1]},set:function(e){return this[1]=(0,f.checkNumber)(e)}},{key:"gamma",get:function(){return this[2]},set:function(e){return this[2]=(0,f.checkNumber)(e)}},{key:"phi",get:function(){return this[0]},set:function(e){return this[0]=(0,f.checkNumber)(e)}},{key:"theta",get:function(){return this[1]},set:function(e){return this[1]=(0,f.checkNumber)(e)}},{key:"psi",get:function(){return this[2]},set:function(e){return this[2]=(0,f.checkNumber)(e)}},{key:"roll",get:function(){return this[0]},set:function(e){return this[0]=(0,f.checkNumber)(e)}},{key:"pitch",get:function(){return this[1]},set:function(e){return this[1]=(0,f.checkNumber)(e)}},{key:"yaw",get:function(){return this[2]},set:function(e){return this[2]=(0,f.checkNumber)(e)}},{key:"order",get:function(){return this[3]},set:function(e){return this[3]=function(e){if(e<0&&e>=6)throw new Error(m);return e}(e)}}]),t}();r.default=b},{"./lib/common":259,"./lib/math-array":260,"./matrix4":264,"./quaternion":266,"./vector3":269,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20,"@babel/runtime/helpers/slicedToArray":22}],258:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Vector2",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"Vector3",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"Vector4",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"Matrix3",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"Matrix4",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"Quaternion",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"config",{enumerable:!0,get:function(){return c.config}}),Object.defineProperty(r,"checkNumber",{enumerable:!0,get:function(){return c.checkNumber}}),Object.defineProperty(r,"configure",{enumerable:!0,get:function(){return c.configure}}),Object.defineProperty(r,"formatValue",{enumerable:!0,get:function(){return c.formatValue}}),Object.defineProperty(r,"isArray",{enumerable:!0,get:function(){return c.isArray}}),Object.defineProperty(r,"clone",{enumerable:!0,get:function(){return c.clone}}),Object.defineProperty(r,"radians",{enumerable:!0,get:function(){return c.radians}}),Object.defineProperty(r,"degrees",{enumerable:!0,get:function(){return c.degrees}}),Object.defineProperty(r,"sin",{enumerable:!0,get:function(){return c.sin}}),Object.defineProperty(r,"cos",{enumerable:!0,get:function(){return c.cos}}),Object.defineProperty(r,"tan",{enumerable:!0,get:function(){return c.tan}}),Object.defineProperty(r,"asin",{enumerable:!0,get:function(){return c.asin}}),Object.defineProperty(r,"acos",{enumerable:!0,get:function(){return c.acos}}),Object.defineProperty(r,"atan",{enumerable:!0,get:function(){return c.atan}}),Object.defineProperty(r,"clamp",{enumerable:!0,get:function(){return c.clamp}}),Object.defineProperty(r,"lerp",{enumerable:!0,get:function(){return c.lerp}}),Object.defineProperty(r,"equals",{enumerable:!0,get:function(){return c.equals}}),Object.defineProperty(r,"_SphericalCoordinates",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"_Pose",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"_Euler",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"_Polygon",{enumerable:!0,get:function(){return p.default}});var i=n(e("./vector2")),a=n(e("./vector3")),o=n(e("./vector4")),s=n(e("./matrix3")),u=n(e("./matrix4")),l=n(e("./quaternion")),c=e("./lib/common"),f=n(e("./spherical-coordinates")),d=n(e("./pose")),h=n(e("./euler")),p=n(e("./addons/polygon"))},{"./addons/polygon":256,"./euler":257,"./lib/common":259,"./matrix3":263,"./matrix4":264,"./pose":265,"./quaternion":266,"./spherical-coordinates":267,"./vector2":268,"./vector3":269,"./vector4":270,"@babel/runtime/helpers/interopRequireDefault":13}],259:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.configure=function(e){"epsilon"in e&&(n.EPSILON=e.epsilon);"debug"in e&&(n.debug=e.debug)},r.checkNumber=function(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(e));return e},r.formatValue=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).precision,r=void 0===t?n.precision||4:t;return e=i(e),parseFloat(e.toPrecision(r))},r.formatAngle=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.precision,a=void 0===r?n.precision||4:r,o=t.printDegrees,s=void 0===o?n.printAngles:o;return e=i(e=s?u(e):e),"".concat(parseFloat(e.toPrecision(a))).concat(s?"°":"")},r.isArray=a,r.clone=o,r.radians=function(e){return s(e,function(e){return e/180*Math.PI})},r.degrees=u,r.sin=function(e){return s(e,function(e){return Math.sin(e)})},r.cos=function(e){return s(e,function(e){return Math.cos(e)})},r.tan=function(e){return s(e,function(e){return Math.tan(e)})},r.asin=function(e){return s(e,function(e){return Math.asin(e)})},r.acos=function(e){return s(e,function(e){return Math.acos(e)})},r.atan=function(e){return s(e,function(e){return Math.atan(e)})},r.clamp=function(e,t,r){return s(e,function(e){return Math.max(t,Math.min(r,e))})},r.lerp=function e(t,r,n){if(a(t))return t.map(function(t,i){return e(t,r[i],n)});return n*r+(1-n)*t},r.equals=function e(t,r){if(a(t)&&a(r)){if(t===r)return!0;if(t.length!==r.length)return!1;for(var i=0;i<t.length;++i)if(!e(t[i],r[i]))return!1;return!0}return Math.abs(t-r)<=n.EPSILON*Math.max(1,Math.abs(t),Math.abs(r))},r.config=void 0;var n={};function i(e){return Math.round(e/n.EPSILON)*n.EPSILON}function a(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&void 0!==e.length}function o(e){return e.clone?e.clone():new Array(e)}function s(e,t){if(a(e)){for(var r=o(e),n=0;n<r.length;++n)r[n]=t(r[n],n,r);return r}return t(e)}function u(e){return s(e,function(e){return 180*e/Math.PI})}r.config=n,n.EPSILON=1e-12,n.debug=!0,n.precision=4,n.printTypes=!1,n.printDegrees=!1,n.printRowMajor=!0},{}],260:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/inherits")),l=n(e("@babel/runtime/helpers/wrapNativeSuper")),c=e("./common"),f=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(0,s.default)(t).apply(this,arguments))}return(0,u.default)(t,e),(0,a.default)(t,[{key:"clone",value:function(){return(new this.constructor).copy(this).check()}},{key:"copy",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=e[t];return this.check()}},{key:"set",value:function(){for(var e=0;e<this.ELEMENTS;++e)this[e]=(e<0||arguments.length<=e?void 0:arguments[e])||0;return this.check()}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;r<this.ELEMENTS;++r)this[r]=e[r+t];return this.check()}},{key:"toString",value:function(){return this.formatString(c.config)}},{key:"formatString",value:function(e){for(var t="",r=0;r<this.ELEMENTS;++r)t+=(r>0?", ":"")+(0,c.formatValue)(this[r],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;r<this.ELEMENTS;++r)e[t+r]=this[r];return e}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"equals",value:function(e){if(!e||this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(!(0,c.equals)(this[t],e[t]))return!1;return!0}},{key:"exactEquals",value:function(e){if(!e||this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}},{key:"negate",value:function(){for(var e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}},{key:"inverse",value:function(){for(var e=0;e<this.ELEMENTS;++e)this[e]=1/this[e];return this.check()}},{key:"lerp",value:function(e,t,r){void 0===r&&(r=t,t=e,e=this);for(var n=0;n<this.ELEMENTS;++n){var i=e[n];this[n]=i+r*(t[n]-i)}return this.check()}},{key:"min",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}},{key:"max",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}},{key:"clamp",value:function(e,t){for(var r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),t[r]);return this.check()}},{key:"validate",value:function(){for(var e=this.length===this.ELEMENTS,t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}},{key:"check",value:function(){if(c.config.debug&&!this.validate(this))throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"sub",value:function(e){return this.subtract(e)}},{key:"setScalar",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}},{key:"addScalar",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}},{key:"subScalar",value:function(e){return this.addScalar(-e)}},{key:"multiplyScalar",value:function(e){return this.scale(e)}},{key:"divideScalar",value:function(e){return this.scale(1/e)}},{key:"clampScalar",value:function(e,t){for(var r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),t);return this.check()}}]),t}((0,l.default)(Array));r.default=f},{"./common":259,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20,"@babel/runtime/helpers/wrapNativeSuper":26}],261:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validateVector=function(e,t){if(e.length!==t)return!1;return e.every(Number.isFinite)}},{}],262:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/inherits")),l=n(e("./math-array")),c=e("./common"),f=function(e,t){if(!e)throw new Error(t)},d=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(0,s.default)(t).apply(this,arguments))}return(0,u.default)(t,l.default),(0,a.default)(t,[{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"lengthSquared",value:function(){for(var e=0,t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}},{key:"distance",value:function(e){return Math.sqrt(this.distanceSquared(e))}},{key:"distanceSquared",value:function(e){for(var t=0,r=0;r<this.ELEMENTS;++r){var n=this[r]-e[r];t+=n*n}return(0,c.checkNumber)(t)}},{key:"dot",value:function(e){for(var t=0,r=0;r<this.ELEMENTS;++r)t+=this[r]*e[r];return(0,c.checkNumber)(t)}},{key:"normalize",value:function(){var e=this.magnitude();if(0!==e)for(var t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}},{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=0;n<t.length;n++)for(var i=t[n],a=0;a<this.ELEMENTS;++a)this[a]+=i[a];return this.check()}},{key:"subtract",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=0;n<t.length;n++)for(var i=t[n],a=0;a<this.ELEMENTS;++a)this[a]-=i[a];return this.check()}},{key:"multiply",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=0;n<t.length;n++)for(var i=t[n],a=0;a<this.ELEMENTS;++a)this[a]*=i[a];return this.check()}},{key:"divide",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=0;n<t.length;n++)for(var i=t[n],a=0;a<this.ELEMENTS;++a)this[a]/=i[a];return this.check()}},{key:"scale",value:function(e){if(Array.isArray(e))return this.multiply(e);for(var t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}},{key:"scaleAndAdd",value:function(e,t){for(var r=0;r<this.ELEMENTS;++r)this[r]=this[r]*t+e[r];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(e){return this.distance(e)}},{key:"distanceToSquared",value:function(e){return this.distanceSquared(e)}},{key:"getComponent",value:function(e){return f(e>=0&&e<this.ELEMENTS,"index is out of range"),(0,c.checkNumber)(this[e])}},{key:"setComponent",value:function(e,t){return f(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}},{key:"addVectors",value:function(e,t){return this.copy(e).add(t)}},{key:"subVectors",value:function(e,t){return this.copy(e).subtract(t)}},{key:"multiplyVectors",value:function(e,t){return this.copy(e).multiply(t)}},{key:"addScaledVector",value:function(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=(0,c.checkNumber)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=(0,c.checkNumber)(e)}}]),t}();r.default=d},{"./common":259,"./math-array":260,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],263:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.validateMatrix3=function(e){return 9===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])&&Number.isFinite(e[3])&&Number.isFinite(e[4])&&Number.isFinite(e[5])&&Number.isFinite(e[6])&&Number.isFinite(e[7])&&Number.isFinite(e[8])},r.default=void 0;var a=i(e("@babel/runtime/helpers/toConsumableArray")),o=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/createClass")),u=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/getPrototypeOf")),c=i(e("@babel/runtime/helpers/inherits")),f=i(e("./lib/math-array")),d=e("./lib/validators"),h=e("./lib/common"),p=i(e("./vector2")),m=i(e("./vector3")),b=n(e("gl-matrix/mat3")),g=n(e("gl-matrix/vec2")),v=n(e("gl-matrix/vec3")),y=[1,0,0,0,1,0,0,0,1];var _=function(e){function t(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(0,o.default)(this,t),e=(0,u.default)(this,(0,l.default)(t).call(this,9)),Array.isArray(n[0])&&1===arguments.length?e.copy(n[0]):e.identity(),e}return(0,c.default)(t,f.default),(0,s.default)(t,[{key:"setRowMajor",value:function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1;return this[0]=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,this[1]=r,this[2]=a,this[3]=e,this[4]=n,this[5]=o,this[6]=t,this[7]=i,this[8]=s,this.check()}},{key:"setColumnMajor",value:function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1;return this[0]=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,this[1]=e,this[2]=t,this[3]=r,this[4]=n,this[5]=i,this[6]=a,this[7]=o,this[8]=s,this.check()}},{key:"copy",value:function(e){return this.setColumnMajor.apply(this,(0,a.default)(e))}},{key:"set",value:function(){return this.setColumnMajor.apply(this,arguments)}},{key:"getElement",value:function(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this[3*e+t]:this[3*t+e]}},{key:"setElement",value:function(e,t,r){return arguments.length>3&&void 0!==arguments[3]&&arguments[3]?this[3*e+t]=(0,h.checkNumber)(r):this[3*t+e]=(0,h.checkNumber)(r),this}},{key:"determinant",value:function(){return b.determinant(this)}},{key:"identity",value:function(){for(var e=0;e<y.length;++e)this[e]=y[e];return this.check()}},{key:"fromQuaternion",value:function(e){return b.fromQuat(this,e),this.check()}},{key:"transpose",value:function(){return b.transpose(this,this),this.check()}},{key:"invert",value:function(){return b.invert(this,this),this.check()}},{key:"multiplyLeft",value:function(e){return b.multiply(this,e,this),this.check()}},{key:"multiplyRight",value:function(e){return b.multiply(this,this,e),this.check()}},{key:"rotate",value:function(e){return b.rotate(this,this,e),this.check()}},{key:"scale",value:function(e){return Array.isArray(e)?b.scale(this,this,e):b.scale(this,this,[e,e,e]),this.check()}},{key:"translate",value:function(e){return b.translate(this,this,e),this.check()}},{key:"transformVector2",value:function(e,t){return t=t||new p.default,g.transformMat3(t,e,this),(0,d.validateVector)(t,2),t}},{key:"transformVector3",value:function(e,t){return t=t||new m.default,v.transformMat3(t,e,this),(0,d.validateVector)(t,3),t}},{key:"transformVector",value:function(e,t){switch(e.length){case 2:return this.transformVector2(e,t);case 3:return this.transformVector3(e,t);default:throw new Error("Illegal vector")}}},{key:"ELEMENTS",get:function(){return 9}}]),t}();r.default=_},{"./lib/common":259,"./lib/math-array":260,"./lib/validators":261,"./vector2":268,"./vector3":269,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/interopRequireWildcard":14,"@babel/runtime/helpers/possibleConstructorReturn":20,"@babel/runtime/helpers/toConsumableArray":24,"gl-matrix/mat3":272,"gl-matrix/vec2":275,"gl-matrix/vec3":276}],264:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.validateMatrix4=function(e){return 16===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])&&Number.isFinite(e[3])&&Number.isFinite(e[4])&&Number.isFinite(e[5])&&Number.isFinite(e[6])&&Number.isFinite(e[7])&&Number.isFinite(e[8])&&Number.isFinite(e[9])&&Number.isFinite(e[10])&&Number.isFinite(e[11])&&Number.isFinite(e[12])&&Number.isFinite(e[13])&&Number.isFinite(e[14])&&Number.isFinite(e[15])},r.default=void 0;var a=i(e("@babel/runtime/helpers/slicedToArray")),o=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/createClass")),u=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/getPrototypeOf")),c=i(e("@babel/runtime/helpers/inherits")),f=i(e("./lib/math-array")),d=e("./lib/common"),h=e("./lib/validators"),p=i(e("./vector2")),m=i(e("./vector3")),b=i(e("./vector4")),g=n(e("gl-matrix/mat4")),v=n(e("gl-matrix/vec2")),y=n(e("gl-matrix/vec3")),_=n(e("gl-matrix/vec4")),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var w=function(e){function t(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(0,o.default)(this,t),e=(0,u.default)(this,(0,l.default)(t).call(this,16)),Array.isArray(n[0])&&1===arguments.length?e.copy(n[0]):e.identity(),e}return(0,c.default)(t,f.default),(0,s.default)(t,[{key:"setRowMajor",value:function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,c=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,f=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,d=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,h=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,p=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,this[1]=n,this[2]=s,this[3]=f,this[4]=e,this[5]=i,this[6]=u,this[7]=d,this[8]=t,this[9]=a,this[10]=l,this[11]=h,this[12]=r,this[13]=o,this[14]=c,this[15]=p,this.check()}},{key:"setColumnMajor",value:function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,c=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,f=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,d=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,h=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,p=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,this[1]=e,this[2]=t,this[3]=r,this[4]=n,this[5]=i,this[6]=a,this[7]=o,this[8]=s,this[9]=u,this[10]=l,this[11]=c,this[12]=f,this[13]=d,this[14]=h,this[15]=p,this.check()}},{key:"set",value:function(){return this.setColumnMajor.apply(this,arguments)}},{key:"getElement",value:function(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this[e][t]:this[t][e]}},{key:"setElement",value:function(e,t,r){return arguments.length>3&&void 0!==arguments[3]&&arguments[3]?this[e][t]=(0,d.checkNumber)(r):this[t][e]=(0,d.checkNumber)(r),this}},{key:"determinant",value:function(){return g.determinant(this)}},{key:"identity",value:function(){return this.copy(x)}},{key:"fromQuaternion",value:function(e){return g.fromQuat(this,e),this.check()}},{key:"frustum",value:function(e){return g.frustum(this,e.left,e.right,e.bottom,e.top,e.near,e.far),this.check()}},{key:"lookAt",value:function(e){var t=e.center,r=e.up;return g.lookAt(this,e.eye,void 0===t?[0,0,0]:t,void 0===r?[0,1,0]:r),this.check()}},{key:"ortho",value:function(e){var t=e.near,r=e.far;return g.ortho(this,e.left,e.right,e.bottom,e.top,void 0===t?.1:t,void 0===r?500:r),this.check()}},{key:"orthographic",value:function(e){var r=e.fovy,n=void 0===r?45*Math.PI/180:r,i=e.aspect,a=void 0===i?1:i,o=e.focalDistance,s=void 0===o?1:o,u=e.near,l=void 0===u?.1:u,c=e.far,f=void 0===c?500:c;if(n>2*Math.PI)throw Error("radians");var d=s*Math.tan(n/2),h=d*a;return(new t).ortho({left:-h,right:h,bottom:-d,top:d,near:l,far:f})}},{key:"perspective",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fovy,r=e.fov,n=void 0===r?45*Math.PI/180:r,i=e.aspect,a=void 0===i?1:i,o=e.near,s=void 0===o?.1:o,u=e.far,l=void 0===u?500:u;if((t=t||n)>2*Math.PI)throw Error("radians");return g.perspective(this,t,a,s,l),this.check()}},{key:"transpose",value:function(){return g.transpose(this,this),this.check()}},{key:"invert",value:function(){return g.invert(this,this),this.check()}},{key:"multiplyLeft",value:function(e){return g.multiply(this,e,this),this.check()}},{key:"multiplyRight",value:function(e){return g.multiply(this,this,e),this.check()}},{key:"rotateX",value:function(e){return g.rotateX(this,this,e),this.check()}},{key:"rotateY",value:function(e){return g.rotateY(this,this,e),this.check()}},{key:"rotateZ",value:function(e){return g.rotateZ(this,this,e),this.check()}},{key:"rotateXYZ",value:function(e){var t=(0,a.default)(e,3),r=t[1],n=t[2];return this.rotateX(t[0]).rotateY(r).rotateZ(n)}},{key:"rotateAxis",value:function(e,t){return g.rotate(this,this,e,t),this.check()}},{key:"scale",value:function(e){return Array.isArray(e)?g.scale(this,this,e):g.scale(this,this,[e,e,e]),this.check()}},{key:"translate",value:function(e){return g.translate(this,this,e),this.check()}},{key:"transformVector2",value:function(e,t){return t=t||new p.default,v.transformMat4(t,e,this),(0,h.validateVector)(t,2),t}},{key:"transformVector3",value:function(e,t){return t=t||new m.default,y.transformMat4(t,e,this),(0,h.validateVector)(t,3),t}},{key:"transformVector4",value:function(e,t){return t=t||new b.default,_.transformMat4(t,e,this),(0,h.validateVector)(t,4),t.check()}},{key:"transformVector",value:function(e,t){switch(e.length){case 2:return this.transformVector2(e,t);case 3:return this.transformVector3(e,t);case 4:return this.transformVector4(e,t);default:throw new Error("Illegal vector")}}},{key:"transformDirection",value:function(e,t){return this._transformVector(e,t,0)}},{key:"transformPoint",value:function(e,t){return this._transformVector(e,t,1)}},{key:"_transformVector",value:function(e,t,r){switch(e.length){case 2:t=t||new p.default,_.transformMat4(t,[e[0],e[1],0,r],this),t.length=2,(0,h.validateVector)(t,2);break;case 3:t=t||new m.default,_.transformMat4(t,[e[0],e[1],e[2],r],this),t.length=3,(0,h.validateVector)(t,3);break;case 4:if(Boolean(r)!==Boolean(e[3]))throw new Error("math.gl: Matrix4.transformPoint - invalid vector");t=t||new b.default,_.transformMat4(t,e,this),(0,h.validateVector)(t,4);break;default:throw new Error("Illegal vector")}return t}},{key:"makeRotationX",value:function(e){return this.identity().rotateX(e)}},{key:"makeTranslation",value:function(e,t,r){return this.identity().translate([e,t,r])}},{key:"ELEMENTS",get:function(){return 16}}]),t}();r.default=w},{"./lib/common":259,"./lib/math-array":260,"./lib/validators":261,"./vector2":268,"./vector3":269,"./vector4":270,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/interopRequireWildcard":14,"@babel/runtime/helpers/possibleConstructorReturn":20,"@babel/runtime/helpers/slicedToArray":22,"gl-matrix/mat4":273,"gl-matrix/vec2":275,"gl-matrix/vec3":276,"gl-matrix/vec4":277}],265:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=n(e("./matrix4")),s=n(e("./vector3")),u=n(e("./euler")),l=function(){function e(t){var r=t.x,n=void 0===r?0:r,a=t.y,o=void 0===a?0:a,l=t.z,c=void 0===l?0:l,f=t.roll,d=void 0===f?0:f,h=t.pitch,p=void 0===h?0:h,m=t.yaw,b=void 0===m?0:m,g=t.position,v=t.orientation;(0,i.default)(this,e),this.position=Array.isArray(g)&&3===g.length?new s.default(g):new s.default(n,o,c),this.orientation=Array.isArray(v)&&4===v.length?new u.default(v,v[3]):new u.default(d,p,b,u.default.RollPitchYaw)}return(0,a.default)(e,[{key:"getPosition",value:function(){return this.position}},{key:"getOrientation",value:function(){return this.orientation}},{key:"equals",value:function(e){return!!e&&(this.position.equals(e.position)&&this.orientation.equals(e.orientation))}},{key:"exactEquals",value:function(e){return!!e&&(this.position.exactEquals(e.position)&&this.orientation.exactEquals(e.orientation))}},{key:"getTransformationMatrix",value:function(){var e=Math.sin(this.roll),t=Math.sin(this.pitch),r=Math.sin(this.yaw),n=Math.cos(this.roll),i=Math.cos(this.pitch),a=Math.cos(this.yaw);return(new o.default).setRowMajor(a*i,-r*n+a*t*e,r*e+a*t*n,this.x,r*i,a*n+r*t*e,-a*e+r*t*n,this.y,-t,i*e,i*n,this.z,0,0,0,1)}},{key:"getTransformationMatrixFromPose",value:function(e){return(new o.default).multiplyRight(this.getTransformationMatrix()).multiplyRight(e.getTransformationMatrix().invert())}},{key:"getTransformationMatrixToPose",value:function(e){return(new o.default).multiplyRight(e.getTransformationMatrix()).multiplyRight(this.getTransformationMatrix().invert())}},{key:"x",get:function(){return this.position.x},set:function(e){return this.position.x=e}},{key:"y",get:function(){return this.position.y},set:function(e){return this.position.y=e}},{key:"z",get:function(){return this.position.z},set:function(e){return this.position.z=e}},{key:"roll",get:function(){return this.orientation.roll},set:function(e){return this.orientation.roll=e}},{key:"pitch",get:function(){return this.orientation.pitch},set:function(e){return this.orientation.pitch=e}},{key:"yaw",get:function(){return this.orientation.yaw},set:function(e){return this.orientation.yaw=e}}]),e}();r.default=l},{"./euler":257,"./matrix4":264,"./vector3":269,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/interopRequireDefault":13}],266:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.validateQuaternion=function(e){return 4===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])&&Number.isFinite(e[3])},r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),o=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),u=i(e("@babel/runtime/helpers/getPrototypeOf")),l=i(e("@babel/runtime/helpers/inherits")),c=i(e("./lib/math-array")),f=e("./lib/common"),d=n(e("gl-matrix/quat")),h=[0,0,0,1];var p=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,a.default)(this,t),e=(0,s.default)(this,(0,u.default)(t).call(this,4)),Array.isArray(r)&&1===arguments.length?e.copy(r):e.set(r,n,i,o),e}return(0,l.default)(t,c.default),(0,o.default)(t,[{key:"fromMatrix3",value:function(e){return d.fromMat3(this,e),this.check()}},{key:"fromValues",value:function(e,t,r,n){return this.set(e,t,r,n)}},{key:"identity",value:function(){return d.identity(this),this.check()}},{key:"length",value:function(){return d.length(this)}},{key:"squaredLength",value:function(e){return d.squaredLength(this)}},{key:"dot",value:function(e,t){if(void 0!==t)throw new Error("Quaternion.dot only takes one argument");return d.dot(this,e)}},{key:"rotationTo",value:function(e,t){return d.rotationTo(this,e,t),this.check()}},{key:"add",value:function(e,t){if(void 0!==t)throw new Error("Quaternion.add only takes one argument");return d.add(this,e),this.check()}},{key:"calculateW",value:function(){return d.calculateW(this,this),this.check()}},{key:"conjugate",value:function(){return d.conjugate(this,this),this.check()}},{key:"invert",value:function(){return d.invert(this,this),this.check()}},{key:"lerp",value:function(e,t,r){return d.lerp(this,e,t,r),this.check()}},{key:"multiply",value:function(e,t){if(void 0!==t)throw new Error("Quaternion.multiply only takes one argument");return d.multiply(this,this,e),this.check()}},{key:"normalize",value:function(){return d.normalize(this,this),this.check()}},{key:"rotateX",value:function(e){return d.rotateX(this,this,e),this.check()}},{key:"rotateY",value:function(e){return d.rotateY(this,this,e),this.check()}},{key:"rotateZ",value:function(e){return d.rotateZ(this,this,e),this.check()}},{key:"scale",value:function(e){return d.scale(this,this,e),this.check()}},{key:"set",value:function(e,t,r,n){return d.set(this,e,t,r,n),this.check()}},{key:"setAxisAngle",value:function(e,t){return d.setAxisAngle(this,e,t),this.check()}},{key:"slerp",value:function(e){var t=e.start;return d.slerp(this,void 0===t?h:t,e.target,e.ratio),this.check()}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=(0,f.checkNumber)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=(0,f.checkNumber)(e)}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=(0,f.checkNumber)(e)}},{key:"w",get:function(){return this[3]},set:function(e){return this[3]=(0,f.checkNumber)(e)}}]),t}();r.default=p},{"./lib/common":259,"./lib/math-array":260,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/interopRequireWildcard":14,"@babel/runtime/helpers/possibleConstructorReturn":20,"gl-matrix/quat":274}],267:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/slicedToArray")),o=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/createClass")),u=e("./lib/common"),l=i(e("./vector3")),c=n(e("gl-matrix/vec3")),f=6371e3,d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.phi,n=t.theta,i=t.radius,a=t.bearing,s=t.pitch,u=t.radiusScale,l=void 0===u?f:u;(0,o.default)(this,e),0===arguments.length?(this.phi=0,this.theta=0,this.radius=1):Number.isFinite(r)||Number.isFinite(n)?(this.phi=r||0,this.theta=n||0):(Number.isFinite(a)||Number.isFinite(s))&&(this.bearing=a||0,this.pitch=s||0),this.radius=i||1,this.radiusScale=l||1,this.check()}return(0,s.default)(e,[{key:"toString",value:function(){return this.formatString(u.config)}},{key:"formatString",value:function(e){var t=u.formatValue;return"".concat(e.printTypes?"Spherical":"","[rho:").concat(t(this.radius),",theta:").concat(t(this.theta),",phi:").concat(t(this.phi),"]")}},{key:"equals",value:function(e){return(0,u.equals)(this.radius,e.radius)&&(0,u.equals)(this.theta,e.theta)&&(0,u.equals)(this.phi,e.phi)}},{key:"exactEquals",value:function(e){return this.radius===e.radius&&this.theta===e.theta&&this.phi===e.phi}},{key:"set",value:function(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this.check()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this.check()}},{key:"fromLngLatZ",value:function(e){var t=(0,a.default)(e,3),r=t[0],n=t[1];this.radius=1+t[2]/this.radiusScale,this.phi=(0,u.radians)(n),this.theta=(0,u.radians)(r)}},{key:"fromVector3",value:function(e){return this.radius=c.length(e),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e[0],e[1]),this.phi=Math.acos((0,u.clamp)(e[2]/this.radius,-1,1))),this.check()}},{key:"toVector3",value:function(){return new l.default(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}},{key:"makeSafe",value:function(){this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi))}},{key:"check",value:function(){if(!(Number.isFinite(this.phi)&&Number.isFinite(this.theta)&&this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}},{key:"bearing",get:function(){return 180-(0,u.degrees)(this.phi)},set:function(e){this.phi=Math.PI-(0,u.radians)(e)}},{key:"pitch",get:function(){return(0,u.degrees)(this.theta)},set:function(e){this.theta=(0,u.radians)(e)}},{key:"longitude",get:function(){return(0,u.degrees)(this.phi)}},{key:"latitude",get:function(){return(0,u.degrees)(this.theta)}},{key:"lng",get:function(){return(0,u.degrees)(this.phi)}},{key:"lat",get:function(){return(0,u.degrees)(this.theta)}},{key:"z",get:function(){return(this.radius-1)*this.radiusScale}}]),e}();r.default=d},{"./lib/common":259,"./vector3":269,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/interopRequireWildcard":14,"@babel/runtime/helpers/slicedToArray":22,"gl-matrix/vec3":276}],268:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),o=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),u=i(e("@babel/runtime/helpers/getPrototypeOf")),l=i(e("@babel/runtime/helpers/inherits")),c=i(e("./lib/vector")),f=n(e("gl-matrix/vec2")),d=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,a.default)(this,t),e=(0,s.default)(this,(0,u.default)(t).call(this,2)),Array.isArray(r)&&1===arguments.length?e.copy(r):e.set(r,n),e}return(0,l.default)(t,c.default),(0,o.default)(t,[{key:"cross",value:function(e){return f.cross(this,this,e),this.check()}},{key:"horizontalAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function(){return Math.atan2(this.x,this.y)}},{key:"operation",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.apply(void 0,[this,this].concat(r)),this.check()}},{key:"ELEMENTS",get:function(){return 2}}]),t}();r.default=d},{"./lib/vector":262,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/interopRequireWildcard":14,"@babel/runtime/helpers/possibleConstructorReturn":20,"gl-matrix/vec2":275}],269:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/classCallCheck")),o=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),u=i(e("@babel/runtime/helpers/getPrototypeOf")),l=i(e("@babel/runtime/helpers/inherits")),c=i(e("./lib/vector")),f=e("./lib/common"),d=n(e("gl-matrix/vec3")),h=[0,0,0],p=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,a.default)(this,t),e=(0,s.default)(this,(0,u.default)(t).call(this,3)),Array.isArray(r)&&1===arguments.length?e.copy(r):e.set(r,n,i),e}return(0,l.default)(t,c.default),(0,o.default)(t,[{key:"angle",value:function(e){return d.angle(this,e)}},{key:"cross",value:function(e){return d.cross(this,this,e),this.check()}},{key:"rotateX",value:function(e){var t=e.origin;return d.rotateX(this,this,void 0===t?h:t,e.radians),this.check()}},{key:"rotateY",value:function(e){var t=e.origin;return d.rotateY(this,this,void 0===t?h:t,e.radians),this.check()}},{key:"rotateZ",value:function(e){var t=e.origin;return d.rotateZ(this,this,void 0===t?h:t,e.radians),this.check()}},{key:"operation",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.apply(void 0,[this,this].concat(r)),this.check()}},{key:"ELEMENTS",get:function(){return 3}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=(0,f.checkNumber)(e)}}]),t}();r.default=p},{"./lib/common":259,"./lib/vector":262,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/interopRequireWildcard":14,"@babel/runtime/helpers/possibleConstructorReturn":20,"gl-matrix/vec3":276}],270:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),u=n(e("@babel/runtime/helpers/inherits")),l=n(e("./lib/vector")),c=e("./lib/common"),f=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return(0,i.default)(this,t),e=(0,o.default)(this,(0,s.default)(t).call(this,4)),Array.isArray(r)&&1===arguments.length?e.copy(r):e.set(r,n,a,u),e}return(0,u.default)(t,l.default),(0,a.default)(t,[{key:"applyMatrix4",value:function(e){return e.transformVector(this,this),this}},{key:"ELEMENTS",get:function(){return 4}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=(0,c.checkNumber)(e)}},{key:"w",get:function(){return this[3]},set:function(e){return this[3]=(0,c.checkNumber)(e)}}]),t}();r.default=f},{"./lib/common":259,"./lib/vector":262,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20}],271:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setMatrixArrayType=function(e){r.ARRAY_TYPE=i=e},r.toRadian=function(e){return e*o},r.equals=function(e,t){return Math.abs(e-t)<=n*Math.max(1,Math.abs(e),Math.abs(t))},r.RANDOM=r.ARRAY_TYPE=r.EPSILON=void 0;var n=1e-6;r.EPSILON=n;var i="undefined"!=typeof Float32Array?Float32Array:Array;r.ARRAY_TYPE=i;var a=Math.random;r.RANDOM=a;var o=Math.PI/180},{}],272:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.create=function(){var e=new n.ARRAY_TYPE(9);n.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0);return e[0]=1,e[4]=1,e[8]=1,e},r.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},r.clone=function(e){var t=new n.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},r.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},r.fromValues=function(e,t,r,i,a,o,s,u,l){var c=new n.ARRAY_TYPE(9);return c[0]=e,c[1]=t,c[2]=r,c[3]=i,c[4]=a,c[5]=o,c[6]=s,c[7]=u,c[8]=l,c},r.set=function(e,t,r,n,i,a,o,s,u,l){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=a,e[5]=o,e[6]=s,e[7]=u,e[8]=l,e},r.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},r.transpose=function(e,t){if(e===t){var r=t[1],n=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},r.invert=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=c*o-s*l,d=-c*a+s*u,h=l*a-o*u,p=r*f+n*d+i*h;if(!p)return null;return e[0]=f*(p=1/p),e[1]=(-c*n+i*l)*p,e[2]=(s*n-i*o)*p,e[3]=d*p,e[4]=(c*r-i*u)*p,e[5]=(-s*r+i*a)*p,e[6]=h*p,e[7]=(-l*r+n*u)*p,e[8]=(o*r-n*a)*p,e},r.adjoint=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8];return e[0]=o*c-s*l,e[1]=i*l-n*c,e[2]=n*s-i*o,e[3]=s*u-a*c,e[4]=r*c-i*u,e[5]=i*a-r*s,e[6]=a*l-o*u,e[7]=n*u-r*l,e[8]=r*o-n*a,e},r.determinant=function(e){var t=e[3],r=e[4],n=e[5],i=e[6],a=e[7],o=e[8];return e[0]*(o*r-n*a)+e[1]*(-o*t+n*i)+e[2]*(a*t-r*i)},r.multiply=i,r.translate=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],d=r[0],h=r[1];return e[0]=n,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=d*n+h*o+l,e[7]=d*i+h*s+c,e[8]=d*a+h*u+f,e},r.rotate=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],d=Math.sin(r),h=Math.cos(r);return e[0]=h*n+d*o,e[1]=h*i+d*s,e[2]=h*a+d*u,e[3]=h*o-d*n,e[4]=h*s-d*i,e[5]=h*u-d*a,e[6]=l,e[7]=c,e[8]=f,e},r.scale=function(e,t,r){var n=r[0],i=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},r.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},r.fromRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=-r,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},r.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},r.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},r.fromQuat=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=r+r,s=n+n,u=i+i,l=r*o,c=n*o,f=n*s,d=i*o,h=i*s,p=i*u,m=a*o,b=a*s,g=a*u;return e[0]=1-f-p,e[3]=c-g,e[6]=d+b,e[1]=c+g,e[4]=1-l-p,e[7]=h-m,e[2]=d-b,e[5]=h+m,e[8]=1-l-f,e},r.normalFromMat4=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],d=t[10],h=t[11],p=t[12],m=t[13],b=t[14],g=t[15],v=r*s-n*o,y=r*u-i*o,_=r*l-a*o,x=n*u-i*s,w=n*l-a*s,E=i*l-a*u,k=c*m-f*p,P=c*b-d*p,M=c*g-h*p,A=f*b-d*m,C=f*g-h*m,O=d*g-h*b,T=v*O-y*C+_*A+x*M-w*P+E*k;if(!T)return null;return e[0]=(s*O-u*C+l*A)*(T=1/T),e[1]=(u*M-o*O-l*P)*T,e[2]=(o*C-s*M+l*k)*T,e[3]=(i*C-n*O-a*A)*T,e[4]=(r*O-i*M+a*P)*T,e[5]=(n*M-r*C-a*k)*T,e[6]=(m*E-b*w+g*x)*T,e[7]=(b*_-p*E-g*y)*T,e[8]=(p*w-m*_+g*v)*T,e},r.projection=function(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e},r.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},r.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},r.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e},r.subtract=a,r.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e},r.multiplyScalarAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e},r.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},r.equals=function(e,t){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],d=t[0],h=t[1],p=t[2],m=t[3],b=t[4],g=t[5],v=t[6],y=t[7],_=t[8];return Math.abs(r-d)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(i-h)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(a-p)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(o-m)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(s-b)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(u-g)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(l-v)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(c-y)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(f-_)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(_))},r.sub=r.mul=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("./common.js"));function i(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],d=r[0],h=r[1],p=r[2],m=r[3],b=r[4],g=r[5],v=r[6],y=r[7],_=r[8];return e[0]=d*n+h*o+p*l,e[1]=d*i+h*s+p*c,e[2]=d*a+h*u+p*f,e[3]=m*n+b*o+g*l,e[4]=m*i+b*s+g*c,e[5]=m*a+b*u+g*f,e[6]=v*n+y*o+_*l,e[7]=v*i+y*s+_*c,e[8]=v*a+y*u+_*f,e}function a(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}r.mul=i,r.sub=a},{"./common.js":271}],273:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.create=function(){var e=new n.ARRAY_TYPE(16);n.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},r.clone=function(e){var t=new n.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},r.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},r.fromValues=function(e,t,r,i,a,o,s,u,l,c,f,d,h,p,m,b){var g=new n.ARRAY_TYPE(16);return g[0]=e,g[1]=t,g[2]=r,g[3]=i,g[4]=a,g[5]=o,g[6]=s,g[7]=u,g[8]=l,g[9]=c,g[10]=f,g[11]=d,g[12]=h,g[13]=p,g[14]=m,g[15]=b,g},r.set=function(e,t,r,n,i,a,o,s,u,l,c,f,d,h,p,m,b){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=a,e[5]=o,e[6]=s,e[7]=u,e[8]=l,e[9]=c,e[10]=f,e[11]=d,e[12]=h,e[13]=p,e[14]=m,e[15]=b,e},r.identity=i,r.transpose=function(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},r.invert=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],d=t[10],h=t[11],p=t[12],m=t[13],b=t[14],g=t[15],v=r*s-n*o,y=r*u-i*o,_=r*l-a*o,x=n*u-i*s,w=n*l-a*s,E=i*l-a*u,k=c*m-f*p,P=c*b-d*p,M=c*g-h*p,A=f*b-d*m,C=f*g-h*m,O=d*g-h*b,T=v*O-y*C+_*A+x*M-w*P+E*k;if(!T)return null;return e[0]=(s*O-u*C+l*A)*(T=1/T),e[1]=(i*C-n*O-a*A)*T,e[2]=(m*E-b*w+g*x)*T,e[3]=(d*w-f*E-h*x)*T,e[4]=(u*M-o*O-l*P)*T,e[5]=(r*O-i*M+a*P)*T,e[6]=(b*_-p*E-g*y)*T,e[7]=(c*E-d*_+h*y)*T,e[8]=(o*C-s*M+l*k)*T,e[9]=(n*M-r*C-a*k)*T,e[10]=(p*w-m*_+g*v)*T,e[11]=(f*_-c*w-h*v)*T,e[12]=(s*P-o*A-u*k)*T,e[13]=(r*A-n*P+i*k)*T,e[14]=(m*y-p*x-b*v)*T,e[15]=(c*x-f*y+d*v)*T,e},r.adjoint=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],d=t[10],h=t[11],p=t[12],m=t[13],b=t[14],g=t[15];return e[0]=s*(d*g-h*b)-f*(u*g-l*b)+m*(u*h-l*d),e[1]=-(n*(d*g-h*b)-f*(i*g-a*b)+m*(i*h-a*d)),e[2]=n*(u*g-l*b)-s*(i*g-a*b)+m*(i*l-a*u),e[3]=-(n*(u*h-l*d)-s*(i*h-a*d)+f*(i*l-a*u)),e[4]=-(o*(d*g-h*b)-c*(u*g-l*b)+p*(u*h-l*d)),e[5]=r*(d*g-h*b)-c*(i*g-a*b)+p*(i*h-a*d),e[6]=-(r*(u*g-l*b)-o*(i*g-a*b)+p*(i*l-a*u)),e[7]=r*(u*h-l*d)-o*(i*h-a*d)+c*(i*l-a*u),e[8]=o*(f*g-h*m)-c*(s*g-l*m)+p*(s*h-l*f),e[9]=-(r*(f*g-h*m)-c*(n*g-a*m)+p*(n*h-a*f)),e[10]=r*(s*g-l*m)-o*(n*g-a*m)+p*(n*l-a*s),e[11]=-(r*(s*h-l*f)-o*(n*h-a*f)+c*(n*l-a*s)),e[12]=-(o*(f*b-d*m)-c*(s*b-u*m)+p*(s*d-u*f)),e[13]=r*(f*b-d*m)-c*(n*b-i*m)+p*(n*d-i*f),e[14]=-(r*(s*b-u*m)-o*(n*b-i*m)+p*(n*u-i*s)),e[15]=r*(s*d-u*f)-o*(n*d-i*f)+c*(n*u-i*s),e},r.determinant=function(e){var t=e[0],r=e[1],n=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=e[9],f=e[10],d=e[11],h=e[12],p=e[13],m=e[14],b=e[15];return(t*o-r*a)*(f*b-d*m)-(t*s-n*a)*(c*b-d*p)+(t*u-i*a)*(c*m-f*p)+(r*s-n*o)*(l*b-d*h)-(r*u-i*o)*(l*m-f*h)+(n*u-i*s)*(l*p-c*h)},r.multiply=a,r.translate=function(e,t,r){var n,i,a,o,s,u,l,c,f,d,h,p,m=r[0],b=r[1],g=r[2];t===e?(e[12]=t[0]*m+t[4]*b+t[8]*g+t[12],e[13]=t[1]*m+t[5]*b+t[9]*g+t[13],e[14]=t[2]*m+t[6]*b+t[10]*g+t[14],e[15]=t[3]*m+t[7]*b+t[11]*g+t[15]):(i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],d=t[9],h=t[10],p=t[11],e[0]=n=t[0],e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=l,e[7]=c,e[8]=f,e[9]=d,e[10]=h,e[11]=p,e[12]=n*m+s*b+f*g+t[12],e[13]=i*m+u*b+d*g+t[13],e[14]=a*m+l*b+h*g+t[14],e[15]=o*m+c*b+p*g+t[15]);return e},r.scale=function(e,t,r){var n=r[0],i=r[1],a=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},r.rotate=function(e,t,r,i){var a,o,s,u,l,c,f,d,h,p,m,b,g,v,y,_,x,w,E,k,P,M,A,C,O=i[0],T=i[1],S=i[2],R=Math.sqrt(O*O+T*T+S*S);if(R<n.EPSILON)return null;O*=R=1/R,T*=R,S*=R,a=Math.sin(r),o=Math.cos(r),l=t[1],c=t[2],f=t[3],h=t[5],p=t[6],m=t[7],g=t[9],v=t[10],y=t[11],E=O*T*(s=1-o)-S*a,k=T*T*s+o,P=S*T*s+O*a,M=O*S*s+T*a,A=T*S*s-O*a,C=S*S*s+o,e[0]=(u=t[0])*(_=O*O*s+o)+(d=t[4])*(x=T*O*s+S*a)+(b=t[8])*(w=S*O*s-T*a),e[1]=l*_+h*x+g*w,e[2]=c*_+p*x+v*w,e[3]=f*_+m*x+y*w,e[4]=u*E+d*k+b*P,e[5]=l*E+h*k+g*P,e[6]=c*E+p*k+v*P,e[7]=f*E+m*k+y*P,e[8]=u*M+d*A+b*C,e[9]=l*M+h*A+g*C,e[10]=c*M+p*A+v*C,e[11]=f*M+m*A+y*C,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e},r.rotateX=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[4],o=t[5],s=t[6],u=t[7],l=t[8],c=t[9],f=t[10],d=t[11];t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[4]=a*i+l*n,e[5]=o*i+c*n,e[6]=s*i+f*n,e[7]=u*i+d*n,e[8]=l*i-a*n,e[9]=c*i-o*n,e[10]=f*i-s*n,e[11]=d*i-u*n,e},r.rotateY=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],o=t[1],s=t[2],u=t[3],l=t[8],c=t[9],f=t[10],d=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=a*i-l*n,e[1]=o*i-c*n,e[2]=s*i-f*n,e[3]=u*i-d*n,e[8]=a*n+l*i,e[9]=o*n+c*i,e[10]=s*n+f*i,e[11]=u*n+d*i,e},r.rotateZ=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],o=t[1],s=t[2],u=t[3],l=t[4],c=t[5],f=t[6],d=t[7];t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=a*i+l*n,e[1]=o*i+c*n,e[2]=s*i+f*n,e[3]=u*i+d*n,e[4]=l*i-a*n,e[5]=c*i-o*n,e[6]=f*i-s*n,e[7]=d*i-u*n,e},r.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},r.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},r.fromRotation=function(e,t,r){var i,a,o,s=r[0],u=r[1],l=r[2],c=Math.sqrt(s*s+u*u+l*l);if(c<n.EPSILON)return null;return s*=c=1/c,u*=c,l*=c,i=Math.sin(t),a=Math.cos(t),e[0]=s*s*(o=1-a)+a,e[1]=u*s*o+l*i,e[2]=l*s*o-u*i,e[3]=0,e[4]=s*u*o-l*i,e[5]=u*u*o+a,e[6]=l*u*o+s*i,e[7]=0,e[8]=s*l*o+u*i,e[9]=u*l*o-s*i,e[10]=l*l*o+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},r.fromXRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},r.fromYRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},r.fromZRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},r.fromRotationTranslation=o,r.fromQuat2=function(e,t){var r=new n.ARRAY_TYPE(3),i=-t[0],a=-t[1],s=-t[2],u=t[3],l=t[4],c=t[5],f=t[6],d=t[7],h=i*i+a*a+s*s+u*u;h>0?(r[0]=2*(l*u+d*i+c*s-f*a)/h,r[1]=2*(c*u+d*a+f*i-l*s)/h,r[2]=2*(f*u+d*s+l*a-c*i)/h):(r[0]=2*(l*u+d*i+c*s-f*a),r[1]=2*(c*u+d*a+f*i-l*s),r[2]=2*(f*u+d*s+l*a-c*i));return o(e,t,r),e},r.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},r.getScaling=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[4],o=t[5],s=t[6],u=t[8],l=t[9],c=t[10];return e[0]=Math.sqrt(r*r+n*n+i*i),e[1]=Math.sqrt(a*a+o*o+s*s),e[2]=Math.sqrt(u*u+l*l+c*c),e},r.getRotation=function(e,t){var r=t[0]+t[5]+t[10],n=0;r>0?(n=2*Math.sqrt(r+1),e[3]=.25*n,e[0]=(t[6]-t[9])/n,e[1]=(t[8]-t[2])/n,e[2]=(t[1]-t[4])/n):t[0]>t[5]&&t[0]>t[10]?(n=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/n,e[0]=.25*n,e[1]=(t[1]+t[4])/n,e[2]=(t[8]+t[2])/n):t[5]>t[10]?(n=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/n,e[0]=(t[1]+t[4])/n,e[1]=.25*n,e[2]=(t[6]+t[9])/n):(n=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/n,e[0]=(t[8]+t[2])/n,e[1]=(t[6]+t[9])/n,e[2]=.25*n);return e},r.fromRotationTranslationScale=function(e,t,r,n){var i=t[0],a=t[1],o=t[2],s=t[3],u=i+i,l=a+a,c=o+o,f=i*u,d=i*l,h=i*c,p=a*l,m=a*c,b=o*c,g=s*u,v=s*l,y=s*c,_=n[0],x=n[1],w=n[2];return e[0]=(1-(p+b))*_,e[1]=(d+y)*_,e[2]=(h-v)*_,e[3]=0,e[4]=(d-y)*x,e[5]=(1-(f+b))*x,e[6]=(m+g)*x,e[7]=0,e[8]=(h+v)*w,e[9]=(m-g)*w,e[10]=(1-(f+p))*w,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},r.fromRotationTranslationScaleOrigin=function(e,t,r,n,i){var a=t[0],o=t[1],s=t[2],u=t[3],l=a+a,c=o+o,f=s+s,d=a*l,h=a*c,p=a*f,m=o*c,b=o*f,g=s*f,v=u*l,y=u*c,_=u*f,x=n[0],w=n[1],E=n[2],k=i[0],P=i[1],M=i[2],A=(1-(m+g))*x,C=(h+_)*x,O=(p-y)*x,T=(h-_)*w,S=(1-(d+g))*w,R=(b+v)*w,L=(p+y)*E,D=(b-v)*E,j=(1-(d+m))*E;return e[0]=A,e[1]=C,e[2]=O,e[3]=0,e[4]=T,e[5]=S,e[6]=R,e[7]=0,e[8]=L,e[9]=D,e[10]=j,e[11]=0,e[12]=r[0]+k-(A*k+T*P+L*M),e[13]=r[1]+P-(C*k+S*P+D*M),e[14]=r[2]+M-(O*k+R*P+j*M),e[15]=1,e},r.fromQuat=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=r+r,s=n+n,u=i+i,l=r*o,c=n*o,f=n*s,d=i*o,h=i*s,p=i*u,m=a*o,b=a*s,g=a*u;return e[0]=1-f-p,e[1]=c+g,e[2]=d-b,e[3]=0,e[4]=c-g,e[5]=1-l-p,e[6]=h+m,e[7]=0,e[8]=d+b,e[9]=h-m,e[10]=1-l-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},r.frustum=function(e,t,r,n,i,a,o){var s=1/(r-t),u=1/(i-n),l=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*u,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(i+n)*u,e[10]=(o+a)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*l,e[15]=0,e},r.perspective=function(e,t,r,n,i){var a,o=1/Math.tan(t/2);e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&Infinity!==i?(e[10]=(i+n)*(a=1/(n-i)),e[14]=2*i*n*a):(e[10]=-1,e[14]=-2*n);return e},r.perspectiveFromFieldOfView=function(e,t,r,n){var i=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),u=2/(o+s),l=2/(i+a);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(o-s)*u*.5,e[9]=(i-a)*l*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e},r.ortho=function(e,t,r,n,i,a,o){var s=1/(t-r),u=1/(n-i),l=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*u,e[14]=(o+a)*l,e[15]=1,e},r.lookAt=function(e,t,r,a){var o,s,u,l,c,f,d,h,p,m,b=t[0],g=t[1],v=t[2],y=a[0],_=a[1],x=a[2],w=r[0],E=r[1],k=r[2];if(Math.abs(b-w)<n.EPSILON&&Math.abs(g-E)<n.EPSILON&&Math.abs(v-k)<n.EPSILON)return i(e);d=b-w,h=g-E,p=v-k,m=1/Math.sqrt(d*d+h*h+p*p),o=_*(p*=m)-x*(h*=m),s=x*(d*=m)-y*p,u=y*h-_*d,(m=Math.sqrt(o*o+s*s+u*u))?(o*=m=1/m,s*=m,u*=m):(o=0,s=0,u=0);l=h*u-p*s,c=p*o-d*u,f=d*s-h*o,(m=Math.sqrt(l*l+c*c+f*f))?(l*=m=1/m,c*=m,f*=m):(l=0,c=0,f=0);return e[0]=o,e[1]=l,e[2]=d,e[3]=0,e[4]=s,e[5]=c,e[6]=h,e[7]=0,e[8]=u,e[9]=f,e[10]=p,e[11]=0,e[12]=-(o*b+s*g+u*v),e[13]=-(l*b+c*g+f*v),e[14]=-(d*b+h*g+p*v),e[15]=1,e},r.targetTo=function(e,t,r,n){var i=t[0],a=t[1],o=t[2],s=n[0],u=n[1],l=n[2],c=i-r[0],f=a-r[1],d=o-r[2],h=c*c+f*f+d*d;h>0&&(h=1/Math.sqrt(h),c*=h,f*=h,d*=h);var p=u*d-l*f,m=l*c-s*d,b=s*f-u*c;(h=p*p+m*m+b*b)>0&&(h=1/Math.sqrt(h),p*=h,m*=h,b*=h);return e[0]=p,e[1]=m,e[2]=b,e[3]=0,e[4]=f*b-d*m,e[5]=d*p-c*b,e[6]=c*m-f*p,e[7]=0,e[8]=c,e[9]=f,e[10]=d,e[11]=0,e[12]=i,e[13]=a,e[14]=o,e[15]=1,e},r.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},r.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},r.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e},r.subtract=s,r.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e},r.multiplyScalarAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e[9]=t[9]+r[9]*n,e[10]=t[10]+r[10]*n,e[11]=t[11]+r[11]*n,e[12]=t[12]+r[12]*n,e[13]=t[13]+r[13]*n,e[14]=t[14]+r[14]*n,e[15]=t[15]+r[15]*n,e},r.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},r.equals=function(e,t){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],d=e[9],h=e[10],p=e[11],m=e[12],b=e[13],g=e[14],v=e[15],y=t[0],_=t[1],x=t[2],w=t[3],E=t[4],k=t[5],P=t[6],M=t[7],A=t[8],C=t[9],O=t[10],T=t[11],S=t[12],R=t[13],L=t[14],D=t[15];return Math.abs(r-y)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(i-_)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(a-x)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(o-w)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(s-E)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(u-k)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(k))&&Math.abs(l-P)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(P))&&Math.abs(c-M)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(M))&&Math.abs(f-A)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(d-C)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(h-O)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(p-T)<=n.EPSILON*Math.max(1,Math.abs(p),Math.abs(T))&&Math.abs(m-S)<=n.EPSILON*Math.max(1,Math.abs(m),Math.abs(S))&&Math.abs(b-R)<=n.EPSILON*Math.max(1,Math.abs(b),Math.abs(R))&&Math.abs(g-L)<=n.EPSILON*Math.max(1,Math.abs(g),Math.abs(L))&&Math.abs(v-D)<=n.EPSILON*Math.max(1,Math.abs(v),Math.abs(D))},r.sub=r.mul=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("./common.js"));function i(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function a(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],d=t[9],h=t[10],p=t[11],m=t[12],b=t[13],g=t[14],v=t[15],y=r[0],_=r[1],x=r[2],w=r[3];return e[0]=y*n+_*s+x*f+w*m,e[1]=y*i+_*u+x*d+w*b,e[2]=y*a+_*l+x*h+w*g,e[3]=y*o+_*c+x*p+w*v,e[4]=(y=r[4])*n+(_=r[5])*s+(x=r[6])*f+(w=r[7])*m,e[5]=y*i+_*u+x*d+w*b,e[6]=y*a+_*l+x*h+w*g,e[7]=y*o+_*c+x*p+w*v,e[8]=(y=r[8])*n+(_=r[9])*s+(x=r[10])*f+(w=r[11])*m,e[9]=y*i+_*u+x*d+w*b,e[10]=y*a+_*l+x*h+w*g,e[11]=y*o+_*c+x*p+w*v,e[12]=(y=r[12])*n+(_=r[13])*s+(x=r[14])*f+(w=r[15])*m,e[13]=y*i+_*u+x*d+w*b,e[14]=y*a+_*l+x*h+w*g,e[15]=y*o+_*c+x*p+w*v,e}function o(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=n+n,u=i+i,l=a+a,c=n*s,f=n*u,d=n*l,h=i*u,p=i*l,m=a*l,b=o*s,g=o*u,v=o*l;return e[0]=1-(h+m),e[1]=f+v,e[2]=d-g,e[3]=0,e[4]=f-v,e[5]=1-(c+m),e[6]=p+b,e[7]=0,e[8]=d+g,e[9]=p-b,e[10]=1-(c+h),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function s(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}r.mul=a,r.sub=s},{"./common.js":271}],274:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.create=u,r.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},r.setAxisAngle=l,r.getAxisAngle=function(e,t){var r=2*Math.acos(t[3]),i=Math.sin(r/2);i>n.EPSILON?(e[0]=t[0]/i,e[1]=t[1]/i,e[2]=t[2]/i):(e[0]=1,e[1]=0,e[2]=0);return r},r.multiply=c,r.rotateX=function(e,t,r){r*=.5;var n=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(r),u=Math.cos(r);return e[0]=n*u+o*s,e[1]=i*u+a*s,e[2]=a*u-i*s,e[3]=o*u-n*s,e},r.rotateY=function(e,t,r){r*=.5;var n=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(r),u=Math.cos(r);return e[0]=n*u-a*s,e[1]=i*u+o*s,e[2]=a*u+n*s,e[3]=o*u-i*s,e},r.rotateZ=function(e,t,r){r*=.5;var n=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(r),u=Math.cos(r);return e[0]=n*u+i*s,e[1]=i*u-n*s,e[2]=a*u+o*s,e[3]=o*u-a*s,e},r.calculateW=function(e,t){var r=t[0],n=t[1],i=t[2];return e[0]=r,e[1]=n,e[2]=i,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),e},r.slerp=f,r.random=function(e){var t=n.RANDOM(),r=n.RANDOM(),i=n.RANDOM(),a=Math.sqrt(1-t),o=Math.sqrt(t);return e[0]=a*Math.sin(2*Math.PI*r),e[1]=a*Math.cos(2*Math.PI*r),e[2]=o*Math.sin(2*Math.PI*i),e[3]=o*Math.cos(2*Math.PI*i),e},r.invert=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=r*r+n*n+i*i+a*a,s=o?1/o:0;return e[0]=-r*s,e[1]=-n*s,e[2]=-i*s,e[3]=a*s,e},r.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},r.fromMat3=d,r.fromEuler=function(e,t,r,n){var i=.5*Math.PI/180;t*=i,r*=i,n*=i;var a=Math.sin(t),o=Math.cos(t),s=Math.sin(r),u=Math.cos(r),l=Math.sin(n),c=Math.cos(n);return e[0]=a*u*c-o*s*l,e[1]=o*s*c+a*u*l,e[2]=o*u*l-a*s*c,e[3]=o*u*c+a*s*l,e},r.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},r.setAxes=r.sqlerp=r.rotationTo=r.equals=r.exactEquals=r.normalize=r.sqrLen=r.squaredLength=r.len=r.length=r.lerp=r.dot=r.scale=r.mul=r.add=r.set=r.copy=r.fromValues=r.clone=void 0;var n=s(e("./common.js")),i=s(e("./mat3.js")),a=s(e("./vec3.js")),o=s(e("./vec4.js"));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function u(){var e=new n.ARRAY_TYPE(4);return n.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function l(e,t,r){r*=.5;var n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e}function c(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=r[0],u=r[1],l=r[2],c=r[3];return e[0]=n*c+o*s+i*l-a*u,e[1]=i*c+o*u+a*s-n*l,e[2]=a*c+o*l+n*u-i*s,e[3]=o*c-n*s-i*u-a*l,e}function f(e,t,r,i){var a,o,s,u,l,c=t[0],f=t[1],d=t[2],h=t[3],p=r[0],m=r[1],b=r[2],g=r[3];return(o=c*p+f*m+d*b+h*g)<0&&(o=-o,p=-p,m=-m,b=-b,g=-g),1-o>n.EPSILON?(a=Math.acos(o),s=Math.sin(a),u=Math.sin((1-i)*a)/s,l=Math.sin(i*a)/s):(u=1-i,l=i),e[0]=u*c+l*p,e[1]=u*f+l*m,e[2]=u*d+l*b,e[3]=u*h+l*g,e}function d(e,t){var r,n=t[0]+t[4]+t[8];if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,e[0]=(t[5]-t[7])*(r=.5/r),e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;r=Math.sqrt(t[3*i+i]-t[3*a+a]-t[3*o+o]+1),e[i]=.5*r,e[3]=(t[3*a+o]-t[3*o+a])*(r=.5/r),e[a]=(t[3*a+i]+t[3*i+a])*r,e[o]=(t[3*o+i]+t[3*i+o])*r}return e}r.clone=o.clone,r.fromValues=o.fromValues,r.copy=o.copy,r.set=o.set,r.add=o.add,r.mul=c,r.scale=o.scale,r.dot=o.dot,r.lerp=o.lerp;var h=o.length;r.length=h,r.len=h;var p=o.squaredLength;r.squaredLength=p,r.sqrLen=p;var m=o.normalize;r.normalize=m,r.exactEquals=o.exactEquals,r.equals=o.equals;var b,g,v,y=(b=a.create(),g=a.fromValues(1,0,0),v=a.fromValues(0,1,0),function(e,t,r){var n=a.dot(t,r);return n<-.999999?(a.cross(b,g,t),a.len(b)<1e-6&&a.cross(b,v,t),a.normalize(b,b),l(e,b,Math.PI),e):n>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(a.cross(b,t,r),e[0]=b[0],e[1]=b[1],e[2]=b[2],e[3]=1+n,m(e,e))});r.rotationTo=y;var _,x,w=(_=u(),x=u(),function(e,t,r,n,i,a){return f(_,t,i,a),f(x,r,n,a),f(e,_,x,2*a*(1-a)),e});r.sqlerp=w;var E,k=(E=i.create(),function(e,t,r,n){return E[0]=r[0],E[3]=r[1],E[6]=r[2],E[1]=n[0],E[4]=n[1],E[7]=n[2],E[2]=-t[0],E[5]=-t[1],E[8]=-t[2],m(e,d(e,E))});r.setAxes=k},{"./common.js":271,"./mat3.js":272,"./vec3.js":276,"./vec4.js":277}],275:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.create=i,r.clone=function(e){var t=new n.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},r.fromValues=function(e,t){var r=new n.ARRAY_TYPE(2);return r[0]=e,r[1]=t,r},r.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},r.set=function(e,t,r){return e[0]=t,e[1]=r,e},r.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e},r.subtract=a,r.multiply=o,r.divide=s,r.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},r.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},r.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e},r.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e},r.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},r.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e},r.scaleAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e},r.distance=u,r.squaredDistance=l,r.length=c,r.squaredLength=f,r.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},r.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},r.normalize=function(e,t){var r=t[0],n=t[1],i=r*r+n*n;i>0&&(i=1/Math.sqrt(i));return e[0]=t[0]*i,e[1]=t[1]*i,e},r.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},r.cross=function(e,t,r){var n=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=n,e},r.lerp=function(e,t,r,n){var i=t[0],a=t[1];return e[0]=i+n*(r[0]-i),e[1]=a+n*(r[1]-a),e},r.random=function(e,t){t=t||1;var r=2*n.RANDOM()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e},r.transformMat2=function(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e},r.transformMat2d=function(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e},r.transformMat3=function(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e},r.transformMat4=function(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e},r.rotate=function(e,t,r,n){var i=t[0]-r[0],a=t[1]-r[1],o=Math.sin(n),s=Math.cos(n);return e[0]=i*s-a*o+r[0],e[1]=i*o+a*s+r[1],e},r.angle=function(e,t){var r=e[0],n=e[1],i=t[0],a=t[1],o=r*r+n*n;o>0&&(o=1/Math.sqrt(o));var s=i*i+a*a;s>0&&(s=1/Math.sqrt(s));var u=(r*i+n*a)*o*s;return u>1?0:u<-1?Math.PI:Math.acos(u)},r.zero=function(e){return e[0]=0,e[1]=0,e},r.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},r.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]},r.equals=function(e,t){var r=e[0],i=e[1],a=t[0],o=t[1];return Math.abs(r-a)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-o)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(o))},r.forEach=r.sqrLen=r.sqrDist=r.dist=r.div=r.mul=r.sub=r.len=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("./common.js"));function i(){var e=new n.ARRAY_TYPE(2);return n.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0),e}function a(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function o(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function s(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function u(e,t){var r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}function l(e,t){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function c(e){var t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}function f(e){var t=e[0],r=e[1];return t*t+r*r}r.len=c,r.sub=a,r.mul=o,r.div=s,r.dist=u,r.sqrDist=l,r.sqrLen=f;var d,h=(d=i(),function(e,t,r,n,i,a){var o,s;for(t||(t=2),r||(r=0),s=n?Math.min(n*t+r,e.length):e.length,o=r;o<s;o+=t)d[0]=e[o],d[1]=e[o+1],i(d,d,a),e[o]=d[0],e[o+1]=d[1];return e});r.forEach=h},{"./common.js":271}],276:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.create=i,r.clone=function(e){var t=new n.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},r.length=a,r.fromValues=o,r.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},r.set=function(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e},r.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e},r.subtract=s,r.multiply=u,r.divide=l,r.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},r.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},r.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e},r.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e},r.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},r.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e},r.scaleAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e},r.distance=c,r.squaredDistance=f,r.squaredLength=d,r.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},r.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},r.normalize=h,r.dot=p,r.cross=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=r[0],s=r[1],u=r[2];return e[0]=i*u-a*s,e[1]=a*o-n*u,e[2]=n*s-i*o,e},r.lerp=function(e,t,r,n){var i=t[0],a=t[1],o=t[2];return e[0]=i+n*(r[0]-i),e[1]=a+n*(r[1]-a),e[2]=o+n*(r[2]-o),e},r.hermite=function(e,t,r,n,i,a){var o=a*a,s=o*(2*a-3)+1,u=o*(a-2)+a,l=o*(a-1),c=o*(3-2*a);return e[0]=t[0]*s+r[0]*u+n[0]*l+i[0]*c,e[1]=t[1]*s+r[1]*u+n[1]*l+i[1]*c,e[2]=t[2]*s+r[2]*u+n[2]*l+i[2]*c,e},r.bezier=function(e,t,r,n,i,a){var o=1-a,s=o*o,u=a*a,l=s*o,c=3*a*s,f=3*u*o,d=u*a;return e[0]=t[0]*l+r[0]*c+n[0]*f+i[0]*d,e[1]=t[1]*l+r[1]*c+n[1]*f+i[1]*d,e[2]=t[2]*l+r[2]*c+n[2]*f+i[2]*d,e},r.random=function(e,t){t=t||1;var r=2*n.RANDOM()*Math.PI,i=2*n.RANDOM()-1,a=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(r)*a,e[1]=Math.sin(r)*a,e[2]=i*t,e},r.transformMat4=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=r[3]*n+r[7]*i+r[11]*a+r[15];return e[0]=(r[0]*n+r[4]*i+r[8]*a+r[12])/(o=o||1),e[1]=(r[1]*n+r[5]*i+r[9]*a+r[13])/o,e[2]=(r[2]*n+r[6]*i+r[10]*a+r[14])/o,e},r.transformMat3=function(e,t,r){var n=t[0],i=t[1],a=t[2];return e[0]=n*r[0]+i*r[3]+a*r[6],e[1]=n*r[1]+i*r[4]+a*r[7],e[2]=n*r[2]+i*r[5]+a*r[8],e},r.transformQuat=function(e,t,r){var n=r[0],i=r[1],a=r[2],o=t[0],s=t[1],u=t[2],l=i*u-a*s,c=a*o-n*u,f=n*s-i*o,d=i*f-a*c,h=a*l-n*f,p=n*c-i*l,m=2*r[3];return c*=m,f*=m,h*=2,p*=2,e[0]=o+(l*=m)+(d*=2),e[1]=s+c+h,e[2]=u+f+p,e},r.rotateX=function(e,t,r,n){var i=[],a=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],a[0]=i[0],a[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),a[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e},r.rotateY=function(e,t,r,n){var i=[],a=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],a[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),a[1]=i[1],a[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e},r.rotateZ=function(e,t,r,n){var i=[],a=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],a[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),a[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),a[2]=i[2],e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e},r.angle=function(e,t){var r=o(e[0],e[1],e[2]),n=o(t[0],t[1],t[2]);h(r,r),h(n,n);var i=p(r,n);return i>1?0:i<-1?Math.PI:Math.acos(i)},r.zero=function(e){return e[0]=0,e[1]=0,e[2]=0,e},r.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},r.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},r.equals=function(e,t){var r=e[0],i=e[1],a=e[2],o=t[0],s=t[1],u=t[2];return Math.abs(r-o)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-s)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(a-u)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))},r.forEach=r.sqrLen=r.len=r.sqrDist=r.dist=r.div=r.mul=r.sub=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("./common.js"));function i(){var e=new n.ARRAY_TYPE(3);return n.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function a(e){var t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)}function o(e,t,r){var i=new n.ARRAY_TYPE(3);return i[0]=e,i[1]=t,i[2]=r,i}function s(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function u(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function l(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function c(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(r*r+n*n+i*i)}function f(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return r*r+n*n+i*i}function d(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function h(e,t){var r=t[0],n=t[1],i=t[2],a=r*r+n*n+i*i;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function p(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}r.sub=s,r.mul=u,r.div=l,r.dist=c,r.sqrDist=f,r.len=a,r.sqrLen=d;var m,b=(m=i(),function(e,t,r,n,i,a){var o,s;for(t||(t=3),r||(r=0),s=n?Math.min(n*t+r,e.length):e.length,o=r;o<s;o+=t)m[0]=e[o],m[1]=e[o+1],m[2]=e[o+2],i(m,m,a),e[o]=m[0],e[o+1]=m[1],e[o+2]=m[2];return e});r.forEach=b},{"./common.js":271}],277:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.create=i,r.clone=function(e){var t=new n.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},r.fromValues=function(e,t,r,i){var a=new n.ARRAY_TYPE(4);return a[0]=e,a[1]=t,a[2]=r,a[3]=i,a},r.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},r.set=function(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e},r.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e},r.subtract=a,r.multiply=o,r.divide=s,r.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},r.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},r.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e},r.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e},r.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},r.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e},r.scaleAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e},r.distance=u,r.squaredDistance=l,r.length=c,r.squaredLength=f,r.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},r.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},r.normalize=function(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=r*r+n*n+i*i+a*a;o>0&&(o=1/Math.sqrt(o));return e[0]=r*o,e[1]=n*o,e[2]=i*o,e[3]=a*o,e},r.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},r.cross=function(e,t,r,n){var i=r[0]*n[1]-r[1]*n[0],a=r[0]*n[2]-r[2]*n[0],o=r[0]*n[3]-r[3]*n[0],s=r[1]*n[2]-r[2]*n[1],u=r[1]*n[3]-r[3]*n[1],l=r[2]*n[3]-r[3]*n[2],c=t[0],f=t[1],d=t[2],h=t[3];return e[0]=f*l-d*u+h*s,e[1]=-c*l+d*o-h*a,e[2]=c*u-f*o+h*i,e[3]=-c*s+f*a-d*i,e},r.lerp=function(e,t,r,n){var i=t[0],a=t[1],o=t[2],s=t[3];return e[0]=i+n*(r[0]-i),e[1]=a+n*(r[1]-a),e[2]=o+n*(r[2]-o),e[3]=s+n*(r[3]-s),e},r.random=function(e,t){var r,i,a,o,s,u;t=t||1;do{r=2*n.RANDOM()-1,i=2*n.RANDOM()-1,s=r*r+i*i}while(s>=1);do{a=2*n.RANDOM()-1,o=2*n.RANDOM()-1,u=a*a+o*o}while(u>=1);var l=Math.sqrt((1-s)/u);return e[0]=t*r,e[1]=t*i,e[2]=t*a*l,e[3]=t*o*l,e},r.transformMat4=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,e[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,e[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,e[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,e},r.transformQuat=function(e,t,r){var n=t[0],i=t[1],a=t[2],o=r[0],s=r[1],u=r[2],l=r[3],c=l*n+s*a-u*i,f=l*i+u*n-o*a,d=l*a+o*i-s*n,h=-o*n-s*i-u*a;return e[0]=c*l+h*-o+f*-u-d*-s,e[1]=f*l+h*-s+d*-o-c*-u,e[2]=d*l+h*-u+c*-s-f*-o,e[3]=t[3],e},r.zero=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},r.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},r.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},r.equals=function(e,t){var r=e[0],i=e[1],a=e[2],o=e[3],s=t[0],u=t[1],l=t[2],c=t[3];return Math.abs(r-s)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-l)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(o-c)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))},r.forEach=r.sqrLen=r.len=r.sqrDist=r.dist=r.div=r.mul=r.sub=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("./common.js"));function i(){var e=new n.ARRAY_TYPE(4);return n.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function a(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function o(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function s(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function u(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return Math.sqrt(r*r+n*n+i*i+a*a)}function l(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return r*r+n*n+i*i+a*a}function c(e){var t=e[0],r=e[1],n=e[2],i=e[3];return Math.sqrt(t*t+r*r+n*n+i*i)}function f(e){var t=e[0],r=e[1],n=e[2],i=e[3];return t*t+r*r+n*n+i*i}r.sub=a,r.mul=o,r.div=s,r.dist=u,r.sqrDist=l,r.len=c,r.sqrLen=f;var d,h=(d=i(),function(e,t,r,n,i,a){var o,s;for(t||(t=4),r||(r=0),s=n?Math.min(n*t+r,e.length):e.length,o=r;o<s;o+=t)d[0]=e[o],d[1]=e[o+1],d[2]=e[o+2],d[3]=e[o+3],i(d,d,a),e[o]=d[0],e[o+1]=d[1],e[o+2]=d[2],e[o+3]=d[3];return e});r.forEach=h},{"./common.js":271}],278:[function(e,t,r){"use strict";var n=e("binary-search-bounds"),i=e("mat4-interpolate"),a=e("gl-mat4/invert"),o=e("gl-mat4/rotateX"),s=e("gl-mat4/rotateY"),u=e("gl-mat4/rotateZ"),l=e("gl-mat4/lookAt"),c=e("gl-mat4/translate"),f=(e("gl-mat4/scale"),e("gl-vec3/normalize")),d=[0,0,0];function h(e){this._components=e.slice(),this._time=[0],this.prevMatrix=e.slice(),this.nextMatrix=e.slice(),this.computedMatrix=e.slice(),this.computedInverse=e.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-Infinity,Infinity]}t.exports=function(e){return new h((e=e||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var p=h.prototype;p.recalcMatrix=function(e){var t=this._time,r=n.le(t,e),o=this.computedMatrix;if(!(r<0)){var s=this._components;if(r===t.length-1)for(var u=16*r,l=0;l<16;++l)o[l]=s[u++];else{var c=t[r+1]-t[r],d=(u=16*r,this.prevMatrix),h=!0;for(l=0;l<16;++l)d[l]=s[u++];var p=this.nextMatrix;for(l=0;l<16;++l)p[l]=s[u++],h=h&&d[l]===p[l];if(c<1e-6||h)for(l=0;l<16;++l)o[l]=d[l];else i(o,d,p,(e-t[r])/c)}var m=this.computedUp;m[0]=o[1],m[1]=o[5],m[2]=o[9],f(m,m);var b=this.computedInverse;a(b,o);var g=this.computedEye,v=b[15];g[0]=b[12]/v,g[1]=b[13]/v,g[2]=b[14]/v;var y=this.computedCenter,_=Math.exp(this.computedRadius[0]);for(l=0;l<3;++l)y[l]=g[l]-o[2+4*l]*_}},p.idle=function(e){if(!(e<this.lastT())){for(var t=this._components,r=t.length-16,n=0;n<16;++n)t.push(t[r++]);this._time.push(e)}},p.flush=function(e){var t=n.gt(this._time,e)-2;t<0||(this._time.splice(0,t),this._components.splice(0,16*t))},p.lastT=function(){return this._time[this._time.length-1]},p.lookAt=function(e,t,r,n){this.recalcMatrix(e),this.setMatrix(e,l(this.computedMatrix,t=t||this.computedEye,r=r||d,n=n||this.computedUp));for(var i=0,a=0;a<3;++a)i+=Math.pow(r[a]-t[a],2);i=Math.log(Math.sqrt(i)),this.computedRadius[0]=i},p.rotate=function(e,t,r,n){this.recalcMatrix(e);var i=this.computedInverse;t&&s(i,i,t),r&&o(i,i,r),n&&u(i,i,n),this.setMatrix(e,a(this.computedMatrix,i))};var m=[0,0,0];p.pan=function(e,t,r,n){m[0]=-(t||0),m[1]=-(r||0),m[2]=-(n||0),this.recalcMatrix(e);var i=this.computedInverse;c(i,i,m),this.setMatrix(e,a(i,i))},p.translate=function(e,t,r,n){m[0]=t||0,m[1]=r||0,m[2]=n||0,this.recalcMatrix(e);var i=this.computedMatrix;c(i,i,m),this.setMatrix(e,i)},p.setMatrix=function(e,t){if(!(e<this.lastT())){this._time.push(e);for(var r=0;r<16;++r)this._components.push(t[r])}},p.setDistance=function(e,t){this.computedRadius[0]=t},p.setDistanceLimits=function(e,t){var r=this._limits;r[0]=e,r[1]=t},p.getDistanceLimits=function(e){var t=this._limits;return e?(e[0]=t[0],e[1]=t[1],e):t}},{"binary-search-bounds":32,"gl-mat4/invert":75,"gl-mat4/lookAt":76,"gl-mat4/rotateX":82,"gl-mat4/rotateY":83,"gl-mat4/rotateZ":84,"gl-mat4/scale":85,"gl-mat4/translate":87,"gl-vec3/normalize":94,"mat4-interpolate":254}],279:[function(e,t,r){"use strict";t.exports=function(e,t){t||(t=e,e=window);var r=0,i=0,a=0,o={shift:!1,alt:!1,control:!1,meta:!1},s=!1;function u(e){var t=!1;return"altKey"in e&&(t=t||e.altKey!==o.alt,o.alt=!!e.altKey),"shiftKey"in e&&(t=t||e.shiftKey!==o.shift,o.shift=!!e.shiftKey),"ctrlKey"in e&&(t=t||e.ctrlKey!==o.control,o.control=!!e.ctrlKey),"metaKey"in e&&(t=t||e.metaKey!==o.meta,o.meta=!!e.metaKey),t}function l(e,s){var l=n.x(s),c=n.y(s);"buttons"in s&&(e=0|s.buttons),(e!==r||l!==i||c!==a||u(s))&&(r=0|e,i=l||0,a=c||0,t&&t(r,i,a,o))}function c(e){l(0,e)}function f(){(r||i||a||o.shift||o.alt||o.meta||o.control)&&(i=a=0,r=0,o.shift=o.alt=o.control=o.meta=!1,t&&t(0,0,0,o))}function d(e){u(e)&&t&&t(r,i,a,o)}function h(e){0===n.buttons(e)?l(0,e):l(r,e)}function p(e){l(r|n.buttons(e),e)}function m(e){l(r&~n.buttons(e),e)}function b(){s||(s=!0,e.addEventListener("mousemove",h),e.addEventListener("mousedown",p),e.addEventListener("mouseup",m),e.addEventListener("mouseleave",c),e.addEventListener("mouseenter",c),e.addEventListener("mouseout",c),e.addEventListener("mouseover",c),e.addEventListener("blur",f),e.addEventListener("keyup",d),e.addEventListener("keydown",d),e.addEventListener("keypress",d),e!==window&&(window.addEventListener("blur",f),window.addEventListener("keyup",d),window.addEventListener("keydown",d),window.addEventListener("keypress",d)))}b();var g={element:e};return Object.defineProperties(g,{enabled:{get:function(){return s},set:function(t){t?b():s&&(s=!1,e.removeEventListener("mousemove",h),e.removeEventListener("mousedown",p),e.removeEventListener("mouseup",m),e.removeEventListener("mouseleave",c),e.removeEventListener("mouseenter",c),e.removeEventListener("mouseout",c),e.removeEventListener("mouseover",c),e.removeEventListener("blur",f),e.removeEventListener("keyup",d),e.removeEventListener("keydown",d),e.removeEventListener("keypress",d),e!==window&&(window.removeEventListener("blur",f),window.removeEventListener("keyup",d),window.removeEventListener("keydown",d),window.removeEventListener("keypress",d)))},enumerable:!0},buttons:{get:function(){return r},enumerable:!0},x:{get:function(){return i},enumerable:!0},y:{get:function(){return a},enumerable:!0},mods:{get:function(){return o},enumerable:!0}}),g};var n=e("mouse-event")},{"mouse-event":281}],280:[function(e,t,r){var n={left:0,top:0};t.exports=function(e,t,r){t=t||e.currentTarget||e.srcElement,Array.isArray(r)||(r=[0,0]);var i=e.clientX||0,a=e.clientY||0,o=(s=t,s===window||s===document||s===document.body?n:s.getBoundingClientRect());var s;return r[0]=i-o.left,r[1]=a-o.top,r}},{}],281:[function(e,t,r){"use strict";function n(e){return e.target||e.srcElement||window}r.buttons=function(e){if("object"==typeof e){if("buttons"in e)return e.buttons;if("which"in e){if(2===(t=e.which))return 4;if(3===t)return 2;if(t>0)return 1<<t-1}else if("button"in e){var t;if(1===(t=e.button))return 4;if(2===t)return 2;if(t>=0)return 1<<t}}return 0},r.element=n,r.x=function(e){if("object"==typeof e){if("offsetX"in e)return e.offsetX;var t=n(e).getBoundingClientRect();return e.clientX-t.left}return 0},r.y=function(e){if("object"==typeof e){if("offsetY"in e)return e.offsetY;var t=n(e).getBoundingClientRect();return e.clientY-t.top}return 0}},{}],282:[function(e,t,r){"use strict";var n=e("to-px");t.exports=function(e,t,r){"function"==typeof e&&(r=!!t,t=e,e=window);var i=n("ex",e),a=function(e){r&&e.preventDefault();var n=e.deltaX||0,a=e.deltaY||0,o=e.deltaZ||0,s=e.deltaMode,u=1;switch(s){case 1:u=i;break;case 2:u=window.innerHeight}if(a*=u,o*=u,(n*=u)||a||o)return t(n,a,o,e)};return e.addEventListener("wheel",a),a}},{"to-px":316}],283:[function(e,t,r){"use strict";var n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,o,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),u=1;u<arguments.length;u++){for(var l in r=Object(arguments[u]))i.call(r,l)&&(s[l]=r[l]);if(n){o=n(r);for(var c=0;c<o.length;c++)a.call(r,o[c])&&(s[o[c]]=r[o[c]])}}return s}},{}],284:[function(e,t,r){"use strict";t.exports=function(e,t,r,n,i,a,o,s,u,l){var c=t+a+l;if(f>0){var f=Math.sqrt(c+1);e[0]=.5*(o-u)/f,e[1]=.5*(s-n)/f,e[2]=.5*(r-a)/f,e[3]=.5*f}else{var d=Math.max(t,a,l),f=Math.sqrt(2*d-c+1);t>=d?(e[0]=.5*f,e[1]=.5*(i+r)/f,e[2]=.5*(s+n)/f,e[3]=.5*(o-u)/f):a>=d?(e[0]=.5*(r+i)/f,e[1]=.5*f,e[2]=.5*(u+o)/f,e[3]=.5*(s-n)/f):(e[0]=.5*(n+s)/f,e[1]=.5*(o+u)/f,e[2]=.5*f,e[3]=.5*(r-i)/f)}return e}},{}],285:[function(e,t,r){"use strict";t.exports=function(e){var t=(e=e||{}).center||[0,0,0],r=e.rotation||[0,0,0,1],n=e.radius||1;t=[].slice.call(t,0,3),c(r=[].slice.call(r,0,4),r);var i=new f(r,t,Math.log(n));i.setDistanceLimits(e.zoomMin,e.zoomMax),("eye"in e||"up"in e)&&i.lookAt(0,e.eye,e.center,e.up);return i};var n=e("filtered-vector"),i=e("gl-mat4/lookAt"),a=e("gl-mat4/fromQuat"),o=e("gl-mat4/invert"),s=e("./lib/quatFromFrame");function u(e,t,r){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(r,2))}function l(e,t,r,n){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(r,2)+Math.pow(n,2))}function c(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=l(r,n,i,a);o>1e-6?(e[0]=r/o,e[1]=n/o,e[2]=i/o,e[3]=a/o):(e[0]=e[1]=e[2]=0,e[3]=1)}function f(e,t,r){this.radius=n([r]),this.center=n(t),this.rotation=n(e),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var d=f.prototype;d.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},d.recalcMatrix=function(e){this.radius.curve(e),this.center.curve(e),this.rotation.curve(e);var t=this.computedRotation;c(t,t);var r=this.computedMatrix;a(r,t);var n=this.computedCenter,i=this.computedEye,o=this.computedUp,s=Math.exp(this.computedRadius[0]);i[0]=n[0]+s*r[2],i[1]=n[1]+s*r[6],i[2]=n[2]+s*r[10],o[0]=r[1],o[1]=r[5],o[2]=r[9];for(var u=0;u<3;++u){for(var l=0,f=0;f<3;++f)l+=r[u+4*f]*i[f];r[12+u]=-l}},d.getMatrix=function(e,t){this.recalcMatrix(e);var r=this.computedMatrix;if(t){for(var n=0;n<16;++n)t[n]=r[n];return t}return r},d.idle=function(e){this.center.idle(e),this.radius.idle(e),this.rotation.idle(e)},d.flush=function(e){this.center.flush(e),this.radius.flush(e),this.rotation.flush(e)},d.pan=function(e,t,r,n){t=t||0,r=r||0,n=n||0,this.recalcMatrix(e);var i=this.computedMatrix,a=i[1],o=i[5],s=i[9],l=u(a,o,s),c=i[0],f=i[4],d=i[8],h=c*(a/=l)+f*(o/=l)+d*(s/=l),p=u(c-=a*h,f-=o*h,d-=s*h),m=i[2],b=i[6],g=i[10],v=m*a+b*o+g*s,y=m*(c/=p)+b*(f/=p)+g*(d/=p),_=u(m-=v*a+y*c,b-=v*o+y*f,g-=v*s+y*d);m/=_,b/=_,g/=_,this.center.move(e,c*t+a*r,f*t+o*r,d*t+s*r);var x=Math.exp(this.computedRadius[0]);x=Math.max(1e-4,x+n),this.radius.set(e,Math.log(x))},d.rotate=function(e,t,r,n){this.recalcMatrix(e);var i=this.computedMatrix,a=i[2],o=i[6],s=i[10],c=(t=t||0)*i[0]+(r=r||0)*i[1],f=t*i[4]+r*i[5],d=t*i[8]+r*i[9],h=-(o*d-s*f),p=-(s*c-a*d),m=-(a*f-o*c),b=Math.sqrt(Math.max(0,1-Math.pow(h,2)-Math.pow(p,2)-Math.pow(m,2))),g=l(h,p,m,b);g>1e-6?(h/=g,p/=g,m/=g,b/=g):(h=p=m=0,b=1);var v=this.computedRotation,y=v[0],_=v[1],x=v[2],w=v[3],E=y*b+w*h+_*m-x*p,k=_*b+w*p+x*h-y*m,P=x*b+w*m+y*p-_*h,M=w*b-y*h-_*p-x*m;if(n){h=a,p=o,m=s;var A=Math.sin(n)/u(h,p,m);h*=A,p*=A,m*=A,M=M*(b=Math.cos(t))-(E=E*b+M*h+k*m-P*p)*h-(k=k*b+M*p+P*h-E*m)*p-(P=P*b+M*m+E*p-k*h)*m}var C=l(E,k,P,M);C>1e-6?(E/=C,k/=C,P/=C,M/=C):(E=k=P=0,M=1),this.rotation.set(e,E,k,P,M)},d.lookAt=function(e,t,r,n){this.recalcMatrix(e);var a=this.computedMatrix;i(a,t=t||this.computedEye,r=r||this.computedCenter,n=n||this.computedUp);var o=this.computedRotation;s(o,a[0],a[1],a[2],a[4],a[5],a[6],a[8],a[9],a[10]),c(o,o),this.rotation.set(e,o[0],o[1],o[2],o[3]);for(var u=0,l=0;l<3;++l)u+=Math.pow(r[l]-t[l],2);this.radius.set(e,.5*Math.log(Math.max(u,1e-6))),this.center.set(e,r[0],r[1],r[2])},d.translate=function(e,t,r,n){this.center.move(e,t||0,r||0,n||0)},d.setMatrix=function(e,t){var r=this.computedRotation;s(r,t[0],t[1],t[2],t[4],t[5],t[6],t[8],t[9],t[10]),c(r,r),this.rotation.set(e,r[0],r[1],r[2],r[3]);var n=this.computedMatrix;o(n,t);var i=n[15];if(Math.abs(i)>1e-6){var a=n[12]/i,u=n[13]/i,l=n[14]/i;this.recalcMatrix(e);var f=Math.exp(this.computedRadius[0]);this.center.set(e,a-n[2]*f,u-n[6]*f,l-n[10]*f),this.radius.idle(e)}else this.center.idle(e),this.radius.idle(e)},d.setDistance=function(e,t){t>0&&this.radius.set(e,Math.log(t))},d.setDistanceLimits=function(e,t){e=e>0?Math.log(e):-Infinity,t=t>0?Math.log(t):Infinity,t=Math.max(t,e),this.radius.bounds[0][0]=e,this.radius.bounds[1][0]=t},d.getDistanceLimits=function(e){var t=this.radius.bounds;return e?(e[0]=Math.exp(t[0][0]),e[1]=Math.exp(t[1][0]),e):[Math.exp(t[0][0]),Math.exp(t[1][0])]},d.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},d.fromJSON=function(e){var t=this.lastT(),r=e.center;r&&this.center.set(t,r[0],r[1],r[2]);var n=e.rotation;n&&this.rotation.set(t,n[0],n[1],n[2],n[3]);var i=e.distance;i&&i>0&&this.radius.set(t,Math.log(i)),this.setDistanceLimits(e.zoomMin,e.zoomMax)}},{"./lib/quatFromFrame":284,"filtered-vector":56,"gl-mat4/fromQuat":64,"gl-mat4/invert":75,"gl-mat4/lookAt":76}],286:[function(e,t,r){var n=e("color-convert");t.exports=function(e){var t,r,i,a;if(t=/^((?:rgb|hs[lv]|cmyk|xyz|lab)a?)\s*\(([^\)]*)\)/.exec(e)){var o=t[1],s="cmyk"===(u=o.replace(/a$/,""))?4:3;r=n[u],i=t[2].replace(/^\s+|\s+$/g,"").split(/\s*,\s*/).map(function(e,t){return/%$/.test(e)&&t===s?parseFloat(e)/100:(/%$/.test(e),parseFloat(e))}),o===u&&i.push(1),a=void 0===i[s]?1:i[s],i=i.slice(0,s),r[u]=function(){return i}}else if(/^#[A-Fa-f0-9]+$/.test(e)){var u=e.replace(/^#/,"");r=n.rgb,i=(i=u.split(3===(s=u.length)?/(.)/:/(..)/)).filter(Boolean).map(function(e){return 3===s?parseInt(e+e,16):parseInt(e,16)}),a=1,r.rgb=function(){return i},i[0]||(i[0]=0),i[1]||(i[1]=0),i[2]||(i[2]=0)}else(r=n.keyword).keyword=function(){return e},i=e,a=1;var l={rgb:void 0,hsl:void 0,hsv:void 0,cmyk:void 0,keyword:void 0,hex:void 0};try{l.rgb=r.rgb(i)}catch(e){}try{l.hsl=r.hsl(i)}catch(e){}try{l.hsv=r.hsv(i)}catch(e){}try{l.cmyk=r.cmyk(i)}catch(e){}try{l.keyword=r.keyword(i)}catch(e){}return l.rgb&&(l.hex="#"+l.rgb.map(function(e){var t=e.toString(16);return 1===t.length?"0"+t:t}).join("")),l.rgb&&(l.rgba=l.rgb.concat(a)),l.hsl&&(l.hsla=l.hsl.concat(a)),l.hsv&&(l.hsva=l.hsv.concat(a)),l.cmyk&&(l.cmyka=l.cmyk.concat(a)),l}},{"color-convert":288}],287:[function(e,t,n){function i(e){var t,r,n=e[0]/255,i=e[1]/255,a=e[2]/255,o=Math.min(n,i,a),s=Math.max(n,i,a),u=s-o;return s==o?t=0:n==s?t=(i-a)/u:i==s?t=2+(a-n)/u:a==s&&(t=4+(n-i)/u),(t=Math.min(60*t,360))<0&&(t+=360),r=(o+s)/2,[t,100*(s==o?0:r<=.5?u/(s+o):u/(2-s-o)),100*r]}function a(e){var t,r,n=e[0],i=e[1],a=e[2],o=Math.min(n,i,a),s=Math.max(n,i,a),u=s-o;return r=0==s?0:u/s*1e3/10,s==o?t=0:n==s?t=(i-a)/u:i==s?t=2+(a-n)/u:a==s&&(t=4+(n-i)/u),(t=Math.min(60*t,360))<0&&(t+=360),[t,r,s/255*1e3/10]}function o(e){var t=e[0],r=e[1],n=e[2];return[i(e)[0],100*(1/255*Math.min(t,Math.min(r,n))),100*(n=1-1/255*Math.max(t,Math.max(r,n)))]}function s(e){var t,r=e[0]/255,n=e[1]/255,i=e[2]/255;return[100*((1-r-(t=Math.min(1-r,1-n,1-i)))/(1-t)||0),100*((1-n-t)/(1-t)||0),100*((1-i-t)/(1-t)||0),100*t]}function u(e){return P[JSON.stringify(e)]}function l(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*t+.7152*r+.0722*n),100*(.0193*t+.1192*r+.9505*n)]}function c(e){var t=l(e),r=t[0],n=t[1],i=t[2];return n/=100,i/=108.883,r=(r/=95.047)>.008856?Math.pow(r,1/3):7.787*r+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(r-n),200*(n-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]}function f(e){var t,r,n,i,a,o=e[0]/360,s=e[1]/100,u=e[2]/100;if(0==s)return[a=255*u,a,a];t=2*u-(r=u<.5?u*(1+s):u+s-u*s),i=[0,0,0];for(var l=0;l<3;l++)(n=o+1/3*-(l-1))<0&&n++,n>1&&n--,i[l]=255*(a=6*n<1?t+6*(r-t)*n:2*n<1?r:3*n<2?t+(r-t)*(2/3-n)*6:t);return i}function d(e){var t=e[0]/60,r=e[1]/100,n=e[2]/100,i=Math.floor(t)%6,a=t-Math.floor(t),o=255*n*(1-r),s=255*n*(1-r*a),u=255*n*(1-r*(1-a));n*=255;switch(i){case 0:return[n,u,o];case 1:return[s,n,o];case 2:return[o,n,u];case 3:return[o,s,n];case 4:return[u,o,n];case 5:return[n,o,s]}}function h(e){var t,n,i,a,o=e[0]/360,s=e[1]/100,u=e[2]/100,l=s+u;switch(l>1&&(s/=l,u/=l),i=6*o-(t=Math.floor(6*o)),0!=(1&t)&&(i=1-i),a=s+i*((n=1-u)-s),t){default:case 6:case 0:r=n,g=a,b=s;break;case 1:r=a,g=n,b=s;break;case 2:r=s,g=n,b=a;break;case 3:r=s,g=a,b=n;break;case 4:r=a,g=s,b=n;break;case 5:r=n,g=s,b=a}return[255*r,255*g,255*b]}function p(e){var t=e[1]/100,r=e[2]/100,n=e[3]/100;return[255*(1-Math.min(1,e[0]/100*(1-n)+n)),255*(1-Math.min(1,t*(1-n)+n)),255*(1-Math.min(1,r*(1-n)+n))]}function m(e){var t,r,n,i=e[0]/100,a=e[1]/100,o=e[2]/100;return r=-.9689*i+1.8758*a+.0415*o,n=.0557*i+-.204*a+1.057*o,t=(t=3.2406*i+-1.5372*a+-.4986*o)>.0031308?1.055*Math.pow(t,1/2.4)-.055:t*=12.92,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,[255*(t=Math.min(Math.max(0,t),1)),255*(r=Math.min(Math.max(0,r),1)),255*(n=Math.min(Math.max(0,n),1))]}function v(e){var t=e[0],r=e[1],n=e[2];return r/=100,n/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(t-r),200*(r-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]}function y(e){var t,r,n,i,a=e[0],o=e[1],s=e[2];return a<=8?i=(r=100*a/903.3)/100*7.787+16/116:(r=100*Math.pow((a+16)/116,3),i=Math.pow(r/100,1/3)),[t=t/95.047<=.008856?t=95.047*(o/500+i-16/116)/7.787:95.047*Math.pow(o/500+i,3),r,n=n/108.883<=.008859?n=108.883*(i-s/200-16/116)/7.787:108.883*Math.pow(i-s/200,3)]}function _(e){var t,r=e[0],n=e[1],i=e[2];return(t=360*Math.atan2(i,n)/2/Math.PI)<0&&(t+=360),[r,Math.sqrt(n*n+i*i),t]}function x(e){return m(y(e))}function w(e){var t,r=e[1];return t=e[2]/360*2*Math.PI,[e[0],r*Math.cos(t),r*Math.sin(t)]}function E(e){return k[e]}t.exports={rgb2hsl:i,rgb2hsv:a,rgb2hwb:o,rgb2cmyk:s,rgb2keyword:u,rgb2xyz:l,rgb2lab:c,rgb2lch:function(e){return _(c(e))},hsl2rgb:f,hsl2hsv:function(e){var t=e[0],r=e[1]/100,n=e[2]/100;if(0===n)return[0,0,0];return[t,100*(2*(r*=(n*=2)<=1?n:2-n)/(n+r)),100*((n+r)/2)]},hsl2hwb:function(e){return o(f(e))},hsl2cmyk:function(e){return s(f(e))},hsl2keyword:function(e){return u(f(e))},hsv2rgb:d,hsv2hsl:function(e){var t,r,n=e[1]/100,i=e[2]/100;return t=n*i,[e[0],100*(t=(t/=(r=(2-n)*i)<=1?r:2-r)||0),100*(r/=2)]},hsv2hwb:function(e){return o(d(e))},hsv2cmyk:function(e){return s(d(e))},hsv2keyword:function(e){return u(d(e))},hwb2rgb:h,hwb2hsl:function(e){return i(h(e))},hwb2hsv:function(e){return a(h(e))},hwb2cmyk:function(e){return s(h(e))},hwb2keyword:function(e){return u(h(e))},cmyk2rgb:p,cmyk2hsl:function(e){return i(p(e))},cmyk2hsv:function(e){return a(p(e))},cmyk2hwb:function(e){return o(p(e))},cmyk2keyword:function(e){return u(p(e))},keyword2rgb:E,keyword2hsl:function(e){return i(E(e))},keyword2hsv:function(e){return a(E(e))},keyword2hwb:function(e){return o(E(e))},keyword2cmyk:function(e){return s(E(e))},keyword2lab:function(e){return c(E(e))},keyword2xyz:function(e){return l(E(e))},xyz2rgb:m,xyz2lab:v,xyz2lch:function(e){return _(v(e))},lab2xyz:y,lab2rgb:x,lab2lch:_,lch2lab:w,lch2xyz:function(e){return y(w(e))},lch2rgb:function(e){return x(w(e))}};var k={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},P={};for(var M in k)P[JSON.stringify(k[M])]=M},{}],288:[function(e,t,r){var n=e("./conversions"),i=function(){return new l};for(var a in n){i[a+"Raw"]=function(e){return function(t){return"number"==typeof t&&(t=Array.prototype.slice.call(arguments)),n[e](t)}}(a);var o=/(\w+)2(\w+)/.exec(a),s=o[1],u=o[2];(i[s]=i[s]||{})[u]=i[a]=function(e){return function(t){"number"==typeof t&&(t=Array.prototype.slice.call(arguments));var r=n[e](t);if("string"==typeof r||void 0===r)return r;for(var i=0;i<r.length;i++)r[i]=Math.round(r[i]);return r}}(a)}var l=function(){this.convs={}};l.prototype.routeSpace=function(e,t){var r=t[0];return void 0===r?this.getValues(e):("number"==typeof r&&(r=Array.prototype.slice.call(t)),this.setValues(e,r))},l.prototype.setValues=function(e,t){return this.space=e,this.convs={},this.convs[e]=t,this},l.prototype.getValues=function(e){var t=this.convs[e];if(!t){var r=this.space;t=i[r][e](this.convs[r]),this.convs[e]=t}return t},["rgb","hsl","hsv","cmyk","keyword"].forEach(function(e){l.prototype[e]=function(t){return this.routeSpace(e,arguments)}}),t.exports=i},{"./conversions":287}],289:[function(e,t,r){t.exports=function(e,t){t||(t=[0,""]),e=String(e);var r=parseFloat(e,10);return t[0]=r,t[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},{}],290:[function(e,t,r){t.exports=function(e){e=void 0!==e?e:1,Array.isArray(e)||(e=[e,e]);var t=[[-e[0],-e[1],0],[e[0],-e[1],0],[e[0],e[1],0],[-e[0],e[1],0]],r=[0,0,-1],n=[r.slice(),r.slice(),r.slice(),r.slice()];return{positions:t,cells:[[0,1,2],[2,3,0]],uvs:[[0,0],[1,0],[1,1],[0,1]],normals:n}}},{}],291:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){if(!e)throw new Error("Assertion failed. ".concat(t))}},{}],292:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.isMobile=function(){return void 0!==i.window.orientation},r.default=function(e){if(!e&&!(0,a.default)())return"Node";if((0,o.default)(e))return"Electron";var t="undefined"!=typeof navigator?navigator:{},r=e||t.userAgent||"";if(r.indexOf("Edge")>-1)return"Edge";var n=-1!==r.indexOf("MSIE "),s=-1!==r.indexOf("Trident/");if(n||s)return"IE";if(i.window.chrome)return"Chrome";if(i.window.safari)return"Safari";if(i.window.mozInnerScreenX)return"Firefox";return"Unknown"};var i=e("./globals"),a=n(e("./is-browser")),o=n(e("./is-electron"))},{"./globals":293,"./is-browser":294,"./is-electron":295,"@babel/runtime/helpers/interopRequireDefault":13}],293:[function(e,t,r){(function(t,n){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.console=r.process=r.document=r.global=r.window=r.self=void 0;var a=i(e("@babel/runtime/helpers/typeof")),o={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==n&&n,document:"undefined"!=typeof document&&document,process:"object"===(void 0===t?"undefined":(0,a.default)(t))&&t};r.self=o.self||o.window||o.global,r.window=o.window||o.self||o.global,r.global=o.global||o.self||o.window,r.document=o.document||{},r.process=o.process||{};var s=console;r.console=s}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/typeof":25,_process:308}],294:[function(e,t,r){(function(t){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=o,r.isBrowserMainThread=function(){return o()&&"undefined"!=typeof document};var i=n(e("@babel/runtime/helpers/typeof")),a=n(e("./is-electron"));function o(){return!("object"===(void 0===t?"undefined":(0,i.default)(t))&&"[object process]"===String(t)&&!t.browser)||(0,a.default)()}}).call(this,e("_process"))},{"./is-electron":295,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/typeof":25,_process:308}],295:[function(e,t,r){(function(t){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if("undefined"!=typeof window&&"object"===(0,i.default)(window.process)&&"renderer"===window.process.type)return!0;if(void 0!==t&&"object"===(0,i.default)(t.versions)&&Boolean(t.versions.electron))return!0;var r="object"===("undefined"==typeof navigator?"undefined":(0,i.default)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,n=e||r;if(n&&n.indexOf("Electron")>=0)return!0;return!1};var i=n(e("@babel/runtime/helpers/typeof"))}).call(this,e("_process"))},{"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/typeof":25,_process:308}],296:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),i=e("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"VERSION",{enumerable:!0,get:function(){return a.VERSION}}),Object.defineProperty(r,"self",{enumerable:!0,get:function(){return o.self}}),Object.defineProperty(r,"window",{enumerable:!0,get:function(){return o.window}}),Object.defineProperty(r,"global",{enumerable:!0,get:function(){return o.global}}),Object.defineProperty(r,"document",{enumerable:!0,get:function(){return o.document}}),Object.defineProperty(r,"process",{enumerable:!0,get:function(){return o.process}}),Object.defineProperty(r,"console",{enumerable:!0,get:function(){return o.console}}),Object.defineProperty(r,"isBrowser",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"isBrowserMainThread",{enumerable:!0,get:function(){return s.isBrowserMainThread}}),Object.defineProperty(r,"getBrowser",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"isMobile",{enumerable:!0,get:function(){return u.isMobile}}),Object.defineProperty(r,"isElectron",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"assert",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"Stats",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(r,"Log",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"COLOR",{enumerable:!0,get:function(){return h.COLOR}}),Object.defineProperty(r,"_enableDOMLogging",{enumerable:!0,get:function(){return p.enableDOMLogging}}),r.default=void 0,e("./init");var a=e("./lib/utils/globals"),o=e("./env/globals"),s=i(e("./env/is-browser")),u=i(e("./env/get-browser")),l=n(e("./env/is-electron")),c=n(e("./env/assert")),f=n(e("./lib/stats")),d=n(e("./lib/log")),h=e("./lib/utils/color"),p=e("./lib/utils/log-to-dom"),m=new d.default({id:"probe.gl"});r.default=m},{"./env/assert":291,"./env/get-browser":292,"./env/globals":293,"./env/is-browser":294,"./env/is-electron":295,"./init":297,"./lib/log":298,"./lib/stats":299,"./lib/utils/color":302,"./lib/utils/globals":304,"./lib/utils/log-to-dom":306,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/interopRequireWildcard":14}],297:[function(e,t,r){"use strict";e("./lib/utils/globals").global.probe={}},{"./lib/utils/globals":304}],298:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/typeof")),a=n(e("@babel/runtime/helpers/toConsumableArray")),o=n(e("@babel/runtime/helpers/defineProperty")),s=n(e("@babel/runtime/helpers/classCallCheck")),u=n(e("@babel/runtime/helpers/createClass")),l=e("./utils/globals"),c=n(e("./utils/local-storage")),f=e("./utils/timestamp"),d=e("./utils/formatters"),h=e("./utils/color"),p=e("./utils/autobind"),m=n(e("../lib/utils/assert")),b={debug:l.isBrowser&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},g={enabled:!1,priority:0};function v(){}var y={};var _=function(){function e(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;(0,s.default)(this,e),this.id=t,this.VERSION=l.VERSION,this._startTs=(0,f.getTimestamp)(),this._deltaTs=(0,f.getTimestamp)(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new c.default("__probe-".concat(this.id,"__"),g),this.userData={},this.timeStamp("".concat(this.id," started")),(0,p.autobind)(this),Object.seal(this)}return(0,u.default)(e,[{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getPriority",value:function(){return this._storage.config.priority}},{key:"getLevel",value:function(){return this._storage.config.priority}},{key:"getTotal",value:function(){return Number(((0,f.getTimestamp)()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number(((0,f.getTimestamp)()-this._deltaTs).toPrecision(10))}},{key:"enable",value:function(){return this._storage.updateConfiguration({enabled:!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}),this}},{key:"setLevel",value:function(e){return this._storage.updateConfiguration({priority:e}),this}},{key:"assert",value:function(e,t){(0,m.default)(e,t)}},{key:"warn",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return this._getLogFunction({message:e,args:r,method:b.warn,once:!0})}},{key:"error",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return this._getLogFunction({message:e,args:r,method:b.error})}},{key:"deprecated",value:function(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}},{key:"removed",value:function(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}},{key:"probe",value:function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return this._getLogFunction({priority:e,message:t,args:n,method:b.log,time:!0,once:!0})}},{key:"log",value:function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return this._getLogFunction({priority:e,message:t,args:n,method:b.debug})}},{key:"info",value:function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return this._getLogFunction({priority:e,message:t,args:n,method:console.info})}},{key:"once",value:function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return this._getLogFunction({priority:e,message:t,args:n,method:b.debug||b.info,once:!0})}},{key:"table",value:function(e,t,r){if(t){var n=function(e){for(var t in e)for(var r in e[t])return r||"untitled";return"empty"}(t);return this._getLogFunction({priority:e,message:t,args:r&&[r],tag:n,method:console.table||v})}return v}},{key:"image",value:function(e){var t=e.image,r=e.message,n=void 0===r?"":r,i=e.scale,a=void 0===i?1:i;return e.priority>this.getPriority()?v:l.isBrowser?this._logImageInBrowser({image:t,message:n,scale:a}):this._logImageInNode({image:t,message:n,scale:a})}},{key:"settings",value:function(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"get",value:function(e){return this._storage.config[e]}},{key:"set",value:function(e,t){this._storage.updateConfiguration((0,o.default)({},e,t))}},{key:"_logImageInNode",value:function(e){var r=e.image,n=e.scale,i=void 0===n?1:n,a=null;try{a=t.require("asciify-image")}catch(e){}return a?function(){return a(r,{fit:"box",width:"".concat(Math.round(80*i),"%")}).then(function(e){return console.log(e)})}:v}},{key:"_logImageInBrowser",value:function(e){var t=e.image,r=e.message,n=void 0===r?"":r,i=e.scale,o=void 0===i?1:i;if("string"==typeof t){var s=new Image;return s.onload=function(){var e,t=(0,d.formatImage)(s,n,o);(e=console).log.apply(e,(0,a.default)(t))},s.src=t,v}var u,l=t.nodeName||"";if("img"===l.toLowerCase())return(u=console).log.apply(u,(0,a.default)((0,d.formatImage)(t,n,o))),v;if("canvas"===l.toLowerCase()){var c=new Image;return c.onload=function(){var e;return(e=console).log.apply(e,(0,a.default)((0,d.formatImage)(c,n,o)))},c.src=t.toDataURL(),v}return v}},{key:"time",value:function(e,t){return this._getLogFunction({priority:e,message:t,method:console.time?console.time:console.info})}},{key:"timeEnd",value:function(e,t){return this._getLogFunction({priority:e,message:t,method:console.timeEnd?console.timeEnd:console.info})}},{key:"timeStamp",value:function(e,t){return this._getLogFunction({priority:e,message:t,method:console.timeStamp||v})}},{key:"group",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};return r=this._normalizeArguments({priority:e,message:t,opts:r}),this._getLogFunction({priority:e,message:t,opts:r,method:(r.collapsed?console.groupCollapsed:console.group)||console.info})}},{key:"groupCollapsed",value:function(e,t){return this.group(e,t,Object.assign({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{collapsed:!0}))}},{key:"groupEnd",value:function(e){return this._getLogFunction({priority:e,message:"",method:console.groupEnd||v})}},{key:"withGroup",value:function(e,t,r){var n=this._normalizeArguments({priority:e,message:t});this.group(n);try{r()}finally{this.groupEnd(n.message)}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(e){return 0===(e=this._normalizePriority(e))||this.isEnabled()&&this.getPriority()>=e}},{key:"_getElapsedTime",value:function(){var e=this.getTotal(),t=this.getDelta();return this._deltaTs=(0,f.getTimestamp)(),{total:e,delta:t}}},{key:"_getLogFunction",value:function(e){if(this._shouldLog(e.priority)){var t=e.method;e=this._parseArguments(e),(0,m.default)(t);var r=e.message,n=e.tag||e.message;if(e.once){if(y[n])return v;y[n]=(0,f.getTimestamp)()}return r=this._decorateMessage(r,e),t.bind.apply(t,[console,r].concat((0,a.default)(e.args)))}return v}},{key:"_parseArguments",value:function(e){var t=this._normalizeArguments(e),r=this._getElapsedTime();return Object.assign(e,t,{delta:r.delta,total:r.total})}},{key:"_normalizePriority",value:function(e){var t;switch((0,i.default)(e)){case"number":t=e;break;case"object":t=e.priority||0;break;default:t=0}return(0,m.default)(Number.isFinite(t)&&t>=0),t}},{key:"_normalizeArguments",value:function(e){var t=e.priority,r=e.message,n=e.args,a=void 0===n?[]:n,o=e.opts,s={priority:this._normalizePriority(t),message:r,args:a};switch((0,i.default)(t)){case"string":case"function":void 0!==r&&a.unshift(r),Object.assign(s,{message:t});break;case"object":Object.assign(s,t)}return"function"==typeof s.message&&(s.message=this._shouldLog(s.priority)?s.message():""),(0,m.default)("string"==typeof s.message||"object"===(0,i.default)(s.message)),Object.assign(s,o)}},{key:"_decorateMessage",value:function(e,t){if("string"==typeof e){var r="";if(t.time){var n=this._getElapsedTime();r=(0,d.leftPad)((0,d.formatTime)(n.total))}e=t.time?"".concat(this.id,": ").concat(r,"  ").concat(e):"".concat(this.id,": ").concat(e),e=(0,h.addColor)(e,t.color,t.background)}return e}},{key:"priority",set:function(e){return this._storage.updateConfiguration({priority:e}),this},get:function(){return this._storage.config.priority}}]),e}();r.default=_,_.VERSION=l.VERSION},{"../lib/utils/assert":300,"./utils/autobind":301,"./utils/color":302,"./utils/formatters":303,"./utils/globals":304,"./utils/local-storage":305,"./utils/timestamp":307,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/defineProperty":9,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/toConsumableArray":24,"@babel/runtime/helpers/typeof":25}],299:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),o=e("./utils/timestamp"),s=e("./utils/formatters"),u=function(){function e(t){var r=t.id;(0,i.default)(this,e),this.id=r,this.time=(0,o.getTimestamp)(),this.counters={},Object.seal(this)}return(0,a.default)(e,[{key:"addCounter",value:function(e){return this._getCounter(e),this}},{key:"bump",value:function(e){var t=this._getCounter(e);return t.call++,t.count++,this}},{key:"increment",value:function(e,t){var r=this._getCounter(e);return r.call++,r.count+=t,this}},{key:"addTimer",value:function(e){return this._getCounter(e).time=0,this}},{key:"addTime",value:function(e,t){var r=this._getCounter(e);return r.time+=t,r.count++,this}},{key:"timeStart",value:function(e,t){this._getCounter(e)._startTime=(0,o.getTimestamp)()}},{key:"timeEnd",value:function(e,t){var r=this._getCounter(e);this.addTime(e,(0,o.getTimestamp)()-r._startTime)}},{key:"reset",value:function(){for(var e in this.time=(0,o.getTimestamp)(),this.counters){var t=this.counters[e];t.count=0,t.time=0}return this}},{key:"hasTimeElapsed",value:function(){return(0,o.getTimestamp)()-this.time>1e3}},{key:"getStats",value:function(){var e=((0,o.getTimestamp)()-this.time)/1e3,t={};for(var r in this.counters){var n=this.counters[r];t[n.title]={total:n.count,fps:Math.round(n.count/e)},n.time&&(t[n.title].totalTime=(0,s.formatTime)(n.time),t[n.title].avgTime=(0,s.formatTime)(n.time/n.count))}return t}},{key:"getStatsTable",value:function(){var e=this.getStats();for(var t in e)0===e[t].total&&delete e[t];return e}},{key:"getStatNames",value:function(){return Object.keys(this.counters)}},{key:"get",value:function(e){return this._getCounter(e).count}},{key:"getCount",value:function(e){return this._getCounter(e).count}},{key:"getFPS",value:function(e){var t=this._getCounter(e),r=((0,o.getTimestamp)()-this.time)/1e3;return Math.round(t.count/r)}},{key:"getTimeString",value:function(){return"".concat(this.id,":").concat((0,s.formatTime)(this.time),"(").concat(this.count,")")}},{key:"oneSecondPassed",value:function(){return this.hasTimeElapsed(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3)}},{key:"_getCounter",value:function(e){var t=this.counters[e];return t||(this.counters[e]=t={title:e,unit:"",timer:!1,count:0,time:0,totalTime:0,averageTime:0}),t}},{key:"_incrementTimer",value:function(e,t,r){e.count+=r,e.totalTime+=t,e.averageTime=e.totalTime/r}}]),e}();r.default=u},{"./utils/formatters":303,"./utils/timestamp":307,"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/interopRequireDefault":13}],300:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){if(!e)throw new Error(t||"Assertion failed")}},{}],301:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.autobind=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"],r=Object.getPrototypeOf(e),n=Object.getOwnPropertyNames(r),i=!0,a=!1,o=void 0;try{for(var s,u=function(){var r=s.value;"function"==typeof e[r]&&(t.find(function(e){return r===e})||(e[r]=e[r].bind(e)))},l=n[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)u()}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}}},{}],302:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.addColor=function(e,t,r){n.isBrowser||"string"!=typeof e||(t&&(t=a(t),e="[".concat(t,"m").concat(e,"[39m")),r&&(t=a(r),e="[".concat(r+10,"m").concat(e,"[49m")));return e},r.COLOR=void 0;var n=e("./globals"),i={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function a(e){return"string"==typeof e?i[e.toUpperCase()]||i.WHITE:e}r.COLOR=i},{"./globals":304}],303:[function(e,t,r){"use strict";function n(e){var t={0:"",1:"K",2:"M",3:"G","-1":"m","-2":"µ","-3":"n"},r=String(e);return r in t?t[r]:"e".concat(3*e)}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.isInteger,n=void 0!==r&&r;if(Array.isArray(e)||ArrayBuffer.isView(e))return function(e,t){for(var r=t.maxElts,n=void 0===r?16:r,a=t.size,o=void 0===a?1:a,s="[",u=0;u<e.length&&u<n;++u)u>0&&(s+=",".concat(u%o==0?" ":"")),s+=i(e[u],t);var l=e.length>n?"...":"]";return"".concat(s).concat(l)}(e,t);if(!Number.isFinite(e))return String(e);if(Math.abs(e)<1e-16)return n?"0":"0.";if(n)return e.toFixed(0);if(Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);var a=e.toPrecision(2);return a.indexOf(".0")===a.length-2?a.slice(0,-1):a}Object.defineProperty(r,"__esModule",{value:!0}),r.formatTime=function(e){var t;t=e<10?"".concat(e.toFixed(2),"ms"):e<100?"".concat(e.toFixed(1),"ms"):e<1e3?"".concat(e.toFixed(0),"ms"):"".concat((e/1e3).toFixed(2),"s");return t},r.leftPad=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,r=Math.max(t-e.length,0);return"".concat(" ".repeat(r)).concat(e)},r.rightPad=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,r=Math.max(t-e.length,0);return"".concat(e).concat(" ".repeat(r))},r.getSISuffix=n,r.formatSI=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=function(e){var t=e,r=0;if(0!==e){for(;t>=10||t<=-10;)t/=10,r++;for(;t<1&&t>-1;)t*=10,r--}return{base:t,exponent:r}}(e),i=r.base,a=r.exponent,o=Math.floor(a/3),s=i*Math.pow(10,a-3*o);return"".concat(s.toPrecision(t)).concat(n(o))},r.formatValue=i,r.formatImage=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,i=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>n&&(r=Math.min(r,n/e.width));var a=e.width*r,o=e.height*r,s=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(a/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(a,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),s]}},{}],304:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"self",{enumerable:!0,get:function(){return a.self}}),Object.defineProperty(r,"window",{enumerable:!0,get:function(){return a.window}}),Object.defineProperty(r,"global",{enumerable:!0,get:function(){return a.global}}),Object.defineProperty(r,"document",{enumerable:!0,get:function(){return a.document}}),Object.defineProperty(r,"process",{enumerable:!0,get:function(){return a.process}}),Object.defineProperty(r,"console",{enumerable:!0,get:function(){return a.console}}),r.isBrowser=r.VERSION=void 0;var i=n(e("../../env/is-browser")),a=e("../../env/globals");r.VERSION="2.1.0";var o=(0,i.default)();r.isBrowser=o},{"../../env/globals":293,"../../env/is-browser":294,"@babel/runtime/helpers/interopRequireDefault":13}],305:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass"));var o=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";(0,i.default)(this,e),this.storage=function(e){try{var t=window[e],r="__storage_test__";return t.setItem(r,r),t.removeItem(r),t}catch(e){return null}}(n),this.id=t,this.config={},Object.assign(this.config,r),this._loadConfiguration()}return(0,a.default)(e,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(e){return this.config={},this.updateConfiguration(e)}},{key:"updateConfiguration",value:function(e){if(Object.assign(this.config,e),this.storage){var t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}return this}},{key:"_loadConfiguration",value:function(){var e={};if(this.storage){var t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}]),e}();r.default=o},{"@babel/runtime/helpers/classCallCheck":6,"@babel/runtime/helpers/createClass":8,"@babel/runtime/helpers/interopRequireDefault":13}],306:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.enableDOMLogging=a,r.logLineToDOM=s,r.default=void 0;var n=e("./globals"),i=null;function a(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&!i&&(i=n.console.log.bind(n.console),n.console.log=function(){s.apply(void 0,arguments),i.apply(void 0,arguments)}),!e&&i&&(n.console.log=i,i=null)}var o=null;function s(e){o||(o=n.document.createElement(n.global.probe.markdown?"pre":"div"));var t=n.document.body.childNodes;n.document.body.insertBefore(o,t&&t[0]),"string"==typeof e&&(o.innerHTML+="".concat(e,"<br />"))}r.default=a},{"./globals":304}],307:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getTimestamp=i,r.startTimestamp=void 0;var n=e("./globals");function i(){if(!n.isBrowser){var e=n.process.hrtime();return e[0]+e[1]/1e6}return n.window.performance?n.window.performance.now():Date.now()}var a=i();r.startTimestamp=a},{"./globals":304}],308:[function(e,t,r){var n,i,a=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var l,c=[],f=!1,d=-1;function h(){f&&l&&(f=!1,l.length?c=l.concat(c):d=-1,c.length&&p())}function p(){if(!f){var e=u(h);f=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,f=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function b(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new m(e,t)),1!==c.length||f||u(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=b,a.addListener=b,a.once=b,a.off=b,a.removeListener=b,a.removeAllListeners=b,a.emit=b,a.prependListener=b,a.prependOnceListener=b,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],309:[function(e,t,r){t.exports=e("gl-quat/slerp")},{"gl-quat/slerp":89}],310:[function(e,t,r){var n,i;n=this,i=function(){function e(e,t){this.id=q++,this.type=e,this.data=t}function t(e){return"["+function e(t){if(0===t.length)return[];var r=t.charAt(0),n=t.charAt(t.length-1);if(1<t.length&&r===n&&('"'===r||"'"===r))return['"'+t.substr(1,t.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(t))return e(t.substr(0,r.index)).concat(e(r[1])).concat(e(t.substr(r.index+r[0].length)));if(1===(r=t.split(".")).length)return['"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(t=[],n=0;n<r.length;++n)t=t.concat(e(r[n]));return t}(e).join("][")+"]"}function r(e){return"string"==typeof e?e.split():e}function n(e){return"string"==typeof e?document.querySelector(e):e}function i(e){var t,i,a,o,s=e||{};e={};var u=[],l=[],c="undefined"==typeof window?1:window.devicePixelRatio,f=!1,d=function(e){},h=function(){};if("string"==typeof s?t=document.querySelector(s):"object"==typeof s&&("string"==typeof s.nodeName&&"function"==typeof s.appendChild&&"function"==typeof s.getBoundingClientRect?t=s:"function"==typeof s.drawArrays||"function"==typeof s.drawElements?a=(o=s).canvas:("gl"in s?o=s.gl:"canvas"in s?a=n(s.canvas):"container"in s&&(i=n(s.container)),"attributes"in s&&(e=s.attributes),"extensions"in s&&(u=r(s.extensions)),"optionalExtensions"in s&&(l=r(s.optionalExtensions)),"onDone"in s&&(d=s.onDone),"profile"in s&&(f=!!s.profile),"pixelRatio"in s&&(c=+s.pixelRatio))),t&&("canvas"===t.nodeName.toLowerCase()?a=t:i=t),!o){if(!a){if(!(t=function(e,t,r){function n(){var t=window.innerWidth,n=window.innerHeight;e!==document.body&&(t=(n=e.getBoundingClientRect()).right-n.left,n=n.bottom-n.top),i.width=r*t,i.height=r*n,G(i.style,{width:t+"px",height:n+"px"})}var i=document.createElement("canvas");return G(i.style,{border:0,margin:0,padding:0,top:0,left:0}),e.appendChild(i),e===document.body&&(i.style.position="absolute",G(e.style,{margin:0,padding:0})),window.addEventListener("resize",n,!1),n(),{canvas:i,onDestroy:function(){window.removeEventListener("resize",n),e.removeChild(i)}}}(i||document.body,0,c)))return null;a=t.canvas,h=t.onDestroy}o=function(e,t){function r(r){try{return e.getContext(r,t)}catch(e){return null}}return r("webgl")||r("experimental-webgl")||r("webgl-experimental")}(a,e)}return o?{gl:o,canvas:a,container:i,extensions:u,optionalExtensions:l,pixelRatio:c,profile:f,onDone:d,onDestroy:h}:(h(),d("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function a(e,t){for(var r=Array(e),n=0;n<e;++n)r[n]=t(n);return r}function o(e){var t,r;return t=(65535<e)<<4,t|=r=(255<(e>>>=t))<<3,(t|=r=(15<(e>>>=r))<<2)|(r=(3<(e>>>=r))<<1)|e>>>r>>1}function s(){function e(e){e:{for(var t=16;268435456>=t;t*=16)if(e<=t){e=t;break e}e=0}return 0<(t=r[o(e)>>2]).length?t.pop():new ArrayBuffer(e)}function t(e){r[o(e.byteLength)>>2].push(e)}var r=a(8,function(){return[]});return{alloc:e,free:t,allocType:function(t,r){var n=null;switch(t){case 5120:n=new Int8Array(e(r),0,r);break;case 5121:n=new Uint8Array(e(r),0,r);break;case 5122:n=new Int16Array(e(2*r),0,r);break;case 5123:n=new Uint16Array(e(2*r),0,r);break;case 5124:n=new Int32Array(e(4*r),0,r);break;case 5125:n=new Uint32Array(e(4*r),0,r);break;case 5126:n=new Float32Array(e(4*r),0,r);break;default:return null}return n.length!==r?n.subarray(0,r):n},freeType:function(e){t(e.buffer)}}}function u(e){return!!e&&"object"==typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||X(e.data))}function l(e,t,r,n,i,a){for(var o=0;o<t;++o)for(var s=e[o],u=0;u<r;++u)for(var l=s[u],c=0;c<n;++c)i[a++]=l[c]}function c(e){return 0|K[Object.prototype.toString.call(e)]}function f(e,t){for(var r=0;r<t.length;++r)e[r]=t[r]}function d(e,t,r,n,i,a,o){for(var s=0,u=0;u<r;++u)for(var l=0;l<n;++l)e[s++]=t[i*u+a*l+o]}function h(e,t,r,n){function i(t){this.id=l++,this.buffer=e.createBuffer(),this.type=t,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,r.profile&&(this.stats={size:0})}function a(t,r,n){t.byteLength=r.byteLength,e.bufferData(t.type,r,n)}function o(e,t,r,n,i,o){if(e.usage=r,Array.isArray(t)){if(e.dtype=n||5126,0<t.length)if(Array.isArray(t[0])){i=ee(t);for(var s=n=1;s<i.length;++s)n*=i[s];e.dimension=n,a(e,t=$(t,i,e.dtype),r),o?e.persistentData=t:V.freeType(t)}else"number"==typeof t[0]?(e.dimension=i,f(i=V.allocType(e.dtype,t.length),t),a(e,i,r),o?e.persistentData=i:V.freeType(i)):X(t[0])&&(e.dimension=t[0].length,e.dtype=n||c(t[0])||5126,a(e,t=$(t,[t.length,t[0].length],e.dtype),r),o?e.persistentData=t:V.freeType(t))}else if(X(t))e.dtype=n||c(t),e.dimension=i,a(e,t,r),o&&(e.persistentData=new Uint8Array(new Uint8Array(t.buffer)));else if(u(t)){var l=t.stride,h=(s=t.offset,0),p=0,m=0,b=0;1===(i=t.shape).length?(h=i[0],p=1,m=l[0],b=0):2===i.length&&(h=i[0],p=i[1],m=l[0],b=l[1]),e.dtype=n||c(t.data)||5126,e.dimension=p,d(i=V.allocType(e.dtype,h*p),t.data,h,p,m,b,s),a(e,i,r),o?e.persistentData=i:V.freeType(i)}}function s(r){t.bufferCount--;for(var i=0;i<n.state.length;++i){var a=n.state[i];a.buffer===r&&(e.disableVertexAttribArray(i),a.buffer=null)}e.deleteBuffer(r.buffer),r.buffer=null,delete h[r.id]}var l=0,h={};i.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},i.prototype.destroy=function(){s(this)};var p=[];return r.profile&&(t.getTotalBufferSize=function(){var e=0;return Object.keys(h).forEach(function(t){e+=h[t].stats.size}),e}),{create:function(n,a,l,p){function m(t){var n=35044,i=null,a=0,s=0,l=1;return Array.isArray(t)||X(t)||u(t)?i=t:"number"==typeof t?a=0|t:t&&("data"in t&&(i=t.data),"usage"in t&&(n=J[t.usage]),"type"in t&&(s=Z[t.type]),"dimension"in t&&(l=0|t.dimension),"length"in t&&(a=0|t.length)),b.bind(),i?o(b,i,n,s,l,p):(a&&e.bufferData(b.type,a,n),b.dtype=s||5121,b.usage=n,b.dimension=l,b.byteLength=a),r.profile&&(b.stats.size=b.byteLength*te[b.dtype]),m}t.bufferCount++;var b=new i(a);return h[b.id]=b,l||m(n),m._reglType="buffer",m._buffer=b,m.subdata=function(t,r){var n,i=0|(r||0);if(b.bind(),X(t))e.bufferSubData(b.type,i,t);else if(Array.isArray(t)){if(0<t.length)if("number"==typeof t[0]){var a=V.allocType(b.dtype,t.length);f(a,t),e.bufferSubData(b.type,i,a),V.freeType(a)}else(Array.isArray(t[0])||X(t[0]))&&(n=ee(t),a=$(t,n,b.dtype),e.bufferSubData(b.type,i,a),V.freeType(a))}else if(u(t)){var o=t.stride,s=a=0,l=0,h=0;1===(n=t.shape).length?(a=n[0],s=1,l=o[0],h=0):2===n.length&&(a=n[0],s=n[1],l=o[0],h=o[1]),n=Array.isArray(t.data)?b.dtype:c(t.data),d(n=V.allocType(n,a*s),t.data,a,s,l,h,t.offset),e.bufferSubData(b.type,i,n),V.freeType(n)}return m},r.profile&&(m.stats=b.stats),m.destroy=function(){s(b)},m},createStream:function(e,t){var r=p.pop();return r||(r=new i(e)),r.bind(),o(r,t,35040,0,1,!1),r},destroyStream:function(e){p.push(e)},clear:function(){Y(h).forEach(s),p.forEach(s)},getBuffer:function(e){return e&&e._buffer instanceof i?e._buffer:null},restore:function(){Y(h).forEach(function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)})},_initBuffer:o}}function p(e,t,r,n){function i(e){this.id=l++,s[this.id]=this,this.buffer=e,this.primType=4,this.type=this.vertCount=0}function a(n,i,a,o,s,l,c){if(n.buffer.bind(),i){var f=c;c||X(i)&&(!u(i)||X(i.data))||(f=t.oes_element_index_uint?5125:5123),r._initBuffer(n.buffer,i,a,f,3)}else e.bufferData(34963,l,a),n.buffer.dtype=f||5121,n.buffer.usage=a,n.buffer.dimension=3,n.buffer.byteLength=l;if(f=c,!c){switch(n.buffer.dtype){case 5121:case 5120:f=5121;break;case 5123:case 5122:f=5123;break;case 5125:case 5124:f=5125}n.buffer.dtype=f}n.type=f,0>(i=s)&&(i=n.buffer.byteLength,5123===f?i>>=1:5125===f&&(i>>=2)),n.vertCount=i,i=o,0>o&&(i=4,1===(o=n.buffer.dimension)&&(i=0),2===o&&(i=1),3===o&&(i=4)),n.primType=i}function o(e){n.elementsCount--,delete s[e.id],e.buffer.destroy(),e.buffer=null}var s={},l=0,c={uint8:5121,uint16:5123};t.oes_element_index_uint&&(c.uint32=5125),i.prototype.bind=function(){this.buffer.bind()};var f=[];return{create:function(e,t){function s(e){if(e)if("number"==typeof e)l(e),f.primType=4,f.vertCount=0|e,f.type=5121;else{var t=null,r=35044,n=-1,i=-1,o=0,d=0;Array.isArray(e)||X(e)||u(e)?t=e:("data"in e&&(t=e.data),"usage"in e&&(r=J[e.usage]),"primitive"in e&&(n=re[e.primitive]),"count"in e&&(i=0|e.count),"type"in e&&(d=c[e.type]),"length"in e?o=0|e.length:(o=i,5123===d||5122===d?o*=2:5125!==d&&5124!==d||(o*=4))),a(f,t,r,n,i,o,d)}else l(),f.primType=4,f.vertCount=0,f.type=5121;return s}var l=r.create(null,34963,!0),f=new i(l._buffer);return n.elementsCount++,s(e),s._reglType="elements",s._elements=f,s.subdata=function(e,t){return l.subdata(e,t),s},s.destroy=function(){o(f)},s},createStream:function(e){var t=f.pop();return t||(t=new i(r.create(null,34963,!0,!1)._buffer)),a(t,e,35040,-1,-1,0,0),t},destroyStream:function(e){f.push(e)},getElements:function(e){return"function"==typeof e&&e._elements instanceof i?e._elements:null},clear:function(){Y(s).forEach(o)}}}function m(e){for(var t=V.allocType(5123,e.length),r=0;r<e.length;++r)if(isNaN(e[r]))t[r]=65535;else if(Infinity===e[r])t[r]=31744;else if(-Infinity===e[r])t[r]=64512;else{ne[0]=e[r];var n=(a=ie[0])>>>31<<15,i=(a<<1>>>24)-127,a=a>>13&1023;t[r]=-24>i?n:-14>i?n+(a+1024>>-14-i):15<i?n+31744:n+(i+15<<10)+a}return t}function b(e){return Array.isArray(e)||X(e)}function g(e){return"[object "+e+"]"}function v(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])}function y(e){return!(!Array.isArray(e)||0===e.length||!b(e[0]))}function _(e){return Object.prototype.toString.call(e)}function x(e){if(!e)return!1;var t=_(e);return 0<=he.indexOf(t)||(v(e)||y(e)||u(e))}function w(e,t){36193===e.type?(e.data=m(t),V.freeType(t)):e.data=t}function E(e,t,r,n,i,a){if(e=void 0!==me[e]?me[e]:se[e]*pe[t],a&&(e*=6),i){for(n=0;1<=r;)n+=e*r*r,r/=2;return n}return e*r*n}function k(e,t,r,n,i,a,o){function s(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function l(e,t){e.internalformat=t.internalformat,e.format=t.format,e.type=t.type,e.compressed=t.compressed,e.premultiplyAlpha=t.premultiplyAlpha,e.flipY=t.flipY,e.unpackAlignment=t.unpackAlignment,e.colorSpace=t.colorSpace,e.width=t.width,e.height=t.height,e.channels=t.channels}function c(e,t){if("object"==typeof t&&t){"premultiplyAlpha"in t&&(e.premultiplyAlpha=t.premultiplyAlpha),"flipY"in t&&(e.flipY=t.flipY),"alignment"in t&&(e.unpackAlignment=t.alignment),"colorSpace"in t&&(e.colorSpace=z[t.colorSpace]),"type"in t&&(e.type=W[t.type]);var r=e.width,n=e.height,i=e.channels,a=!1;"shape"in t?(r=t.shape[0],n=t.shape[1],3===t.shape.length&&(i=t.shape[2],a=!0)):("radius"in t&&(r=n=t.radius),"width"in t&&(r=t.width),"height"in t&&(n=t.height),"channels"in t&&(i=t.channels,a=!0)),e.width=0|r,e.height=0|n,e.channels=0|i,r=!1,"format"in t&&(n=e.internalformat=H[r=t.format],e.format=he[n],r in W&&!("type"in t)&&(e.type=W[r]),r in Z&&(e.compressed=!0),r=!0),!a&&r?e.channels=se[e.format]:a&&!r&&e.channels!==oe[e.format]&&(e.format=e.internalformat=oe[e.channels])}}function f(t){e.pixelStorei(37440,t.flipY),e.pixelStorei(37441,t.premultiplyAlpha),e.pixelStorei(37443,t.colorSpace),e.pixelStorei(3317,t.unpackAlignment)}function d(){s.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function h(e,t){var r=null;if(x(t)?r=t:t&&(c(e,t),"x"in t&&(e.xOffset=0|t.x),"y"in t&&(e.yOffset=0|t.y),x(t.data)&&(r=t.data)),t.copy){var n=i.viewportWidth,a=i.viewportHeight;e.width=e.width||n-e.xOffset,e.height=e.height||a-e.yOffset,e.needsCopy=!0}else if(r){if(X(r))e.channels=e.channels||4,e.data=r,"type"in t||5121!==e.type||(e.type=0|K[Object.prototype.toString.call(r)]);else if(v(r)){switch(e.channels=e.channels||4,a=(n=r).length,e.type){case 5121:case 5123:case 5125:case 5126:(a=V.allocType(e.type,a)).set(n),e.data=a;break;case 36193:e.data=m(n)}e.alignment=1,e.needsFree=!0}else if(u(r)){n=r.data,Array.isArray(n)||5121!==e.type||(e.type=0|K[Object.prototype.toString.call(n)]);var o,s,l,f,d=r.stride;3===(a=r.shape).length?(l=a[2],f=d[2]):f=l=1,o=a[0],s=a[1],a=d[0],d=d[1],e.alignment=1,e.width=o,e.height=s,e.channels=l,e.format=e.internalformat=oe[l],e.needsFree=!0,o=f,r=r.offset;for(var h=V.allocType(36193===e.type?5126:e.type,(l=e.width)*(f=e.height)*(s=e.channels)),p=0,g=0;g<f;++g)for(var E=0;E<l;++E)for(var k=0;k<s;++k)h[p++]=n[a*E+d*g+o*k+r];w(e,h)}else if(_(r)===ue||_(r)===le)e.element=_(r)===ue?r:r.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(_(r)===ce)e.element=r,e.width=r.width,e.height=r.height,e.channels=4;else if(_(r)===fe)e.element=r,e.width=r.naturalWidth,e.height=r.naturalHeight,e.channels=4;else if(_(r)===de)e.element=r,e.width=r.videoWidth,e.height=r.videoHeight,e.channels=4;else if(y(r)){for(n=e.width||r[0].length,a=e.height||r.length,d=e.channels,d=b(r[0][0])?d||r[0][0].length:d||1,o=Q.shape(r),l=1,f=0;f<o.length;++f)l*=o[f];l=V.allocType(36193===e.type?5126:e.type,l),Q.flatten(r,o,"",l),w(e,l),e.alignment=1,e.width=n,e.height=a,e.channels=d,e.format=e.internalformat=oe[d],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4}function p(t,r,i,a,o){var s=t.element,u=t.data,l=t.internalformat,c=t.format,d=t.type,h=t.width,p=t.height;f(t),s?e.texSubImage2D(r,o,i,a,c,d,s):t.compressed?e.compressedTexSubImage2D(r,o,i,a,l,h,p,u):t.needsCopy?(n(),e.copyTexSubImage2D(r,o,i,a,t.xOffset,t.yOffset,h,p)):e.texSubImage2D(r,o,i,a,h,p,c,d,u)}function g(){return pe.pop()||new d}function k(e){e.needsFree&&V.freeType(e.data),d.call(e),pe.push(e)}function P(){s.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function M(e,t,r){var n=e.images[0]=g();e.mipmask=1,n.width=e.width=t,n.height=e.height=r,n.channels=e.channels=4}function A(e,t){var r=null;if(x(t))l(r=e.images[0]=g(),e),h(r,t),e.mipmask=1;else if(c(e,t),Array.isArray(t.mipmap))for(var n=t.mipmap,i=0;i<n.length;++i)l(r=e.images[i]=g(),e),r.width>>=i,r.height>>=i,h(r,n[i]),e.mipmask|=1<<i;else l(r=e.images[0]=g(),e),h(r,t),e.mipmask=1;l(e,e.images[0])}function C(t,r){for(var i=t.images,a=0;a<i.length&&i[a];++a){var o=i[a],s=r,u=a,l=o.element,c=o.data,d=o.internalformat,h=o.format,p=o.type,m=o.width,b=o.height,g=o.channels;f(o),l?e.texImage2D(s,u,h,h,p,l):o.compressed?e.compressedTexImage2D(s,u,d,m,b,0,c):o.needsCopy?(n(),e.copyTexImage2D(s,u,h,o.xOffset,o.yOffset,m,b,0)):((o=!c)&&(c=V.zero.allocType(p,m*b*g)),e.texImage2D(s,u,h,m,b,0,h,p,c),o&&c&&V.zero.freeType(c))}}function O(){var e=me.pop()||new P;s.call(e);for(var t=e.mipmask=0;16>t;++t)e.images[t]=null;return e}function T(e){for(var t=e.images,r=0;r<t.length;++r)t[r]&&k(t[r]),t[r]=null;me.push(e)}function S(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function R(e,t){"min"in t&&(e.minFilter=U[t.min],0<=ae.indexOf(e.minFilter)&&!("faces"in t)&&(e.genMipmaps=!0)),"mag"in t&&(e.magFilter=q[t.mag]);var r=e.wrapS,n=e.wrapT;if("wrap"in t){var i=t.wrap;"string"==typeof i?r=n=B[i]:Array.isArray(i)&&(r=B[i[0]],n=B[i[1]])}else"wrapS"in t&&(r=B[t.wrapS]),"wrapT"in t&&(n=B[t.wrapT]);if(e.wrapS=r,e.wrapT=n,"anisotropic"in t&&(e.anisotropic=t.anisotropic),"mipmap"in t){switch(r=!1,typeof t.mipmap){case"string":e.mipmapHint=N[t.mipmap],r=e.genMipmaps=!0;break;case"boolean":r=e.genMipmaps=t.mipmap;break;case"object":e.genMipmaps=!1,r=!0}!r||"min"in t||(e.minFilter=9984)}}function L(r,n){e.texParameteri(n,10241,r.minFilter),e.texParameteri(n,10240,r.magFilter),e.texParameteri(n,10242,r.wrapS),e.texParameteri(n,10243,r.wrapT),t.ext_texture_filter_anisotropic&&e.texParameteri(n,34046,r.anisotropic),r.genMipmaps&&(e.hint(33170,r.mipmapHint),e.generateMipmap(n))}function D(t){s.call(this),this.mipmask=0,this.internalformat=6408,this.id=be++,this.refCount=1,this.target=t,this.texture=e.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new S,o.profile&&(this.stats={size:0})}function j(t){e.activeTexture(33984),e.bindTexture(t.target,t.texture)}function F(){var t=ye[0];t?e.bindTexture(t.target,t.texture):e.bindTexture(3553,null)}function I(t){var r=t.texture,n=t.unit,i=t.target;0<=n&&(e.activeTexture(33984+n),e.bindTexture(i,null),ye[n]=null),e.deleteTexture(r),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete ge[t.id],a.textureCount--}var N={"don't care":4352,"dont care":4352,nice:4354,fast:4353},B={repeat:10497,clamp:33071,mirror:33648},q={nearest:9728,linear:9729},U=G({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},q),z={none:0,browser:37444},W={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},H={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Z={};t.ext_srgb&&(H.srgb=35904,H.srgba=35906),t.oes_texture_float&&(W.float32=W.float=5126),t.oes_texture_half_float&&(W.float16=W["half float"]=36193),t.webgl_depth_texture&&(G(H,{depth:6402,"depth stencil":34041}),G(W,{uint16:5123,uint32:5125,"depth stencil":34042})),t.webgl_compressed_texture_s3tc&&G(Z,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),t.webgl_compressed_texture_atc&&G(Z,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),t.webgl_compressed_texture_pvrtc&&G(Z,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),t.webgl_compressed_texture_etc1&&(Z["rgb etc1"]=36196);var J=Array.prototype.slice.call(e.getParameter(34467));Object.keys(Z).forEach(function(e){var t=Z[e];0<=J.indexOf(t)&&(H[e]=t)});var $=Object.keys(H);r.textureFormats=$;var ee=[];Object.keys(H).forEach(function(e){ee[H[e]]=e});var te=[];Object.keys(W).forEach(function(e){te[W[e]]=e});var re=[];Object.keys(q).forEach(function(e){re[q[e]]=e});var ne=[];Object.keys(U).forEach(function(e){ne[U[e]]=e});var ie=[];Object.keys(B).forEach(function(e){ie[B[e]]=e});var he=$.reduce(function(e,t){var r=H[t];return e[r]=6409===r||6406===r||6409===r||6410===r||6402===r||34041===r?r:32855===r||0<=t.indexOf("rgba")?6408:6407,e},{}),pe=[],me=[],be=0,ge={},ve=r.maxTextureUnits,ye=Array(ve).map(function(){return null});return G(D.prototype,{bind:function(){this.bindCount+=1;var t=this.unit;if(0>t){for(var r=0;r<ve;++r){var n=ye[r];if(n){if(0<n.bindCount)continue;n.unit=-1}ye[r]=this,t=r;break}o.profile&&a.maxTextureUnits<t+1&&(a.maxTextureUnits=t+1),this.unit=t,e.activeTexture(33984+t),e.bindTexture(this.target,this.texture)}return t},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&I(this)}}),o.profile&&(a.getTotalTextureSize=function(){var e=0;return Object.keys(ge).forEach(function(t){e+=ge[t].stats.size}),e}),{create2D:function(t,r){function n(e,t){var r=i.texInfo;S.call(r);var a=O();return"number"==typeof e?M(a,0|e,"number"==typeof t?0|t:0|e):e?(R(r,e),A(a,e)):M(a,1,1),r.genMipmaps&&(a.mipmask=(a.width<<1)-1),i.mipmask=a.mipmask,l(i,a),i.internalformat=a.internalformat,n.width=a.width,n.height=a.height,j(i),C(a,3553),L(r,3553),F(),T(a),o.profile&&(i.stats.size=E(i.internalformat,i.type,a.width,a.height,r.genMipmaps,!1)),n.format=ee[i.internalformat],n.type=te[i.type],n.mag=re[r.magFilter],n.min=ne[r.minFilter],n.wrapS=ie[r.wrapS],n.wrapT=ie[r.wrapT],n}var i=new D(3553);return ge[i.id]=i,a.textureCount++,n(t,r),n.subimage=function(e,t,r,a){t|=0,r|=0,a|=0;var o=g();return l(o,i),o.width=0,o.height=0,h(o,e),o.width=o.width||(i.width>>a)-t,o.height=o.height||(i.height>>a)-r,j(i),p(o,3553,t,r,a),F(),k(o),n},n.resize=function(t,r){var a=0|t,s=0|r||a;if(a===i.width&&s===i.height)return n;n.width=i.width=a,n.height=i.height=s,j(i);for(var u,l=i.channels,c=i.type,f=0;i.mipmask>>f;++f){var d=a>>f,h=s>>f;if(!d||!h)break;u=V.zero.allocType(c,d*h*l),e.texImage2D(3553,f,i.format,d,h,0,i.format,i.type,u),u&&V.zero.freeType(u)}return F(),o.profile&&(i.stats.size=E(i.internalformat,i.type,a,s,!1,!1)),n},n._reglType="texture2d",n._texture=i,o.profile&&(n.stats=i.stats),n.destroy=function(){i.decRef()},n},createCube:function(t,r,n,i,s,u){function f(e,t,r,n,i,a){var s,u=d.texInfo;for(S.call(u),s=0;6>s;++s)m[s]=O();if("number"!=typeof e&&e){if("object"==typeof e)if(t)A(m[0],e),A(m[1],t),A(m[2],r),A(m[3],n),A(m[4],i),A(m[5],a);else if(R(u,e),c(d,e),"faces"in e)for(e=e.faces,s=0;6>s;++s)l(m[s],d),A(m[s],e[s]);else for(s=0;6>s;++s)A(m[s],e)}else for(e=0|e||1,s=0;6>s;++s)M(m[s],e,e);for(l(d,m[0]),d.mipmask=u.genMipmaps?(m[0].width<<1)-1:m[0].mipmask,d.internalformat=m[0].internalformat,f.width=m[0].width,f.height=m[0].height,j(d),s=0;6>s;++s)C(m[s],34069+s);for(L(u,34067),F(),o.profile&&(d.stats.size=E(d.internalformat,d.type,f.width,f.height,u.genMipmaps,!0)),f.format=ee[d.internalformat],f.type=te[d.type],f.mag=re[u.magFilter],f.min=ne[u.minFilter],f.wrapS=ie[u.wrapS],f.wrapT=ie[u.wrapT],s=0;6>s;++s)T(m[s]);return f}var d=new D(34067);ge[d.id]=d,a.cubeCount++;var m=Array(6);return f(t,r,n,i,s,u),f.subimage=function(e,t,r,n,i){r|=0,n|=0,i|=0;var a=g();return l(a,d),a.width=0,a.height=0,h(a,t),a.width=a.width||(d.width>>i)-r,a.height=a.height||(d.height>>i)-n,j(d),p(a,34069+e,r,n,i),F(),k(a),f},f.resize=function(t){if((t|=0)!==d.width){f.width=d.width=t,f.height=d.height=t,j(d);for(var r=0;6>r;++r)for(var n=0;d.mipmask>>n;++n)e.texImage2D(34069+r,n,d.format,t>>n,t>>n,0,d.format,d.type,null);return F(),o.profile&&(d.stats.size=E(d.internalformat,d.type,f.width,f.height,!1,!0)),f}},f._reglType="textureCube",f._texture=d,o.profile&&(f.stats=d.stats),f.destroy=function(){d.decRef()},f},clear:function(){for(var t=0;t<ve;++t)e.activeTexture(33984+t),e.bindTexture(3553,null),ye[t]=null;Y(ge).forEach(I),a.cubeCount=0,a.textureCount=0},getTexture:function(e){return null},restore:function(){for(var t=0;t<ve;++t){var r=ye[t];r&&(r.bindCount=0,r.unit=-1,ye[t]=null)}Y(ge).forEach(function(t){t.texture=e.createTexture(),e.bindTexture(t.target,t.texture);for(var r=0;32>r;++r)if(0!=(t.mipmask&1<<r))if(3553===t.target)e.texImage2D(3553,r,t.internalformat,t.width>>r,t.height>>r,0,t.internalformat,t.type,null);else for(var n=0;6>n;++n)e.texImage2D(34069+n,r,t.internalformat,t.width>>r,t.height>>r,0,t.internalformat,t.type,null);L(t.texInfo,t.target)})}}}function P(e,t,r,n,i,a){function o(e,t,r){this.target=e,this.texture=t,this.renderbuffer=r;var n=e=0;t?(e=t.width,n=t.height):r&&(e=r.width,n=r.height),this.width=e,this.height=n}function s(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef())}function u(e,t,r){e&&(e.texture?e.texture._texture.refCount+=1:e.renderbuffer._renderbuffer.refCount+=1)}function l(t,r){r&&(r.texture?e.framebufferTexture2D(36160,t,r.target,r.texture._texture.texture,0):e.framebufferRenderbuffer(36160,t,36161,r.renderbuffer._renderbuffer.renderbuffer))}function c(e){var t=3553,r=null,n=null,i=e;return"object"==typeof e&&(i=e.data,"target"in e&&(t=0|e.target)),"texture2d"===(e=i._reglType)?r=i:"textureCube"===e?r=i:"renderbuffer"===e&&(n=i,t=36161),new o(t,r,n)}function f(e,t,r,a,s){return r?((e=n.create2D({width:e,height:t,format:a,type:s}))._texture.refCount=0,new o(3553,e,null)):((e=i.create({width:e,height:t,format:a}))._renderbuffer.refCount=0,new o(36161,null,e))}function d(e){return e&&(e.texture||e.renderbuffer)}function h(e,t,r){e&&(e.texture?e.texture.resize(t,r):e.renderbuffer&&e.renderbuffer.resize(t,r),e.width=t,e.height=r)}function p(){this.id=E++,k[this.id]=this,this.framebuffer=e.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function m(e){e.colorAttachments.forEach(s),s(e.depthAttachment),s(e.stencilAttachment),s(e.depthStencilAttachment)}function b(t){e.deleteFramebuffer(t.framebuffer),t.framebuffer=null,a.framebufferCount--,delete k[t.id]}function g(t){var n;e.bindFramebuffer(36160,t.framebuffer);var i=t.colorAttachments;for(n=0;n<i.length;++n)l(36064+n,i[n]);for(n=i.length;n<r.maxColorAttachments;++n)e.framebufferTexture2D(36160,36064+n,3553,null,0);e.framebufferTexture2D(36160,33306,3553,null,0),e.framebufferTexture2D(36160,36096,3553,null,0),e.framebufferTexture2D(36160,36128,3553,null,0),l(36096,t.depthAttachment),l(36128,t.stencilAttachment),l(33306,t.depthStencilAttachment),e.checkFramebufferStatus(36160),e.isContextLost(),e.bindFramebuffer(36160,y.next?y.next.framebuffer:null),y.cur=y.next,e.getError()}function v(e,t){function r(e,t){var i,a=0,o=0,s=!0,l=!0;i=null;var h=!0,p="rgba",b="uint8",v=1,y=null,w=null,E=null,k=!1;"number"==typeof e?(a=0|e,o=0|t||a):e?("shape"in e?(a=(o=e.shape)[0],o=o[1]):("radius"in e&&(a=o=e.radius),"width"in e&&(a=e.width),"height"in e&&(o=e.height)),("color"in e||"colors"in e)&&(i=e.color||e.colors,Array.isArray(i)),i||("colorCount"in e&&(v=0|e.colorCount),"colorTexture"in e&&(h=!!e.colorTexture,p="rgba4"),"colorType"in e&&(b=e.colorType,!h)&&("half float"===b||"float16"===b?p="rgba16f":"float"!==b&&"float32"!==b||(p="rgba32f")),"colorFormat"in e&&(0<=_.indexOf(p=e.colorFormat)?h=!0:0<=x.indexOf(p)&&(h=!1))),("depthTexture"in e||"depthStencilTexture"in e)&&(k=!(!e.depthTexture&&!e.depthStencilTexture)),"depth"in e&&("boolean"==typeof e.depth?s=e.depth:(y=e.depth,l=!1)),"stencil"in e&&("boolean"==typeof e.stencil?l=e.stencil:(w=e.stencil,s=!1)),"depthStencil"in e&&("boolean"==typeof e.depthStencil?s=l=e.depthStencil:(E=e.depthStencil,l=s=!1))):a=o=1;var P=null,M=null,A=null,C=null;if(Array.isArray(i))P=i.map(c);else if(i)P=[c(i)];else for(P=Array(v),i=0;i<v;++i)P[i]=f(a,o,h,p,b);for(a=a||P[0].width,o=o||P[0].height,y?M=c(y):s&&!l&&(M=f(a,o,k,"depth","uint32")),w?A=c(w):l&&!s&&(A=f(a,o,!1,"stencil","uint8")),E?C=c(E):!y&&!w&&l&&s&&(C=f(a,o,k,"depth stencil","depth stencil")),s=null,i=0;i<P.length;++i)u(P[i]),P[i]&&P[i].texture&&(l=ve[P[i].texture._texture.format]*ye[P[i].texture._texture.type],null===s&&(s=l));return u(M),u(A),u(C),m(n),n.width=a,n.height=o,n.colorAttachments=P,n.depthAttachment=M,n.stencilAttachment=A,n.depthStencilAttachment=C,r.color=P.map(d),r.depth=d(M),r.stencil=d(A),r.depthStencil=d(C),r.width=n.width,r.height=n.height,g(n),r}var n=new p;return a.framebufferCount++,r(e,t),G(r,{resize:function(e,t){var i=Math.max(0|e,1),a=Math.max(0|t||i,1);if(i===n.width&&a===n.height)return r;for(var o=n.colorAttachments,s=0;s<o.length;++s)h(o[s],i,a);return h(n.depthAttachment,i,a),h(n.stencilAttachment,i,a),h(n.depthStencilAttachment,i,a),n.width=r.width=i,n.height=r.height=a,g(n),r},_reglType:"framebuffer",_framebuffer:n,destroy:function(){b(n),m(n)},use:function(e){y.setFBO({framebuffer:r},e)}})}var y={cur:null,next:null,dirty:!1,setFBO:null},_=["rgba"],x=["rgba4","rgb565","rgb5 a1"];t.ext_srgb&&x.push("srgba"),t.ext_color_buffer_half_float&&x.push("rgba16f","rgb16f"),t.webgl_color_buffer_float&&x.push("rgba32f");var w=["uint8"];t.oes_texture_half_float&&w.push("half float","float16"),t.oes_texture_float&&w.push("float","float32");var E=0,k={};return G(y,{getFramebuffer:function(e){return"function"==typeof e&&"framebuffer"===e._reglType&&(e=e._framebuffer)instanceof p?e:null},create:v,createCube:function(e){function t(e){var i,a={color:null},o=0,s=null;i="rgba";var u="uint8",l=1;if("number"==typeof e?o=0|e:e?("shape"in e?o=e.shape[0]:("radius"in e&&(o=0|e.radius),"width"in e?o=0|e.width:"height"in e&&(o=0|e.height)),("color"in e||"colors"in e)&&(s=e.color||e.colors,Array.isArray(s)),s||("colorCount"in e&&(l=0|e.colorCount),"colorType"in e&&(u=e.colorType),"colorFormat"in e&&(i=e.colorFormat)),"depth"in e&&(a.depth=e.depth),"stencil"in e&&(a.stencil=e.stencil),"depthStencil"in e&&(a.depthStencil=e.depthStencil)):o=1,s)if(Array.isArray(s))for(e=[],i=0;i<s.length;++i)e[i]=s[i];else e=[s];else for(e=Array(l),s={radius:o,format:i,type:u},i=0;i<l;++i)e[i]=n.createCube(s);for(a.color=Array(e.length),i=0;i<e.length;++i)l=e[i],o=o||l.width,a.color[i]={target:34069,data:e[i]};for(i=0;6>i;++i){for(l=0;l<e.length;++l)a.color[l].target=34069+i;0<i&&(a.depth=r[0].depth,a.stencil=r[0].stencil,a.depthStencil=r[0].depthStencil),r[i]?r[i](a):r[i]=v(a)}return G(t,{width:o,height:o,color:e})}var r=Array(6);return t(e),G(t,{faces:r,resize:function(e){var n=0|e;if(n===t.width)return t;var i=t.color;for(e=0;e<i.length;++e)i[e].resize(n);for(e=0;6>e;++e)r[e].resize(n);return t.width=t.height=n,t},_reglType:"framebufferCube",destroy:function(){r.forEach(function(e){e.destroy()})}})},clear:function(){Y(k).forEach(b)},restore:function(){y.cur=null,y.next=null,y.dirty=!0,Y(k).forEach(function(t){t.framebuffer=e.createFramebuffer(),g(t)})}})}function M(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function A(e,t,r,n){function i(e,t,r,n){this.name=e,this.id=t,this.location=r,this.info=n}function a(e,t){for(var r=0;r<e.length;++r)if(e[r].id===t.id)return void(e[r].location=t.location);e.push(t)}function o(r,n,i){if(!(o=(i=35632===r?l:c)[n])){var a=t.str(n),o=e.createShader(r);e.shaderSource(o,a),e.compileShader(o),i[n]=o}return o}function s(e,t){this.id=h++,this.fragId=e,this.vertId=t,this.program=null,this.uniforms=[],this.attributes=[],n.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function u(r,s){var u,l;u=o(35632,r.fragId),l=o(35633,r.vertId);var c=r.program=e.createProgram();e.attachShader(c,u),e.attachShader(c,l),e.linkProgram(c);var f=e.getProgramParameter(c,35718);n.profile&&(r.stats.uniformsCount=f);var d=r.uniforms;for(u=0;u<f;++u)if(l=e.getActiveUniform(c,u))if(1<l.size)for(var h=0;h<l.size;++h){var p=l.name.replace("[0]","["+h+"]");a(d,new i(p,t.id(p),e.getUniformLocation(c,p),l))}else a(d,new i(l.name,t.id(l.name),e.getUniformLocation(c,l.name),l));for(f=e.getProgramParameter(c,35721),n.profile&&(r.stats.attributesCount=f),d=r.attributes,u=0;u<f;++u)(l=e.getActiveAttrib(c,u))&&a(d,new i(l.name,t.id(l.name),e.getAttribLocation(c,l.name),l))}var l={},c={},f={},d=[],h=0;return n.profile&&(r.getMaxUniformsCount=function(){var e=0;return d.forEach(function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount)}),e},r.getMaxAttributesCount=function(){var e=0;return d.forEach(function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount)}),e}),{clear:function(){var t=e.deleteShader.bind(e);Y(l).forEach(t),l={},Y(c).forEach(t),c={},d.forEach(function(t){e.deleteProgram(t.program)}),d.length=0,f={},r.shaderCount=0},program:function(e,t,n){var i=f[t];i||(i=f[t]={});var a=i[e];return a||(a=new s(t,e),r.shaderCount++,u(a),i[e]=a,d.push(a)),a},restore:function(){l={},c={};for(var e=0;e<d.length;++e)u(d[e])},shader:o,frag:-1,vert:-1}}function C(e,t,r,n,i,a,o){function s(i){var a;a=null===t.next?5121:t.next.colorAttachments[0].texture._texture.type;var o=0,s=0,u=n.framebufferWidth,l=n.framebufferHeight,c=null;return X(i)?c=i:i&&(o=0|i.x,s=0|i.y,u=0|(i.width||n.framebufferWidth-o),l=0|(i.height||n.framebufferHeight-s),c=i.data||null),r(),i=u*l*4,c||(5121===a?c=new Uint8Array(i):5126===a&&(c=c||new Float32Array(i))),e.pixelStorei(3333,4),e.readPixels(o,s,u,l,6408,a,c),c}return function(e){return e&&"framebuffer"in e?function(e){var r;return t.setFBO({framebuffer:e.framebuffer},function(){r=s(e)}),r}(e):s(e)}}function O(e){return Array.prototype.slice.call(e)}function T(e){return O(e).join("")}function S(){function e(){var e=[],t=[];return G(function(){e.push.apply(e,O(arguments))},{def:function(){var n="v"+r++;return t.push(n),0<arguments.length&&(e.push(n,"="),e.push.apply(e,O(arguments)),e.push(";")),n},toString:function(){return T([0<t.length?"var "+t+";":"",T(e)])}})}function t(){function t(e,t){n(e,t,"=",r.def(e,t),";")}var r=e(),n=e(),i=r.toString,a=n.toString;return G(function(){r.apply(r,O(arguments))},{def:r.def,entry:r,exit:n,save:t,set:function(e,n,i){t(e,n),r(e,n,"=",i,";")},toString:function(){return i()+a()}})}var r=0,n=[],i=[],a=e(),o={};return{global:a,link:function(e){for(var t=0;t<i.length;++t)if(i[t]===e)return n[t];return t="g"+r++,n.push(t),i.push(e),t},block:e,proc:function(e,r){function n(){var e="a"+i.length;return i.push(e),e}var i=[];r=r||0;for(var a=0;a<r;++a)n();var s=(a=t()).toString;return o[e]=G(a,{arg:n,toString:function(){return T(["function(",i.join(),"){",s(),"}"])}})},scope:t,cond:function(){var e=T(arguments),r=t(),n=t(),i=r.toString,a=n.toString;return G(r,{then:function(){return r.apply(r,O(arguments)),this},else:function(){return n.apply(n,O(arguments)),this},toString:function(){var t=a();return t&&(t="else{"+t+"}"),T(["if(",e,"){",i(),"}",t])}})},compile:function(){var e=['"use strict";',a,"return {"];Object.keys(o).forEach(function(t){e.push('"',t,'":',o[t].toString(),",")}),e.push("}");var t=T(e).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,n.concat(t)).apply(null,i)}}}function R(e){return Array.isArray(e)||X(e)||u(e)}function L(e){return e.sort(function(e,t){return"viewport"===e?-1:"viewport"===t?1:e<t?-1:1})}function D(e,t,r,n){this.thisDep=e,this.contextDep=t,this.propDep=r,this.append=n}function j(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function F(e){return new D(!1,!1,!1,e)}function I(e,t){var r=e.type;return 0===r?new D(!0,1<=(r=e.data.length),2<=r,t):4===r?new D((r=e.data).thisDep,r.contextDep,r.propDep,t):new D(3===r,2===r,1===r,t)}function N(e,t,r,n,i,o,s,u,l,c,f,d,h,p,m){function g(e){return e.replace(".","_")}function v(e,t,r){var n=g(e);ne.push(e),te[n]=ee[n]=!!r,ie[n]=t}function y(e,t,r){var n=g(e);ne.push(e),Array.isArray(r)?(ee[n]=r.slice(),te[n]=r.slice()):ee[n]=te[n]=r,ae[n]=t}function _(){var e=S(),r=e.link,n=e.global;e.id=ue++,e.batchId="0";var i=r(oe),a=e.shared={props:"a0"};Object.keys(oe).forEach(function(e){a[e]=n.def(i,".",e)});var o=e.next={},s=e.current={};Object.keys(ae).forEach(function(e){Array.isArray(ee[e])&&(o[e]=n.def(a.next,".",e),s[e]=n.def(a.current,".",e))});var u=e.constants={};Object.keys(se).forEach(function(e){u[e]=n.def(JSON.stringify(se[e]))}),e.invoke=function(t,n){switch(n.type){case 0:var i=["this",a.context,a.props,e.batchId];return t.def(r(n.data),".call(",i.slice(0,Math.max(n.data.length+1,4)),")");case 1:return t.def(a.props,n.data);case 2:return t.def(a.context,n.data);case 3:return t.def("this",n.data);case 4:return n.data.append(e,t),n.data.ref}},e.attribCache={};var l={};return e.scopeAttrib=function(e){if((e=t.id(e))in l)return l[e];var n=c.scope[e];return n||(n=c.scope[e]=new Q),l[e]=r(n)},e}function x(e,t){var r=e.static,n=e.dynamic;if("framebuffer"in r){var i=r.framebuffer;return i?(i=u.getFramebuffer(i),F(function(e,t){var r=e.link(i),n=e.shared;return t.set(n.framebuffer,".next",r),t.set(n=n.context,".framebufferWidth",r+".width"),t.set(n,".framebufferHeight",r+".height"),r})):F(function(e,t){var r=e.shared;return t.set(r.framebuffer,".next","null"),t.set(r=r.context,".framebufferWidth",r+".drawingBufferWidth"),t.set(r,".framebufferHeight",r+".drawingBufferHeight"),"null"})}if("framebuffer"in n){var a=n.framebuffer;return I(a,function(e,t){var r=e.invoke(t,a),n=e.shared,i=n.framebuffer;r=t.def(i,".getFramebuffer(",r,")");return t.set(i,".next",r),t.set(n=n.context,".framebufferWidth",r+"?"+r+".width:"+n+".drawingBufferWidth"),t.set(n,".framebufferHeight",r+"?"+r+".height:"+n+".drawingBufferHeight"),r})}return null}function w(e){function r(e){if(e in n){var r=t.id(n[e]);return(e=F(function(){return r})).id=r,e}if(e in i){var a=i[e];return I(a,function(e,t){var r=e.invoke(t,a);return t.def(e.shared.strings,".id(",r,")")})}return null}var n=e.static,i=e.dynamic,a=r("frag"),o=r("vert"),s=null;return j(a)&&j(o)?(s=f.program(o.id,a.id),e=F(function(e,t){return e.link(s)})):e=new D(a&&a.thisDep||o&&o.thisDep,a&&a.contextDep||o&&o.contextDep,a&&a.propDep||o&&o.propDep,function(e,t){var r,n,i=e.shared.shader;return r=a?a.append(e,t):t.def(i,".","frag"),n=o?o.append(e,t):t.def(i,".","vert"),t.def(i+".program("+n+","+r+")")}),{frag:a,vert:o,progVar:e,program:s}}function E(e,t){function r(e,t){if(e in n){var r=0|n[e];return F(function(e,n){return t&&(e.OFFSET=r),r})}if(e in i){var o=i[e];return I(o,function(e,r){var n=e.invoke(r,o);return t&&(e.OFFSET=n),n})}return t&&a?F(function(e,t){return e.OFFSET="0",0}):null}var n=e.static,i=e.dynamic,a=function(){if("elements"in n){var e=n.elements;R(e)?e=o.getElements(o.create(e,!0)):e&&(e=o.getElements(e));var t=F(function(t,r){if(e){var n=t.link(e);return t.ELEMENTS=n}return t.ELEMENTS=null});return t.value=e,t}if("elements"in i){var r=i.elements;return I(r,function(e,t){var n=(i=e.shared).isBufferArgs,i=i.elements,a=e.invoke(t,r),o=t.def("null");n=t.def(n,"(",a,")"),a=e.cond(n).then(o,"=",i,".createStream(",a,");").else(o,"=",i,".getElements(",a,");");return t.entry(a),t.exit(e.cond(n).then(i,".destroyStream(",o,");")),e.ELEMENTS=o})}return null}(),s=r("offset",!0);return{elements:a,primitive:function(){if("primitive"in n){var e=n.primitive;return F(function(t,r){return re[e]})}if("primitive"in i){var t=i.primitive;return I(t,function(e,r){var n=e.constants.primTypes,i=e.invoke(r,t);return r.def(n,"[",i,"]")})}return a?j(a)?F(a.value?function(e,t){return t.def(e.ELEMENTS,".primType")}:function(){return 4}):new D(a.thisDep,a.contextDep,a.propDep,function(e,t){var r=e.ELEMENTS;return t.def(r,"?",r,".primType:",4)}):null}(),count:function(){if("count"in n){var e=0|n.count;return F(function(){return e})}if("count"in i){var t=i.count;return I(t,function(e,r){return e.invoke(r,t)})}return a?j(a)?a?s?new D(s.thisDep,s.contextDep,s.propDep,function(e,t){return t.def(e.ELEMENTS,".vertCount-",e.OFFSET)}):F(function(e,t){return t.def(e.ELEMENTS,".vertCount")}):F(function(){return-1}):new D(a.thisDep||s.thisDep,a.contextDep||s.contextDep,a.propDep||s.propDep,function(e,t){var r=e.ELEMENTS;return e.OFFSET?t.def(r,"?",r,".vertCount-",e.OFFSET,":-1"):t.def(r,"?",r,".vertCount:-1")}):null}(),instances:r("instances",!1),offset:s}}function k(e,r){var n=e.static,a=e.dynamic,o={};return Object.keys(n).forEach(function(e){var r=n[e],a=t.id(e),s=new Q;if(R(r))s.state=1,s.buffer=i.getBuffer(i.create(r,34962,!1,!0)),s.type=0;else if(l=i.getBuffer(r))s.state=1,s.buffer=l,s.type=0;else if("constant"in r){var u=r.constant;s.buffer="null",s.state=2,"number"==typeof u?s.x=u:_e.forEach(function(e,t){t<u.length&&(s[e]=u[t])})}else{var l=R(r.buffer)?i.getBuffer(i.create(r.buffer,34962,!1,!0)):i.getBuffer(r.buffer),c=0|r.offset,f=0|r.stride,d=0|r.size,h=!!r.normalized,p=0;"type"in r&&(p=Z[r.type]),r=0|r.divisor,s.buffer=l,s.state=1,s.size=d,s.normalized=h,s.type=p||l.dtype,s.offset=c,s.stride=f,s.divisor=r}o[e]=F(function(e,t){var r=e.attribCache;if(a in r)return r[a];var n={isStream:!1};return Object.keys(s).forEach(function(e){n[e]=s[e]}),s.buffer&&(n.buffer=e.link(s.buffer),n.type=n.type||n.buffer+".dtype"),r[a]=n})}),Object.keys(a).forEach(function(e){var t=a[e];o[e]=I(t,function(e,r){function n(e){r(u[e],"=",i,".",e,"|0;")}var i=e.invoke(r,t),a=e.shared,o=a.isBufferArgs,s=a.buffer,u={isStream:r.def(!1)},l=new Q;l.state=1,Object.keys(l).forEach(function(e){u[e]=r.def(""+l[e])});var c=u.buffer,f=u.type;return r("if(",o,"(",i,")){",u.isStream,"=true;",c,"=",s,".createStream(",34962,",",i,");",f,"=",c,".dtype;","}else{",c,"=",s,".getBuffer(",i,");","if(",c,"){",f,"=",c,".dtype;",'}else if("constant" in ',i,"){",u.state,"=",2,";","if(typeof "+i+'.constant === "number"){',u[_e[0]],"=",i,".constant;",_e.slice(1).map(function(e){return u[e]}).join("="),"=0;","}else{",_e.map(function(e,t){return u[e]+"="+i+".constant.length>"+t+"?"+i+".constant["+t+"]:0;"}).join(""),"}}else{","if(",o,"(",i,".buffer)){",c,"=",s,".createStream(",34962,",",i,".buffer);","}else{",c,"=",s,".getBuffer(",i,".buffer);","}",f,'="type" in ',i,"?",a.glTypes,"[",i,".type]:",c,".dtype;",u.normalized,"=!!",i,".normalized;"),n("size"),n("offset"),n("stride"),n("divisor"),r("}}"),r.exit("if(",u.isStream,"){",s,".destroyStream(",c,");","}"),u})}),o}function P(e,t,r,n,i){var o=x(e),s=function(e,t,r){function n(e){if(e in i){var r=i[e];e=!0;var n,o,s=0|r.x,u=0|r.y;return"width"in r?n=0|r.width:e=!1,"height"in r?o=0|r.height:e=!1,new D(!e&&t&&t.thisDep,!e&&t&&t.contextDep,!e&&t&&t.propDep,function(e,t){var i=e.shared.context,a=n;"width"in r||(a=t.def(i,".","framebufferWidth","-",s));var l=o;return"height"in r||(l=t.def(i,".","framebufferHeight","-",u)),[s,u,a,l]})}if(e in a){var l=a[e];return e=I(l,function(e,t){var r=e.invoke(t,l),n=e.shared.context,i=t.def(r,".x|0"),a=t.def(r,".y|0");return[i,a,t.def('"width" in ',r,"?",r,".width|0:","(",n,".","framebufferWidth","-",i,")"),r=t.def('"height" in ',r,"?",r,".height|0:","(",n,".","framebufferHeight","-",a,")")]}),t&&(e.thisDep=e.thisDep||t.thisDep,e.contextDep=e.contextDep||t.contextDep,e.propDep=e.propDep||t.propDep),e}return t?new D(t.thisDep,t.contextDep,t.propDep,function(e,t){var r=e.shared.context;return[0,0,t.def(r,".","framebufferWidth"),t.def(r,".","framebufferHeight")]}):null}var i=e.static,a=e.dynamic;if(e=n("viewport")){var o=e;e=new D(e.thisDep,e.contextDep,e.propDep,function(e,t){var r=o.append(e,t),n=e.shared.context;return t.set(n,".viewportWidth",r[2]),t.set(n,".viewportHeight",r[3]),r})}return{viewport:e,scissor_box:n("scissor.box")}}(e,o),u=E(e),l=function(e,t){var r=e.static,n=e.dynamic,i={};return ne.forEach(function(e){function t(t,a){if(e in r){var s=t(r[e]);i[o]=F(function(){return s})}else if(e in n){var u=n[e];i[o]=I(u,function(e,t){return a(e,t,e.invoke(t,u))})}}var o=g(e);switch(e){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return t(function(e){return e},function(e,t,r){return r});case"depth.func":return t(function(e){return Ee[e]},function(e,t,r){return t.def(e.constants.compareFuncs,"[",r,"]")});case"depth.range":return t(function(e){return e},function(e,t,r){return[t.def("+",r,"[0]"),t=t.def("+",r,"[1]")]});case"blend.func":return t(function(e){return[we["srcRGB"in e?e.srcRGB:e.src],we["dstRGB"in e?e.dstRGB:e.dst],we["srcAlpha"in e?e.srcAlpha:e.src],we["dstAlpha"in e?e.dstAlpha:e.dst]]},function(e,t,r){function n(e,n){return t.def('"',e,n,'" in ',r,"?",r,".",e,n,":",r,".",e)}e=e.constants.blendFuncs;var i=n("src","RGB"),a=n("dst","RGB"),o=(i=t.def(e,"[",i,"]"),t.def(e,"[",n("src","Alpha"),"]"));return[i,a=t.def(e,"[",a,"]"),o,e=t.def(e,"[",n("dst","Alpha"),"]")]});case"blend.equation":return t(function(e){return"string"==typeof e?[K[e],K[e]]:"object"==typeof e?[K[e.rgb],K[e.alpha]]:void 0},function(e,t,r){var n=e.constants.blendEquations,i=t.def(),a=t.def();return(e=e.cond("typeof ",r,'==="string"')).then(i,"=",a,"=",n,"[",r,"];"),e.else(i,"=",n,"[",r,".rgb];",a,"=",n,"[",r,".alpha];"),t(e),[i,a]});case"blend.color":return t(function(e){return a(4,function(t){return+e[t]})},function(e,t,r){return a(4,function(e){return t.def("+",r,"[",e,"]")})});case"stencil.mask":return t(function(e){return 0|e},function(e,t,r){return t.def(r,"|0")});case"stencil.func":return t(function(e){return[Ee[e.cmp||"keep"],e.ref||0,"mask"in e?e.mask:-1]},function(e,t,r){return[e=t.def('"cmp" in ',r,"?",e.constants.compareFuncs,"[",r,".cmp]",":",7680),t.def(r,".ref|0"),t=t.def('"mask" in ',r,"?",r,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return t(function(t){return["stencil.opBack"===e?1029:1028,ke[t.fail||"keep"],ke[t.zfail||"keep"],ke[t.zpass||"keep"]]},function(t,r,n){function i(e){return r.def('"',e,'" in ',n,"?",a,"[",n,".",e,"]:",7680)}var a=t.constants.stencilOps;return["stencil.opBack"===e?1029:1028,i("fail"),i("zfail"),i("zpass")]});case"polygonOffset.offset":return t(function(e){return[0|e.factor,0|e.units]},function(e,t,r){return[t.def(r,".factor|0"),t=t.def(r,".units|0")]});case"cull.face":return t(function(e){var t=0;return"front"===e?t=1028:"back"===e&&(t=1029),t},function(e,t,r){return t.def(r,'==="front"?',1028,":",1029)});case"lineWidth":return t(function(e){return e},function(e,t,r){return r});case"frontFace":return t(function(e){return Pe[e]},function(e,t,r){return t.def(r+'==="cw"?2304:2305')});case"colorMask":return t(function(e){return e.map(function(e){return!!e})},function(e,t,r){return a(4,function(e){return"!!"+r+"["+e+"]"})});case"sample.coverage":return t(function(e){return["value"in e?e.value:1,!!e.invert]},function(e,t,r){return[t.def('"value" in ',r,"?+",r,".value:1"),t=t.def("!!",r,".invert")]})}}),i}(e),c=w(e),f=s.viewport;return f&&(l.viewport=f),(s=s[f=g("scissor.box")])&&(l[f]=s),(o={framebuffer:o,draw:u,shader:c,state:l,dirty:s=0<Object.keys(l).length}).profile=function(e){var t,r=e.static;if(e=e.dynamic,"profile"in r){var n=!!r.profile;(t=F(function(e,t){return n})).enable=n}else if("profile"in e){var i=e.profile;t=I(i,function(e,t){return e.invoke(t,i)})}return t}(e),o.uniforms=function(e,t){var r=e.static,n=e.dynamic,i={};return Object.keys(r).forEach(function(e){var t,n=r[e];if("number"==typeof n||"boolean"==typeof n)t=F(function(){return n});else if("function"==typeof n){var o=n._reglType;"texture2d"===o||"textureCube"===o?t=F(function(e){return e.link(n)}):"framebuffer"!==o&&"framebufferCube"!==o||(t=F(function(e){return e.link(n.color[0])}))}else b(n)&&(t=F(function(e){return e.global.def("[",a(n.length,function(e){return n[e]}),"]")}));t.value=n,i[e]=t}),Object.keys(n).forEach(function(e){var t=n[e];i[e]=I(t,function(e,r){return e.invoke(r,t)})}),i}(r),o.attributes=k(t),o.context=function(e){var t=e.static,r=e.dynamic,n={};return Object.keys(t).forEach(function(e){var r=t[e];n[e]=F(function(e,t){return"number"==typeof r||"boolean"==typeof r?""+r:e.link(r)})}),Object.keys(r).forEach(function(e){var t=r[e];n[e]=I(t,function(e,r){return e.invoke(r,t)})}),n}(n),o}function M(e,t,r){var n=e.shared.context,i=e.scope();Object.keys(r).forEach(function(a){t.save(n,"."+a),i(n,".",a,"=",r[a].append(e,t),";")}),t(i)}function A(e,t,r,n){var i,a=(s=e.shared).gl,o=s.framebuffer;$&&(i=t.def(s.extensions,".webgl_draw_buffers"));var s=(u=e.constants).drawBuffer,u=u.backBuffer;e=r?r.append(e,t):t.def(o,".next"),n||t("if(",e,"!==",o,".cur){"),t("if(",e,"){",a,".bindFramebuffer(",36160,",",e,".framebuffer);"),$&&t(i,".drawBuffersWEBGL(",s,"[",e,".colorAttachments.length]);"),t("}else{",a,".bindFramebuffer(",36160,",null);"),$&&t(i,".drawBuffersWEBGL(",u,");"),t("}",o,".cur=",e,";"),n||t("}")}function C(e,t,r){var n=e.shared,i=n.gl,o=e.current,s=e.next,u=n.current,l=n.next,c=e.cond(u,".dirty");ne.forEach(function(t){var n,f;if(!((t=g(t))in r.state))if(t in s){n=s[t],f=o[t];var d=a(ee[t].length,function(e){return c.def(n,"[",e,"]")});c(e.cond(d.map(function(e,t){return e+"!=="+f+"["+t+"]"}).join("||")).then(i,".",ae[t],"(",d,");",d.map(function(e,t){return f+"["+t+"]="+e}).join(";"),";"))}else n=c.def(l,".",t),d=e.cond(n,"!==",u,".",t),c(d),t in ie?d(e.cond(n).then(i,".enable(",ie[t],");").else(i,".disable(",ie[t],");"),u,".",t,"=",n,";"):d(i,".",ae[t],"(",n,");",u,".",t,"=",n,";")}),0===Object.keys(r.state).length&&c(u,".dirty=false;"),t(c)}function O(e,t,r,n){var i=e.shared,a=e.current,o=i.current,s=i.gl;L(Object.keys(r)).forEach(function(i){var u=r[i];if(!n||n(u)){var l=u.append(e,t);if(ie[i]){var c=ie[i];j(u)?t(s,l?".enable(":".disable(",c,");"):t(e.cond(l).then(s,".enable(",c,");").else(s,".disable(",c,");")),t(o,".",i,"=",l,";")}else if(b(l)){var f=a[i];t(s,".",ae[i],"(",l,");",l.map(function(e,t){return f+"["+t+"]="+e}).join(";"),";")}else t(s,".",ae[i],"(",l,");",o,".",i,"=",l,";")}})}function T(e,t){J&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"))}function N(e,t,r,n,i){function a(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function o(e){e(l=t.def(),"=",a(),";"),"string"==typeof i?e(d,".count+=",i,";"):e(d,".count++;"),p&&(n?e(c=t.def(),"=",m,".getNumPendingQueries();"):e(m,".beginQuery(",d,");"))}function s(e){e(d,".cpuTime+=",a(),"-",l,";"),p&&(n?e(m,".pushScopeStats(",c,",",m,".getNumPendingQueries(),",d,");"):e(m,".endQuery();"))}function u(e){var r=t.def(h,".profile");t(h,".profile=",e,";"),t.exit(h,".profile=",r,";")}var l,c,f=e.shared,d=e.stats,h=f.current,m=f.timer;if(r=r.profile){if(j(r))return void(r.enable?(o(t),s(t.exit),u("true")):u("false"));u(r=r.append(e,t))}else r=t.def(h,".profile");o(f=e.block()),t("if(",r,"){",f,"}"),s(e=e.block()),t.exit("if(",r,"){",e,"}")}function B(e,t,r,n,i){function a(r,n,i){function a(){t("if(!",c,".buffer){",u,".enableVertexAttribArray(",l,");}");var r,a=i.type;r=i.size?t.def(i.size,"||",n):n,t("if(",c,".type!==",a,"||",c,".size!==",r,"||",h.map(function(e){return c+"."+e+"!=="+i[e]}).join("||"),"){",u,".bindBuffer(",34962,",",f,".buffer);",u,".vertexAttribPointer(",[l,r,a,i.normalized,i.stride,i.offset],");",c,".type=",a,";",c,".size=",r,";",h.map(function(e){return c+"."+e+"="+i[e]+";"}).join(""),"}"),J&&t("if(",c,".divisor!==",a=i.divisor,"){",e.instancing,".vertexAttribDivisorANGLE(",[l,a],");",c,".divisor=",a,";}")}function s(){t("if(",c,".buffer){",u,".disableVertexAttribArray(",l,");","}if(",_e.map(function(e,t){return c+"."+e+"!=="+d[t]}).join("||"),"){",u,".vertexAttrib4f(",l,",",d,");",_e.map(function(e,t){return c+"."+e+"="+d[t]+";"}).join(""),"}")}var u=o.gl,l=t.def(r,".location"),c=t.def(o.attributes,"[",l,"]"),f=i.buffer,d=[i.x,i.y,i.z,i.w],h=["buffer","normalized","offset","stride"];1===(r=i.state)?a():2===r?s():(t("if(",r,"===",1,"){"),a(),t("}else{"),s(),t("}"))}var o=e.shared;n.forEach(function(n){var o,s=n.name,u=r.attributes[s];if(u){if(!i(u))return;o=u.append(e,t)}else{if(!i(Me))return;var l=e.scopeAttrib(s);o={},Object.keys(new Q).forEach(function(e){o[e]=t.def(l,".",e)})}a(e.link(n),function(e){switch(e){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(n.info.type),o)})}function G(e,r,n,i,o){for(var s,u=e.shared,l=u.gl,c=0;c<i.length;++c){var f,d=(m=i[c]).name,h=m.info.type,p=n.uniforms[d],m=e.link(m)+".location";if(p){if(!o(p))continue;if(j(p)){if(d=p.value,35678===h||35680===h)r(l,".uniform1i(",m,",",(h=e.link(d._texture||d.color[0]._texture))+".bind());"),r.exit(h,".unbind();");else if(35674===h||35675===h||35676===h)p=2,35675===h?p=3:35676===h&&(p=4),r(l,".uniformMatrix",p,"fv(",m,",false,",d=e.global.def("new Float32Array(["+Array.prototype.slice.call(d)+"])"),");");else{switch(h){case 5126:s="1f";break;case 35664:s="2f";break;case 35665:s="3f";break;case 35666:s="4f";break;case 35670:case 5124:s="1i";break;case 35671:case 35667:s="2i";break;case 35672:case 35668:s="3i";break;case 35673:s="4i";break;case 35669:s="4i"}r(l,".uniform",s,"(",m,",",b(d)?Array.prototype.slice.call(d):d,");")}continue}f=p.append(e,r)}else{if(!o(Me))continue;f=r.def(u.uniforms,"[",t.id(d),"]")}switch(35678===h?r("if(",f,"&&",f,'._reglType==="framebuffer"){',f,"=",f,".color[0];","}"):35680===h&&r("if(",f,"&&",f,'._reglType==="framebufferCube"){',f,"=",f,".color[0];","}"),d=1,h){case 35678:case 35680:h=r.def(f,"._texture"),r(l,".uniform1i(",m,",",h,".bind());"),r.exit(h,".unbind();");continue;case 5124:case 35670:s="1i";break;case 35667:case 35671:s="2i",d=2;break;case 35668:case 35672:s="3i",d=3;break;case 35669:case 35673:s="4i",d=4;break;case 5126:s="1f";break;case 35664:s="2f",d=2;break;case 35665:s="3f",d=3;break;case 35666:s="4f",d=4;break;case 35674:s="Matrix2fv";break;case 35675:s="Matrix3fv";break;case 35676:s="Matrix4fv"}if(r(l,".uniform",s,"(",m,","),"M"===s.charAt(0)){m=Math.pow(h-35674+2,2);var g=e.global.def("new Float32Array(",m,")");r("false,(Array.isArray(",f,")||",f," instanceof Float32Array)?",f,":(",a(m,function(e){return g+"["+e+"]="+f+"["+e+"]"}),",",g,")")}else r(1<d?a(d,function(e){return f+"["+e+"]"}):f);r(");")}}function q(e,t,r,n){function i(i){var a=d[i];return a?a.append(e,a.contextDep&&n.contextDynamic||a.propDep?r:t):t.def(f,".",i)}function a(){function e(){r(u,".drawElementsInstancedANGLE(",[p,b,g,m+"<<(("+g+"-5121)>>1)",s],");")}function t(){r(u,".drawArraysInstancedANGLE(",[p,m,b,s],");")}h?v?e():(r("if(",h,"){"),e(),r("}else{"),t(),r("}")):t()}function o(){function e(){r(c+".drawElements("+[p,b,g,m+"<<(("+g+"-5121)>>1)"]+");")}function t(){r(c+".drawArrays("+[p,m,b]+");")}h?v?e():(r("if(",h,"){"),e(),r("}else{"),t(),r("}")):t()}var s,u,l=e.shared,c=l.gl,f=l.draw,d=n.draw,h=function(){var i=d.elements,a=t;return i?((i.contextDep&&n.contextDynamic||i.propDep)&&(a=r),i=i.append(e,a)):i=a.def(f,".","elements"),i&&a("if("+i+")"+c+".bindBuffer(34963,"+i+".buffer.buffer);"),i}(),p=i("primitive"),m=i("offset"),b=function(){var i=d.count,a=t;return i?((i.contextDep&&n.contextDynamic||i.propDep)&&(a=r),i=i.append(e,a)):i=a.def(f,".","count"),i}();if("number"==typeof b){if(0===b)return}else r("if(",b,"){"),r.exit("}");J&&(s=i("instances"),u=e.instancing);var g=h+".type",v=d.elements&&j(d.elements);J&&("number"!=typeof s||0<=s)?"string"==typeof s?(r("if(",s,">0){"),a(),r("}else if(",s,"<0){"),o(),r("}")):a():o()}function z(e,t,r,n,i){return i=(t=_()).proc("body",i),J&&(t.instancing=i.def(t.shared.extensions,".angle_instanced_arrays")),e(t,i,r,n),t.compile().body}function W(e,t,r,n){T(e,t),B(e,t,r,n.attributes,function(){return!0}),G(e,t,r,n.uniforms,function(){return!0}),q(e,t,t,r)}function V(e,t,r,n){function i(){return!0}e.batchId="a1",T(e,t),B(e,t,r,n.attributes,i),G(e,t,r,n.uniforms,i),q(e,t,t,r)}function H(e,t,r,n){function i(e){return e.contextDep&&o||e.propDep}function a(e){return!i(e)}T(e,t);var o=r.contextDep,s=t.def(),u=t.def();e.shared.props=u,e.batchId=s;var l=e.scope(),c=e.scope();t(l.entry,"for(",s,"=0;",s,"<","a1",";++",s,"){",u,"=","a0","[",s,"];",c,"}",l.exit),r.needsContext&&M(e,c,r.context),r.needsFramebuffer&&A(e,c,r.framebuffer),O(e,c,r.state,i),r.profile&&i(r.profile)&&N(e,c,r,!1,!0),n?(B(e,l,r,n.attributes,a),B(e,c,r,n.attributes,i),G(e,l,r,n.uniforms,a),G(e,c,r,n.uniforms,i),q(e,l,c,r)):(t=e.global.def("{}"),n=r.shader.progVar.append(e,c),u=c.def(n,".id"),l=c.def(t,"[",u,"]"),c(e.shared.gl,".useProgram(",n,".program);","if(!",l,"){",l,"=",t,"[",u,"]=",e.link(function(t){return z(V,e,r,t,2)}),"(",n,");}",l,".call(this,a0[",s,"],",s,");"))}function X(e,r){function n(t){var n=r.shader[t];n&&i.set(a.shader,"."+t,n.append(e,i))}var i=e.proc("scope",3);e.batchId="a2";var a=e.shared,o=a.current;M(e,i,r.context),r.framebuffer&&r.framebuffer.append(e,i),L(Object.keys(r.state)).forEach(function(t){var n=r.state[t].append(e,i);b(n)?n.forEach(function(r,n){i.set(e.next[t],"["+n+"]",r)}):i.set(a.next,"."+t,n)}),N(e,i,r,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(t){var n=r.draw[t];n&&i.set(a.draw,"."+t,""+n.append(e,i))}),Object.keys(r.uniforms).forEach(function(n){i.set(a.uniforms,"["+t.id(n)+"]",r.uniforms[n].append(e,i))}),Object.keys(r.attributes).forEach(function(t){var n=r.attributes[t].append(e,i),a=e.scopeAttrib(t);Object.keys(new Q).forEach(function(e){i.set(a,"."+e,n[e])})}),n("vert"),n("frag"),0<Object.keys(r.state).length&&(i(o,".dirty=true;"),i.exit(o,".dirty=true;")),i("a1(",e.shared.context,",a0,",e.batchId,");")}function Y(e,t,r){var n=t.static[r];if(n&&function(e){if("object"==typeof e&&!b(e)){for(var t=Object.keys(e),r=0;r<t.length;++r)if(U.isDynamic(e[t[r]]))return!0;return!1}}(n)){var i=e.global,a=Object.keys(n),o=!1,s=!1,u=!1,l=e.global.def("{}");a.forEach(function(t){var r=n[t];if(U.isDynamic(r))"function"==typeof r&&(r=n[t]=U.unbox(r)),t=I(r,null),o=o||t.thisDep,u=u||t.propDep,s=s||t.contextDep;else{switch(i(l,".",t,"="),typeof r){case"number":i(r);break;case"string":i('"',r,'"');break;case"object":Array.isArray(r)&&i("[",r.join(),"]");break;default:i(e.link(r))}i(";")}}),t.dynamic[r]=new U.DynamicVariable(4,{thisDep:o,contextDep:s,propDep:u,ref:l,append:function(e,t){a.forEach(function(r){var i=n[r];U.isDynamic(i)&&(i=e.invoke(t,i),t(l,".",r,"=",i,";"))})}}),delete t.static[r]}}var Q=c.Record,K={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(K.min=32775,K.max=32776);var J=r.angle_instanced_arrays,$=r.webgl_draw_buffers,ee={dirty:!0,profile:m.profile},te={},ne=[],ie={},ae={};v("dither",3024),v("blend.enable",3042),y("blend.color","blendColor",[0,0,0,0]),y("blend.equation","blendEquationSeparate",[32774,32774]),y("blend.func","blendFuncSeparate",[1,0,1,0]),v("depth.enable",2929,!0),y("depth.func","depthFunc",513),y("depth.range","depthRange",[0,1]),y("depth.mask","depthMask",!0),y("colorMask","colorMask",[!0,!0,!0,!0]),v("cull.enable",2884),y("cull.face","cullFace",1029),y("frontFace","frontFace",2305),y("lineWidth","lineWidth",1),v("polygonOffset.enable",32823),y("polygonOffset.offset","polygonOffset",[0,0]),v("sample.alpha",32926),v("sample.enable",32928),y("sample.coverage","sampleCoverage",[1,!1]),v("stencil.enable",2960),y("stencil.mask","stencilMask",-1),y("stencil.func","stencilFunc",[519,0,-1]),y("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),y("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),v("scissor.enable",3089),y("scissor.box","scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]),y("viewport","viewport",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var oe={gl:e,context:h,strings:t,next:te,current:ee,draw:d,elements:o,buffer:i,shader:f,attributes:c.state,uniforms:l,framebuffer:u,extensions:r,timer:p,isBufferArgs:R},se={primTypes:re,compareFuncs:Ee,blendFuncs:we,blendEquations:K,stencilOps:ke,glTypes:Z,orientationType:Pe};$&&(se.backBuffer=[1029],se.drawBuffer=a(n.maxDrawbuffers,function(e){return 0===e?[0]:a(e,function(e){return 36064+e})}));var ue=0;return{next:te,current:ee,procs:function(){var e=_(),t=e.proc("poll"),r=e.proc("refresh"),i=e.block();t(i),r(i);var o,s=e.shared,u=s.gl,l=s.next,c=s.current;i(c,".dirty=false;"),A(e,t),A(e,r,null,!0),J&&(o=e.link(J));for(var f=0;f<n.maxAttributes;++f){var d=r.def(s.attributes,"[",f,"]"),h=e.cond(d,".buffer");h.then(u,".enableVertexAttribArray(",f,");",u,".bindBuffer(",34962,",",d,".buffer.buffer);",u,".vertexAttribPointer(",f,",",d,".size,",d,".type,",d,".normalized,",d,".stride,",d,".offset);").else(u,".disableVertexAttribArray(",f,");",u,".vertexAttrib4f(",f,",",d,".x,",d,".y,",d,".z,",d,".w);",d,".buffer=null;"),r(h),J&&r(o,".vertexAttribDivisorANGLE(",f,",",d,".divisor);")}return Object.keys(ie).forEach(function(n){var a=ie[n],o=i.def(l,".",n),s=e.block();s("if(",o,"){",u,".enable(",a,")}else{",u,".disable(",a,")}",c,".",n,"=",o,";"),r(s),t("if(",o,"!==",c,".",n,"){",s,"}")}),Object.keys(ae).forEach(function(n){var o,s,f=ae[n],d=ee[n],h=e.block();h(u,".",f,"("),b(d)?(f=d.length,o=e.global.def(l,".",n),s=e.global.def(c,".",n),h(a(f,function(e){return o+"["+e+"]"}),");",a(f,function(e){return s+"["+e+"]="+o+"["+e+"];"}).join("")),t("if(",a(f,function(e){return o+"["+e+"]!=="+s+"["+e+"]"}).join("||"),"){",h,"}")):(o=i.def(l,".",n),s=i.def(c,".",n),h(o,");",c,".",n,"=",o,";"),t("if(",o,"!==",s,"){",h,"}")),r(h)}),e.compile()}(),compile:function(e,t,r,n,i){var a=_();return a.stats=a.link(i),Object.keys(t.static).forEach(function(e){Y(a,t,e)}),xe.forEach(function(t){Y(a,e,t)}),r=P(e,t,r,n),function(e,t){var r=e.proc("draw",1);T(e,r),M(e,r,t.context),A(e,r,t.framebuffer),C(e,r,t),O(e,r,t.state),N(e,r,t,!1,!0);var n=t.shader.progVar.append(e,r);if(r(e.shared.gl,".useProgram(",n,".program);"),t.shader.program)W(e,r,t,t.shader.program);else{var i=e.global.def("{}"),a=r.def(n,".id"),o=r.def(i,"[",a,"]");r(e.cond(o).then(o,".call(this,a0);").else(o,"=",i,"[",a,"]=",e.link(function(r){return z(W,e,t,r,1)}),"(",n,");",o,".call(this,a0);"))}0<Object.keys(t.state).length&&r(e.shared.current,".dirty=true;")}(a,r),X(a,r),function(e,t){function r(e){return e.contextDep&&i||e.propDep}var n=e.proc("batch",2);e.batchId="0",T(e,n);var i=!1,a=!0;Object.keys(t.context).forEach(function(e){i=i||t.context[e].propDep}),i||(M(e,n,t.context),a=!1);var o=!1;if((s=t.framebuffer)?(s.propDep?i=o=!0:s.contextDep&&i&&(o=!0),o||A(e,n,s)):A(e,n,null),t.state.viewport&&t.state.viewport.propDep&&(i=!0),C(e,n,t),O(e,n,t.state,function(e){return!r(e)}),t.profile&&r(t.profile)||N(e,n,t,!1,"a1"),t.contextDep=i,t.needsContext=a,t.needsFramebuffer=o,(a=t.shader.progVar).contextDep&&i||a.propDep)H(e,n,t,null);else if(a=a.append(e,n),n(e.shared.gl,".useProgram(",a,".program);"),t.shader.program)H(e,n,t,t.shader.program);else{var s=e.global.def("{}"),u=(o=n.def(a,".id"),n.def(s,"[",o,"]"));n(e.cond(u).then(u,".call(this,a0,a1);").else(u,"=",s,"[",o,"]=",e.link(function(r){return z(H,e,t,r,2)}),"(",a,");",u,".call(this,a0,a1);"))}0<Object.keys(t.state).length&&n(e.shared.current,".dirty=true;")}(a,r),a.compile()}}}function B(e,t){for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}var G=function(e,t){for(var r=Object.keys(t),n=0;n<r.length;++n)e[r[n]]=t[r[n]];return e},q=0,U={DynamicVariable:e,define:function(r,n){return new e(r,t(n+""))},isDynamic:function(t){return"function"==typeof t&&!t._reglType||t instanceof e},unbox:function(t,r){return"function"==typeof t?new e(0,t):t},accessor:t},z={next:"function"==typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"==typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},W="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},V=s();V.zero=s();var H=function(e,t){var r=1;t.ext_texture_filter_anisotropic&&(r=e.getParameter(34047));var n=1,i=1;t.webgl_draw_buffers&&(n=e.getParameter(34852),i=e.getParameter(36063));var a=!!t.oes_texture_float;if(a){a=e.createTexture(),e.bindTexture(3553,a),e.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var o=e.createFramebuffer();if(e.bindFramebuffer(36160,o),e.framebufferTexture2D(36160,36064,3553,a,0),e.bindTexture(3553,null),36053!==e.checkFramebufferStatus(36160))a=!1;else{e.viewport(0,0,1,1),e.clearColor(1,0,0,1),e.clear(16384);var s=V.allocType(5126,4);e.readPixels(0,0,1,1,6408,5126,s),e.getError()?a=!1:(e.deleteFramebuffer(o),e.deleteTexture(a),a=1===s[0]),V.freeType(s)}}return s=!0,"undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(s=e.createTexture(),o=V.allocType(5121,36),e.activeTexture(33984),e.bindTexture(34067,s),e.texImage2D(34069,0,6408,3,3,0,6408,5121,o),V.freeType(o),e.bindTexture(34067,null),e.deleteTexture(s),s=!e.getError()),{colorBits:[e.getParameter(3410),e.getParameter(3411),e.getParameter(3412),e.getParameter(3413)],depthBits:e.getParameter(3414),stencilBits:e.getParameter(3415),subpixelBits:e.getParameter(3408),extensions:Object.keys(t).filter(function(e){return!!t[e]}),maxAnisotropic:r,maxDrawbuffers:n,maxColorAttachments:i,pointSizeDims:e.getParameter(33901),lineWidthDims:e.getParameter(33902),maxViewportDims:e.getParameter(3386),maxCombinedTextureUnits:e.getParameter(35661),maxCubeMapSize:e.getParameter(34076),maxRenderbufferSize:e.getParameter(34024),maxTextureUnits:e.getParameter(34930),maxTextureSize:e.getParameter(3379),maxAttributes:e.getParameter(34921),maxVertexUniforms:e.getParameter(36347),maxVertexTextureUnits:e.getParameter(35660),maxVaryingVectors:e.getParameter(36348),maxFragmentUniforms:e.getParameter(36349),glsl:e.getParameter(35724),renderer:e.getParameter(7937),vendor:e.getParameter(7936),version:e.getParameter(7938),readFloat:a,npotTextureCube:s}},X=function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint8ClampedArray},Y=function(e){return Object.keys(e).map(function(t){return e[t]})},Q={shape:function(e){for(var t=[];e.length;e=e[0])t.push(e.length);return t},flatten:function(e,t,r,n){var i=1;if(t.length)for(var a=0;a<t.length;++a)i*=t[a];else i=0;switch(r=n||V.allocType(r,i),t.length){case 0:break;case 1:for(n=t[0],t=0;t<n;++t)r[t]=e[t];break;case 2:for(n=t[0],t=t[1],a=i=0;a<n;++a)for(var o=e[a],s=0;s<t;++s)r[i++]=o[s];break;case 3:l(e,t[0],t[1],t[2],r,0);break;default:!function e(t,r,n,i,a){for(var o=1,s=n+1;s<r.length;++s)o*=r[s];var u=r[n];if(4==r.length-n){var c=r[n+1],f=r[n+2];for(r=r[n+3],s=0;s<u;++s)l(t[s],c,f,r,i,a),a+=o}else for(s=0;s<u;++s)e(t[s],r,n+1,i,a),a+=o}(e,t,0,r,0)}return r}},K={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Z={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},J={dynamic:35048,stream:35040,static:35044},$=Q.flatten,ee=Q.shape,te=[];te[5120]=1,te[5122]=2,te[5124]=4,te[5121]=1,te[5123]=2,te[5125]=4,te[5126]=4;var re={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},ne=new Float32Array(1),ie=new Uint32Array(ne.buffer),ae=[9984,9986,9985,9987],oe=[0,6409,6410,6407,6408],se={};se[6409]=se[6406]=se[6402]=1,se[34041]=se[6410]=2,se[6407]=se[35904]=3,se[6408]=se[35906]=4;var ue=g("HTMLCanvasElement"),le=g("CanvasRenderingContext2D"),ce=g("ImageBitmap"),fe=g("HTMLImageElement"),de=g("HTMLVideoElement"),he=Object.keys(K).concat([ue,le,ce,fe,de]),pe=[];pe[5121]=1,pe[5126]=4,pe[36193]=2,pe[5123]=2,pe[5125]=4;var me=[];me[32854]=2,me[32855]=2,me[36194]=2,me[34041]=4,me[33776]=.5,me[33777]=.5,me[33778]=1,me[33779]=1,me[35986]=.5,me[35987]=1,me[34798]=1,me[35840]=.5,me[35841]=.25,me[35842]=.5,me[35843]=.25,me[36196]=.5;var be=[];be[32854]=2,be[32855]=2,be[36194]=2,be[33189]=2,be[36168]=1,be[34041]=4,be[35907]=4,be[34836]=16,be[34842]=8,be[34843]=6;var ge=function(e,t,r,n,i){function a(e){this.id=l++,this.refCount=1,this.renderbuffer=e,this.format=32854,this.height=this.width=0,i.profile&&(this.stats={size:0})}function o(t){var r=t.renderbuffer;e.bindRenderbuffer(36161,null),e.deleteRenderbuffer(r),t.renderbuffer=null,t.refCount=0,delete c[t.id],n.renderbufferCount--}var s={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};t.ext_srgb&&(s.srgba=35907),t.ext_color_buffer_half_float&&(s.rgba16f=34842,s.rgb16f=34843),t.webgl_color_buffer_float&&(s.rgba32f=34836);var u=[];Object.keys(s).forEach(function(e){u[s[e]]=e});var l=0,c={};return a.prototype.decRef=function(){0>=--this.refCount&&o(this)},i.profile&&(n.getTotalRenderbufferSize=function(){var e=0;return Object.keys(c).forEach(function(t){e+=c[t].stats.size}),e}),{create:function(t,r){function o(t,r){var n=0,a=0,c=32854;if("object"==typeof t&&t?("shape"in t?(n=0|(a=t.shape)[0],a=0|a[1]):("radius"in t&&(n=a=0|t.radius),"width"in t&&(n=0|t.width),"height"in t&&(a=0|t.height)),"format"in t&&(c=s[t.format])):"number"==typeof t?(n=0|t,a="number"==typeof r?0|r:n):t||(n=a=1),n!==l.width||a!==l.height||c!==l.format)return o.width=l.width=n,o.height=l.height=a,l.format=c,e.bindRenderbuffer(36161,l.renderbuffer),e.renderbufferStorage(36161,c,n,a),i.profile&&(l.stats.size=be[l.format]*l.width*l.height),o.format=u[l.format],o}var l=new a(e.createRenderbuffer());return c[l.id]=l,n.renderbufferCount++,o(t,r),o.resize=function(t,r){var n=0|t,a=0|r||n;return n===l.width&&a===l.height?o:(o.width=l.width=n,o.height=l.height=a,e.bindRenderbuffer(36161,l.renderbuffer),e.renderbufferStorage(36161,l.format,n,a),i.profile&&(l.stats.size=be[l.format]*l.width*l.height),o)},o._reglType="renderbuffer",o._renderbuffer=l,i.profile&&(o.stats=l.stats),o.destroy=function(){l.decRef()},o},clear:function(){Y(c).forEach(o)},restore:function(){Y(c).forEach(function(t){t.renderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,t.renderbuffer),e.renderbufferStorage(36161,t.format,t.width,t.height)}),e.bindRenderbuffer(36161,null)}}},ve=[];ve[6408]=4,ve[6407]=3;var ye=[];ye[5121]=1,ye[5126]=4,ye[36193]=2;var _e=["x","y","z","w"],xe="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),we={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ee={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},ke={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Pe={cw:2304,ccw:2305},Me=new D(!1,!1,!1,function(){});return function(e){function t(){if(0===Q.length)w&&w.update(),$=null;else{$=z.next(t),f();for(var e=Q.length-1;0<=e;--e){var r=Q[e];r&&r(T,null,0)}b.flush(),w&&w.update()}}function r(){!$&&0<Q.length&&($=z.next(t))}function n(){$&&(z.cancel(t),$=null)}function a(e){e.preventDefault(),n(),K.forEach(function(e){e()})}function o(e){b.getError(),v.restore(),j.restore(),L.restore(),F.restore(),I.restore(),q.restore(),w&&w.restore(),V.procs.refresh(),r(),Z.forEach(function(e){e()})}function s(e){function t(e){var t={},r={};return Object.keys(e).forEach(function(n){var i=e[n];U.isDynamic(i)?r[n]=U.unbox(i,n):t[n]=i}),{dynamic:r,static:t}}var r=t(e.context||{}),n=t(e.uniforms||{}),i=t(e.attributes||{}),a=t(function(e){function t(e){if(e in r){var t=r[e];delete r[e],Object.keys(t).forEach(function(n){r[e+"."+n]=t[n]})}}var r=G({},e);return delete r.uniforms,delete r.attributes,delete r.context,"stencil"in r&&r.stencil.op&&(r.stencil.opBack=r.stencil.opFront=r.stencil.op,delete r.stencil.op),t("blend"),t("depth"),t("cull"),t("stencil"),t("polygonOffset"),t("scissor"),t("sample"),r}(e)),o=(r=V.compile(a,i,n,r,e={gpuTime:0,cpuTime:0,count:0})).draw,s=r.batch,u=r.scope,l=[];return G(function(e,t){var r;if("function"==typeof e)return u.call(this,null,e,0);if("function"==typeof t)if("number"==typeof e)for(r=0;r<e;++r)u.call(this,null,t,r);else{if(!Array.isArray(e))return u.call(this,e,t,0);for(r=0;r<e.length;++r)u.call(this,e[r],t,r)}else if("number"==typeof e){if(0<e)return s.call(this,function(e){for(;l.length<e;)l.push(null);return l}(0|e),0|e)}else{if(!Array.isArray(e))return o.call(this,e);if(e.length)return s.call(this,e,e.length)}},{stats:e})}function u(e,t){var r=0;V.procs.poll();var n=t.color;n&&(b.clearColor(+n[0]||0,+n[1]||0,+n[2]||0,+n[3]||0),r|=16384),"depth"in t&&(b.clearDepth(+t.depth),r|=256),"stencil"in t&&(b.clearStencil(0|t.stencil),r|=1024),b.clear(r)}function l(e){return Q.push(e),r(),{cancel:function(){var t=B(Q,e);Q[t]=function e(){var t=B(Q,e);Q[t]=Q[Q.length-1],--Q.length,0>=Q.length&&n()}}}}function c(){var e=X.viewport,t=X.scissor_box;e[0]=e[1]=t[0]=t[1]=0,T.viewportWidth=T.framebufferWidth=T.drawingBufferWidth=e[2]=t[2]=b.drawingBufferWidth,T.viewportHeight=T.framebufferHeight=T.drawingBufferHeight=e[3]=t[3]=b.drawingBufferHeight}function f(){T.tick+=1,T.time=m(),c(),V.procs.poll()}function d(){c(),V.procs.refresh(),w&&w.update()}function m(){return(W()-E)/1e3}if(!(e=i(e)))return null;var b=e.gl,g=b.getContextAttributes();b.isContextLost();var v=function(e,t){function r(t){var r;t=t.toLowerCase();try{r=n[t]=e.getExtension(t)}catch(e){}return!!r}for(var n={},i=0;i<t.extensions.length;++i){var a=t.extensions[i];if(!r(a))return t.onDestroy(),t.onDone('"'+a+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return t.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach(function(e){if(n[e]&&!r(e))throw Error("(regl): error restoring extension "+e)})}}}(b,e);if(!v)return null;var y=function(){var e={"":0},t=[""];return{id:function(r){var n=e[r];return n||(n=e[r]=t.length,t.push(r),n)},str:function(e){return t[e]}}}(),_={bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},x=v.extensions,w=function(e,t){function r(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function n(e,t,n){var i=o.pop()||new r;i.startQueryIndex=e,i.endQueryIndex=t,i.sum=0,i.stats=n,s.push(i)}if(!t.ext_disjoint_timer_query)return null;var i=[],a=[],o=[],s=[],u=[],l=[];return{beginQuery:function(e){var r=i.pop()||t.ext_disjoint_timer_query.createQueryEXT();t.ext_disjoint_timer_query.beginQueryEXT(35007,r),a.push(r),n(a.length-1,a.length,e)},endQuery:function(){t.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:n,update:function(){var e,r;if(0!==(e=a.length)){l.length=Math.max(l.length,e+1),u.length=Math.max(u.length,e+1),u[0]=0;var n=l[0]=0;for(r=e=0;r<a.length;++r)t.ext_disjoint_timer_query.getQueryObjectEXT(c=a[r],34919)?(n+=t.ext_disjoint_timer_query.getQueryObjectEXT(c,34918),i.push(c)):a[e++]=c,u[r+1]=n,l[r+1]=e;for(a.length=e,r=e=0;r<s.length;++r){var c,f=(n=s[r]).startQueryIndex;n.sum+=u[c=n.endQueryIndex]-u[f],(c=l[c])===(f=l[f])?(n.stats.gpuTime+=n.sum/1e6,o.push(n)):(n.startQueryIndex=f,n.endQueryIndex=c,s[e++]=n)}s.length=e}},getNumPendingQueries:function(){return a.length},clear:function(){i.push.apply(i,a);for(var e=0;e<i.length;e++)t.ext_disjoint_timer_query.deleteQueryEXT(i[e]);a.length=0,i.length=0},restore:function(){a.length=0,i.length=0}}}(0,x),E=W(),O=b.drawingBufferHeight,T={tick:0,time:0,viewportWidth:R=b.drawingBufferWidth,viewportHeight:O,framebufferWidth:R,framebufferHeight:O,drawingBufferWidth:R,drawingBufferHeight:O,pixelRatio:e.pixelRatio},S=H(b,x),R=function(e,t,r,n){for(e=r.maxAttributes,t=Array(e),r=0;r<e;++r)t[r]=new M;return{Record:M,scope:{},state:t}}(b,x,S),L=h(b,_,e,R),D=p(b,x,L,_),j=A(b,y,_,e),F=k(b,x,S,function(){V.procs.poll()},T,_,e),I=ge(b,x,0,_,e),q=P(b,x,S,F,I,_),V=N(b,y,x,S,L,D,0,q,{},R,j,{elements:null,primitive:4,count:-1,offset:0,instances:-1},T,w,e),X=(y=C(b,q,V.procs.poll,T),V.next),Y=b.canvas,Q=[],K=[],Z=[],J=[e.onDestroy],$=null;Y&&(Y.addEventListener("webglcontextlost",a,!1),Y.addEventListener("webglcontextrestored",o,!1));var ee=q.setFBO=s({framebuffer:U.define.call(null,1,"framebuffer")});return d(),g=G(s,{clear:function(e){if("framebuffer"in e)if(e.framebuffer&&"framebufferCube"===e.framebuffer_reglType)for(var t=0;6>t;++t)ee(G({framebuffer:e.framebuffer.faces[t]},e),u);else ee(e,u);else u(0,e)},prop:U.define.bind(null,1),context:U.define.bind(null,2),this:U.define.bind(null,3),draw:s({}),buffer:function(e){return L.create(e,34962,!1,!1)},elements:function(e){return D.create(e,!1)},texture:F.create2D,cube:F.createCube,renderbuffer:I.create,framebuffer:q.create,framebufferCube:q.createCube,attributes:g,frame:l,on:function(e,t){var r;switch(e){case"frame":return l(t);case"lost":r=K;break;case"restore":r=Z;break;case"destroy":r=J}return r.push(t),{cancel:function(){for(var e=0;e<r.length;++e)if(r[e]===t){r[e]=r[r.length-1],r.pop();break}}}},limits:S,hasExtension:function(e){return 0<=S.extensions.indexOf(e.toLowerCase())},read:y,destroy:function(){Q.length=0,n(),Y&&(Y.removeEventListener("webglcontextlost",a),Y.removeEventListener("webglcontextrestored",o)),j.clear(),q.clear(),I.clear(),F.clear(),D.clear(),L.clear(),w&&w.clear(),J.forEach(function(e){e()})},_gl:b,_refresh:d,poll:function(){f(),w&&w.update()},now:m,stats:_}),e.onDone(null,g),g}},"object"==typeof r&&void 0!==t?t.exports=i():"function"==typeof define&&define.amd?define(i):n.createREGL=i()},{}],311:[function(e,t,r){(function(e){t.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],312:[function(e,t,r){(function(e){"use strict";var r=256,n=[],i=void 0===e?window:e,a=Math.pow(r,6),o=Math.pow(2,52),s=2*o,u=r-1,l=Math.random;function c(e){var t,n=e.length,i=this,a=0,o=i.i=i.j=0,s=i.S=[];for(n||(e=[n++]);a<r;)s[a]=a++;for(a=0;a<r;a++)s[a]=s[o=u&o+e[a%n]+(t=s[a])],s[o]=t;(i.g=function(e){for(var t,n=0,a=i.i,o=i.j,s=i.S;e--;)t=s[a=u&a+1],n=n*r+s[u&(s[a]=s[o=u&o+t])+(s[o]=t)];return i.i=a,i.j=o,n})(r)}function f(e,t){for(var r,n=e+"",i=0;i<n.length;)t[u&i]=u&(r^=19*t[u&i])+n.charCodeAt(i++);return d(t)}function d(e){return String.fromCharCode.apply(0,e)}t.exports=function(e,u){if(u&&!0===u.global)return u.global=!1,Math.random=t.exports(e,u),u.global=!0,Math.random;var l=[],h=(f(function e(t,r){var n,i=[],a=(typeof t)[0];if(r&&"o"==a)for(n in t)try{i.push(e(t[n],r-1))}catch(e){}return i.length?i:"s"==a?t:t+"\0"}(u&&u.entropy||!1?[e,d(n)]:0 in arguments?e:function(e){try{return i.crypto.getRandomValues(e=new Uint8Array(r)),d(e)}catch(e){return[+new Date,i,i.navigator&&i.navigator.plugins,i.screen,d(n)]}}(),3),l),new c(l));return f(d(h.S),n),function(){for(var e=h.g(6),t=a,n=0;e<o;)e=(e+n)*r,t*=r,n=h.g(1);for(;e>=s;)e/=2,t/=2,n>>>=1;return(e+n)/t}},t.exports.resetGlobal=function(){Math.random=l},f(Math.random(),n)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],313:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="undefined"!=typeof window&&window.addEventListener,a=new Map,o=function(){return i&&window.__SEER_INITIALIZED__},s=function(e,t){var r=a.get(e),n=Date.now();return!!(r&&n-r<t)||(a.set(e,n),!1)},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i&&o()){var r=new Set,a=JSON.stringify(t,function(e){return function(t,r){if(!r||"object"!==(void 0===r?"undefined":n(r))||!e.has(r))return e.add(r),Object.prototype.toString.call(r).slice(8,-1).includes("Array")?Array.prototype.slice.call(r,0,20):r}}(r));try{window.postMessage({type:e,payload:a,source:"seer-agent"},"*")}catch(e){if(s("seer-log",2e3))return;console.log(e)}}},l=new Map,c=function(e){if(e&&e.data&&"seer-core"===e.data.source){var t=e.data,r=t.payload,n=l.get(t.type);n&&n.forEach(function(e){return e(r)})}},f=function(){i&&!window.__SEER_LISTENER__&&(window.addEventListener("message",c),window.__SEER_LISTENER__=!0)};r.default={send:u,throttle:s,isReady:o,list:function(e,t){return u("LIST",{key:e,data:t})},listItem:function(e,t){return u("LIST_ITEM",{key:e,itemKey:t,data:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}})},updateItem:function(e,t,r,n){return u("UPDATE_ITEM",{key:e,itemKey:t,path:r,data:n})},multiUpdate:function(e,t,r){return u("MULTI_UPDATE_ITEM",{key:e,itemKey:t,array:r})},deleteItem:function(e,t){return u("DELETE_ITEM",{key:e,itemKey:t})},addLog:function(e,t,r){return u("ADD_LOG",{key:e,itemKey:t,msg:r})},listeners:l,listenFor:function(e,t){if(i){if(!e||!t)throw new Error("Please provide a type and callback");l.has(e)||l.set(e,[]),window.__SEER_LISTENER__||f(),l.get(e).push(t)}},removeListener:function(e){l.forEach(function(t,r){l.set(r,t.filter(function(t){return t!==e}))})},init:f,clean:function(){i&&window.__SEER_LISTENER__&&(window.removeEventListener("message",c),delete window.__SEER_LISTENER__)}}},{}],314:[function(e,t,r){!function(){"use strict";var e=.5*(Math.sqrt(3)-1),n=(3-Math.sqrt(3))/6,i=1/6,a=(Math.sqrt(5)-1)/4,o=(5-Math.sqrt(5))/20;function s(e){var t;t="function"==typeof e?e:e?function(){var e=0,t=0,r=0,n=1,i=(a=4022871197,function(e){e=e.toString();for(var t=0;t<e.length;t++){var r=.02519603282416938*(a+=e.charCodeAt(t));r-=a=r>>>0,a=(r*=a)>>>0,a+=4294967296*(r-=a)}return 2.3283064365386963e-10*(a>>>0)});var a;e=i(" "),t=i(" "),r=i(" ");for(var o=0;o<arguments.length;o++)(e-=i(arguments[o]))<0&&(e+=1),(t-=i(arguments[o]))<0&&(t+=1),(r-=i(arguments[o]))<0&&(r+=1);return i=null,function(){var i=2091639*e+2.3283064365386963e-10*n;return e=t,t=r,r=i-(n=0|i)}}(e):Math.random,this.p=u(t),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var r=0;r<512;r++)this.perm[r]=this.p[255&r],this.permMod12[r]=this.perm[r]%12}function u(e){var t,r=new Uint8Array(256);for(t=0;t<256;t++)r[t]=t;for(t=0;t<255;t++){var n=t+~~(e()*(256-t)),i=r[t];r[t]=r[n],r[n]=i}return r}s.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(t,r){var i,a,o=this.permMod12,s=this.perm,u=this.grad3,l=0,c=0,f=0,d=(t+r)*e,h=Math.floor(t+d),p=Math.floor(r+d),m=(h+p)*n,b=t-(h-m),g=r-(p-m);b>g?(i=1,a=0):(i=0,a=1);var v=b-i+n,y=g-a+n,_=b-1+2*n,x=g-1+2*n,w=255&h,E=255&p,k=.5-b*b-g*g;if(k>=0){var P=3*o[w+s[E]];l=(k*=k)*k*(u[P]*b+u[P+1]*g)}var M=.5-v*v-y*y;if(M>=0){var A=3*o[w+i+s[E+a]];c=(M*=M)*M*(u[A]*v+u[A+1]*y)}var C=.5-_*_-x*x;if(C>=0){var O=3*o[w+1+s[E+1]];f=(C*=C)*C*(u[O]*_+u[O+1]*x)}return 70*(l+c+f)},noise3D:function(e,t,r){var n,a,o,s,u,l,c,f,d,h,p=this.permMod12,m=this.perm,b=this.grad3,g=(e+t+r)*(1/3),v=Math.floor(e+g),y=Math.floor(t+g),_=Math.floor(r+g),x=(v+y+_)*i,w=e-(v-x),E=t-(y-x),k=r-(_-x);w>=E?E>=k?(u=1,l=0,c=0,f=1,d=1,h=0):w>=k?(u=1,l=0,c=0,f=1,d=0,h=1):(u=0,l=0,c=1,f=1,d=0,h=1):E<k?(u=0,l=0,c=1,f=0,d=1,h=1):w<k?(u=0,l=1,c=0,f=0,d=1,h=1):(u=0,l=1,c=0,f=1,d=1,h=0);var P=w-u+i,M=E-l+i,A=k-c+i,C=w-f+2*i,O=E-d+2*i,T=k-h+2*i,S=w-1+.5,R=E-1+.5,L=k-1+.5,D=255&v,j=255&y,F=255&_,I=.6-w*w-E*E-k*k;if(I<0)n=0;else{var N=3*p[D+m[j+m[F]]];n=(I*=I)*I*(b[N]*w+b[N+1]*E+b[N+2]*k)}var B=.6-P*P-M*M-A*A;if(B<0)a=0;else{var G=3*p[D+u+m[j+l+m[F+c]]];a=(B*=B)*B*(b[G]*P+b[G+1]*M+b[G+2]*A)}var q=.6-C*C-O*O-T*T;if(q<0)o=0;else{var U=3*p[D+f+m[j+d+m[F+h]]];o=(q*=q)*q*(b[U]*C+b[U+1]*O+b[U+2]*T)}var z=.6-S*S-R*R-L*L;if(z<0)s=0;else{var W=3*p[D+1+m[j+1+m[F+1]]];s=(z*=z)*z*(b[W]*S+b[W+1]*R+b[W+2]*L)}return 32*(n+a+o+s)},noise4D:function(e,t,r,n){var i,s,u,l,c,f,d,h,p,m,b,g,v,y,_,x,w,E=this.perm,k=this.grad4,P=(e+t+r+n)*a,M=Math.floor(e+P),A=Math.floor(t+P),C=Math.floor(r+P),O=Math.floor(n+P),T=(M+A+C+O)*o,S=e-(M-T),R=t-(A-T),L=r-(C-T),D=n-(O-T),j=0,F=0,I=0,N=0;S>R?j++:F++,S>L?j++:I++,S>D?j++:N++,R>L?F++:I++,R>D?F++:N++,L>D?I++:N++;var B=S-(f=j>=3?1:0)+o,G=R-(d=F>=3?1:0)+o,q=L-(h=I>=3?1:0)+o,U=D-(p=N>=3?1:0)+o,z=S-(m=j>=2?1:0)+2*o,W=R-(b=F>=2?1:0)+2*o,V=L-(g=I>=2?1:0)+2*o,H=D-(v=N>=2?1:0)+2*o,X=S-(y=j>=1?1:0)+3*o,Y=R-(_=F>=1?1:0)+3*o,Q=L-(x=I>=1?1:0)+3*o,K=D-(w=N>=1?1:0)+3*o,Z=S-1+4*o,J=R-1+4*o,$=L-1+4*o,ee=D-1+4*o,te=255&M,re=255&A,ne=255&C,ie=255&O,ae=.6-S*S-R*R-L*L-D*D;if(ae<0)i=0;else{var oe=E[te+E[re+E[ne+E[ie]]]]%32*4;i=(ae*=ae)*ae*(k[oe]*S+k[oe+1]*R+k[oe+2]*L+k[oe+3]*D)}var se=.6-B*B-G*G-q*q-U*U;if(se<0)s=0;else{var ue=E[te+f+E[re+d+E[ne+h+E[ie+p]]]]%32*4;s=(se*=se)*se*(k[ue]*B+k[ue+1]*G+k[ue+2]*q+k[ue+3]*U)}var le=.6-z*z-W*W-V*V-H*H;if(le<0)u=0;else{var ce=E[te+m+E[re+b+E[ne+g+E[ie+v]]]]%32*4;u=(le*=le)*le*(k[ce]*z+k[ce+1]*W+k[ce+2]*V+k[ce+3]*H)}var fe=.6-X*X-Y*Y-Q*Q-K*K;if(fe<0)l=0;else{var de=E[te+y+E[re+_+E[ne+x+E[ie+w]]]]%32*4;l=(fe*=fe)*fe*(k[de]*X+k[de+1]*Y+k[de+2]*Q+k[de+3]*K)}var he=.6-Z*Z-J*J-$*$-ee*ee;if(he<0)c=0;else{var pe=E[te+1+E[re+1+E[ne+1+E[ie+1]]]]%32*4;c=(he*=he)*he*(k[pe]*Z+k[pe+1]*J+k[pe+2]*$+k[pe+3]*ee)}return 27*(i+s+u+l+c)}},s._buildPermutationTable=u,"undefined"!=typeof define&&define.amd&&define(function(){return s}),void 0!==r?r.SimplexNoise=s:"undefined"!=typeof window&&(window.SimplexNoise=s),void 0!==t&&(t.exports=s)}()},{}],315:[function(e,t,r){var n,i;n=this,i=function(e){"use strict";e.createSpring=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;n=n||r;var i=r;return{updateValue:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];i=e,t||(r=e,n=e)},isAtDestination:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.EPSILON;return Math.abs(r-i)<=e&&Math.abs(r-n)<=e},tick:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(a<1)throw new Error("tick() expects `steps` to be greater than 0");if(!Number.isInteger(a))throw new Error("tick() expects `steps` to be an integer");for(var s=r,u=n;a--;){var l=s-u,c=i-s,f=c*e,d=l*-t,h=f+d,p=h+l+s;u=s,s=p}return o&&(n=u,r=s),s}}},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof r&&void 0!==t?i(r):"function"==typeof define&&define.amd?define(["exports"],i):i(n.SpringAnimator=n.SpringAnimator||{})},{}],316:[function(e,t,r){"use strict";var n=e("parse-unit");t.exports=s;var i=o("in",document.body);function a(e,t){var r=n(getComputedStyle(e).getPropertyValue(t));return r[0]*s(r[1],e)}function o(e,t){var r=document.createElement("div");r.style.height="128"+e,t.appendChild(r);var n=a(r,"height")/128;return t.removeChild(r),n}function s(e,t){if(!e)return null;switch(t=t||document.body,e=(e+""||"px").trim().toLowerCase(),t!==window&&t!==document||(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return o(e,t);case"em":return a(t,"font-size");case"rem":return a(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return i;case"cm":return i/2.54;case"mm":return i/25.4;case"pt":return i/72;case"pc":return i/6;case"px":return 1}var r=n(e);if(!isNaN(r[0])&&r[1]){var u=s(r[1],t);return"number"==typeof u?r[0]*u:null}return null}},{"parse-unit":289}],317:[function(e,t,r){"use strict";t.exports=function(e){var t=(e=e||{}).center||[0,0,0],r=e.up||[0,1,0],n=e.right||f(r),i=e.radius||1,a=e.theta||0,c=e.phi||0;if(t=[].slice.call(t,0,3),r=[].slice.call(r,0,3),s(r,r),n=[].slice.call(n,0,3),s(n,n),"eye"in e){var h=e.eye,p=[h[0]-t[0],h[1]-t[1],h[2]-t[2]];o(n,p,r),l(n[0],n[1],n[2])<1e-6?n=f(r):s(n,n),i=l(p[0],p[1],p[2]);var m=u(r,p)/i,b=u(n,p)/i;c=Math.acos(m),a=Math.acos(b)}return i=Math.log(i),new d(e.zoomMin,e.zoomMax,t,r,n,i,a,c)};var n=e("filtered-vector"),i=e("gl-mat4/invert"),a=e("gl-mat4/rotate"),o=e("gl-vec3/cross"),s=e("gl-vec3/normalize"),u=e("gl-vec3/dot");function l(e,t,r){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(r,2))}function c(e){return Math.min(1,Math.max(-1,e))}function f(e){var t=Math.abs(e[0]),r=Math.abs(e[1]),n=Math.abs(e[2]),i=[0,0,0];t>Math.max(r,n)?i[2]=1:r>Math.max(t,n)?i[0]=1:i[1]=1;for(var a=0,o=0,u=0;u<3;++u)a+=e[u]*e[u],o+=i[u]*e[u];for(u=0;u<3;++u)i[u]-=o/a*e[u];return s(i,i),i}function d(e,t,r,i,a,o,s,u){this.center=n(r),this.up=n(i),this.right=n(a),this.radius=n([o]),this.angle=n([s,u]),this.angle.bounds=[[-Infinity,-Math.PI/2],[Infinity,Math.PI/2]],this.setDistanceLimits(e,t),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var l=0;l<16;++l)this.computedMatrix[l]=.5;this.recalcMatrix(0)}var h=d.prototype;h.setDistanceLimits=function(e,t){e=e>0?Math.log(e):-Infinity,t=t>0?Math.log(t):Infinity,t=Math.max(t,e),this.radius.bounds[0][0]=e,this.radius.bounds[1][0]=t},h.getDistanceLimits=function(e){var t=this.radius.bounds[0];return e?(e[0]=Math.exp(t[0][0]),e[1]=Math.exp(t[1][0]),e):[Math.exp(t[0][0]),Math.exp(t[1][0])]},h.recalcMatrix=function(e){this.center.curve(e),this.up.curve(e),this.right.curve(e),this.radius.curve(e),this.angle.curve(e);for(var t=this.computedUp,r=this.computedRight,n=0,i=0,a=0;a<3;++a)i+=t[a]*r[a],n+=t[a]*t[a];var u=Math.sqrt(n),c=0;for(a=0;a<3;++a)r[a]-=t[a]*i/n,c+=r[a]*r[a],t[a]/=u;var f=Math.sqrt(c);for(a=0;a<3;++a)r[a]/=f;var d=this.computedToward;o(d,t,r),s(d,d);var h=Math.exp(this.computedRadius[0]),p=this.computedAngle[0],m=this.computedAngle[1],b=Math.cos(p),g=Math.sin(p),v=Math.cos(m),y=Math.sin(m),_=this.computedCenter,x=b*v,w=g*v,E=y,k=-b*y,P=-g*y,M=v,A=this.computedEye,C=this.computedMatrix;for(a=0;a<3;++a){var O=x*r[a]+w*d[a]+E*t[a];C[4*a+1]=k*r[a]+P*d[a]+M*t[a],C[4*a+2]=O,C[4*a+3]=0}var T=C[1],S=C[5],R=C[9],L=C[2],D=C[6],j=C[10],F=S*j-R*D,I=R*L-T*j,N=T*D-S*L,B=l(F,I,N);I/=B,N/=B,C[0]=F/=B,C[4]=I,C[8]=N;for(a=0;a<3;++a)A[a]=_[a]+C[2+4*a]*h;for(a=0;a<3;++a){c=0;for(var G=0;G<3;++G)c+=C[a+4*G]*A[G];C[12+a]=-c}C[15]=1},h.getMatrix=function(e,t){this.recalcMatrix(e);var r=this.computedMatrix;if(t){for(var n=0;n<16;++n)t[n]=r[n];return t}return r};var p=[0,0,0];h.rotate=function(e,t,r,n){if(this.angle.move(e,t,r),n){this.recalcMatrix(e);var i=this.computedMatrix;p[0]=i[2],p[1]=i[6],p[2]=i[10];for(var o=this.computedUp,s=this.computedRight,u=this.computedToward,l=0;l<3;++l)i[4*l]=o[l],i[4*l+1]=s[l],i[4*l+2]=u[l];a(i,i,n,p);for(l=0;l<3;++l)o[l]=i[4*l],s[l]=i[4*l+1];this.up.set(e,o[0],o[1],o[2]),this.right.set(e,s[0],s[1],s[2])}},h.pan=function(e,t,r,n){t=t||0,r=r||0,n=n||0,this.recalcMatrix(e);var i=this.computedMatrix,a=(Math.exp(this.computedRadius[0]),i[1]),o=i[5],s=i[9],u=l(a,o,s),c=i[0],f=i[4],d=i[8],h=c*(a/=u)+f*(o/=u)+d*(s/=u),p=l(c-=a*h,f-=o*h,d-=s*h);this.center.move(e,(c/=p)*t+a*r,(f/=p)*t+o*r,(d/=p)*t+s*r);var m=Math.exp(this.computedRadius[0]);m=Math.max(1e-4,m+n),this.radius.set(e,Math.log(m))},h.translate=function(e,t,r,n){this.center.move(e,t||0,r||0,n||0)},h.setMatrix=function(e,t,r,n){var a=1;"number"==typeof r&&(a=0|r),(a<0||a>3)&&(a=1);var o=(a+2)%3;t||(this.recalcMatrix(e),t=this.computedMatrix);var s=t[a],u=t[a+4],f=t[a+8];if(n){var d=Math.abs(s),h=Math.abs(u),p=Math.abs(f),m=Math.max(d,h,p);d===m?(s=s<0?-1:1,u=f=0):p===m?(f=f<0?-1:1,s=u=0):(u=u<0?-1:1,s=f=0)}else{var b=l(s,u,f);s/=b,u/=b,f/=b}var g,v,y=t[o],_=t[o+4],x=t[o+8],w=y*s+_*u+x*f,E=l(y-=s*w,_-=u*w,x-=f*w),k=u*(x/=E)-f*(_/=E),P=f*(y/=E)-s*x,M=s*_-u*y,A=l(k,P,M);if(k/=A,P/=A,M/=A,this.center.jump(e,U,z,W),this.radius.idle(e),this.up.jump(e,s,u,f),this.right.jump(e,y,_,x),2===a){var C=t[1],O=t[5],T=t[9];g=D<0?-Math.PI/2:Math.PI/2,v=Math.atan2(C*k+O*P+T*M,C*y+O*_+T*x)}else{var S=t[2],R=t[6],L=t[10],D=S*s+R*u+L*f,j=S*y+R*_+L*x,F=S*k+R*P+L*M;g=Math.asin(c(D)),v=Math.atan2(F,j)}this.angle.jump(e,v,g),this.recalcMatrix(e);var I=t[2],N=t[6],B=t[10],G=this.computedMatrix;i(G,t);var q=G[15],U=G[12]/q,z=G[13]/q,W=G[14]/q,V=Math.exp(this.computedRadius[0]);this.center.jump(e,U-I*V,z-N*V,W-B*V)},h.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},h.idle=function(e){this.center.idle(e),this.up.idle(e),this.right.idle(e),this.radius.idle(e),this.angle.idle(e)},h.flush=function(e){this.center.flush(e),this.up.flush(e),this.right.flush(e),this.radius.flush(e),this.angle.flush(e)},h.setDistance=function(e,t){t>0&&this.radius.set(e,Math.log(t))},h.lookAt=function(e,t,r,n){this.recalcMatrix(e),t=t||this.computedEye,r=r||this.computedCenter;var i=(n=n||this.computedUp)[0],a=n[1],o=n[2],s=l(i,a,o);if(!(s<1e-6)){i/=s,a/=s,o/=s;var u=t[0]-r[0],f=t[1]-r[1],d=t[2]-r[2],h=l(u,f,d);if(!(h<1e-6)){u/=h,f/=h,d/=h;var p=this.computedRight,m=p[0],b=p[1],g=p[2],v=i*m+a*b+o*g,y=l(m-=v*i,b-=v*a,g-=v*o);if(!(y<.01&&(y=l(m=a*d-o*f,b=o*u-i*d,g=i*f-a*u))<1e-6)){m/=y,b/=y,g/=y,this.up.set(e,i,a,o),this.right.set(e,m,b,g),this.center.set(e,r[0],r[1],r[2]),this.radius.set(e,Math.log(h));var _=a*g-o*b,x=o*m-i*g,w=i*b-a*m,E=l(_,x,w),k=m*u+b*f+g*d,P=(_/=E)*u+(x/=E)*f+(w/=E)*d,M=Math.asin(c(i*u+a*f+o*d)),A=Math.atan2(P,k),C=this.angle._state,O=C[C.length-1],T=C[C.length-2];O%=2*Math.PI;var S=Math.abs(O+2*Math.PI-A),R=Math.abs(O-A),L=Math.abs(O-2*Math.PI-A);S<R&&(O+=2*Math.PI),L<R&&(O-=2*Math.PI),this.angle.jump(this.angle.lastT(),O,T),this.angle.set(e,A,M)}}}}},{"filtered-vector":56,"gl-mat4/invert":75,"gl-mat4/rotate":81,"gl-vec3/cross":90,"gl-vec3/dot":91,"gl-vec3/normalize":94}],318:[function(e,t,r){(function(e){WebGLDebugUtils=function(){var t;void 0===t&&(t=e);var r=function(e){t.console&&t.console.error?t.console.error(e):function(e){t.console&&t.console.log&&t.console.log(e)}(e)},n={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},bindBuffer:{2:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}},bufferData:{3:{0:!0,2:!0},4:{0:!0,2:!0},5:{0:!0,2:!0}},bufferSubData:{3:{0:!0},4:{0:!0},5:{0:!0}},copyBufferSubData:{5:{0:!0,1:!0}},getBufferSubData:{3:{0:!0},4:{0:!0},5:{0:!0}},blitFramebuffer:{10:{8:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]},9:!0}},framebufferTextureLayer:{5:{0:!0,1:!0}},invalidateFramebuffer:{2:{0:!0}},invalidateSubFramebuffer:{6:{0:!0}},readBuffer:{1:{0:!0}},getInternalformatParameter:{3:{0:!0,1:!0,2:!0}},renderbufferStorageMultisample:{5:{0:!0,2:!0}},texStorage2D:{5:{0:!0,2:!0}},texStorage3D:{6:{0:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0},10:{0:!0,2:!0,6:!0,7:!0}},texImage3D:{10:{0:!0,2:!0,7:!0,8:!0},11:{0:!0,2:!0,7:!0,8:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0},10:{0:!0,6:!0,7:!0}},texSubImage3D:{11:{0:!0,8:!0,9:!0},12:{0:!0,8:!0,9:!0}},copyTexSubImage3D:{9:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0},8:{0:!0,2:!0},9:{0:!0,2:!0}},compressedTexImage3D:{8:{0:!0,2:!0},9:{0:!0,2:!0},10:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0},9:{0:!0,6:!0},10:{0:!0,6:!0}},compressedTexSubImage3D:{10:{0:!0,8:!0},11:{0:!0,8:!0},12:{0:!0,8:!0}},vertexAttribIPointer:{5:{2:!0}},drawArraysInstanced:{4:{0:!0}},drawElementsInstanced:{5:{0:!0,2:!0}},drawRangeElements:{6:{0:!0,4:!0}},readPixels:{7:{4:!0,5:!0},8:{4:!0,5:!0}},clearBufferfv:{3:{0:!0},4:{0:!0}},clearBufferiv:{3:{0:!0},4:{0:!0}},clearBufferuiv:{3:{0:!0},4:{0:!0}},clearBufferfi:{4:{0:!0}},beginQuery:{2:{0:!0}},endQuery:{1:{0:!0}},getQuery:{2:{0:!0,1:!0}},getQueryParameter:{2:{1:!0}},samplerParameteri:{3:{1:!0,2:!0}},samplerParameterf:{3:{1:!0}},getSamplerParameter:{2:{1:!0}},fenceSync:{2:{0:!0,1:{enumBitwiseOr:[]}}},clientWaitSync:{3:{1:{enumBitwiseOr:["SYNC_FLUSH_COMMANDS_BIT"]}}},waitSync:{3:{1:{enumBitwiseOr:[]}}},getSyncParameter:{2:{1:!0}},bindTransformFeedback:{2:{0:!0}},beginTransformFeedback:{1:{0:!0}},transformFeedbackVaryings:{3:{2:!0}},bindBufferBase:{3:{0:!0}},bindBufferRange:{5:{0:!0}},getIndexedParameter:{2:{0:!0}},getActiveUniforms:{3:{2:!0}},getActiveUniformBlockParameter:{3:{2:!0}}},i=null,a=null;function o(e){if(null==i)for(var t in i={},a={},e)"number"==typeof e[t]&&(i[e[t]]=t,a[t]=e[t])}function s(){if(null==i)throw"WebGLDebugUtils.init(ctx) not called"}function u(e){s();var t=i[e];return void 0!==t?"gl."+t:"/*UNKNOWN WebGL ENUM*/ 0x"+e.toString(16)}function l(e,t,r,i){var o;if(void 0!==(o=n[e])&&(void 0!==(o=o[t])&&o[r])){if("object"==typeof o[r]&&void 0!==o[r].enumBitwiseOr){for(var s=o[r].enumBitwiseOr,l=0,c=[],f=0;f<s.length;++f){var d=a[s[f]];0!=(i&d)&&(l|=d,c.push(u(d)))}return l===i?c.join(" | "):u(i)}return u(i)}return null===i?"null":void 0===i?"undefined":i.toString()}function c(e,t,r){e.__defineGetter__(r,function(){return t[r]}),e.__defineSetter__(r,function(e){t[r]=e})}function f(e){var t=!!e.createTransformFeedback;t&&e.bindVertexArray(null);var r=e.getParameter(e.MAX_VERTEX_ATTRIBS),n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n);for(var i=0;i<r;++i)e.disableVertexAttribArray(i),e.vertexAttribPointer(i,4,e.FLOAT,!1,0,0),e.vertexAttrib1f(i,0),t&&e.vertexAttribDivisor(i,0);e.deleteBuffer(n);var a=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);for(i=0;i<a;++i)e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_CUBE_MAP,null),e.bindTexture(e.TEXTURE_2D,null),t&&(e.bindTexture(e.TEXTURE_2D_ARRAY,null),e.bindTexture(e.TEXTURE_3D,null),e.bindSampler(i,null));if(e.activeTexture(e.TEXTURE0),e.useProgram(null),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.DITHER),e.disable(e.SCISSOR_TEST),e.blendColor(0,0,0,0),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.clearColor(0,0,0,0),e.clearDepth(1),e.clearStencil(-1),e.colorMask(!0,!0,!0,!0),e.cullFace(e.BACK),e.depthFunc(e.LESS),e.depthMask(!0),e.depthRange(0,1),e.frontFace(e.CCW),e.hint(e.GENERATE_MIPMAP_HINT,e.DONT_CARE),e.lineWidth(1),e.pixelStorei(e.PACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.UNPACK_COLORSPACE_CONVERSION_WEBGL&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.BROWSER_DEFAULT_WEBGL),e.polygonOffset(0,0),e.sampleCoverage(1,!1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilMask(4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.viewport(0,0,e.canvas.width,e.canvas.height),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT),t){e.drawBuffers([e.BACK]),e.readBuffer(e.BACK),e.bindBuffer(e.COPY_READ_BUFFER,null),e.bindBuffer(e.COPY_WRITE_BUFFER,null),e.bindBuffer(e.PIXEL_PACK_BUFFER,null),e.bindBuffer(e.PIXEL_UNPACK_BUFFER,null);var o=e.getParameter(e.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS);for(i=0;i<o;++i)e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,i,null);var s=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);for(i=0;i<s;++i)e.bindBufferBase(e.UNIFORM_BUFFER,i,null);e.disable(e.RASTERIZER_DISCARD),e.pixelStorei(e.UNPACK_IMAGE_HEIGHT,0),e.pixelStorei(e.UNPACK_SKIP_IMAGES,0),e.pixelStorei(e.UNPACK_ROW_LENGTH,0),e.pixelStorei(e.UNPACK_SKIP_ROWS,0),e.pixelStorei(e.UNPACK_SKIP_PIXELS,0),e.pixelStorei(e.PACK_ROW_LENGTH,0),e.pixelStorei(e.PACK_SKIP_ROWS,0),e.pixelStorei(e.PACK_SKIP_PIXELS,0),e.hint(e.FRAGMENT_SHADER_DERIVATIVE_HINT,e.DONT_CARE)}for(;e.getError(););}return{init:o,mightBeEnum:function(e){return s(),void 0!==i[e]},glEnumToString:u,glFunctionArgToString:l,glFunctionArgsToString:function(e,t){for(var r="",n=t.length,i=0;i<n;++i)r+=(0==i?"":", ")+l(e,n,i,t[i]);return r},makeDebugContext:function e(t,n,i,a){a=a||t,o(t),n=n||function(e,t,n){for(var i="",a=n.length,o=0;o<a;++o)i+=(0==o?"":", ")+l(t,a,o,n[o]);r("WebGL error "+u(e)+" in "+t+"("+i+")")};var s={};function f(e,t){return function(){i&&i(t,arguments);var r=e[t].apply(e,arguments),o=a.getError();return 0!=o&&(s[o]=!0,n(o,t,arguments)),r}}var d={};for(var h in t)if("function"==typeof t[h])if("getExtension"!=h)d[h]=f(t,h);else{var p=f(t,h);d[h]=function(){var r=p.apply(t,arguments);return r?e(r,n,i,a):null}}else c(d,t,h);return d.getError=function(){for(var e in s)if(s.hasOwnProperty(e)&&s[e])return s[e]=!1,e;return t.NO_ERROR},d},makeLostContextSimulatingCanvas:function(e){var r,n,i,a=[],o=[],s={},u=1,l=!1,d=[],h=0,p=0,m=!1,b=0,g={};function v(e){return"function"==typeof e?e:function(t){e.handleEvent(t)}}e.getContext=(i=e.getContext,function(){var a=i.apply(e,arguments);if(a instanceof WebGLRenderingContext||t.WebGL2RenderingContext&&a instanceof WebGL2RenderingContext){if(a!=r){if(r)throw"got different context";n=t.WebGL2RenderingContext&&a instanceof WebGL2RenderingContext,s=function(e){for(var t in e)"function"==typeof e[t]?s[t]=w(e,t):c(s,e,t);s.getError=function(){if(x(),!l)for(;e=r.getError();)g[e]=!0;for(var e in g)if(g[e])return delete g[e],e;return s.NO_ERROR};var i=["createBuffer","createFramebuffer","createProgram","createRenderbuffer","createShader","createTexture"];n&&i.push("createQuery","createSampler","fenceSync","createTransformFeedback","createVertexArray");for(var a=0;a<i.length;++a){var o=i[a];s[o]=function(t){return function(){if(x(),l)return null;var r=t.apply(e,arguments);return r.__webglDebugContextLostId__=u,d.push(r),r}}(e[o])}var f=["getActiveAttrib","getActiveUniform","getBufferParameter","getContextAttributes","getAttachedShaders","getFramebufferAttachmentParameter","getParameter","getProgramParameter","getProgramInfoLog","getRenderbufferParameter","getShaderParameter","getShaderInfoLog","getShaderSource","getTexParameter","getUniform","getUniformLocation","getVertexAttrib"];n&&f.push("getInternalformatParameter","getQuery","getQueryParameter","getSamplerParameter","getSyncParameter","getTransformFeedbackVarying","getIndexedParameter","getUniformIndices","getActiveUniforms","getActiveUniformBlockParameter","getActiveUniformBlockName");for(var a=0;a<f.length;++a){var o=f[a];s[o]=function(t){return function(){return x(),l?null:t.apply(e,arguments)}}(s[o])}var h,p=["isBuffer","isEnabled","isFramebuffer","isProgram","isRenderbuffer","isShader","isTexture"];n&&p.push("isQuery","isSampler","isSync","isTransformFeedback","isVertexArray");for(var a=0;a<p.length;++a){var o=p[a];s[o]=function(t){return function(){return x(),!l&&t.apply(e,arguments)}}(s[o])}return s.checkFramebufferStatus=(h=s.checkFramebufferStatus,function(){return x(),l?s.FRAMEBUFFER_UNSUPPORTED:h.apply(e,arguments)}),s.getAttribLocation=function(t){return function(){return x(),l?-1:t.apply(e,arguments)}}(s.getAttribLocation),s.getVertexAttribOffset=function(t){return function(){return x(),l?0:t.apply(e,arguments)}}(s.getVertexAttribOffset),s.isContextLost=function(){return l},n&&(s.getFragDataLocation=function(t){return function(){return x(),l?-1:t.apply(e,arguments)}}(s.getFragDataLocation),s.clientWaitSync=function(t){return function(){return x(),l?s.WAIT_FAILED:t.apply(e,arguments)}}(s.clientWaitSync),s.getUniformBlockIndex=function(t){return function(){return x(),l?s.INVALID_INDEX:t.apply(e,arguments)}}(s.getUniformBlockIndex)),s}(r=a)}return s}return a});var y=function(e){a.push(v(e))},_=function(e){o.push(v(e))};function x(){++p,l||h==p&&e.loseContext()}function w(e,t){var r=e[t];return function(){if(x(),!l)return r.apply(e,arguments)}}function E(e){return{statusMessage:e,preventDefault:function(){m=!0}}}return function(e){var t=e.addEventListener;e.addEventListener=function(r,n,i){switch(r){case"webglcontextlost":y(n);break;case"webglcontextrestored":_(n);break;default:t.apply(e,arguments)}}}(e),e.loseContext=function(){if(!l){for(l=!0,h=0,++u;r.getError(););!function(){for(var e=Object.keys(g),t=0;t<e.length;++t)delete g[e[t]]}(),g[r.CONTEXT_LOST_WEBGL]=!0;var t=E("context lost"),n=a.slice();setTimeout(function(){for(var r=0;r<n.length;++r)n[r](t);b>=0&&setTimeout(function(){e.restoreContext()},b)},0)}},e.restoreContext=function(){l&&o.length&&setTimeout(function(){if(!m)throw"can not restore. webglcontestlost listener did not call event.preventDefault";!function(){for(var e=0;e<d.length;++e){var t=d[e];t instanceof WebGLBuffer?r.deleteBuffer(t):t instanceof WebGLFramebuffer?r.deleteFramebuffer(t):t instanceof WebGLProgram?r.deleteProgram(t):t instanceof WebGLRenderbuffer?r.deleteRenderbuffer(t):t instanceof WebGLShader?r.deleteShader(t):t instanceof WebGLTexture?r.deleteTexture(t):n&&(t instanceof WebGLQuery?r.deleteQuery(t):t instanceof WebGLSampler?r.deleteSampler(t):t instanceof WebGLSync?r.deleteSync(t):t instanceof WebGLTransformFeedback?r.deleteTransformFeedback(t):t instanceof WebGLVertexArrayObject&&r.deleteVertexArray(t))}}(),f(r),l=!1,p=0,m=!1;for(var e=o.slice(),t=E("context restored"),i=0;i<e.length;++i)e[i](t)},0)},e.loseContextInNCalls=function(e){if(l)throw"You can not ask a lost contet to be lost";h=p+e},e.getNumCalls=function(){return p},e.setRestoreTimeout=function(e){b=e},e},resetToInitialState:f}}(),t.exports=WebGLDebugUtils}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],319:[function(e,t,r){"use strict";var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(e("luma.gl"));const i=e("canvas-sketch"),{GUI:a}=e("dat-gui"),{random:o}=e("canvas-sketch-util"),s=e("./common/create-roaming-camera"),u=e("gl-mat4"),{createSpring:l}=e("spring-animator"),c=()=>h(),f={seed:0,pointCount:3e5,pointSize:1.5,noiseMag:25,freq:.7,hueSpread:.1,hueStart:.56,saturation:.35,lightness:.35,cameraDist:5,dampening:.01,stiffness:1.5};let d,h,p,m,b,g,v=()=>{},y=o.createRandom(f.seed);const _=new a;_.add(f,"seed",0,9999).step(1).onChange(c),_.add(f,"pointCount",0,1e6).step(1).onChange(c),_.add(f,"pointSize",1,100),_.add(f,"noiseMag",0,100),_.add(f,"freq",0,3).onChange(c),_.add(f,"hueSpread",0,1).step(.01),_.add(f,"saturation",0,1).step(.01),_.add(f,"lightness",0,1).step(.01),_.add(f,"dampening",0,1).onChange(c),_.add(f,"stiffness",0,2).onChange(c),_.add(f,"cameraDist",0,10),_.add({next:()=>v()},"next"),_.add({changeNoise:()=>{p.updateValue(y.range(f.noiseMag/50)),m.updateValue(y.range(f.hueSpread)),b.updateValue(y.value()),g.updateValue(y.range(.5,1)*f.pointSize)}},"changeNoise");i(({gl:e})=>{const t=s({canvas:e.canvas,zoomSpeed:4,center:[1,1,1],eye:[0,0,0],dampening:.01,stiffness:1.5,getCameraPosition:()=>y.onSphere(f.cameraDist)});v=t.moveToNextPosition;const r=u.perspective([],Math.PI/4,e.canvas.width/e.canvas.height,.01,1e3);return(h=function(){n.setParameters(e,{clearColor:[1,1,1,1],clearDepth:1,depthTest:!0,depthFunc:e.LEQUAL}),y=o.createRandom(f.seed),p=l(f.dampening,f.stiffness,0),m=l(f.dampening,f.stiffness,0),b=l(f.dampening,f.stiffness,0),g=l(f.dampening,f.stiffness,1);const t=y.insideSphere(500),r=new Array(f.pointCount).fill(null).map(()=>{const e=y.insideSphere(),[r,n,i]=e,a=(y.noise3D(r,n,i,f.freq)+1)*Math.PI,o=y.noise3D(r+t[0],n+t[1],i+t[2],f.freq),s=Math.acos(o);return{position:e,noiseOffset:[Math.sin(s)*Math.cos(a),Math.sin(s)*Math.sin(a),Math.cos(s)],size:y.value(),hueSpreadAmount:o}});d=new n.Model(e,{vs:"#version 300 es\n        precision highp float;\n        in vec3 position;\n        in float size;\n        in vec3 noiseOffset;\n        in float hueSpreadAmount;\n\n        uniform mat4 projection;\n        uniform mat4 view;\n        uniform float sizeMultiplier;\n        uniform float noiseMultiplier;\n        uniform float saturation;\n        uniform float lightness;\n        uniform float hueStart;\n        uniform float hueSpread;\n\n        out vec3 pointColor;\n\n        float hue2rgb(float f1, float f2, float hue) {\n          if (hue < 0.0)\n            hue += 1.0;\n          else if (hue > 1.0)\n            hue -= 1.0;\n          float res;\n          if ((6.0 * hue) < 1.0)\n            res = f1 + (f2 - f1) * 6.0 * hue;\n          else if ((2.0 * hue) < 1.0)\n            res = f2;\n          else if ((3.0 * hue) < 2.0)\n            res = f1 + (f2 - f1) * ((2.0 / 3.0) - hue) * 6.0;\n          else\n            res = f1;\n          return res;\n        }\n\n        vec3 hsl2rgb(vec3 hsl) {\n          vec3 rgb;\n          if (hsl.y == 0.0) {\n            rgb = vec3(hsl.z); // Luminance\n          } else {\n            float f2;\n            if (hsl.z < 0.5) {\n              f2 = hsl.z * (1.0 + hsl.y);\n            } else {\n              f2 = hsl.z + hsl.y - hsl.y * hsl.z;\n            }\n            float f1 = 2.0 * hsl.z - f2;\n            rgb.r = hue2rgb(f1, f2, hsl.x + (1.0/3.0));\n            rgb.g = hue2rgb(f1, f2, hsl.x);\n            rgb.b = hue2rgb(f1, f2, hsl.x - (1.0/3.0));\n          }\n          return rgb;\n        }\n\n        void main() {\n          vec3 pos = position + noiseOffset * noiseMultiplier;\n          gl_Position = projection * view * vec4(pos, 1);\n          gl_PointSize = size * sizeMultiplier;\n          float hue = hueSpreadAmount * hueSpread + hueStart;\n          pointColor = hsl2rgb(vec3(hue, saturation, lightness));\n        }\n      ",fs:"#version 300 es\n        precision highp float;\n        in vec3 pointColor;\n        out vec4 fragColor;\n        void main() {\n          vec2 cxy = 2.0 * gl_PointCoord - 1.0;\n          float r = dot(cxy, cxy);\n          float delta = fwidth(r);\n          float alpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);\n          if (r > 0.9) {\n            discard;\n          }\n          fragColor = vec4(pointColor * alpha, alpha);\n        }\n      ",attributes:{position:new n.Buffer(e,{data:new Float32Array(r.map(e=>e.position).flat()),size:3,type:e.FLOAT}),size:new n.Buffer(e,{data:new Float32Array(r.map(e=>e.size).flat()),size:1,type:e.FLOAT}),noiseOffset:new n.Buffer(e,{data:new Float32Array(r.map(e=>e.noiseOffset).flat()),size:3,type:e.FLOAT}),hueSpreadAmount:new n.Buffer(e,{data:new Float32Array(r.map(e=>e.hueSpreadAmount).flat()),size:1,type:e.FLOAT})},drawMode:e.POINTS,vertexCount:r.length})})(),()=>{e.viewport(0,0,e.canvas.width,e.canvas.height),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),t.tick(),d.draw({uniforms:{view:t.getMatrix(),projection:r,sizeMultiplier:g.tick(),noiseMultiplier:p.tick(),saturation:f.saturation,lightness:f.lightness,hueStart:b.tick(),hueSpread:m.tick()}})}},{animate:!0,context:"webgl2",attributes:{antialias:!0},dimensions:[1024,1024]})},{"./common/create-roaming-camera":320,"canvas-sketch":49,"canvas-sketch-util":35,"dat-gui":52,"gl-mat4":74,"luma.gl":122,"spring-animator":315}],320:[function(e,t,r){const{createSpring:n}=e("spring-animator"),i=e("3d-view-controls");t.exports=function(e){const{canvas:t,zoomSpeed:r,center:a,eye:o,getCameraPosition:s,dampening:u,stiffness:l,moveEveryNFrames:c}=e,f=c||600;let d=!0,h=0;t.addEventListener("mousedown",y);const p=i(t,{zoomSpeed:r}),m=n(u,l,a[0]),b=n(u,l,a[1]),g=n(u,l,a[2]);function v(){const[e,t,r]=s();m.updateValue(e),b.updateValue(t),g.updateValue(r)}function y(){d=!1,h=0}function _(){m.updateValue(p.eye[0],!1),b.updateValue(p.eye[1],!1),g.updateValue(p.eye[2],!1),v(),h=0,d=!0}return p.lookAt(a,o,[1,1,1]),v(),window.camera=p,{tick:function(){h+=1,p.tick(),d&&(p.center=[m.tick(),b.tick(),g.tick()]),h>=f&&(v(),h=0)},getMatrix:function(){return p.matrix},getCenter:function(){return p.center},startRoaming:_,stopRoaming:y,_camera:p,moveToNextPosition:_}}},{"3d-view-controls":1,"spring-animator":315}],321:[function(e,t,r){(function(e){e.CANVAS_SKETCH_DEFAULT_STORAGE_KEY=window.location.href}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[319,321]);</script>