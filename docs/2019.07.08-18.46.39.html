<!doctype html><html lang=en><meta charset=UTF-8><meta name=viewport content="width=device-width,shrink-to-fit=0,user-scalable=no,minimum-scale=1,maximum-scale=1"><title>2019.07.08-18.46.39.js</title><style>html{width:100%;height:100%;display:flex;justify-content:center;align-items:center;flex-direction:column}body{width:100%;height:100%;display:flex;justify-content:center;align-items:center;flex-direction:row;margin:0}canvas{margin:auto;display:block;box-shadow:0 2px 12px -2px rgba(0,0,0,.15)}</style><body><script>!function(){return function e(t,i,r){function n(s,o){if(!i[s]){if(!t[s]){var c="function"==typeof require&&require;if(!o&&c)return c(s,!0);if(a)return a(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var h=i[s]={exports:{}};t[s][0].call(h.exports,function(e){return n(t[s][1][e]||e)},h,h.exports,e,t,i,r)}return i[s].exports}for(var a="function"==typeof require&&require,s=0;s<r.length;s++)n(r[s]);return n}}()({1:[function(e,t,i){"use strict";t.exports=function(e,t){e=e||document.body,t=t||{};var i=[.01,Infinity];"distanceLimits"in t&&(i[0]=t.distanceLimits[0],i[1]=t.distanceLimits[1]);"zoomMin"in t&&(i[0]=t.zoomMin);"zoomMax"in t&&(i[1]=t.zoomMax);var f=n({center:t.center||[0,0,0],up:t.up||[0,1,0],eye:t.eye||[0,0,10],mode:t.mode||"orbit",distanceLimits:i}),h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u=0,l=e.clientWidth,d=e.clientHeight,_={view:f,element:e,delay:t.delay||16,rotateSpeed:t.rotateSpeed||1,zoomSpeed:t.zoomSpeed||1,translateSpeed:t.translateSpeed||1,flipX:!!t.flipX,flipY:!!t.flipY,modes:f.modes,tick:function(){var t=r(),i=this.delay;f.idle(t-i),f.flush(t-(100+2*i));var n=t-2*i;f.recalcMatrix(n);for(var a=!0,s=f.computedMatrix,o=0;o<16;++o)a=a&&h[o]===s[o],h[o]=s[o];var c=e.clientWidth===l&&e.clientHeight===d;return l=e.clientWidth,d=e.clientHeight,a?!c:(u=Math.exp(f.computedRadius[0]),!0)},lookAt:function(e,t,i){f.lookAt(f.lastT(),e,t,i)},rotate:function(e,t,i){f.rotate(f.lastT(),e,t,i)},pan:function(e,t,i){f.pan(f.lastT(),e,t,i)},translate:function(e,t,i){f.translate(f.lastT(),e,t,i)}};Object.defineProperties(_,{matrix:{get:function(){return f.computedMatrix},set:function(e){return f.setMatrix(f.lastT(),e),f.computedMatrix},enumerable:!0},mode:{get:function(){return f.getMode()},set:function(e){return f.setMode(e),f.getMode()},enumerable:!0},center:{get:function(){return f.computedCenter},set:function(e){return f.lookAt(f.lastT(),e),f.computedCenter},enumerable:!0},eye:{get:function(){return f.computedEye},set:function(e){return f.lookAt(f.lastT(),null,e),f.computedEye},enumerable:!0},up:{get:function(){return f.computedUp},set:function(e){return f.lookAt(f.lastT(),null,null,e),f.computedUp},enumerable:!0},distance:{get:function(){return u},set:function(e){return f.setDistance(f.lastT(),e),e},enumerable:!0},distanceLimits:{get:function(){return f.getDistanceLimits(i)},set:function(e){return f.setDistanceLimits(e),e},enumerable:!0}}),e.addEventListener("contextmenu",function(e){return e.preventDefault(),!1});var p=0,m=0,E={shift:!1,control:!1,alt:!1,meta:!1};function b(t,i,n,a){var s=1/e.clientHeight,o=s*(i-p),c=s*(n-m),h=_.flipX?1:-1,l=_.flipY?1:-1,d=Math.PI*_.rotateSpeed,b=r();if(1&t)a.shift?f.rotate(b,0,0,-o*d):f.rotate(b,h*d*o,-l*d*c,0);else if(2&t)f.pan(b,-_.translateSpeed*o*u,_.translateSpeed*c*u,0);else if(4&t){var g=_.zoomSpeed*c/window.innerHeight*(b-f.lastT())*50;f.pan(b,0,0,u*(Math.exp(g)-1))}p=i,m=n,E=a}return a(e,b),e.addEventListener("touchstart",function(t){var i=o(t.changedTouches[0],e);b(0,i[0],i[1],E),b(1,i[0],i[1],E),t.preventDefault()},!!c&&{passive:!1}),e.addEventListener("touchmove",function(t){var i=o(t.changedTouches[0],e);b(1,i[0],i[1],E),t.preventDefault()},!!c&&{passive:!1}),e.addEventListener("touchend",function(t){o(t.changedTouches[0],e),b(0,p,m,E),t.preventDefault()},!!c&&{passive:!1}),s(e,function(e,t,i){var n=_.flipX?1:-1,a=_.flipY?1:-1,s=r();if(Math.abs(e)>Math.abs(t))f.rotate(s,0,0,-e*n*Math.PI*_.rotateSpeed/window.innerWidth);else{var o=_.zoomSpeed*a*t/window.innerHeight*(s-f.lastT())/100;f.pan(s,0,0,u*(Math.exp(o)-1))}},!0),_};var r=e("right-now"),n=e("3d-view"),a=e("mouse-change"),s=e("mouse-wheel"),o=e("mouse-event-offset"),c=e("has-passive-events")},{"3d-view":2,"has-passive-events":57,"mouse-change":65,"mouse-event-offset":66,"mouse-wheel":68,"right-now":78}],2:[function(e,t,i){"use strict";t.exports=function(e){var t=(e=e||{}).eye||[0,0,1],i=e.center||[0,0,0],o=e.up||[0,1,0],c=e.distanceLimits||[0,Infinity],f=e.mode||"turntable",h=r(),u=n(),l=a();return h.setDistanceLimits(c[0],c[1]),h.lookAt(0,t,i,o),u.setDistanceLimits(c[0],c[1]),u.lookAt(0,t,i,o),l.setDistanceLimits(c[0],c[1]),l.lookAt(0,t,i,o),new s({turntable:h,orbit:u,matrix:l},f)};var r=e("turntable-camera-controller"),n=e("orbit-camera-controller"),a=e("matrix-camera-controller");function s(e,t){this._controllerNames=Object.keys(e),this._controllerList=this._controllerNames.map(function(t){return e[t]}),this._mode=t,this._active=e[t],this._active||(this._mode="turntable",this._active=e.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var o=s.prototype;[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]].forEach(function(e){for(var t=e[0],i=[],r=0;r<e[1];++r)i.push("a"+r);var n="var cc=this._controllerList;for(var i=0;i<cc.length;++i){cc[i]."+e[0]+"("+i.join()+")}";o[t]=Function.apply(null,i.concat(n))}),o.recalcMatrix=function(e){this._active.recalcMatrix(e)},o.getDistance=function(e){return this._active.getDistance(e)},o.getDistanceLimits=function(e){return this._active.getDistanceLimits(e)},o.lastT=function(){return this._active.lastT()},o.setMode=function(e){if(e!==this._mode){var t=this._controllerNames.indexOf(e);if(!(t<0)){var i=this._active,r=this._controllerList[t],n=Math.max(i.lastT(),r.lastT());i.recalcMatrix(n),r.setMatrix(n,i.computedMatrix),this._active=r,this._mode=e,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},o.getMode=function(){return this._mode}},{"matrix-camera-controller":64,"orbit-camera-controller":70,"turntable-camera-controller":82}],3:[function(e,t,i){"use strict";function r(e,t,i,r,n,a){var s=["function ",e,"(a,l,h,",r.join(","),"){",a?"":"var i=",i?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",n?".get(m)":"[m]"];return a?t.indexOf("c")<0?s.push(";if(x===y){return m}else if(x<=y){"):s.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):s.push(";if(",t,"){i=m;"),s.push(i?"l=m+1}else{h=m-1}":"h=m-1}else{l=m+1}"),s.push("}"),s.push(a?"return -1};":"return i};"),s.join("")}function n(e,t,i,n){return new Function([r("A","x"+e+"y",t,["y"],!1,n),r("B","x"+e+"y",t,["y"],!0,n),r("P","c(x,y)"+e+"0",t,["y","c"],!1,n),r("Q","c(x,y)"+e+"0",t,["y","c"],!0,n),"function dispatchBsearch",i,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",i].join(""))()}t.exports={ge:n(">=",!1,"GE"),gt:n(">",!1,"GT"),lt:n("<",!0,"LT"),le:n("<=",!0,"LE"),eq:n("-",!0,"EQ",!0)}},{}],4:[function(e,t,i){var r=e("element-size");t.exports=function(e,t,i){var a="SVG"===e.nodeName.toUpperCase();return e.style.position=e.style.position||"absolute",e.style.top=0,e.style.left=0,s.scale=parseFloat(i||1),s.parent=t,s();function s(){var t=s.parent||e.parentNode;if("function"==typeof t)var i=t(n)||n,o=i[0],c=i[1];else if(t&&t!==document.body)var f=r(t),o=0|f[0],c=0|f[1];else var o=window.innerWidth,c=window.innerHeight;return a?(e.setAttribute("width",o*s.scale+"px"),e.setAttribute("height",c*s.scale+"px")):(e.width=o*s.scale,e.height=c*s.scale),e.style.width=o+"px",e.style.height=c+"px",s}};var n=new Float32Array(2)},{"element-size":16}],5:[function(e,t,i){var r=e("seed-random"),n=e("simplex-noise"),a=e("defined");t.exports=function e(t){t=a(t,null);var i,s,o,c=Math.random,f=null,h=!1;return u(t),{value:l,createRandom:function(t){return e(t)},setSeed:u,getSeed:function(){return i},getRandomSeed:function(){return String(Math.floor(1e6*Math.random()))},valueNonZero:function(){for(var e=0;0===e;)e=l();return e},permuteNoise:function(){o=d()},noise1D:function(e,t,i){if(!isFinite(e))throw new TypeError("x component for noise() must be finite");return t=a(t,1),(i=a(i,1))*o.noise2D(e*t,0)},noise2D:function(e,t,i,r){if(!isFinite(e))throw new TypeError("x component for noise() must be finite");if(!isFinite(t))throw new TypeError("y component for noise() must be finite");return i=a(i,1),(r=a(r,1))*o.noise2D(e*i,t*i)},noise3D:function(e,t,i,r,n){if(!isFinite(e))throw new TypeError("x component for noise() must be finite");if(!isFinite(t))throw new TypeError("y component for noise() must be finite");if(!isFinite(i))throw new TypeError("z component for noise() must be finite");return r=a(r,1),(n=a(n,1))*o.noise3D(e*r,t*r,i*r)},noise4D:function(e,t,i,r,n,s){if(!isFinite(e))throw new TypeError("x component for noise() must be finite");if(!isFinite(t))throw new TypeError("y component for noise() must be finite");if(!isFinite(i))throw new TypeError("z component for noise() must be finite");if(!isFinite(r))throw new TypeError("w component for noise() must be finite");return n=a(n,1),(s=a(s,1))*o.noise4D(e*n,t*n,i*n,r*n)},sign:function(){return _()?1:-1},boolean:_,chance:function(e){if("number"!=typeof(e=a(e,.5)))throw new TypeError("expected n to be a number");return l()<e},range:p,rangeFloor:m,pick:function(e){return 0===e.length?void 0:e[m(0,e.length)]},shuffle:function(e){if(!Array.isArray(e))throw new TypeError("Expected Array, got "+typeof e);for(var t,i,r=e.length,n=e.slice();r;)t=Math.floor(l()*r--),i=n[r],n[r]=n[t],n[t]=i;return n},onCircle:E,insideCircle:function(e,t){e=a(e,1),E(1,t=t||[]);var i=e*Math.sqrt(l());return t[0]*=i,t[1]*=i,t},onSphere:function(e,t){e=a(e,1),t=t||[];var i=l()*Math.PI*2,r=2*l()-1,n=i,s=Math.acos(r);return t[0]=e*Math.sin(s)*Math.cos(n),t[1]=e*Math.sin(s)*Math.sin(n),t[2]=e*Math.cos(s),t},insideSphere:function(e,t){e=a(e,1),t=t||[];var i=l()*Math.PI*2,r=2*l()-1,n=l(),s=i,o=Math.acos(r),c=e*Math.cbrt(n);return t[0]=c*Math.sin(o)*Math.cos(s),t[1]=c*Math.sin(o)*Math.sin(s),t[2]=c*Math.cos(o),t},quaternion:function(e){e=e||[];var t=l(),i=l(),r=l(),n=Math.sqrt(1-t),a=Math.sqrt(t),s=2*Math.PI*i,o=2*Math.PI*r,c=Math.sin(s)*n,f=Math.cos(s)*n,h=Math.sin(o)*a,u=Math.cos(o)*a;return e[0]=c,e[1]=f,e[2]=h,e[3]=u,e},weighted:g,weightedSet:function(e){return 0===(e=e||[]).length?null:e[b(e)].value},weightedSetIndex:b,gaussian:function(e,t){if(e=a(e,0),t=a(t,1),h){h=!1;var i=f;return f=null,e+t*i}var r=0,n=0,s=0;do{r=2*l()-1,n=2*l()-1,s=r*r+n*n}while(s>=1||0===s);var o=Math.sqrt(-2*Math.log(s)/s);return f=n*o,h=!0,e+t*(r*o)}};function u(e,t){"number"==typeof e||"string"==typeof e?s=r(i=e,t):(i=void 0,s=c),o=d(),f=null,h=!1}function l(){return s()}function d(){return new n(s)}function _(){return l()>.5}function p(e,t){if(void 0===t&&(t=e,e=0),"number"!=typeof e||"number"!=typeof t)throw new TypeError("Expected all arguments to be numbers");return l()*(t-e)+e}function m(e,t){if(void 0===t&&(t=e,e=0),"number"!=typeof e||"number"!=typeof t)throw new TypeError("Expected all arguments to be numbers");return Math.floor(p(e,t))}function E(e,t){e=a(e,1),t=t||[];var i=2*l()*Math.PI;return t[0]=e*Math.cos(i),t[1]=e*Math.sin(i),t}function b(e){return 0===(e=e||[]).length?-1:g(e.map(function(e){return e.weight}))}function g(e){if(0===(e=e||[]).length)return-1;var t,i=0;for(t=0;t<e.length;t++)i+=e[t];if(i<=0)throw new Error("Weights must sum to > 0");var r=l()*i;for(t=0;t<e.length;t++){if(r<e[t])return t;r-=e[t]}return 0}}()},{defined:15,"seed-random":79,"simplex-noise":80}],6:[function(e,t,i){(function(r){!function(r,n){"object"==typeof i&&void 0!==t?t.exports=n(e("convert-length")):"function"==typeof define&&define.amd?define(["convert-length"],n):r.canvasSketch=n(null)}(this,function(e){e=e&&e.hasOwnProperty("default")?e.default:e;var t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;var a=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,r){for(var a,s,o=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var f in a=Object(arguments[c]))i.call(a,f)&&(o[f]=a[f]);if(t){s=t(a);for(var h=0;h<s.length;h++)n.call(a,s[h])&&(o[s[h]]=a[s[h]])}}return o},s="undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:{};function o(e,t){return e(t={exports:{}},t.exports),t.exports}var c=s.performance&&s.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date},f=function(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then};var h=function(e){return!(!e||"object"!=typeof e)&&("object"==typeof window&&"object"==typeof window.Node?e instanceof window.Node:"number"==typeof e.nodeType&&"string"==typeof e.nodeName)};function u(){return"undefined"!=typeof window&&window["canvas-sketch-cli"]}function l(){for(var e=arguments,t=0;t<arguments.length;t++)if(null!=e[t])return e[t]}function d(){return"undefined"!=typeof document}var _,p=o(function(e,t){function i(e){var t=[];for(var i in e)t.push(i);return t}(e.exports="function"==typeof Object.keys?Object.keys:i).shim=i}),m=o(function(e,t){var i="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function n(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=i?r:n).supported=r,t.unsupported=n}),E=o(function(e){var t=Array.prototype.slice,i=e.exports=function(e,a,s){return s||(s={}),e===a||(e instanceof Date&&a instanceof Date?e.getTime()===a.getTime():!e||!a||"object"!=typeof e&&"object"!=typeof a?s.strict?e===a:e==a:function(e,a,s){var o,c;if(r(e)||r(a))return!1;if(e.prototype!==a.prototype)return!1;if(m(e))return!!m(a)&&(e=t.call(e),a=t.call(a),i(e,a,s));if(n(e)){if(!n(a))return!1;if(e.length!==a.length)return!1;for(o=0;o<e.length;o++)if(e[o]!==a[o])return!1;return!0}try{var f=p(e),h=p(a)}catch(e){return!1}if(f.length!=h.length)return!1;for(f.sort(),h.sort(),o=f.length-1;o>=0;o--)if(f[o]!=h[o])return!1;for(o=f.length-1;o>=0;o--)if(!i(e[c=f[o]],a[c],s))return!1;return typeof e==typeof a}(e,a,s))};function r(e){return null==e}function n(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}}),b=o(function(e,t){!function(t){var i,r,n,a=(i=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,r=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,n=/[^-+\dA-Z]/g,function(e,t,o,c){if(1!==arguments.length||"string"!==(null===(f=e)?"null":void 0===f?"undefined":"object"!=typeof f?typeof f:Array.isArray(f)?"array":{}.toString.call(f).slice(8,-1).toLowerCase())||/\d/.test(e)||(t=e,e=void 0),(e=e||new Date)instanceof Date||(e=new Date(e)),isNaN(e))throw TypeError("Invalid date");var f,h=(t=String(a.masks[t]||t||a.masks.default)).slice(0,4);"UTC:"!==h&&"GMT:"!==h||(t=t.slice(4),o=!0,"GMT:"===h&&(c=!0));var u=o?"getUTC":"get",l=e[u+"Date"](),d=e[u+"Day"](),_=e[u+"Month"](),p=e[u+"FullYear"](),m=e[u+"Hours"](),E=e[u+"Minutes"](),b=e[u+"Seconds"](),g=e[u+"Milliseconds"](),A=o?0:e.getTimezoneOffset(),R=function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var i=new Date(t.getFullYear(),0,4);i.setDate(i.getDate()-(i.getDay()+6)%7+3);var r=t.getTimezoneOffset()-i.getTimezoneOffset();return t.setHours(t.getHours()-r),1+Math.floor((t-i)/6048e5)}(e),T=function(e){var t=e.getDay();return 0===t&&(t=7),t}(e),v={d:l,dd:s(l),ddd:a.i18n.dayNames[d],dddd:a.i18n.dayNames[d+7],m:_+1,mm:s(_+1),mmm:a.i18n.monthNames[_],mmmm:a.i18n.monthNames[_+12],yy:String(p).slice(2),yyyy:p,h:m%12||12,hh:s(m%12||12),H:m,HH:s(m),M:E,MM:s(E),s:b,ss:s(b),l:s(g,3),L:s(Math.round(g/10)),t:m<12?a.i18n.timeNames[0]:a.i18n.timeNames[1],tt:m<12?a.i18n.timeNames[2]:a.i18n.timeNames[3],T:m<12?a.i18n.timeNames[4]:a.i18n.timeNames[5],TT:m<12?a.i18n.timeNames[6]:a.i18n.timeNames[7],Z:c?"GMT":o?"UTC":(String(e).match(r)||[""]).pop().replace(n,""),o:(A>0?"-":"+")+s(100*Math.floor(Math.abs(A)/60)+Math.abs(A)%60,4),S:["th","st","nd","rd"][l%10>3?0:(l%100-l%10!=10)*l%10],W:R,N:T};return t.replace(i,function(e){return e in v?v[e]:e.slice(1,e.length-1)})});function s(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e}a.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},a.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},e.exports=a}()}),g="",A=function(e,t){if("string"!=typeof e)throw new TypeError("expected a string");if(1===t)return e;if(2===t)return e+e;var i=e.length*t;if(_!==e||void 0===_)_=e,g="";else if(g.length>=i)return g.substr(0,i);for(;i>g.length&&t>1;)1&t&&(g+=e),t>>=1,e+=e;return g=(g+=e).substr(0,i)};var R,T=function(e,t,i){return e=e.toString(),void 0===t?e:(i=0===i?"0":i?i.toString():" ",A(i,t-e.length)+e)},v=function(){},S={extension:"",prefix:"",suffix:""},y=["image/png","image/jpeg","image/webp"];function M(e,t){return void 0===t&&(t={}),new Promise(function(i,r){t=a({},S,t);var n=w(Object.assign({},t,{frame:void 0})),s=e?"streamStart":"streamEnd",o=u();return o&&o.output&&"function"==typeof o[s]?o[s](a({},t,{filename:n})).then(function(e){return i(e)}):i({filename:n,client:!1})})}function x(e,t){return void 0===t&&(t={}),function(e){return new Promise(function(t){var i=e.indexOf(",");if(-1!==i){for(var r=e.slice(i+1),n=window.atob(r),a=e.slice(0,i),s=/data:([^;]+)/.exec(a),o=(s?s[1]:"")||void 0,c=new ArrayBuffer(n.length),f=new Uint8Array(c),h=0;h<n.length;h++)f[h]=n.charCodeAt(h);t(new window.Blob([c],{type:o}))}else t(new window.Blob)})}(e).then(function(e){return N(e,t)})}function N(e,t){return void 0===t&&(t={}),new Promise(function(i){var r=(t=a({},S,t)).filename,n=u();if(n&&"function"==typeof n.saveBlob&&n.output)return n.saveBlob(e,a({},t,{filename:r})).then(function(e){return i(e)});R||((R=document.createElement("a")).style.visibility="hidden",R.target="_blank"),R.download=r,R.href=window.URL.createObjectURL(e),document.body.appendChild(R),R.onclick=function(){R.onclick=v,setTimeout(function(){window.URL.revokeObjectURL(e),R.parentElement&&R.parentElement.removeChild(R),R.removeAttribute("href"),i({filename:r,client:!1})})},R.click()})}function w(e){if(void 0===e&&(e={}),"function"==typeof(e=a({},e)).file)return e.file(e);if(e.file)return e.file;var t,i=null,r="";("string"==typeof e.extension&&(r=e.extension),"number"==typeof e.frame)&&(t="number"==typeof e.totalFrames?e.totalFrames:Math.max(1e3,e.frame),i=T(String(e.frame),String(t).length,"0"));var n=isFinite(e.totalLayers)&&isFinite(e.layer)&&e.totalLayers>1?""+e.layer:"";return null!=i?[n,i].filter(Boolean).join("-")+r:[e.prefix,e.name||e.timeStamp,n,e.hash,e.suffix].filter(Boolean).join("-")+r}var C={dimension:"dimensions",animated:"animate",animating:"animate",unit:"units",P5:"p5",pixellated:"pixelated",looping:"loop",pixelPerInch:"pixels"},I=["dimensions","units","pixelsPerInch","orientation","scaleToFit","scaleToView","bleed","pixelRatio","exportPixelRatio","maxPixelRatio","scaleContext","resizeCanvas","styleCanvas","canvas","context","attributes","parent","file","name","prefix","suffix","animate","playing","loop","duration","totalFrames","fps","playbackRate","timeScale","frame","time","flush","pixelated","hotkeys","p5","id","scaleToFitPadding","data","params","encoding","encodingQuality"],F=function(e){Object.keys(e).forEach(function(e){e in C?console.warn('[canvas-sketch] Could not recognize the setting "'+e+'", did you mean "'+C[e]+'"?'):I.includes(e)||console.warn('[canvas-sketch] Could not recognize the setting "'+e+'"')})};var O=[["postcard",101.6,152.4],["poster-small",280,430],["poster",460,610],["poster-large",610,910],["business-card",50.8,88.9],["2r",64,89],["3r",89,127],["4r",102,152],["5r",127,178],["6r",152,203],["8r",203,254],["10r",254,305],["11r",279,356],["12r",305,381],["a0",841,1189],["a1",594,841],["a2",420,594],["a3",297,420],["a4",210,297],["a5",148,210],["a6",105,148],["a7",74,105],["a8",52,74],["a9",37,52],["a10",26,37],["2a0",1189,1682],["4a0",1682,2378],["b0",1e3,1414],["b1",707,1e3],["b1+",720,1020],["b2",500,707],["b2+",520,720],["b3",353,500],["b4",250,353],["b5",176,250],["b6",125,176],["b7",88,125],["b8",62,88],["b9",44,62],["b10",31,44],["b11",22,32],["b12",16,22],["c0",917,1297],["c1",648,917],["c2",458,648],["c3",324,458],["c4",229,324],["c5",162,229],["c6",114,162],["c7",81,114],["c8",57,81],["c9",40,57],["c10",28,40],["c11",22,32],["c12",16,22],["half-letter",5.5,8.5,"in"],["letter",8.5,11,"in"],["legal",8.5,14,"in"],["junior-legal",5,8,"in"],["ledger",11,17,"in"],["tabloid",11,17,"in"],["ansi-a",8.5,11,"in"],["ansi-b",11,17,"in"],["ansi-c",17,22,"in"],["ansi-d",22,34,"in"],["ansi-e",34,44,"in"],["arch-a",9,12,"in"],["arch-b",12,18,"in"],["arch-c",18,24,"in"],["arch-d",24,36,"in"],["arch-e",36,48,"in"],["arch-e1",30,42,"in"],["arch-e2",26,38,"in"],["arch-e3",27,39,"in"]].reduce(function(e,t){var i={units:t[3]||"mm",dimensions:[t[1],t[2]]};return e[t[0]]=i,e[t[0].replace(/-/g," ")]=i,e},{});function D(t,i,r,n){return void 0===i&&(i="px"),void 0===r&&(r="px"),void 0===n&&(n=72),e(t,i,r,{pixelsPerInch:n,precision:4,roundPixel:!0})}function B(e,t){var i,r,n,a,s,o,c=d(),f=t.dimensions,h=function(e){return!(!e.dimensions||"string"!=typeof e.dimensions&&!(Array.isArray(e.dimensions)&&e.dimensions.length>=2))}(t),u=e.exporting,_=!!h&&!1!==t.scaleToFit,p=!(!u&&h)||t.scaleToView;c||(_=p=!1);var m,E,b=t.units,g="number"==typeof t.pixelsPerInch&&isFinite(t.pixelsPerInch)?t.pixelsPerInch:72,A=l(t.bleed,0),R=c?window.devicePixelRatio:1,T=p?R:1;"number"==typeof t.pixelRatio&&isFinite(t.pixelRatio)?E=l(t.exportPixelRatio,m=t.pixelRatio):h?(m=T,E=l(t.exportPixelRatio,1)):E=l(t.exportPixelRatio,m=R),"number"==typeof t.maxPixelRatio&&isFinite(t.maxPixelRatio)&&(m=Math.min(t.maxPixelRatio,m)),u&&(m=E);var v,S,y=function(e,t){if(!d())return[300,150];var i=t.parent||window;if(i===window||i===document||i===document.body)return[window.innerWidth,window.innerHeight];var r=i.getBoundingClientRect();return[r.width,r.height]}(0,t),M=y[0],x=y[1];if(h){var N=function(e,t,i){if(void 0===t&&(t="px"),void 0===i&&(i=72),"string"==typeof e){var r=e.toLowerCase();if(!(r in O))throw new Error('The dimension preset "'+e+'" is not supported or could not be found; try using a4, a3, postcard, letter, etc.');var n=O[r];return n.dimensions.map(function(e){return D(e,n.units,t,i)})}return e}(f,b,g),w=Math.max(N[0],N[1]),C=Math.min(N[0],N[1]);if(t.orientation){var I="landscape"===t.orientation;i=I?w:C,r=I?C:w}else i=N[0],r=N[1];v=i,S=r,i+=2*A,r+=2*A}else v=i=M,S=r=x;var F=i,B=r;if(h&&b&&(F=D(i,b,"px",g),B=D(r,b,"px",g)),n=Math.round(F),a=Math.round(B),_&&!u&&h){var L=i/r,P=M/x,U=l(t.scaleToFitPadding,40),G=Math.round(M-2*U),k=Math.round(x-2*U);(n>G||a>k)&&(P>L?(a=k,n=Math.round(a*L)):(n=G,a=Math.round(n/L)))}return{bleed:A,pixelRatio:m,width:i,height:r,dimensions:[i,r],units:b||"px",scaleX:(s=p?Math.round(m*n):Math.round(m*F))/i,scaleY:(o=p?Math.round(m*a):Math.round(m*B))/r,viewportWidth:p?Math.round(n):Math.round(F),viewportHeight:p?Math.round(a):Math.round(B),canvasWidth:s,canvasHeight:o,trimWidth:v,trimHeight:S,styleWidth:n,styleHeight:a}}var L=function(e,t){if("string"!=typeof e)throw new TypeError("must specify type string");if(t=t||{},"undefined"==typeof document&&!t.canvas)return null;var i=t.canvas||document.createElement("canvas");"number"==typeof t.width&&(i.width=t.width);"number"==typeof t.height&&(i.height=t.height);var r,n=t;try{var a=[e];0===e.indexOf("webgl")&&a.push("experimental-"+e);for(var s=0;s<a.length;s++)if(r=i.getContext(a[s],n))return r}catch(e){r=null}return r||null};function P(e){var t,i;void 0===e&&(e={});var r=!1;if(!1!==e.canvas){if(!(t=e.context)||"string"==typeof t){var n=e.canvas;n||(n=function(){if(!d())throw new Error("It appears you are runing from Node.js or a non-browser environment. Try passing in an existing { canvas } interface instead.");return document.createElement("canvas")}(),r=!0);var s=t||"2d";if("function"!=typeof n.getContext)throw new Error("The specified { canvas } element does not have a getContext() function, maybe it is not a <canvas> tag?");if(!(t=L(s,a({},e.attributes,{canvas:n}))))throw new Error("Failed at canvas.getContext('"+s+"') - the browser may not support this context, or a different context may already be in use with this canvas.")}if(i=t.canvas,e.canvas&&i!==e.canvas)throw new Error("The { canvas } and { context } settings must point to the same underlying canvas element");e.pixelated&&(t.imageSmoothingEnabled=!1,t.mozImageSmoothingEnabled=!1,t.oImageSmoothingEnabled=!1,t.webkitImageSmoothingEnabled=!1,t.msImageSmoothingEnabled=!1,i.style["image-rendering"]="pixelated")}return{canvas:i,context:t,ownsCanvas:r}}var U=function(){var e=this;this._settings={},this._props={},this._sketch=void 0,this._raf=null,this._lastRedrawResult=void 0,this._isP5Resizing=!1,this._keyboardShortcuts=function(e){void 0===e&&(e={});var t=function(t){if(e.enabled()){var i=u();83!==t.keyCode||t.altKey||!t.metaKey&&!t.ctrlKey?32===t.keyCode?e.togglePlay(t):i&&!t.altKey&&75===t.keyCode&&(t.metaKey||t.ctrlKey)&&(t.preventDefault(),e.commit(t)):(t.preventDefault(),e.save(t))}};return{attach:function(){window.addEventListener("keydown",t)},detach:function(){window.removeEventListener("keydown",t)}}}({enabled:function(){return!1!==e.settings.hotkeys},save:function(t){t.shiftKey?e.props.recording?(e.endRecord(),e.run()):e.record():e.props.recording||e.exportFrame()},togglePlay:function(){e.props.playing?e.pause():e.play()},commit:function(t){e.exportFrame({commit:!0})}}),this._animateHandler=function(){return e.animate()},this._resizeHandler=function(){e.resize()&&e.render()}},G={sketch:{configurable:!0},settings:{configurable:!0},props:{configurable:!0}};G.sketch.get=function(){return this._sketch},G.settings.get=function(){return this._settings},G.props.get=function(){return this._props},U.prototype._computePlayhead=function(e,t){return"number"==typeof t&&isFinite(t)?e/t:0},U.prototype._computeFrame=function(e,t,i,r){return isFinite(i)&&i>1?Math.floor(e*(i-1)):Math.floor(r*t)},U.prototype._computeCurrentFrame=function(){return this._computeFrame(this.props.playhead,this.props.time,this.props.totalFrames,this.props.fps)},U.prototype._getSizeProps=function(){var e=this.props;return{width:e.width,height:e.height,pixelRatio:e.pixelRatio,canvasWidth:e.canvasWidth,canvasHeight:e.canvasHeight,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight}},U.prototype.run=function(){if(!this.sketch)throw new Error("should wait until sketch is loaded before trying to play()");return!1!==this.settings.playing&&this.play(),"function"==typeof this.sketch.dispose&&console.warn("In canvas-sketch@0.0.23 the dispose() event has been renamed to unload()"),this.props.started||(this._signalBegin(),this.props.started=!0),this.tick(),this.render(),this},U.prototype.play=function(){var e=this.settings.animate;"animation"in this.settings&&(e=!0,console.warn("[canvas-sketch] { animation } has been renamed to { animate }")),e&&(d()?this.props.playing||(this.props.started||(this._signalBegin(),this.props.started=!0),this.props.playing=!0,null!=this._raf&&window.cancelAnimationFrame(this._raf),this._lastTime=c(),this._raf=window.requestAnimationFrame(this._animateHandler)):console.error("[canvas-sketch] WARN: Using { animate } in Node.js is not yet supported"))},U.prototype.pause=function(){this.props.recording&&this.endRecord(),this.props.playing=!1,null!=this._raf&&d()&&window.cancelAnimationFrame(this._raf)},U.prototype.togglePlay=function(){this.props.playing?this.pause():this.play()},U.prototype.stop=function(){this.pause(),this.props.frame=0,this.props.playhead=0,this.props.time=0,this.props.deltaTime=0,this.props.started=!1,this.render()},U.prototype.record=function(){var e=this;if(!this.props.recording)if(d()){this.stop(),this.props.playing=!0,this.props.recording=!0;var t=this._createExportOptions({sequence:!0}),i=1/this.props.fps;null!=this._raf&&window.cancelAnimationFrame(this._raf);var r,n=function(){return e.props.recording?(e.props.deltaTime=i,e.tick(),e.exportFrame(t).then(function(){e.props.recording&&(e.props.deltaTime=0,e.props.frame++,e.props.frame<e.props.totalFrames?(e.props.time+=i,e.props.playhead=e._computePlayhead(e.props.time,e.props.duration),e._raf=window.requestAnimationFrame(n)):(console.log("Finished recording"),e._signalEnd(),e.endRecord(),e.stop(),e.run()))})):Promise.resolve()};this.props.started||(this._signalBegin(),this.props.started=!0),(r=t,void 0===r&&(r={}),M(!0,r)).catch(function(e){console.error(e)}).then(function(t){e._raf=window.requestAnimationFrame(n)})}else console.error("[canvas-sketch] WARN: Recording from Node.js is not yet supported")},U.prototype._signalBegin=function(){var e=this;this.sketch&&"function"==typeof this.sketch.begin&&this._wrapContextScale(function(t){return e.sketch.begin(t)})},U.prototype._signalEnd=function(){var e=this;this.sketch&&"function"==typeof this.sketch.end&&this._wrapContextScale(function(t){return e.sketch.end(t)})},U.prototype.endRecord=function(){var e;null!=this._raf&&d()&&window.cancelAnimationFrame(this._raf),this.props.recording=!1,this.props.deltaTime=0,this.props.playing=!1,(void 0===e&&(e={}),M(!1,e)).catch(function(e){console.error(e)})},U.prototype._createExportOptions=function(e){return void 0===e&&(e={}),{sequence:e.sequence,save:e.save,fps:this.props.fps,frame:e.sequence?this.props.frame:void 0,file:this.settings.file,name:this.settings.name,prefix:this.settings.prefix,suffix:this.settings.suffix,encoding:this.settings.encoding,encodingQuality:this.settings.encodingQuality,timeStamp:e.timeStamp||b(new Date,"yyyy.mm.dd-HH.MM.ss"),totalFrames:isFinite(this.props.totalFrames)?Math.max(100,this.props.totalFrames):1e3}},U.prototype.exportFrame=function(e){var t=this;if(void 0===e&&(e={}),!this.sketch)return Promise.all([]);"function"==typeof this.sketch.preExport&&this.sketch.preExport();var i=this._createExportOptions(e),r=u(),n=Promise.resolve();if(r&&e.commit&&"function"==typeof r.commit){var s=a({},i),o=r.commit(s);n=f(o)?o:Promise.resolve(o)}return n.then(function(e){return t._doExportFrame(a({},i,{hash:e||""}))}).then(function(e){return 1===e.length?e[0]:e})},U.prototype._doExportFrame=function(e){var t=this;void 0===e&&(e={}),this._props.exporting=!0,this.resize();var i=this.render();return void 0===i&&(i=[this.props.canvas]),i=(i=[].concat(i).filter(Boolean)).map(function(t){var i,r="object"==typeof t&&t&&("data"in t||"dataURL"in t),n=r?t.data:t,s=r?a({},t,{data:n}):{data:n};if(h(i=n)&&/canvas/i.test(i.nodeName)&&"function"==typeof i.getContext){var o=function(e,t){void 0===t&&(t={});var i=t.encoding||"image/png";if(!y.includes(i))throw new Error("Invalid canvas encoding "+i);var r=(i.split("/")[1]||"").replace(/jpeg/i,"jpg");return r&&(r=("."+r).toLowerCase()),{extension:r,type:i,dataURL:e.toDataURL(i,t.encodingQuality)}}(n,{encoding:s.encoding||e.encoding,encodingQuality:l(s.encodingQuality,e.encodingQuality,.95)});return Object.assign(s,{dataURL:o.dataURL,extension:o.extension,type:o.type})}return s}),this._props.exporting=!1,this.resize(),this.render(),Promise.all(i.map(function(t,i,r){var n=a({extension:"",prefix:"",suffix:""},e,t,{layer:i,totalLayers:r.length}),s=!1!==e.save&&t.save;for(var o in n.save=!1!==s,n.filename=w(n),delete n.encoding,delete n.encodingQuality,n)void 0===n[o]&&delete n[o];var c=Promise.resolve({});if(n.save){var f=n.data;if(n.dataURL)c=x(n.dataURL,n);else c=function(e,t){void 0===t&&(t={});var i=Array.isArray(e)?e:[e];return N(new window.Blob(i,{type:t.type||""}),t)}(f,n)}return c.then(function(e){return Object.assign({},n,e)})})).then(function(i){var r=i.filter(function(e){return e.save});if(r.length>0){var n,a=r.find(function(e){return e.outputName}),s=r.some(function(e){return e.client}),o=r.some(function(e){return e.stream});n=r.length>1?r.length:a?a.outputName+"/"+r[0].filename:""+r[0].filename;var c="";if(e.sequence)c=isFinite(t.props.totalFrames)?" (frame "+(e.frame+1)+" / "+t.props.totalFrames+")":" (frame "+e.frame+")";else r.length>1&&(c=" files");console.log("%c["+(s?"canvas-sketch-cli":"canvas-sketch")+"]%c "+(o?"Streaming into":"Exported")+" %c"+n+"%c"+c,"color: #8e8e8e;","color: initial;","font-weight: bold;","font-weight: initial;")}return"function"==typeof t.sketch.postExport&&t.sketch.postExport(),i})},U.prototype._wrapContextScale=function(e){this._preRender(),e(this.props),this._postRender()},U.prototype._preRender=function(){var e=this.props;this.props.gl||!e.context||e.p5?e.p5&&e.p5.scale(e.scaleX/e.pixelRatio,e.scaleY/e.pixelRatio):(e.context.save(),!1!==this.settings.scaleContext&&e.context.scale(e.scaleX,e.scaleY))},U.prototype._postRender=function(){var e=this.props;this.props.gl||!e.context||e.p5||e.context.restore(),e.gl&&!1!==this.settings.flush&&!e.p5&&e.gl.flush()},U.prototype.tick=function(){this.sketch&&"function"==typeof this.sketch.tick&&(this._preRender(),this.sketch.tick(this.props),this._postRender())},U.prototype.render=function(){return this.props.p5?(this._lastRedrawResult=void 0,this.props.p5.redraw(),this._lastRedrawResult):this.submitDrawCall()},U.prototype.submitDrawCall=function(){if(this.sketch){var e,t=this.props;return this._preRender(),"function"==typeof this.sketch?e=this.sketch(t):"function"==typeof this.sketch.render&&(e=this.sketch.render(t)),this._postRender(),e}},U.prototype.update=function(e){var t=this;void 0===e&&(e={});var i=["animate"];Object.keys(e).forEach(function(e){if(i.indexOf(e)>=0)throw new Error("Sorry, the { "+e+" } option is not yet supported with update().")});var r=this._settings.canvas,n=this._settings.context;for(var a in e){var s=e[a];void 0!==s&&(t._settings[a]=s)}var o=Object.assign({},this._settings,e);if("time"in e&&"frame"in e)throw new Error("You should specify { time } or { frame } but not both");if("time"in e?delete o.frame:"frame"in e&&delete o.time,"duration"in e&&"totalFrames"in e)throw new Error("You should specify { duration } or { totalFrames } but not both");"duration"in e?delete o.totalFrames:"totalFrames"in e&&delete o.duration,"data"in e&&(this._props.data=e.data);var c=this.getTimeProps(o);if(Object.assign(this._props,c),r!==this._settings.canvas||n!==this._settings.context){var f=P(this._settings),h=f.context;this.props.canvas=f.canvas,this.props.context=h,this._setupGLKey(),this._appendCanvasIfNeeded()}return e.p5&&"function"!=typeof e.p5&&(this.props.p5=e.p5,this.props.p5.draw=function(){t._isP5Resizing||(t._lastRedrawResult=t.submitDrawCall())}),"playing"in e&&(e.playing?this.play():this.pause()),F(this._settings),this.resize(),this.render(),this.props},U.prototype.resize=function(){var e=this._getSizeProps(),t=this.settings,i=this.props,r=B(i,t);Object.assign(this._props,r);var n=this.props,a=n.pixelRatio,s=n.canvasWidth,o=n.canvasHeight,c=n.styleWidth,f=n.styleHeight,h=this.props.canvas;h&&!1!==t.resizeCanvas&&(i.p5?h.width===s&&h.height===o||(this._isP5Resizing=!0,i.p5.pixelDensity(a),i.p5.resizeCanvas(s/a,o/a,!1),this._isP5Resizing=!1):(h.width!==s&&(h.width=s),h.height!==o&&(h.height=o)),d()&&!1!==t.styleCanvas&&(h.style.width=c+"px",h.style.height=f+"px"));var u=this._getSizeProps(),l=!E(e,u);return l&&this._sizeChanged(),l},U.prototype._sizeChanged=function(){this.sketch&&"function"==typeof this.sketch.resize&&this.sketch.resize(this.props)},U.prototype.animate=function(){if(this.props.playing)if(d()){this._raf=window.requestAnimationFrame(this._animateHandler);var e=c(),t=1e3/this.props.fps,i=e-this._lastTime,r=this.props.duration,n="number"==typeof r&&isFinite(r),a=!0,s=this.settings.playbackRate;"fixed"===s?i=t:"throttle"===s?i>t?this._lastTime=e-=i%t:a=!1:this._lastTime=e;var o=i/1e3,f=this.props.time+o*this.props.timeScale;f<0&&n&&(f=r+f);var h=!1,u=!1;if(n&&f>=r&&(!1!==this.settings.loop?(a=!0,f%=r,u=!0):(a=!1,f=r,h=!0),this._signalEnd()),a){this.props.deltaTime=o,this.props.time=f,this.props.playhead=this._computePlayhead(f,r);var l=this.props.frame;this.props.frame=this._computeCurrentFrame(),u&&this._signalBegin(),l!==this.props.frame&&this.tick(),this.render(),this.props.deltaTime=0}h&&this.pause()}else console.error("[canvas-sketch] WARN: Animation in Node.js is not yet supported")},U.prototype.dispatch=function(e){if("function"!=typeof e)throw new Error("must pass function into dispatch()");e(this.props),this.render()},U.prototype.mount=function(){this._appendCanvasIfNeeded()},U.prototype.unmount=function(){d()&&(window.removeEventListener("resize",this._resizeHandler),this._keyboardShortcuts.detach()),this.props.canvas.parentElement&&this.props.canvas.parentElement.removeChild(this.props.canvas)},U.prototype._appendCanvasIfNeeded=function(){d()&&(!1!==this.settings.parent&&this.props.canvas&&!this.props.canvas.parentElement&&(this.settings.parent||document.body).appendChild(this.props.canvas))},U.prototype._setupGLKey=function(){var e;this.props.context&&("function"==typeof(e=this.props.context).clear&&"function"==typeof e.clearColor&&"function"==typeof e.bufferData?this._props.gl=this.props.context:delete this._props.gl)},U.prototype.getTimeProps=function(e){void 0===e&&(e={});var t=e.duration,i=e.totalFrames,r=l(e.timeScale,1),n=l(e.fps,24),a="number"==typeof t&&isFinite(t),s="number"==typeof i&&isFinite(i),o=a?Math.floor(n*t):void 0,c=s?i/n:void 0;if(a&&s&&o!==i)throw new Error("You should specify either duration or totalFrames, but not both. Or, they must match exactly.");void 0===e.dimensions&&void 0!==e.units&&console.warn("You've specified a { units } setting but no { dimension }, so the units will be ignored."),i=l(i,o,Infinity),t=l(t,c,Infinity);var f=e.time,h=e.frame,u="number"==typeof f&&isFinite(f),d="number"==typeof h&&isFinite(h),_=0,p=0,m=0;if(u&&d)throw new Error("You should specify either start frame or time, but not both.");return u?(m=this._computePlayhead(_=f,t),p=this._computeFrame(m,_,i,n)):d&&(m=this._computePlayhead(_=(p=h)/n,t)),{playhead:m,time:_,frame:p,duration:t,totalFrames:i,fps:n,timeScale:r}},U.prototype.setup=function(e){var t=this;if(void 0===e&&(e={}),this.sketch)throw new Error("Multiple setup() calls not yet supported.");this._settings=Object.assign({},e,this._settings),F(this._settings);var i=P(this._settings),r=i.context,n=i.canvas,a=this.getTimeProps(this._settings);this._props=Object.assign({},a,{canvas:n,context:r,deltaTime:0,started:!1,exporting:!1,playing:!1,recording:!1,settings:this.settings,data:this.settings.data,render:function(){return t.render()},togglePlay:function(){return t.togglePlay()},dispatch:function(e){return t.dispatch(e)},tick:function(){return t.tick()},resize:function(){return t.resize()},update:function(e){return t.update(e)},exportFrame:function(e){return t.exportFrame(e)},record:function(){return t.record()},play:function(){return t.play()},pause:function(){return t.pause()},stop:function(){return t.stop()}}),this._setupGLKey(),this.resize()},U.prototype.loadAndRun=function(e,t){var i=this;return this.load(e,t).then(function(){return i.run(),i})},U.prototype.unload=function(){var e=this;this.pause(),this.sketch&&("function"==typeof this.sketch.unload&&this._wrapContextScale(function(t){return e.sketch.unload(t)}),this._sketch=null)},U.prototype.destroy=function(){this.unload(),this.unmount()},U.prototype.load=function(e,t){var i=this;if("function"!=typeof e)throw new Error("The function must take in a function as the first parameter. Example:\n  canvasSketcher(() => { ... }, settings)");this.sketch&&this.unload(),void 0!==t&&this.update(t),this._preRender();var r=Promise.resolve();if(this.settings.p5){if(!d())throw new Error("[canvas-sketch] ERROR: Using p5.js in Node.js is not supported");r=new Promise(function(e){var t,r=i.settings.p5;r.p5&&(t=r.preload,r=r.p5);var n=function(r){t&&(r.preload=function(){return t(r)}),r.setup=function(){var t=i.props,n="webgl"===i.settings.context,a=n?r.WEBGL:r.P2D;r.noLoop(),r.pixelDensity(t.pixelRatio),r.createCanvas(t.viewportWidth,t.viewportHeight,a),n&&i.settings.attributes&&r.setAttributes(i.settings.attributes),i.update({p5:r,canvas:r.canvas,context:r._renderer.drawingContext}),e()}};if("function"==typeof r)new r(n);else{if("function"!=typeof window.createCanvas)throw new Error("{ p5 } setting is passed but can't find p5.js in global (window) scope. Maybe you did not create it globally?\nnew p5(); // <-- attaches to global scope");n(window)}})}return r.then(function(){var t=e(i.props);return f(t)||(t=Promise.resolve(t)),t}).then(function(e){return e||(e={}),i._sketch=e,d()&&(i._keyboardShortcuts.attach(),window.addEventListener("resize",i._resizeHandler)),i._postRender(),i._sizeChanged(),i}).catch(function(e){throw console.warn("Could not start sketch, the async loading function rejected with an error:\n    Error: "+e.message),e})},Object.defineProperties(U.prototype,G);var k="hot-id-cache",H=[];function X(e,t){if(void 0===t&&(t={}),t.p5){if(t.canvas||t.context&&"string"!=typeof t.context)throw new Error('In { p5 } mode, you can\'t pass your own canvas or context, unless the context is a "webgl" or "2d" string');t=Object.assign({},t,{canvas:!1,context:"string"==typeof t.context&&t.context})}var i,r,n=(i=u())&&i.hot;n&&(r=l(t.id,"$__DEFAULT_CANVAS_SKETCH_ID__$"));var a=n&&"string"==typeof r;a&&H.includes(r)&&(console.warn("Warning: You have multiple calls to canvasSketch() in --hot mode. You must pass unique { id } strings in settings to enable hot reload across multiple sketches. ",r),a=!1);var s=Promise.resolve();if(a){H.push(r);var o=function(e){var t=u();if(t)return t[k]=t[k]||{},t[k][e]}(r);if(o){var c=function(){var e,i=(e=o.manager,t.animate?{time:e.props.time}:void 0);return o.manager.destroy(),i};s=o.load.then(c).catch(c)}}return s.then(function(i){var n,s,o,c,f=new U;return e?(t=Object.assign({},t,i),f.setup(t),f.mount(),n=f.loadAndRun(e)):n=Promise.resolve(f),a&&(s=r,o={load:n,manager:f},(c=u())&&(c[k]=c[k]||{},c[k][s]=o)),n})}return X.canvasSketch=X,X.PaperSizes=O,X})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"convert-length":7}],7:[function(e,t,i){var r=e("defined"),n=["mm","cm","m","pc","pt","in","ft","px"],a={m:{system:"metric",factor:1},cm:{system:"metric",factor:.01},mm:{system:"metric",factor:.001},pt:{system:"imperial",factor:1/72},pc:{system:"imperial",factor:1/6},in:{system:"imperial",factor:1},ft:{system:"imperial",factor:12}};const s={metric:{unit:"m",ratio:1/.0254},imperial:{unit:"in",ratio:.0254}};t.exports=function(e,t,i,o){if("number"!=typeof e||!isFinite(e))throw new Error("Value must be a finite number");if(!t||!i)throw new Error("Must specify from and to units");var c=r((o=o||{}).pixelsPerInch,96),f=o.precision,h=!1!==o.roundPixel;if(t=t.toLowerCase(),i=i.toLowerCase(),-1===n.indexOf(t))throw new Error('Invalid from unit "'+t+'", must be one of: '+n.join(", "));if(-1===n.indexOf(i))throw new Error('Invalid from unit "'+i+'", must be one of: '+n.join(", "));if(t===i)return e;var u=1,l=1,d=!1;"px"===t&&(l=1/c,t="in"),"px"===i&&(d=!0,u=c,i="in");var _=a[t],p=a[i],m=e*_.factor*l;_.system!==p.system&&(m*=s[_.system].ratio);var E=m/p.factor*u;return d&&h?E=Math.round(E):"number"==typeof f&&isFinite(f)&&(E=function(e,t){return Number(Math.round(e+"e"+t)+"e-"+t)}(E,f)),E},t.exports.units=n},{defined:15}],8:[function(e,t,i){"use strict";t.exports=function(e,t,i,r,n,a){var s=n-1,o=n*n,c=s*s,f=(1+2*n)*c,h=n*c,u=o*(3-2*n),l=o*s;if(e.length){a||(a=new Array(e.length));for(var d=e.length-1;d>=0;--d)a[d]=f*e[d]+h*t[d]+u*i[d]+l*r[d];return a}return f*e+h*t+u*i+l*r},t.exports.derivative=function(e,t,i,r,n,a){var s=6*n*n-6*n,o=3*n*n-4*n+1,c=-6*n*n+6*n,f=3*n*n-2*n;if(e.length){a||(a=new Array(e.length));for(var h=e.length-1;h>=0;--h)a[h]=s*e[h]+o*t[h]+c*i[h]+f*r[h];return a}return s*e+o*t+c*i[h]+f*r}},{}],9:[function(e,t,i){var r,n;r=this,n=function(e){"use strict";function t(e,t,i){e.prototype=t.prototype=i,i.constructor=e}function i(e,t){var i=Object.create(e.prototype);for(var r in t)i[r]=t[r];return i}function r(){}var n="\\s*([+-]?\\d+)\\s*",a="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",o=/^#([0-9a-f]{3})$/,c=/^#([0-9a-f]{6})$/,f=new RegExp("^rgb\\("+[n,n,n]+"\\)$"),h=new RegExp("^rgb\\("+[s,s,s]+"\\)$"),u=new RegExp("^rgba\\("+[n,n,n,a]+"\\)$"),l=new RegExp("^rgba\\("+[s,s,s,a]+"\\)$"),d=new RegExp("^hsl\\("+[a,s,s]+"\\)$"),_=new RegExp("^hsla\\("+[a,s,s,a]+"\\)$"),p={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function m(e){var t;return e=(e+"").trim().toLowerCase(),(t=o.exec(e))?new R((t=parseInt(t[1],16))>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):(t=c.exec(e))?E(parseInt(t[1],16)):(t=f.exec(e))?new R(t[1],t[2],t[3],1):(t=h.exec(e))?new R(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=u.exec(e))?b(t[1],t[2],t[3],t[4]):(t=l.exec(e))?b(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=d.exec(e))?v(t[1],t[2]/100,t[3]/100,1):(t=_.exec(e))?v(t[1],t[2]/100,t[3]/100,t[4]):p.hasOwnProperty(e)?E(p[e]):"transparent"===e?new R(NaN,NaN,NaN,0):null}function E(e){return new R(e>>16&255,e>>8&255,255&e,1)}function b(e,t,i,r){return r<=0&&(e=t=i=NaN),new R(e,t,i,r)}function g(e){return e instanceof r||(e=m(e)),e?new R((e=e.rgb()).r,e.g,e.b,e.opacity):new R}function A(e,t,i,r){return 1===arguments.length?g(e):new R(e,t,i,null==r?1:r)}function R(e,t,i,r){this.r=+e,this.g=+t,this.b=+i,this.opacity=+r}function T(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function v(e,t,i,r){return r<=0?e=t=i=NaN:i<=0||i>=1?e=t=NaN:t<=0&&(e=NaN),new y(e,t,i,r)}function S(e,t,i,n){return 1===arguments.length?function(e){if(e instanceof y)return new y(e.h,e.s,e.l,e.opacity);if(e instanceof r||(e=m(e)),!e)return new y;if(e instanceof y)return e;var t=(e=e.rgb()).r/255,i=e.g/255,n=e.b/255,a=Math.min(t,i,n),s=Math.max(t,i,n),o=NaN,c=s-a,f=(s+a)/2;return c?(o=t===s?(i-n)/c+6*(i<n):i===s?(n-t)/c+2:(t-i)/c+4,c/=f<.5?s+a:2-s-a,o*=60):c=f>0&&f<1?0:o,new y(o,c,f,e.opacity)}(e):new y(e,t,i,null==n?1:n)}function y(e,t,i,r){this.h=+e,this.s=+t,this.l=+i,this.opacity=+r}function M(e,t,i){return 255*(e<60?t+(i-t)*e/60:e<180?i:e<240?t+(i-t)*(240-e)/60:t)}t(r,m,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),t(R,A,i(r,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new R(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new R(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+T(this.r)+T(this.g)+T(this.b)},toString:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),t(y,S,i(r,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new y(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new y(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*t,n=2*i-r;return new R(M(e>=240?e-240:e+120,n,r),M(e,n,r),M(e<120?e+240:e-120,n,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var x=Math.PI/180,N=180/Math.PI,w=.96422,C=1,I=.82521,F=4/29,O=6/29,D=3*O*O,B=O*O*O;function L(e){if(e instanceof U)return new U(e.l,e.a,e.b,e.opacity);if(e instanceof K)return z(e);e instanceof R||(e=g(e));var t,i,r=X(e.r),n=X(e.g),a=X(e.b),s=G((.2225045*r+.7168786*n+.0606169*a)/C);return r===n&&n===a?t=i=s:(t=G((.4360747*r+.3850649*n+.1430804*a)/w),i=G((.0139322*r+.0971045*n+.7141733*a)/I)),new U(116*s-16,500*(t-s),200*(s-i),e.opacity)}function P(e,t,i,r){return 1===arguments.length?L(e):new U(e,t,i,null==r?1:r)}function U(e,t,i,r){this.l=+e,this.a=+t,this.b=+i,this.opacity=+r}function G(e){return e>B?Math.pow(e,1/3):e/D+F}function k(e){return e>O?e*e*e:D*(e-F)}function H(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function X(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function V(e){if(e instanceof K)return new K(e.h,e.c,e.l,e.opacity);if(e instanceof U||(e=L(e)),0===e.a&&0===e.b)return new K(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*N;return new K(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Y(e,t,i,r){return 1===arguments.length?V(e):new K(e,t,i,null==r?1:r)}function K(e,t,i,r){this.h=+e,this.c=+t,this.l=+i,this.opacity=+r}function z(e){if(isNaN(e.h))return new U(e.l,0,0,e.opacity);var t=e.h*x;return new U(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}t(U,P,i(r,{brighter:function(e){return new U(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new U(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,i=isNaN(this.b)?e:e-this.b/200;return new R(H(3.1338561*(t=w*k(t))-1.6168667*(e=C*k(e))-.4906146*(i=I*k(i))),H(-.9787684*t+1.9161415*e+.033454*i),H(.0719453*t-.2289914*e+1.4052427*i),this.opacity)}})),t(K,Y,i(r,{brighter:function(e){return new K(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new K(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return z(this).rgb()}}));var W=-.14861,j=1.78277,q=-.29227,Q=-.90649,Z=1.97294,J=Z*Q,$=Z*j,ee=j*q-Q*W;function te(e,t,i,r){return 1===arguments.length?function(e){if(e instanceof ie)return new ie(e.h,e.s,e.l,e.opacity);e instanceof R||(e=g(e));var t=e.g/255,i=e.b/255,r=(ee*i+J*(e.r/255)-$*t)/(ee+J-$),n=i-r,a=(Z*(t-r)-q*n)/Q,s=Math.sqrt(a*a+n*n)/(Z*r*(1-r)),o=s?Math.atan2(a,n)*N-120:NaN;return new ie(o<0?o+360:o,s,r,e.opacity)}(e):new ie(e,t,i,null==r?1:r)}function ie(e,t,i,r){this.h=+e,this.s=+t,this.l=+i,this.opacity=+r}t(ie,te,i(r,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new ie(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new ie(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*x,t=+this.l,i=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),n=Math.sin(e);return new R(255*(t+i*(W*r+j*n)),255*(t+i*(q*r+Q*n)),255*(t+i*(Z*r)),this.opacity)}})),e.color=m,e.rgb=A,e.hsl=S,e.lab=P,e.hcl=Y,e.lch=function(e,t,i,r){return 1===arguments.length?V(e):new K(i,t,e,null==r?1:r)},e.gray=function(e,t){return new U(e,0,0,null==t?1:t)},e.cubehelix=te,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof i&&void 0!==t?n(i):"function"==typeof define&&define.amd?define(["exports"],n):n(r.d3=r.d3||{})},{}],10:[function(e,t,i){var r,n;r=this,n=function(e,t){"use strict";function i(e,t,i,r,n){var a=e*e,s=a*e;return((1-3*e+3*a-s)*t+(4-6*a+3*s)*i+(1+3*e+3*a-3*s)*r+s*n)/6}function r(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),a=e[n],s=e[n+1];return i((r-n/t)*t,n>0?e[n-1]:2*a-s,a,s,n<t-1?e[n+2]:2*s-a)}}function n(e){var t=e.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*t);return i((r-n/t)*t,e[(n+t-1)%t],e[n%t],e[(n+1)%t],e[(n+2)%t])}}function a(e){return function(){return e}}function s(e,t){return function(i){return e+i*t}}function o(e,t){var i=t-e;return i?s(e,i>180||i<-180?i-360*Math.round(i/360):i):a(isNaN(e)?t:e)}function c(e){return 1==(e=+e)?f:function(t,i){return i-t?function(e,t,i){return e=Math.pow(e,i),t=Math.pow(t,i)-e,i=1/i,function(r){return Math.pow(e+r*t,i)}}(t,i,e):a(isNaN(t)?i:t)}}function f(e,t){var i=t-e;return i?s(e,i):a(isNaN(e)?t:e)}var h=function e(i){var r=c(i);function n(e,i){var n=r((e=t.rgb(e)).r,(i=t.rgb(i)).r),a=r(e.g,i.g),s=r(e.b,i.b),o=f(e.opacity,i.opacity);return function(t){return e.r=n(t),e.g=a(t),e.b=s(t),e.opacity=o(t),e+""}}return n.gamma=e,n}(1);function u(e){return function(i){var r,n,a=i.length,s=new Array(a),o=new Array(a),c=new Array(a);for(r=0;r<a;++r)n=t.rgb(i[r]),s[r]=n.r||0,o[r]=n.g||0,c[r]=n.b||0;return s=e(s),o=e(o),c=e(c),n.opacity=1,function(e){return n.r=s(e),n.g=o(e),n.b=c(e),n+""}}}var l=u(r),d=u(n);function _(e,t){var i,r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),s=new Array(r);for(i=0;i<n;++i)a[i]=R(e[i],t[i]);for(;i<r;++i)s[i]=t[i];return function(e){for(i=0;i<n;++i)s[i]=a[i](e);return s}}function p(e,t){var i=new Date;return t-=e=+e,function(r){return i.setTime(e+t*r),i}}function m(e,t){return t-=e=+e,function(i){return e+t*i}}function E(e,t){var i,r={},n={};for(i in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)i in e?r[i]=R(e[i],t[i]):n[i]=t[i];return function(e){for(i in r)n[i]=r[i](e);return n}}var b=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,g=new RegExp(b.source,"g");function A(e,t){var i,r,n,a=b.lastIndex=g.lastIndex=0,s=-1,o=[],c=[];for(e+="",t+="";(i=b.exec(e))&&(r=g.exec(t));)(n=r.index)>a&&(n=t.slice(a,n),o[s]?o[s]+=n:o[++s]=n),(i=i[0])===(r=r[0])?o[s]?o[s]+=r:o[++s]=r:(o[++s]=null,c.push({i:s,x:m(i,r)})),a=g.lastIndex;return a<t.length&&(n=t.slice(a),o[s]?o[s]+=n:o[++s]=n),o.length<2?c[0]?function(e){return function(t){return e(t)+""}}(c[0].x):function(e){return function(){return e}}(t):(t=c.length,function(e){for(var i,r=0;r<t;++r)o[(i=c[r]).i]=i.x(e);return o.join("")})}function R(e,i){var r,n=typeof i;return null==i||"boolean"===n?a(i):("number"===n?m:"string"===n?(r=t.color(i))?(i=r,h):A:i instanceof t.color?h:i instanceof Date?p:Array.isArray(i)?_:"function"!=typeof i.valueOf&&"function"!=typeof i.toString||isNaN(i)?E:m)(e,i)}var T,v,S,y,M=180/Math.PI,x={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function N(e,t,i,r,n,a){var s,o,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*i+t*r)&&(i-=e*c,r-=t*c),(o=Math.sqrt(i*i+r*r))&&(i/=o,r/=o,c/=o),e*r<t*i&&(e=-e,t=-t,c=-c,s=-s),{translateX:n,translateY:a,rotate:Math.atan2(t,e)*M,skewX:Math.atan(c)*M,scaleX:s,scaleY:o}}function w(e,t,i,r){function n(e){return e.length?e.pop()+" ":""}return function(a,s){var o=[],c=[];return a=e(a),s=e(s),function(e,r,n,a,s,o){if(e!==n||r!==a){var c=s.push("translate(",null,t,null,i);o.push({i:c-4,x:m(e,n)},{i:c-2,x:m(r,a)})}else(n||a)&&s.push("translate("+n+t+a+i)}(a.translateX,a.translateY,s.translateX,s.translateY,o,c),function(e,t,i,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:i.push(n(i)+"rotate(",null,r)-2,x:m(e,t)})):t&&i.push(n(i)+"rotate("+t+r)}(a.rotate,s.rotate,o,c),function(e,t,i,a){e!==t?a.push({i:i.push(n(i)+"skewX(",null,r)-2,x:m(e,t)}):t&&i.push(n(i)+"skewX("+t+r)}(a.skewX,s.skewX,o,c),function(e,t,i,r,a,s){if(e!==i||t!==r){var o=a.push(n(a)+"scale(",null,",",null,")");s.push({i:o-4,x:m(e,i)},{i:o-2,x:m(t,r)})}else 1===i&&1===r||a.push(n(a)+"scale("+i+","+r+")")}(a.scaleX,a.scaleY,s.scaleX,s.scaleY,o,c),a=s=null,function(e){for(var t,i=-1,r=c.length;++i<r;)o[(t=c[i]).i]=t.x(e);return o.join("")}}}var C=w(function(e){return"none"===e?x:(T||(T=document.createElement("DIV"),v=document.documentElement,S=document.defaultView),T.style.transform=e,e=S.getComputedStyle(v.appendChild(T),null).getPropertyValue("transform"),v.removeChild(T),N(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))},"px, ","px)","deg)"),I=w(function(e){return null==e?x:(y||(y=document.createElementNS("http://www.w3.org/2000/svg","g")),y.setAttribute("transform",e),(e=y.transform.baseVal.consolidate())?N((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):x)},", ",")",")"),F=Math.SQRT2,O=2,D=4,B=1e-12;function L(e){return((e=Math.exp(e))+1/e)/2}function P(e){return function(i,r){var n=e((i=t.hsl(i)).h,(r=t.hsl(r)).h),a=f(i.s,r.s),s=f(i.l,r.l),o=f(i.opacity,r.opacity);return function(e){return i.h=n(e),i.s=a(e),i.l=s(e),i.opacity=o(e),i+""}}}var U=P(o),G=P(f);function k(e){return function(i,r){var n=e((i=t.hcl(i)).h,(r=t.hcl(r)).h),a=f(i.c,r.c),s=f(i.l,r.l),o=f(i.opacity,r.opacity);return function(e){return i.h=n(e),i.c=a(e),i.l=s(e),i.opacity=o(e),i+""}}}var H=k(o),X=k(f);function V(e){return function i(r){function n(i,n){var a=e((i=t.cubehelix(i)).h,(n=t.cubehelix(n)).h),s=f(i.s,n.s),o=f(i.l,n.l),c=f(i.opacity,n.opacity);return function(e){return i.h=a(e),i.s=s(e),i.l=o(Math.pow(e,r)),i.opacity=c(e),i+""}}return r=+r,n.gamma=i,n}(1)}var Y=V(o),K=V(f);e.interpolate=R,e.interpolateArray=_,e.interpolateBasis=r,e.interpolateBasisClosed=n,e.interpolateDate=p,e.interpolateDiscrete=function(e){var t=e.length;return function(i){return e[Math.max(0,Math.min(t-1,Math.floor(i*t)))]}},e.interpolateHue=function(e,t){var i=o(+e,+t);return function(e){var t=i(e);return t-360*Math.floor(t/360)}},e.interpolateNumber=m,e.interpolateObject=E,e.interpolateRound=function(e,t){return t-=e=+e,function(i){return Math.round(e+t*i)}},e.interpolateString=A,e.interpolateTransformCss=C,e.interpolateTransformSvg=I,e.interpolateZoom=function(e,t){var i,r,n=e[0],a=e[1],s=e[2],o=t[2],c=t[0]-n,f=t[1]-a,h=c*c+f*f;if(h<B)r=Math.log(o/s)/F,i=function(e){return[n+e*c,a+e*f,s*Math.exp(F*e*r)]};else{var u=Math.sqrt(h),l=(o*o-s*s+D*h)/(2*s*O*u),d=(o*o-s*s-D*h)/(2*o*O*u),_=Math.log(Math.sqrt(l*l+1)-l),p=Math.log(Math.sqrt(d*d+1)-d);r=(p-_)/F,i=function(e){var t,i=e*r,o=L(_),h=s/(O*u)*(o*(t=F*i+_,((t=Math.exp(2*t))-1)/(t+1))-function(e){return((e=Math.exp(e))-1/e)/2}(_));return[n+h*c,a+h*f,s*o/L(F*i+_)]}}return i.duration=1e3*r,i},e.interpolateRgb=h,e.interpolateRgbBasis=l,e.interpolateRgbBasisClosed=d,e.interpolateHsl=U,e.interpolateHslLong=G,e.interpolateLab=function(e,i){var r=f((e=t.lab(e)).l,(i=t.lab(i)).l),n=f(e.a,i.a),a=f(e.b,i.b),s=f(e.opacity,i.opacity);return function(t){return e.l=r(t),e.a=n(t),e.b=a(t),e.opacity=s(t),e+""}},e.interpolateHcl=H,e.interpolateHclLong=X,e.interpolateCubehelix=Y,e.interpolateCubehelixLong=K,e.piecewise=function(e,t){for(var i=0,r=t.length-1,n=t[0],a=new Array(r<0?0:r);i<r;)a[i]=e(n,n=t[++i]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return a[t](e-t)}},e.quantize=function(e,t){for(var i=new Array(t),r=0;r<t;++r)i[r]=e(r/(t-1));return i},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof i&&void 0!==t?n(i,e("d3-color")):"function"==typeof define&&define.amd?define(["exports","d3-color"],n):n(r.d3=r.d3||{},r.d3)},{"d3-color":9}],11:[function(e,t,i){var r,n;r=this,n=function(e,t,i){"use strict";function r(e){for(var t=e.length/6|0,i=new Array(t),r=0;r<t;)i[r]="#"+e.slice(6*r,6*++r);return i}var n=r("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),a=r("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),s=r("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),o=r("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),c=r("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),f=r("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),h=r("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),u=r("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),l=r("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function d(e){return t.interpolateRgbBasis(e[e.length-1])}var _=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(r),p=d(_),m=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(r),E=d(m),b=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(r),g=d(b),A=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(r),R=d(A),T=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(r),v=d(T),S=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(r),y=d(S),M=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(r),x=d(M),N=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(r),w=d(N),C=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(r),I=d(C),F=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(r),O=d(F),D=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(r),B=d(D),L=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(r),P=d(L),U=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(r),G=d(U),k=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(r),H=d(k),X=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(r),V=d(X),Y=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(r),K=d(Y),z=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(r),W=d(z),j=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(r),q=d(j),Q=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(r),Z=d(Q),J=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(r),$=d(J),ee=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(r),te=d(ee),ie=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(r),re=d(ie),ne=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(r),ae=d(ne),se=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(r),oe=d(se),ce=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(r),fe=d(ce),he=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(r),ue=d(he),le=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(r),de=d(le),_e=t.interpolateCubehelixLong(i.cubehelix(300,.5,0),i.cubehelix(-240,.5,1)),pe=t.interpolateCubehelixLong(i.cubehelix(-100,.75,.35),i.cubehelix(80,1.5,.8)),me=t.interpolateCubehelixLong(i.cubehelix(260,.75,.35),i.cubehelix(80,1.5,.8)),Ee=i.cubehelix(),be=i.rgb(),ge=Math.PI/3,Ae=2*Math.PI/3;function Re(e){var t=e.length;return function(i){return e[Math.max(0,Math.min(t-1,Math.floor(i*t)))]}}var Te=Re(r("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),ve=Re(r("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Se=Re(r("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),ye=Re(r("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));e.schemeCategory10=n,e.schemeAccent=a,e.schemeDark2=s,e.schemePaired=o,e.schemePastel1=c,e.schemePastel2=f,e.schemeSet1=h,e.schemeSet2=u,e.schemeSet3=l,e.interpolateBrBG=p,e.schemeBrBG=_,e.interpolatePRGn=E,e.schemePRGn=m,e.interpolatePiYG=g,e.schemePiYG=b,e.interpolatePuOr=R,e.schemePuOr=A,e.interpolateRdBu=v,e.schemeRdBu=T,e.interpolateRdGy=y,e.schemeRdGy=S,e.interpolateRdYlBu=x,e.schemeRdYlBu=M,e.interpolateRdYlGn=w,e.schemeRdYlGn=N,e.interpolateSpectral=I,e.schemeSpectral=C,e.interpolateBuGn=O,e.schemeBuGn=F,e.interpolateBuPu=B,e.schemeBuPu=D,e.interpolateGnBu=P,e.schemeGnBu=L,e.interpolateOrRd=G,e.schemeOrRd=U,e.interpolatePuBuGn=H,e.schemePuBuGn=k,e.interpolatePuBu=V,e.schemePuBu=X,e.interpolatePuRd=K,e.schemePuRd=Y,e.interpolateRdPu=W,e.schemeRdPu=z,e.interpolateYlGnBu=q,e.schemeYlGnBu=j,e.interpolateYlGn=Z,e.schemeYlGn=Q,e.interpolateYlOrBr=$,e.schemeYlOrBr=J,e.interpolateYlOrRd=te,e.schemeYlOrRd=ee,e.interpolateBlues=re,e.schemeBlues=ie,e.interpolateGreens=ae,e.schemeGreens=ne,e.interpolateGreys=oe,e.schemeGreys=se,e.interpolatePurples=fe,e.schemePurples=ce,e.interpolateReds=ue,e.schemeReds=he,e.interpolateOranges=de,e.schemeOranges=le,e.interpolateCubehelixDefault=_e,e.interpolateRainbow=function(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return Ee.h=360*e-100,Ee.s=1.5-1.5*t,Ee.l=.8-.9*t,Ee+""},e.interpolateWarm=pe,e.interpolateCool=me,e.interpolateSinebow=function(e){var t;return e=(.5-e)*Math.PI,be.r=255*(t=Math.sin(e))*t,be.g=255*(t=Math.sin(e+ge))*t,be.b=255*(t=Math.sin(e+Ae))*t,be+""},e.interpolateViridis=Te,e.interpolateMagma=ve,e.interpolateInferno=Se,e.interpolatePlasma=ye,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof i&&void 0!==t?n(i,e("d3-interpolate"),e("d3-color")):"function"==typeof define&&define.amd?define(["exports","d3-interpolate","d3-color"],n):n(r.d3=r.d3||{},r.d3,r.d3)},{"d3-color":9,"d3-interpolate":10}],12:[function(e,t,i){t.exports=e("./vendor/dat.gui"),t.exports.color=e("./vendor/dat.color")},{"./vendor/dat.color":13,"./vendor/dat.gui":14}],13:[function(e,t,i){var r,n,a,s,o=t.exports=o||{};o.color=o.color||{},o.utils=o.utils||{},o.utils.common=(r=Array.prototype.forEach,n=Array.prototype.slice,{BREAK:{},extend:function(e){return this.each(n.call(arguments,1),function(t){for(var i in t)this.isUndefined(t[i])||(e[i]=t[i])},this),e},defaults:function(e){return this.each(n.call(arguments,1),function(t){for(var i in t)this.isUndefined(e[i])&&(e[i]=t[i])},this),e},compose:function(){var e=n.call(arguments);return function(){for(var t=n.call(arguments),i=e.length-1;i>=0;i--)t=[e[i].apply(this,t)];return t[0]}},each:function(e,t,i){if(r&&e.forEach===r)e.forEach(t,i);else if(e.length===e.length+0){for(var n=0,a=e.length;n<a;n++)if(n in e&&t.call(i,e[n],n)===this.BREAK)return}else for(var n in e)if(t.call(i,e[n],n)===this.BREAK)return},defer:function(e){setTimeout(e,0)},toArray:function(e){return e.toArray?e.toArray():n.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){return e!=e},isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}}),o.color.toString=(a=o.utils.common,function(e){if(1==e.a||a.isUndefined(e.a)){for(var t=e.hex.toString(16);t.length<6;)t="0"+t;return"#"+t}return"rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+e.a+")"}),o.Color=o.color.Color=function(e,t,i,r){var n=function(){if(this.__state=e.apply(this,arguments),!1===this.__state)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};function a(e,t,i){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(o(this,t,i),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(o(this,t,i),this.__state.space="RGB"),this.__state[t]=e}})}function s(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(c(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(c(this),this.__state.space="HSV"),this.__state[t]=e}})}function o(e,i,n){if("HEX"===e.__state.space)e.__state[i]=t.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw"Corrupted color state";r.extend(e.__state,t.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}}function c(e){var i=t.rgb_to_hsv(e.r,e.g,e.b);r.extend(e.__state,{s:i.s,v:i.v}),r.isNaN(i.h)?r.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=i.h}return n.COMPONENTS=["r","g","b","h","s","v","hex","a"],r.extend(n.prototype,{toString:function(){return i(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),a(n.prototype,"r",2),a(n.prototype,"g",1),a(n.prototype,"b",0),s(n.prototype,"h"),s(n.prototype,"s"),s(n.prototype,"v"),Object.defineProperty(n.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(n.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=t.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}}),n}(o.color.interpret=function(e,t){var i,r,n=[{litmus:t.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString())}},write:e},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString())}},write:e},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:e},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:e}}},{litmus:t.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:t.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:t.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)&&t.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)&&t.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}];return function(){r=!1;var e=arguments.length>1?t.toArray(arguments):arguments[0];return t.each(n,function(n){if(n.litmus(e))return t.each(n.conversions,function(n,a){if(i=n.read(e),!1===r&&!1!==i)return r=i,i.conversionName=a,i.conversion=n,t.BREAK}),t.BREAK}),r}}(o.color.toString,o.utils.common),o.color.math={hsv_to_rgb:function(e,t,i){var r=Math.floor(e/60)%6,n=e/60-Math.floor(e/60),a=i*(1-t),s=i*(1-n*t),o=i*(1-(1-n)*t),c=[[i,o,a],[s,i,a],[a,i,o],[a,s,i],[o,a,i],[i,a,s]][r];return{r:255*c[0],g:255*c[1],b:255*c[2]}},rgb_to_hsv:function(e,t,i){var r,n=Math.min(e,t,i),a=Math.max(e,t,i),s=a-n;return 0==a?{h:NaN,s:0,v:0}:(r=e==a?(t-i)/s:t==a?2+(i-e)/s:4+(e-t)/s,(r/=6)<0&&(r+=1),{h:360*r,s:s/a,v:a/255})},rgb_to_hex:function(e,t,i){var r=this.hex_with_component(0,2,e);return r=this.hex_with_component(r,1,t),r=this.hex_with_component(r,0,i)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,i){return i<<(s=8*t)|e&~(255<<s)}},o.color.toString,o.utils.common)},{}],14:[function(e,t,i){var r,n,a,s,o,c=t.exports=c||{};c.gui=c.gui||{},c.utils=c.utils||{},c.controllers=c.controllers||{},c.dom=c.dom||{},c.color=c.color||{},c.utils.css={load:function(e,t){var i=(t=t||document).createElement("link");i.type="text/css",i.rel="stylesheet",i.href=e,t.getElementsByTagName("head")[0].appendChild(i)},inject:function(e,t){t=t||document;var i=document.createElement("style");i.type="text/css",i.innerHTML=e,t.getElementsByTagName("head")[0].appendChild(i)}},c.utils.common=(r=Array.prototype.forEach,n=Array.prototype.slice,{BREAK:{},extend:function(e){return this.each(n.call(arguments,1),function(t){for(var i in t)this.isUndefined(t[i])||(e[i]=t[i])},this),e},defaults:function(e){return this.each(n.call(arguments,1),function(t){for(var i in t)this.isUndefined(e[i])&&(e[i]=t[i])},this),e},compose:function(){var e=n.call(arguments);return function(){for(var t=n.call(arguments),i=e.length-1;i>=0;i--)t=[e[i].apply(this,t)];return t[0]}},each:function(e,t,i){if(r&&e.forEach===r)e.forEach(t,i);else if(e.length===e.length+0){for(var n=0,a=e.length;n<a;n++)if(n in e&&t.call(i,e[n],n)===this.BREAK)return}else for(var n in e)if(t.call(i,e[n],n)===this.BREAK)return},defer:function(e){setTimeout(e,0)},toArray:function(e){return e.toArray?e.toArray():n.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){return e!=e},isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}}),c.controllers.Controller=(c.utils.common.extend((a=function(e,t){this.initialValue=e[t],this.domElement=document.createElement("div"),this.object=e,this.property=t,this.__onChange=void 0,this.__onFinishChange=void 0}).prototype,{onChange:function(e){return this.__onChange=e,this},onFinishChange:function(e){return this.__onFinishChange=e,this},setValue:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),a),c.dom.dom=function(e){var t={};e.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(i,r){e.each(i,function(e){t[e]=r})});var i=/(\d+(\.\d+)?)px/;function r(t){if("0"===t||e.isUndefined(t))return 0;var r=t.match(i);return e.isNull(r)?0:parseFloat(r[1])}var n={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(t,i,r){e.isUndefined(i)&&(i=!0),e.isUndefined(r)&&(r=!0),t.style.position="absolute",i&&(t.style.left=0,t.style.right=0),r&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(i,r,n,a){n=n||{};var s=t[r];if(!s)throw new Error("Event type "+r+" not supported.");var o=document.createEvent(s);switch(s){case"MouseEvents":o.initMouseEvent(r,n.bubbles||!1,n.cancelable||!0,window,n.clickCount||1,0,0,n.x||n.clientX||0,n.y||n.clientY||0,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var c=o.initKeyboardEvent||o.initKeyEvent;e.defaults(n,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(r,n.bubbles||!1,n.cancelable,window,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.keyCode,n.charCode);break;default:o.initEvent(r,n.bubbles||!1,n.cancelable||!0)}e.defaults(o,a),i.dispatchEvent(o)},bind:function(e,t,i,r){return r=r||!1,e.addEventListener?e.addEventListener(t,i,r):e.attachEvent&&e.attachEvent("on"+t,i),n},unbind:function(e,t,i,r){return r=r||!1,e.removeEventListener?e.removeEventListener(t,i,r):e.detachEvent&&e.detachEvent("on"+t,i),n},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var i=e.className.split(/ +/);-1==i.indexOf(t)&&(i.push(t),e.className=i.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return n},removeClass:function(e,t){if(t)if(void 0===e.className);else if(e.className===t)e.removeAttribute("class");else{var i=e.className.split(/ +/),r=i.indexOf(t);-1!=r&&(i.splice(r,1),e.className=i.join(" "))}else e.className=void 0;return n},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return r(t["border-left-width"])+r(t["border-right-width"])+r(t["padding-left"])+r(t["padding-right"])+r(t.width)},getHeight:function(e){var t=getComputedStyle(e);return r(t["border-top-width"])+r(t["border-bottom-width"])+r(t["padding-top"])+r(t["padding-bottom"])+r(t.height)},getOffset:function(e){var t={left:0,top:0};if(e.offsetParent)do{t.left+=e.offsetLeft,t.top+=e.offsetTop}while(e=e.offsetParent);return t},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}};return n}(c.utils.common),c.controllers.OptionController=function(e,t,i){var r=function(e,n,a){r.superclass.call(this,e,n);var s=this;if(this.__select=document.createElement("select"),i.isArray(a)){var o={};i.each(a,function(e){o[e]=e}),a=o}i.each(a,function(e,t){var i=document.createElement("option");i.innerHTML=t,i.setAttribute("value",e),s.__select.appendChild(i)}),this.updateDisplay(),t.bind(this.__select,"change",function(){s.setValue(this.options[this.selectedIndex].value)}),this.domElement.appendChild(this.__select)};return r.superclass=e,i.extend(r.prototype,e.prototype,{setValue:function(e){var t=r.superclass.prototype.setValue.call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),t},updateDisplay:function(){return this.__select.value=this.getValue(),r.superclass.prototype.updateDisplay.call(this)}}),r}(c.controllers.Controller,c.dom.dom,c.utils.common),c.controllers.NumberController=function(e,t){var i=function(e,r,n){var a;i.superclass.call(this,e,r),this.__min=(n=n||{}).min,this.__max=n.max,this.__step=n.step,this.__impliedStep=t.isUndefined(this.__step)?0==this.initialValue?1:Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__step,this.__precision=(a=(a=this.__impliedStep).toString()).indexOf(".")>-1?a.length-a.indexOf(".")-1:0};return i.superclass=e,t.extend(i.prototype,e.prototype,{setValue:function(e){return void 0!==this.__min&&e<this.__min?e=this.__min:void 0!==this.__max&&e>this.__max&&(e=this.__max),void 0!==this.__step&&e%this.__step!=0&&(e=Math.round(e/this.__step)*this.__step),i.superclass.prototype.setValue.call(this,e)},min:function(e){return this.__min=e,this},max:function(e){return this.__max=e,this},step:function(e){return this.__step=e,this}}),i}(c.controllers.Controller,c.utils.common),c.controllers.NumberControllerBox=function(e,t,i){var r=function(e,n,a){this.__truncationSuspended=!1,r.superclass.call(this,e,n,a);var s,o=this;function c(){var e=parseFloat(o.__input.value);i.isNaN(e)||o.setValue(e)}function f(e){var t=s-e.clientY;o.setValue(o.getValue()+t*o.__impliedStep),s=e.clientY}function h(){t.unbind(window,"mousemove",f),t.unbind(window,"mouseup",h)}this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"change",c),t.bind(this.__input,"blur",function(){c(),o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}),t.bind(this.__input,"mousedown",function(e){t.bind(window,"mousemove",f),t.bind(window,"mouseup",h),s=e.clientY}),t.bind(this.__input,"keydown",function(e){13===e.keyCode&&(o.__truncationSuspended=!0,this.blur(),o.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return r.superclass=e,i.extend(r.prototype,e.prototype,{updateDisplay:function(){var e,t;return this.__input.value=this.__truncationSuspended?this.getValue():(e=this.getValue(),t=Math.pow(10,this.__precision),Math.round(e*t)/t),r.superclass.prototype.updateDisplay.call(this)}}),r}(c.controllers.NumberController,c.dom.dom,c.utils.common),c.controllers.NumberControllerSlider=function(e,t,i,r,n){var a=function(e,i,r,n,s){a.superclass.call(this,e,i,{min:r,max:n,step:s});var o=this;function c(e){e.preventDefault();var i,r,n=t.getOffset(o.__background),a=t.getWidth(o.__background);return o.setValue((r=o.__min)+(e.clientX-(i=n.left))/(n.left+a-i)*(o.__max-r)),!1}function f(){t.unbind(window,"mousemove",c),t.unbind(window,"mouseup",f),o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),t.bind(this.__background,"mousedown",function(e){t.bind(window,"mousemove",c),t.bind(window,"mouseup",f),c(e)}),t.addClass(this.__background,"slider"),t.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return a.superclass=e,a.useDefaultStyles=function(){i.inject(".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}")},r.extend(a.prototype,e.prototype,{updateDisplay:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",a.superclass.prototype.updateDisplay.call(this)}}),a}(c.controllers.NumberController,c.dom.dom,c.utils.css,c.utils.common),c.controllers.FunctionController=function(e,t,i){var r=function(e,i,n){r.superclass.call(this,e,i);var a=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===n?"Fire":n,t.bind(this.__button,"click",function(e){return e.preventDefault(),a.fire(),!1}),t.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return r.superclass=e,i.extend(r.prototype,e.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),r}(c.controllers.Controller,c.dom.dom,c.utils.common),c.controllers.BooleanController=function(e,t,i){var r=function(e,i){r.superclass.call(this,e,i);var n=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),t.bind(this.__checkbox,"change",function(){n.setValue(!n.__prev)},!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return r.superclass=e,i.extend(r.prototype,e.prototype,{setValue:function(e){var t=r.superclass.prototype.setValue.call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),t},updateDisplay:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,r.superclass.prototype.updateDisplay.call(this)}}),r}(c.controllers.Controller,c.dom.dom,c.utils.common),c.color.toString=(s=c.utils.common,function(e){if(1==e.a||s.isUndefined(e.a)){for(var t=e.hex.toString(16);t.length<6;)t="0"+t;return"#"+t}return"rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+e.a+")"}),c.color.interpret=function(e,t){var i,r,n=[{litmus:t.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString())}},write:e},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString())}},write:e},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:e},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:e}}},{litmus:t.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:t.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4==e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:t.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)&&t.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)&&t.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}];return function(){r=!1;var e=arguments.length>1?t.toArray(arguments):arguments[0];return t.each(n,function(n){if(n.litmus(e))return t.each(n.conversions,function(n,a){if(i=n.read(e),!1===r&&!1!==i)return r=i,i.conversionName=a,i.conversion=n,t.BREAK}),t.BREAK}),r}}(c.color.toString,c.utils.common),c.GUI=c.gui.GUI=function(e,t,i,r,n,a,s,o,c,f,h,u,l,d,_){e.inject(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n");var p,m,E="Default",b=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}(),g=!0,A=!1,R=[],T=function(e){var t=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),d.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],e=_.defaults(e=e||{},{autoPlace:!0,width:T.DEFAULT_WIDTH}),e=_.defaults(e,{resizable:e.autoPlace,hideable:e.autoPlace}),_.isUndefined(e.load)?e.load={preset:E}:e.preset&&(e.load.preset=e.preset),_.isUndefined(e.parent)&&e.hideable&&R.push(this),e.resizable=_.isUndefined(e.parent)&&e.resizable,e.autoPlace&&_.isUndefined(e.scrollable)&&(e.scrollable=!0);var i=b&&"true"===localStorage.getItem(M(this,"isLocal"));if(Object.defineProperties(this,{parent:{get:function(){return e.parent}},scrollable:{get:function(){return e.scrollable}},autoPlace:{get:function(){return e.autoPlace}},preset:{get:function(){return t.parent?t.getRoot().preset:e.load.preset},set:function(i){t.parent?t.getRoot().preset=i:e.load.preset=i,function(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value==e.preset&&(e.__preset_select.selectedIndex=t)}(this),t.revert()}},width:{get:function(){return e.width},set:function(i){e.width=i,x(t,i)}},name:{get:function(){return e.name},set:function(t){e.name=t,n&&(n.innerHTML=e.name)}},closed:{get:function(){return e.closed},set:function(i){e.closed=i,e.closed?d.addClass(t.__ul,T.CLASS_CLOSED):d.removeClass(t.__ul,T.CLASS_CLOSED),this.onResize(),t.__closeButton&&(t.__closeButton.innerHTML=i?T.TEXT_OPEN:T.TEXT_CLOSED)}},load:{get:function(){return e.load}},useLocalStorage:{get:function(){return i},set:function(e){b&&(i=e,e?d.bind(window,"unload",s):d.unbind(window,"unload",s),localStorage.setItem(M(t,"isLocal"),e))}}}),_.isUndefined(e.parent)){if(e.closed=!1,d.addClass(this.domElement,T.CLASS_MAIN),d.makeSelectable(this.domElement,!1),b&&i){t.useLocalStorage=!0;var r=localStorage.getItem(M(this,"gui"));r&&(e.load=JSON.parse(r))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=T.TEXT_CLOSED,d.addClass(this.__closeButton,T.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),d.bind(this.__closeButton,"click",function(){t.closed=!t.closed})}else{void 0===e.closed&&(e.closed=!0);var n=document.createTextNode(e.name);d.addClass(n,"controller-name");var a=S(t,n);d.addClass(this.__ul,T.CLASS_CLOSED),d.addClass(a,"title"),d.bind(a,"click",function(e){return e.preventDefault(),t.closed=!t.closed,!1}),e.closed||(this.closed=!1)}function s(){localStorage.setItem(M(t,"gui"),JSON.stringify(t.getSaveObject()))}e.autoPlace&&(_.isUndefined(e.parent)&&(g&&(m=document.createElement("div"),d.addClass(m,"dg"),d.addClass(m,T.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(m),g=!1),m.appendChild(this.domElement),d.addClass(this.domElement,T.CLASS_AUTO_PLACE)),this.parent||x(t,e.width)),d.bind(window,"resize",function(){t.onResize()}),d.bind(this.__ul,"webkitTransitionEnd",function(){t.onResize()}),d.bind(this.__ul,"transitionend",function(){t.onResize()}),d.bind(this.__ul,"oTransitionEnd",function(){t.onResize()}),this.onResize(),e.resizable&&function(e){var t;function i(i){return i.preventDefault(),t=i.clientX,d.addClass(e.__closeButton,T.CLASS_DRAG),d.bind(window,"mousemove",r),d.bind(window,"mouseup",n),!1}function r(i){return i.preventDefault(),e.width+=t-i.clientX,e.onResize(),t=i.clientX,!1}function n(){d.removeClass(e.__closeButton,T.CLASS_DRAG),d.unbind(window,"mousemove",r),d.unbind(window,"mouseup",n)}e.__resize_handle=document.createElement("div"),_.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),d.bind(e.__resize_handle,"mousedown",i),d.bind(e.__closeButton,"mousedown",i),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}(this);t.getRoot();e.parent||function(){var e=t.getRoot();e.width+=1,_.defer(function(){e.width-=1})}()};function v(e,t,i,f){if(void 0===t[i])throw new Error("Object "+t+' has no property "'+i+'"');var u;if(f.color)u=new h(t,i);else{var l=[t,i].concat(f.factoryArgs);u=r.apply(e,l)}f.before instanceof n&&(f.before=f.before.__li),y(e,u),d.addClass(u.domElement,"c");var p=document.createElement("span");d.addClass(p,"property-name"),p.innerHTML=u.property;var m=document.createElement("div");m.appendChild(p),m.appendChild(u.domElement);var E=S(e,m,f.before);return d.addClass(E,T.CLASS_CONTROLLER_ROW),d.addClass(E,typeof u.getValue()),function(e,t,i){if(i.__li=t,i.__gui=e,_.extend(i,{options:function(t){return arguments.length>1?(i.remove(),v(e,i.object,i.property,{before:i.__li.nextElementSibling,factoryArgs:[_.toArray(arguments)]})):_.isArray(t)||_.isObject(t)?(i.remove(),v(e,i.object,i.property,{before:i.__li.nextElementSibling,factoryArgs:[t]})):void 0},name:function(e){return i.__li.firstElementChild.firstElementChild.innerHTML=e,i},listen:function(){return i.__gui.listen(i),i},remove:function(){return i.__gui.remove(i),i}}),i instanceof c){var r=new o(i.object,i.property,{min:i.__min,max:i.__max,step:i.__step});_.each(["updateDisplay","onChange","onFinishChange"],function(e){var t=i[e],n=r[e];i[e]=r[e]=function(){var e=Array.prototype.slice.call(arguments);return t.apply(i,e),n.apply(r,e)}}),d.addClass(t,"has-slider"),i.domElement.insertBefore(r.domElement,i.domElement.firstElementChild)}else if(i instanceof o){var n=function(t){return _.isNumber(i.__min)&&_.isNumber(i.__max)?(i.remove(),v(e,i.object,i.property,{before:i.__li.nextElementSibling,factoryArgs:[i.__min,i.__max,i.__step]})):t};i.min=_.compose(n,i.min),i.max=_.compose(n,i.max)}else i instanceof a?(d.bind(t,"click",function(){d.fakeEvent(i.__checkbox,"click")}),d.bind(i.__checkbox,"click",function(e){e.stopPropagation()})):i instanceof s?(d.bind(t,"click",function(){d.fakeEvent(i.__button,"click")}),d.bind(t,"mouseover",function(){d.addClass(i.__button,"hover")}),d.bind(t,"mouseout",function(){d.removeClass(i.__button,"hover")})):i instanceof h&&(d.addClass(t,"color"),i.updateDisplay=_.compose(function(e){return t.style.borderLeftColor=i.__color.toString(),e},i.updateDisplay),i.updateDisplay());i.setValue=_.compose(function(t){return e.getRoot().__preset_select&&i.isModified()&&C(e.getRoot(),!0),t},i.setValue)}(e,E,u),e.__controllers.push(u),u}function S(e,t,i){var r=document.createElement("li");return t&&r.appendChild(t),i?e.__ul.insertBefore(r,params.before):e.__ul.appendChild(r),e.onResize(),r}function y(e,t){var i=e.getRoot(),r=i.__rememberedObjects.indexOf(t.object);if(-1!=r){var n=i.__rememberedObjectIndecesToControllers[r];if(void 0===n&&(i.__rememberedObjectIndecesToControllers[r]=n={}),n[t.property]=t,i.load&&i.load.remembered){var a,s=i.load.remembered;if(s[e.preset])a=s[e.preset];else{if(!s[E])return;a=s[E]}if(a[r]&&void 0!==a[r][t.property]){var o=a[r][t.property];t.initialValue=o,t.setValue(o)}}}}function M(e,t){return document.location.href+"."+t}function x(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function N(e,t){var i={};return _.each(e.__rememberedObjects,function(r,n){var a={};_.each(e.__rememberedObjectIndecesToControllers[n],function(e,i){a[i]=t?e.initialValue:e.getValue()}),i[n]=a}),i}function w(e,t,i){var r=document.createElement("option");r.innerHTML=t,r.value=t,e.__preset_select.appendChild(r),i&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function C(e,t){var i=e.__preset_select[e.__preset_select.selectedIndex];i.innerHTML=t?i.value+"*":i.value}return T.toggleHide=function(){A=!A,_.each(R,function(e){e.domElement.style.zIndex=A?-999:999,e.domElement.style.opacity=A?0:1})},T.CLASS_AUTO_PLACE="a",T.CLASS_AUTO_PLACE_CONTAINER="ac",T.CLASS_MAIN="main",T.CLASS_CONTROLLER_ROW="cr",T.CLASS_TOO_TALL="taller-than-window",T.CLASS_CLOSED="closed",T.CLASS_CLOSE_BUTTON="close-button",T.CLASS_DRAG="drag",T.DEFAULT_WIDTH=245,T.TEXT_CLOSED="Close Controls",T.TEXT_OPEN="Open Controls",d.bind(window,"keydown",function(e){"text"===document.activeElement.type||72!==e.which&&72!=e.keyCode||T.toggleHide()},!1),_.extend(T.prototype,{add:function(e,t){return v(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return v(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.slice(this.__controllers.indexOf(e),1);var t=this;_.defer(function(){t.onResize()})},destroy:function(){this.autoPlace&&m.removeChild(this.domElement)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var i=new T(t);this.__folders[e]=i;var r=S(this,i.domElement);return d.addClass(r,"folder"),i},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=d.getOffset(e.__ul).top,i=0;_.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(i+=d.getHeight(t))}),window.innerHeight-t-20<i?(d.addClass(e.domElement,T.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(d.removeClass(e.domElement,T.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&_.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},remember:function(){if(_.isUndefined(p)&&((p=new l).domElement.innerHTML='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>'),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;_.each(Array.prototype.slice.call(arguments),function(t){0==e.__rememberedObjects.length&&function(e){var t=e.__save_row=document.createElement("li");d.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),d.addClass(t,"save-row");var i=document.createElement("span");i.innerHTML="&nbsp;",d.addClass(i,"button gears");var r=document.createElement("span");r.innerHTML="Save",d.addClass(r,"button"),d.addClass(r,"save");var n=document.createElement("span");n.innerHTML="New",d.addClass(n,"button"),d.addClass(n,"save-as");var a=document.createElement("span");a.innerHTML="Revert",d.addClass(a,"button"),d.addClass(a,"revert");var s=e.__preset_select=document.createElement("select");e.load&&e.load.remembered?_.each(e.load.remembered,function(t,i){w(e,i,i==e.preset)}):w(e,E,!1);if(d.bind(s,"change",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(s),t.appendChild(i),t.appendChild(r),t.appendChild(n),t.appendChild(a),b){var o=document.getElementById("dg-save-locally"),c=document.getElementById("dg-local-explain");o.style.display="block";var f=document.getElementById("dg-local-storage");function h(){c.style.display=e.useLocalStorage?"block":"none"}"true"===localStorage.getItem(M(e,"isLocal"))&&f.setAttribute("checked","checked"),h(),d.bind(f,"change",function(){e.useLocalStorage=!e.useLocalStorage,h()})}var u=document.getElementById("dg-new-constructor");d.bind(u,"keydown",function(e){!e.metaKey||67!==e.which&&67!=e.keyCode||p.hide()}),d.bind(i,"click",function(){u.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),p.show(),u.focus(),u.select()}),d.bind(r,"click",function(){e.save()}),d.bind(n,"click",function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),d.bind(a,"click",function(){e.revert()})}(e),-1==e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&x(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=N(this)),e.folders={},_.each(this.__folders,function(t,i){e.folders[i]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=N(this),C(this,!1)},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[E]=N(this,!0)),this.load.remembered[e]=N(this),this.preset=e,w(this,e,!0)},revert:function(e){_.each(this.__controllers,function(t){this.getRoot().load.remembered?y(e||this.getRoot(),t):t.setValue(t.initialValue)},this),_.each(this.__folders,function(e){e.revert(e)}),e||C(this.getRoot(),!1)},listen:function(e){var t=0==this.__listening.length;this.__listening.push(e),t&&function e(t){0!=t.length&&u(function(){e(t)});_.each(t,function(e){e.updateDisplay()})}(this.__listening)}}),T}(c.utils.css,0,0,c.controllers.factory=function(e,t,i,r,n,a,s){return function(o,c){var f=o[c];return s.isArray(arguments[2])||s.isObject(arguments[2])?new e(o,c,arguments[2]):s.isNumber(f)?s.isNumber(arguments[2])&&s.isNumber(arguments[3])?new i(o,c,arguments[2],arguments[3]):new t(o,c,{min:arguments[2],max:arguments[3]}):s.isString(f)?new r(o,c):s.isFunction(f)?new n(o,c,""):s.isBoolean(f)?new a(o,c):void 0}}(c.controllers.OptionController,c.controllers.NumberControllerBox,c.controllers.NumberControllerSlider,c.controllers.StringController=function(e,t,i){var r=function(e,i){r.superclass.call(this,e,i);var n=this;function a(){n.setValue(n.__input.value)}this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"keyup",a),t.bind(this.__input,"change",a),t.bind(this.__input,"blur",function(){n.__onFinishChange&&n.__onFinishChange.call(n,n.getValue())}),t.bind(this.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return r.superclass=e,i.extend(r.prototype,e.prototype,{updateDisplay:function(){return t.isActive(this.__input)||(this.__input.value=this.getValue()),r.superclass.prototype.updateDisplay.call(this)}}),r}(c.controllers.Controller,c.dom.dom,c.utils.common),c.controllers.FunctionController,c.controllers.BooleanController,c.utils.common),c.controllers.Controller,c.controllers.BooleanController,c.controllers.FunctionController,c.controllers.NumberControllerBox,c.controllers.NumberControllerSlider,0,c.controllers.ColorController=function(e,t,i,r,n){var a=function(e,s){a.superclass.call(this,e,s),this.__color=new i(this.getValue()),this.__temp=new i(0);var c=this;this.domElement=document.createElement("div"),t.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",t.bind(this.__input,"keydown",function(e){13===e.keyCode&&d.call(this)}),t.bind(this.__input,"blur",d),t.bind(this.__selector,"mousedown",function(e){t.addClass(this,"drag").bind(window,"mouseup",function(e){t.removeClass(c.__selector,"drag")})});var f,h=document.createElement("div");function u(e){p(e),t.bind(window,"mousemove",p),t.bind(window,"mouseup",l)}function l(){t.unbind(window,"mousemove",p),t.unbind(window,"mouseup",l)}function d(){var e=r(this.value);!1!==e?(c.__color.__state=e,c.setValue(c.__color.toOriginal())):this.value=c.__color.toString()}function _(){t.unbind(window,"mousemove",m),t.unbind(window,"mouseup",_)}function p(e){e.preventDefault();var i=t.getWidth(c.__saturation_field),r=t.getOffset(c.__saturation_field),n=(e.clientX-r.left+document.body.scrollLeft)/i,a=1-(e.clientY-r.top+document.body.scrollTop)/i;return a>1?a=1:a<0&&(a=0),n>1?n=1:n<0&&(n=0),c.__color.v=a,c.__color.s=n,c.setValue(c.__color.toOriginal()),!1}function m(e){e.preventDefault();var i=t.getHeight(c.__hue_field),r=t.getOffset(c.__hue_field),n=1-(e.clientY-r.top+document.body.scrollTop)/i;return n>1?n=1:n<0&&(n=0),c.__color.h=360*n,c.setValue(c.__color.toOriginal()),!1}n.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),n.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),n.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),n.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),n.extend(h.style,{width:"100%",height:"100%",background:"none"}),o(h,"top","rgba(0,0,0,0)","#000"),n.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),(f=this.__hue_field).style.background="",f.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",f.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",f.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",f.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",f.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",n.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),t.bind(this.__saturation_field,"mousedown",u),t.bind(this.__field_knob,"mousedown",u),t.bind(this.__hue_field,"mousedown",function(e){m(e),t.bind(window,"mousemove",m),t.bind(window,"mouseup",_)}),this.__saturation_field.appendChild(h),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};a.superclass=e,n.extend(a.prototype,e.prototype,{updateDisplay:function(){var e=r(this.getValue());if(!1!==e){var t=!1;n.each(i.COMPONENTS,function(i){if(!n.isUndefined(e[i])&&!n.isUndefined(this.__color.__state[i])&&e[i]!==this.__color.__state[i])return t=!0,{}},this),t&&n.extend(this.__color.__state,e)}n.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var a=this.__color.v<.5||this.__color.s>.5?255:0,s=255-a;n.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+a+","+a+","+a+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,o(this.__saturation_field,"left","#fff",this.__temp.toString()),n.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+a+","+a+","+a+")",textShadow:this.__input_textShadow+"rgba("+s+","+s+","+s+",.7)"})}});var s=["-moz-","-o-","-webkit-","-ms-",""];function o(e,t,i,r){e.style.background="",n.each(s,function(n){e.style.cssText+="background: "+n+"linear-gradient("+t+", "+i+" 0%, "+r+" 100%); "})}return a}(c.controllers.Controller,c.dom.dom,c.color.Color=function(e,t,i,r){var n=function(){if(this.__state=e.apply(this,arguments),!1===this.__state)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};function a(e,t,i){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(o(this,t,i),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(o(this,t,i),this.__state.space="RGB"),this.__state[t]=e}})}function s(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(c(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(c(this),this.__state.space="HSV"),this.__state[t]=e}})}function o(e,i,n){if("HEX"===e.__state.space)e.__state[i]=t.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw"Corrupted color state";r.extend(e.__state,t.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}}function c(e){var i=t.rgb_to_hsv(e.r,e.g,e.b);r.extend(e.__state,{s:i.s,v:i.v}),r.isNaN(i.h)?r.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=i.h}return n.COMPONENTS=["r","g","b","h","s","v","hex","a"],r.extend(n.prototype,{toString:function(){return i(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),a(n.prototype,"r",2),a(n.prototype,"g",1),a(n.prototype,"b",0),s(n.prototype,"h"),s(n.prototype,"s"),s(n.prototype,"v"),Object.defineProperty(n.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(n.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=t.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}}),n}(c.color.interpret,c.color.math={hsv_to_rgb:function(e,t,i){var r=Math.floor(e/60)%6,n=e/60-Math.floor(e/60),a=i*(1-t),s=i*(1-n*t),o=i*(1-(1-n)*t),c=[[i,o,a],[s,i,a],[a,i,o],[a,s,i],[o,a,i],[i,a,s]][r];return{r:255*c[0],g:255*c[1],b:255*c[2]}},rgb_to_hsv:function(e,t,i){var r,n=Math.min(e,t,i),a=Math.max(e,t,i),s=a-n;return 0==a?{h:NaN,s:0,v:0}:(r=e==a?(t-i)/s:t==a?2+(i-e)/s:4+(e-t)/s,(r/=6)<0&&(r+=1),{h:360*r,s:s/a,v:a/255})},rgb_to_hex:function(e,t,i){var r=this.hex_with_component(0,2,e);return r=this.hex_with_component(r,1,t),r=this.hex_with_component(r,0,i)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,i){return i<<(o=8*t)|e&~(255<<o)}},c.color.toString,c.utils.common),c.color.interpret,c.utils.common),c.utils.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)},c.dom.CenteredDiv=function(e,t){var i=function(){this.backgroundElement=document.createElement("div"),t.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),e.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),t.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var i=this;e.bind(this.backgroundElement,"click",function(){i.hide()})};return i.prototype.show=function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),t.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})},i.prototype.hide=function(){var t=this,i=function(){t.domElement.style.display="none",t.backgroundElement.style.display="none",e.unbind(t.domElement,"webkitTransitionEnd",i),e.unbind(t.domElement,"transitionend",i),e.unbind(t.domElement,"oTransitionEnd",i)};e.bind(this.domElement,"webkitTransitionEnd",i),e.bind(this.domElement,"transitionend",i),e.bind(this.domElement,"oTransitionEnd",i),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},i.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-e.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-e.getHeight(this.domElement)/2+"px"},i}(c.dom.dom,c.utils.common),c.dom.dom,c.utils.common)},{}],15:[function(e,t,i){t.exports=function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]}},{}],16:[function(e,t,i){function r(e){return parseFloat(e)||0}t.exports=function(e){if(e===window||e===document.body)return[window.innerWidth,window.innerHeight];if(!e.parentNode){var t=!0;document.body.appendChild(e)}var i=e.getBoundingClientRect(),n=getComputedStyle(e),a=(0|i.height)+r(n.getPropertyValue("margin-top"))+r(n.getPropertyValue("margin-bottom")),s=(0|i.width)+r(n.getPropertyValue("margin-left"))+r(n.getPropertyValue("margin-right"));t&&document.body.removeChild(e);return[s,a]}},{}],17:[function(e,t,i){"use strict";t.exports=function(e,t,i){switch(arguments.length){case 0:return new s([0],[0],0);case 1:if("number"==typeof e){var r=c(e);return new s(r,r,0)}return new s(e,c(e.length),0);case 2:if("number"==typeof t){var r=c(e.length);return new s(e,r,+t)}i=0;case 3:if(e.length!==t.length)throw new Error("state and velocity lengths must match");return new s(e,t,i)}};var r=e("cubic-hermite"),n=e("binary-search-bounds");function a(e,t,i){return Math.min(t,Math.max(e,i))}function s(e,t,i){this.dimension=e.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var r=0;r<this.dimension;++r)this.bounds[0][r]=-Infinity,this.bounds[1][r]=Infinity;this._state=e.slice().reverse(),this._velocity=t.slice().reverse(),this._time=[i],this._scratch=[e.slice(),e.slice(),e.slice(),e.slice(),e.slice()]}var o=s.prototype;function c(e){for(var t=new Array(e),i=0;i<e;++i)t[i]=0;return t}o.flush=function(e){var t=n.gt(this._time,e)-1;t<=0||(this._time.splice(0,t),this._state.splice(0,t*this.dimension),this._velocity.splice(0,t*this.dimension))},o.curve=function(e){var t=this._time,i=t.length,s=n.le(t,e),o=this._scratch[0],c=this._state,f=this._velocity,h=this.dimension,u=this.bounds;if(s<0)for(var l=h-1,d=0;d<h;++d,--l)o[d]=c[l];else if(s>=i-1){l=c.length-1;var _=e-t[i-1];for(d=0;d<h;++d,--l)o[d]=c[l]+_*f[l]}else{l=h*(s+1)-1;var p=t[s],m=t[s+1]-p||1,E=this._scratch[1],b=this._scratch[2],g=this._scratch[3],A=this._scratch[4],R=!0;for(d=0;d<h;++d,--l)E[d]=c[l],g[d]=f[l]*m,b[d]=c[l+h],A[d]=f[l+h]*m,R=R&&E[d]===b[d]&&g[d]===A[d]&&0===g[d];if(R)for(d=0;d<h;++d)o[d]=E[d];else r(E,g,b,A,(e-p)/m,o)}var T=u[0],v=u[1];for(d=0;d<h;++d)o[d]=a(T[d],v[d],o[d]);return o},o.dcurve=function(e){var t=this._time,i=t.length,a=n.le(t,e),s=this._scratch[0],o=this._state,c=this._velocity,f=this.dimension;if(a>=i-1)for(var h=o.length-1,u=0;u<f;++u,--h)s[u]=c[h];else{h=f*(a+1)-1;var l=t[a],d=t[a+1]-l||1,_=this._scratch[1],p=this._scratch[2],m=this._scratch[3],E=this._scratch[4],b=!0;for(u=0;u<f;++u,--h)_[u]=o[h],m[u]=c[h]*d,p[u]=o[h+f],E[u]=c[h+f]*d,b=b&&_[u]===p[u]&&m[u]===E[u]&&0===m[u];if(b)for(u=0;u<f;++u)s[u]=0;else{r.derivative(_,m,p,E,(e-l)/d,s);for(u=0;u<f;++u)s[u]/=d}}return s},o.lastT=function(){var e=this._time;return e[e.length-1]},o.stable=function(){for(var e=this._velocity,t=e.length,i=this.dimension-1;i>=0;--i)if(e[--t])return!1;return!0},o.jump=function(e){var t=this.lastT(),i=this.dimension;if(!(e<t||arguments.length!==i+1)){var r=this._state,n=this._velocity,s=r.length-this.dimension,o=this.bounds,c=o[0],f=o[1];this._time.push(t,e);for(var h=0;h<2;++h)for(var u=0;u<i;++u)r.push(r[s++]),n.push(0);this._time.push(e);for(u=i;u>0;--u)r.push(a(c[u-1],f[u-1],arguments[u])),n.push(0)}},o.push=function(e){var t=this.lastT(),i=this.dimension;if(!(e<t||arguments.length!==i+1)){var r=this._state,n=this._velocity,s=r.length-this.dimension,o=e-t,c=this.bounds,f=c[0],h=c[1],u=o>1e-6?1/o:0;this._time.push(e);for(var l=i;l>0;--l){var d=a(f[l-1],h[l-1],arguments[l]);r.push(d),n.push((d-r[s++])*u)}}},o.set=function(e){var t=this.dimension;if(!(e<this.lastT()||arguments.length!==t+1)){var i=this._state,r=this._velocity,n=this.bounds,s=n[0],o=n[1];this._time.push(e);for(var c=t;c>0;--c)i.push(a(s[c-1],o[c-1],arguments[c])),r.push(0)}},o.move=function(e){var t=this.lastT(),i=this.dimension;if(!(e<=t||arguments.length!==i+1)){var r=this._state,n=this._velocity,s=r.length-this.dimension,o=this.bounds,c=o[0],f=o[1],h=e-t,u=h>1e-6?1/h:0;this._time.push(e);for(var l=i;l>0;--l){var d=arguments[l];r.push(a(c[l-1],f[l-1],r[s++]+d)),n.push(d*u)}}},o.idle=function(e){var t=this.lastT();if(!(e<t)){var i=this.dimension,r=this._state,n=this._velocity,s=r.length-i,o=this.bounds,c=o[0],f=o[1],h=e-t;this._time.push(e);for(var u=i-1;u>=0;--u)r.push(a(c[u],f[u],r[s]+h*n[s])),n.push(0),s+=1}}},{"binary-search-bounds":3,"cubic-hermite":8}],18:[function(e,t,i){t.exports=function(e,t){var i=t[0],r=t[1],n=t[2],a=t[3],s=t[4],o=t[5],c=t[6],f=t[7],h=t[8],u=t[9],l=t[10],d=t[11],_=t[12],p=t[13],m=t[14],E=t[15];return e[0]=o*(l*E-d*m)-u*(c*E-f*m)+p*(c*d-f*l),e[1]=-(r*(l*E-d*m)-u*(n*E-a*m)+p*(n*d-a*l)),e[2]=r*(c*E-f*m)-o*(n*E-a*m)+p*(n*f-a*c),e[3]=-(r*(c*d-f*l)-o*(n*d-a*l)+u*(n*f-a*c)),e[4]=-(s*(l*E-d*m)-h*(c*E-f*m)+_*(c*d-f*l)),e[5]=i*(l*E-d*m)-h*(n*E-a*m)+_*(n*d-a*l),e[6]=-(i*(c*E-f*m)-s*(n*E-a*m)+_*(n*f-a*c)),e[7]=i*(c*d-f*l)-s*(n*d-a*l)+h*(n*f-a*c),e[8]=s*(u*E-d*p)-h*(o*E-f*p)+_*(o*d-f*u),e[9]=-(i*(u*E-d*p)-h*(r*E-a*p)+_*(r*d-a*u)),e[10]=i*(o*E-f*p)-s*(r*E-a*p)+_*(r*f-a*o),e[11]=-(i*(o*d-f*u)-s*(r*d-a*u)+h*(r*f-a*o)),e[12]=-(s*(u*m-l*p)-h*(o*m-c*p)+_*(o*l-c*u)),e[13]=i*(u*m-l*p)-h*(r*m-n*p)+_*(r*l-n*u),e[14]=-(i*(o*m-c*p)-s*(r*m-n*p)+_*(r*c-n*o)),e[15]=i*(o*l-c*u)-s*(r*l-n*u)+h*(r*c-n*o),e}},{}],19:[function(e,t,i){t.exports=function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},{}],20:[function(e,t,i){t.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],21:[function(e,t,i){t.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],22:[function(e,t,i){t.exports=function(e){var t=e[0],i=e[1],r=e[2],n=e[3],a=e[4],s=e[5],o=e[6],c=e[7],f=e[8],h=e[9],u=e[10],l=e[11],d=e[12],_=e[13],p=e[14],m=e[15];return(t*s-i*a)*(u*m-l*p)-(t*o-r*a)*(h*m-l*_)+(t*c-n*a)*(h*p-u*_)+(i*o-r*s)*(f*m-l*d)-(i*c-n*s)*(f*p-u*d)+(r*c-n*o)*(f*_-h*d)}},{}],23:[function(e,t,i){t.exports=function(e,t){var i=t[0],r=t[1],n=t[2],a=t[3],s=i+i,o=r+r,c=n+n,f=i*s,h=r*s,u=r*o,l=n*s,d=n*o,_=n*c,p=a*s,m=a*o,E=a*c;return e[0]=1-u-_,e[1]=h+E,e[2]=l-m,e[3]=0,e[4]=h-E,e[5]=1-f-_,e[6]=d+p,e[7]=0,e[8]=l+m,e[9]=d-p,e[10]=1-f-u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],24:[function(e,t,i){t.exports=function(e,t,i){var r,n,a,s=i[0],o=i[1],c=i[2],f=Math.sqrt(s*s+o*o+c*c);if(Math.abs(f)<1e-6)return null;return s*=f=1/f,o*=f,c*=f,r=Math.sin(t),n=Math.cos(t),e[0]=s*s*(a=1-n)+n,e[1]=o*s*a+c*r,e[2]=c*s*a-o*r,e[3]=0,e[4]=s*o*a-c*r,e[5]=o*o*a+n,e[6]=c*o*a+s*r,e[7]=0,e[8]=s*c*a+o*r,e[9]=o*c*a-s*r,e[10]=c*c*a+n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],25:[function(e,t,i){t.exports=function(e,t,i){var r=t[0],n=t[1],a=t[2],s=t[3],o=r+r,c=n+n,f=a+a,h=r*o,u=r*c,l=r*f,d=n*c,_=n*f,p=a*f,m=s*o,E=s*c,b=s*f;return e[0]=1-(d+p),e[1]=u+b,e[2]=l-E,e[3]=0,e[4]=u-b,e[5]=1-(h+p),e[6]=_+m,e[7]=0,e[8]=l+E,e[9]=_-m,e[10]=1-(h+d),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}},{}],26:[function(e,t,i){t.exports=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],27:[function(e,t,i){t.exports=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}},{}],28:[function(e,t,i){t.exports=function(e,t){var i=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],29:[function(e,t,i){t.exports=function(e,t){var i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],30:[function(e,t,i){t.exports=function(e,t){var i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],31:[function(e,t,i){t.exports=function(e,t,i,r,n,a,s){var o=1/(i-t),c=1/(n-r),f=1/(a-s);return e[0]=2*a*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*c,e[6]=0,e[7]=0,e[8]=(i+t)*o,e[9]=(n+r)*c,e[10]=(s+a)*f,e[11]=-1,e[12]=0,e[13]=0,e[14]=s*a*2*f,e[15]=0,e}},{}],32:[function(e,t,i){t.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],33:[function(e,t,i){t.exports={create:e("./create"),clone:e("./clone"),copy:e("./copy"),identity:e("./identity"),transpose:e("./transpose"),invert:e("./invert"),adjoint:e("./adjoint"),determinant:e("./determinant"),multiply:e("./multiply"),translate:e("./translate"),scale:e("./scale"),rotate:e("./rotate"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),fromRotation:e("./fromRotation"),fromRotationTranslation:e("./fromRotationTranslation"),fromScaling:e("./fromScaling"),fromTranslation:e("./fromTranslation"),fromXRotation:e("./fromXRotation"),fromYRotation:e("./fromYRotation"),fromZRotation:e("./fromZRotation"),fromQuat:e("./fromQuat"),frustum:e("./frustum"),perspective:e("./perspective"),perspectiveFromFieldOfView:e("./perspectiveFromFieldOfView"),ortho:e("./ortho"),lookAt:e("./lookAt"),str:e("./str")}},{"./adjoint":18,"./clone":19,"./copy":20,"./create":21,"./determinant":22,"./fromQuat":23,"./fromRotation":24,"./fromRotationTranslation":25,"./fromScaling":26,"./fromTranslation":27,"./fromXRotation":28,"./fromYRotation":29,"./fromZRotation":30,"./frustum":31,"./identity":32,"./invert":34,"./lookAt":35,"./multiply":36,"./ortho":37,"./perspective":38,"./perspectiveFromFieldOfView":39,"./rotate":40,"./rotateX":41,"./rotateY":42,"./rotateZ":43,"./scale":44,"./str":45,"./translate":46,"./transpose":47}],34:[function(e,t,i){t.exports=function(e,t){var i=t[0],r=t[1],n=t[2],a=t[3],s=t[4],o=t[5],c=t[6],f=t[7],h=t[8],u=t[9],l=t[10],d=t[11],_=t[12],p=t[13],m=t[14],E=t[15],b=i*o-r*s,g=i*c-n*s,A=i*f-a*s,R=r*c-n*o,T=r*f-a*o,v=n*f-a*c,S=h*p-u*_,y=h*m-l*_,M=h*E-d*_,x=u*m-l*p,N=u*E-d*p,w=l*E-d*m,C=b*w-g*N+A*x+R*M-T*y+v*S;if(!C)return null;return e[0]=(o*w-c*N+f*x)*(C=1/C),e[1]=(n*N-r*w-a*x)*C,e[2]=(p*v-m*T+E*R)*C,e[3]=(l*T-u*v-d*R)*C,e[4]=(c*M-s*w-f*y)*C,e[5]=(i*w-n*M+a*y)*C,e[6]=(m*A-_*v-E*g)*C,e[7]=(h*v-l*A+d*g)*C,e[8]=(s*N-o*M+f*S)*C,e[9]=(r*M-i*N-a*S)*C,e[10]=(_*T-p*A+E*b)*C,e[11]=(u*A-h*T-d*b)*C,e[12]=(o*y-s*x-c*S)*C,e[13]=(i*x-r*y+n*S)*C,e[14]=(p*g-_*R-m*b)*C,e[15]=(h*R-u*g+l*b)*C,e}},{}],35:[function(e,t,i){var r=e("./identity");t.exports=function(e,t,i,n){var a,s,o,c,f,h,u,l,d,_,p=t[0],m=t[1],E=t[2],b=n[0],g=n[1],A=n[2],R=i[0],T=i[1],v=i[2];if(Math.abs(p-R)<1e-6&&Math.abs(m-T)<1e-6&&Math.abs(E-v)<1e-6)return r(e);u=p-R,l=m-T,d=E-v,_=1/Math.sqrt(u*u+l*l+d*d),a=g*(d*=_)-A*(l*=_),s=A*(u*=_)-b*d,o=b*l-g*u,(_=Math.sqrt(a*a+s*s+o*o))?(a*=_=1/_,s*=_,o*=_):(a=0,s=0,o=0);c=l*o-d*s,f=d*a-u*o,h=u*s-l*a,(_=Math.sqrt(c*c+f*f+h*h))?(c*=_=1/_,f*=_,h*=_):(c=0,f=0,h=0);return e[0]=a,e[1]=c,e[2]=u,e[3]=0,e[4]=s,e[5]=f,e[6]=l,e[7]=0,e[8]=o,e[9]=h,e[10]=d,e[11]=0,e[12]=-(a*p+s*m+o*E),e[13]=-(c*p+f*m+h*E),e[14]=-(u*p+l*m+d*E),e[15]=1,e}},{"./identity":32}],36:[function(e,t,i){t.exports=function(e,t,i){var r=t[0],n=t[1],a=t[2],s=t[3],o=t[4],c=t[5],f=t[6],h=t[7],u=t[8],l=t[9],d=t[10],_=t[11],p=t[12],m=t[13],E=t[14],b=t[15],g=i[0],A=i[1],R=i[2],T=i[3];return e[0]=g*r+A*o+R*u+T*p,e[1]=g*n+A*c+R*l+T*m,e[2]=g*a+A*f+R*d+T*E,e[3]=g*s+A*h+R*_+T*b,e[4]=(g=i[4])*r+(A=i[5])*o+(R=i[6])*u+(T=i[7])*p,e[5]=g*n+A*c+R*l+T*m,e[6]=g*a+A*f+R*d+T*E,e[7]=g*s+A*h+R*_+T*b,e[8]=(g=i[8])*r+(A=i[9])*o+(R=i[10])*u+(T=i[11])*p,e[9]=g*n+A*c+R*l+T*m,e[10]=g*a+A*f+R*d+T*E,e[11]=g*s+A*h+R*_+T*b,e[12]=(g=i[12])*r+(A=i[13])*o+(R=i[14])*u+(T=i[15])*p,e[13]=g*n+A*c+R*l+T*m,e[14]=g*a+A*f+R*d+T*E,e[15]=g*s+A*h+R*_+T*b,e}},{}],37:[function(e,t,i){t.exports=function(e,t,i,r,n,a,s){var o=1/(t-i),c=1/(r-n),f=1/(a-s);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*f,e[11]=0,e[12]=(t+i)*o,e[13]=(n+r)*c,e[14]=(s+a)*f,e[15]=1,e}},{}],38:[function(e,t,i){t.exports=function(e,t,i,r,n){var a=1/Math.tan(t/2),s=1/(r-n);return e[0]=a/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(n+r)*s,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*n*r*s,e[15]=0,e}},{}],39:[function(e,t,i){t.exports=function(e,t,i,r){var n=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),s=Math.tan(t.leftDegrees*Math.PI/180),o=Math.tan(t.rightDegrees*Math.PI/180),c=2/(s+o),f=2/(n+a);return e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=f,e[6]=0,e[7]=0,e[8]=-(s-o)*c*.5,e[9]=(n-a)*f*.5,e[10]=r/(i-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*i/(i-r),e[15]=0,e}},{}],40:[function(e,t,i){t.exports=function(e,t,i,r){var n,a,s,o,c,f,h,u,l,d,_,p,m,E,b,g,A,R,T,v,S,y,M,x,N=r[0],w=r[1],C=r[2],I=Math.sqrt(N*N+w*w+C*C);if(Math.abs(I)<1e-6)return null;N*=I=1/I,w*=I,C*=I,n=Math.sin(i),a=Math.cos(i),c=t[1],f=t[2],h=t[3],l=t[5],d=t[6],_=t[7],m=t[9],E=t[10],b=t[11],T=N*w*(s=1-a)-C*n,v=w*w*s+a,S=C*w*s+N*n,y=N*C*s+w*n,M=w*C*s-N*n,x=C*C*s+a,e[0]=(o=t[0])*(g=N*N*s+a)+(u=t[4])*(A=w*N*s+C*n)+(p=t[8])*(R=C*N*s-w*n),e[1]=c*g+l*A+m*R,e[2]=f*g+d*A+E*R,e[3]=h*g+_*A+b*R,e[4]=o*T+u*v+p*S,e[5]=c*T+l*v+m*S,e[6]=f*T+d*v+E*S,e[7]=h*T+_*v+b*S,e[8]=o*y+u*M+p*x,e[9]=c*y+l*M+m*x,e[10]=f*y+d*M+E*x,e[11]=h*y+_*M+b*x,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e}},{}],41:[function(e,t,i){t.exports=function(e,t,i){var r=Math.sin(i),n=Math.cos(i),a=t[4],s=t[5],o=t[6],c=t[7],f=t[8],h=t[9],u=t[10],l=t[11];t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[4]=a*n+f*r,e[5]=s*n+h*r,e[6]=o*n+u*r,e[7]=c*n+l*r,e[8]=f*n-a*r,e[9]=h*n-s*r,e[10]=u*n-o*r,e[11]=l*n-c*r,e}},{}],42:[function(e,t,i){t.exports=function(e,t,i){var r=Math.sin(i),n=Math.cos(i),a=t[0],s=t[1],o=t[2],c=t[3],f=t[8],h=t[9],u=t[10],l=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=a*n-f*r,e[1]=s*n-h*r,e[2]=o*n-u*r,e[3]=c*n-l*r,e[8]=a*r+f*n,e[9]=s*r+h*n,e[10]=o*r+u*n,e[11]=c*r+l*n,e}},{}],43:[function(e,t,i){t.exports=function(e,t,i){var r=Math.sin(i),n=Math.cos(i),a=t[0],s=t[1],o=t[2],c=t[3],f=t[4],h=t[5],u=t[6],l=t[7];t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=a*n+f*r,e[1]=s*n+h*r,e[2]=o*n+u*r,e[3]=c*n+l*r,e[4]=f*n-a*r,e[5]=h*n-s*r,e[6]=u*n-o*r,e[7]=l*n-c*r,e}},{}],44:[function(e,t,i){t.exports=function(e,t,i){var r=i[0],n=i[1],a=i[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],45:[function(e,t,i){t.exports=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}},{}],46:[function(e,t,i){t.exports=function(e,t,i){var r,n,a,s,o,c,f,h,u,l,d,_,p=i[0],m=i[1],E=i[2];t===e?(e[12]=t[0]*p+t[4]*m+t[8]*E+t[12],e[13]=t[1]*p+t[5]*m+t[9]*E+t[13],e[14]=t[2]*p+t[6]*m+t[10]*E+t[14],e[15]=t[3]*p+t[7]*m+t[11]*E+t[15]):(n=t[1],a=t[2],s=t[3],o=t[4],c=t[5],f=t[6],h=t[7],u=t[8],l=t[9],d=t[10],_=t[11],e[0]=r=t[0],e[1]=n,e[2]=a,e[3]=s,e[4]=o,e[5]=c,e[6]=f,e[7]=h,e[8]=u,e[9]=l,e[10]=d,e[11]=_,e[12]=r*p+o*m+u*E+t[12],e[13]=n*p+c*m+l*E+t[13],e[14]=a*p+f*m+d*E+t[14],e[15]=s*p+h*m+_*E+t[15]);return e}},{}],47:[function(e,t,i){t.exports=function(e,t){if(e===t){var i=t[1],r=t[2],n=t[3],a=t[6],s=t[7],o=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=n,e[13]=s,e[14]=o}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}},{}],48:[function(e,t,i){t.exports=function(e,t,i,r){var n,a,s,o,c,f=t[0],h=t[1],u=t[2],l=t[3],d=i[0],_=i[1],p=i[2],m=i[3];(a=f*d+h*_+u*p+l*m)<0&&(a=-a,d=-d,_=-_,p=-p,m=-m);1-a>1e-6?(n=Math.acos(a),s=Math.sin(n),o=Math.sin((1-r)*n)/s,c=Math.sin(r*n)/s):(o=1-r,c=r);return e[0]=o*f+c*d,e[1]=o*h+c*_,e[2]=o*u+c*p,e[3]=o*l+c*m,e}},{}],49:[function(e,t,i){t.exports=function(e,t,i){var r=t[0]*i[1]-t[1]*i[0];return e[0]=e[1]=0,e[2]=r,e}},{}],50:[function(e,t,i){t.exports=function(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}},{}],51:[function(e,t,i){t.exports=function(e,t,i){var r=t[0],n=t[1],a=t[2],s=i[0],o=i[1],c=i[2];return e[0]=n*c-a*o,e[1]=a*s-r*c,e[2]=r*o-n*s,e}},{}],52:[function(e,t,i){t.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}},{}],53:[function(e,t,i){t.exports=function(e){var t=e[0],i=e[1],r=e[2];return Math.sqrt(t*t+i*i+r*r)}},{}],54:[function(e,t,i){t.exports=function(e,t,i,r){var n=t[0],a=t[1],s=t[2];return e[0]=n+r*(i[0]-n),e[1]=a+r*(i[1]-a),e[2]=s+r*(i[2]-s),e}},{}],55:[function(e,t,i){t.exports=function(e,t){var i=t[0],r=t[1],n=t[2],a=i*i+r*r+n*n;a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a);return e}},{}],56:[function(e,t,i){t.exports=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}},{}],57:[function(e,t,i){"use strict";var r=e("is-browser");t.exports=r&&function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(t){e=!1}return e}()},{"is-browser":59}],58:[function(e,t,i){var r=e("vectors/normalize-nd");function n(e){for(var t=e.positions,i=e.cells,r=[],n=[],a={},s=0,o=0;o<i.length;o++){var c=i[o],f=t[c[0]],h=t[c[1]],u=t[c[2]],l=R(f,h),d=R(h,u),_=R(u,f),p=n.indexOf(l);-1===p&&(p=s++,n.push(l));var m=n.indexOf(d);-1===m&&(m=s++,n.push(d));var E=n.indexOf(_);-1===E&&(E=s++,n.push(_));var b=n.indexOf(f);-1===b&&(b=s++,n.push(f));var g=n.indexOf(h);-1===g&&(g=s++,n.push(h));var A=n.indexOf(u);-1===A&&(A=s++,n.push(u)),r.push([b,p,E]),r.push([g,m,p]),r.push([A,E,m]),r.push([p,m,E])}return{cells:r,positions:n};function R(e,t){var i=function(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2,(e[2]+t[2])/2]}(e,t),r=function(e){return e[0].toPrecision(6)+","+e[1].toPrecision(6)+","+e[2].toPrecision(6)}(i),n=a[r];return n||(a[r]=i)}}t.exports=function(e){e=0|+e;var t=[],i=[],a=.5+Math.sqrt(5)/2;t.push([-1,+a,0]),t.push([1,+a,0]),t.push([-1,-a,0]),t.push([1,-a,0]),t.push([0,-1,+a]),t.push([0,1,+a]),t.push([0,-1,-a]),t.push([0,1,-a]),t.push([+a,0,-1]),t.push([+a,0,1]),t.push([-a,0,-1]),t.push([-a,0,1]),i.push([0,11,5]),i.push([0,5,1]),i.push([0,1,7]),i.push([0,7,10]),i.push([0,10,11]),i.push([1,5,9]),i.push([5,11,4]),i.push([11,10,2]),i.push([10,7,6]),i.push([7,1,8]),i.push([3,9,4]),i.push([3,4,2]),i.push([3,2,6]),i.push([3,6,8]),i.push([3,8,9]),i.push([4,9,5]),i.push([2,4,11]),i.push([6,2,10]),i.push([8,6,7]),i.push([9,8,1]);var s={cells:i,positions:t};for(;e-- >0;)s=n(s);t=s.positions;for(var o=0;o<t.length;o++)r(t[o]);return s}},{"vectors/normalize-nd":83}],59:[function(e,t,i){t.exports=!0},{}],60:[function(e,t,i){var r=e("./normalize"),n=e("gl-mat4/create"),a=e("gl-mat4/clone"),s=e("gl-mat4/determinant"),o=e("gl-mat4/invert"),c=e("gl-mat4/transpose"),f={length:e("gl-vec3/length"),normalize:e("gl-vec3/normalize"),dot:e("gl-vec3/dot"),cross:e("gl-vec3/cross")},h=n(),u=n(),l=[0,0,0,0],d=[[0,0,0],[0,0,0],[0,0,0]],_=[0,0,0];function p(e,t,i,r,n){e[0]=t[0]*r+i[0]*n,e[1]=t[1]*r+i[1]*n,e[2]=t[2]*r+i[2]*n}t.exports=function(e,t,i,n,m,E){if(t||(t=[0,0,0]),i||(i=[0,0,0]),n||(n=[0,0,0]),m||(m=[0,0,0,1]),E||(E=[0,0,0,1]),!r(h,e))return!1;if(a(u,h),u[3]=0,u[7]=0,u[11]=0,u[15]=1,Math.abs(s(u)<1e-8))return!1;var b,g,A,R,T,v,S,y=h[3],M=h[7],x=h[11],N=h[12],w=h[13],C=h[14],I=h[15];if(0!==y||0!==M||0!==x){if(l[0]=y,l[1]=M,l[2]=x,l[3]=I,!o(u,u))return!1;c(u,u),(b=m)[0]=(A=u)[0]*(R=(g=l)[0])+A[4]*(T=g[1])+A[8]*(v=g[2])+A[12]*(S=g[3]),b[1]=A[1]*R+A[5]*T+A[9]*v+A[13]*S,b[2]=A[2]*R+A[6]*T+A[10]*v+A[14]*S,b[3]=A[3]*R+A[7]*T+A[11]*v+A[15]*S}else m[0]=m[1]=m[2]=0,m[3]=1;if(t[0]=N,t[1]=w,t[2]=C,function(e,t){e[0][0]=t[0],e[0][1]=t[1],e[0][2]=t[2],e[1][0]=t[4],e[1][1]=t[5],e[1][2]=t[6],e[2][0]=t[8],e[2][1]=t[9],e[2][2]=t[10]}(d,h),i[0]=f.length(d[0]),f.normalize(d[0],d[0]),n[0]=f.dot(d[0],d[1]),p(d[1],d[1],d[0],1,-n[0]),i[1]=f.length(d[1]),f.normalize(d[1],d[1]),n[0]/=i[1],n[1]=f.dot(d[0],d[2]),p(d[2],d[2],d[0],1,-n[1]),n[2]=f.dot(d[1],d[2]),p(d[2],d[2],d[1],1,-n[2]),i[2]=f.length(d[2]),f.normalize(d[2],d[2]),n[1]/=i[2],n[2]/=i[2],f.cross(_,d[1],d[2]),f.dot(d[0],_)<0)for(var F=0;F<3;F++)i[F]*=-1,d[F][0]*=-1,d[F][1]*=-1,d[F][2]*=-1;return E[0]=.5*Math.sqrt(Math.max(1+d[0][0]-d[1][1]-d[2][2],0)),E[1]=.5*Math.sqrt(Math.max(1-d[0][0]+d[1][1]-d[2][2],0)),E[2]=.5*Math.sqrt(Math.max(1-d[0][0]-d[1][1]+d[2][2],0)),E[3]=.5*Math.sqrt(Math.max(1+d[0][0]+d[1][1]+d[2][2],0)),d[2][1]>d[1][2]&&(E[0]=-E[0]),d[0][2]>d[2][0]&&(E[1]=-E[1]),d[1][0]>d[0][1]&&(E[2]=-E[2]),!0}},{"./normalize":61,"gl-mat4/clone":19,"gl-mat4/create":21,"gl-mat4/determinant":22,"gl-mat4/invert":34,"gl-mat4/transpose":47,"gl-vec3/cross":51,"gl-vec3/dot":52,"gl-vec3/length":53,"gl-vec3/normalize":55}],61:[function(e,t,i){t.exports=function(e,t){var i=t[15];if(0===i)return!1;for(var r=1/i,n=0;n<16;n++)e[n]=t[n]*r;return!0}},{}],62:[function(e,t,i){var r=e("gl-vec3/lerp"),n=e("mat4-recompose"),a=e("mat4-decompose"),s=e("gl-mat4/determinant"),o=e("quat-slerp"),c=u(),f=u(),h=u();function u(){return{translate:l(),scale:l(1),skew:l(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function l(e){return[e||0,e||0,e||0]}t.exports=function(e,t,i,u){if(0===s(t)||0===s(i))return!1;var l=a(t,c.translate,c.scale,c.skew,c.perspective,c.quaternion),d=a(i,f.translate,f.scale,f.skew,f.perspective,f.quaternion);return!(!l||!d||(r(h.translate,c.translate,f.translate,u),r(h.skew,c.skew,f.skew,u),r(h.scale,c.scale,f.scale,u),r(h.perspective,c.perspective,f.perspective,u),o(h.quaternion,c.quaternion,f.quaternion,u),n(e,h.translate,h.scale,h.skew,h.perspective,h.quaternion),0))}},{"gl-mat4/determinant":22,"gl-vec3/lerp":54,"mat4-decompose":60,"mat4-recompose":63,"quat-slerp":77}],63:[function(e,t,i){var r={identity:e("gl-mat4/identity"),translate:e("gl-mat4/translate"),multiply:e("gl-mat4/multiply"),create:e("gl-mat4/create"),scale:e("gl-mat4/scale"),fromRotationTranslation:e("gl-mat4/fromRotationTranslation")},n=(r.create(),r.create());t.exports=function(e,t,i,a,s,o){return r.identity(e),r.fromRotationTranslation(e,o,t),e[3]=s[0],e[7]=s[1],e[11]=s[2],e[15]=s[3],r.identity(n),0!==a[2]&&(n[9]=a[2],r.multiply(e,e,n)),0!==a[1]&&(n[9]=0,n[8]=a[1],r.multiply(e,e,n)),0!==a[0]&&(n[8]=0,n[4]=a[0],r.multiply(e,e,n)),r.scale(e,e,i),e}},{"gl-mat4/create":21,"gl-mat4/fromRotationTranslation":25,"gl-mat4/identity":32,"gl-mat4/multiply":36,"gl-mat4/scale":44,"gl-mat4/translate":46}],64:[function(e,t,i){"use strict";var r=e("binary-search-bounds"),n=e("mat4-interpolate"),a=e("gl-mat4/invert"),s=e("gl-mat4/rotateX"),o=e("gl-mat4/rotateY"),c=e("gl-mat4/rotateZ"),f=e("gl-mat4/lookAt"),h=e("gl-mat4/translate"),u=(e("gl-mat4/scale"),e("gl-vec3/normalize")),l=[0,0,0];function d(e){this._components=e.slice(),this._time=[0],this.prevMatrix=e.slice(),this.nextMatrix=e.slice(),this.computedMatrix=e.slice(),this.computedInverse=e.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-Infinity,Infinity]}t.exports=function(e){return new d((e=e||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var _=d.prototype;_.recalcMatrix=function(e){var t=this._time,i=r.le(t,e),s=this.computedMatrix;if(!(i<0)){var o=this._components;if(i===t.length-1)for(var c=16*i,f=0;f<16;++f)s[f]=o[c++];else{var h=t[i+1]-t[i],l=(c=16*i,this.prevMatrix),d=!0;for(f=0;f<16;++f)l[f]=o[c++];var _=this.nextMatrix;for(f=0;f<16;++f)_[f]=o[c++],d=d&&l[f]===_[f];if(h<1e-6||d)for(f=0;f<16;++f)s[f]=l[f];else n(s,l,_,(e-t[i])/h)}var p=this.computedUp;p[0]=s[1],p[1]=s[5],p[2]=s[9],u(p,p);var m=this.computedInverse;a(m,s);var E=this.computedEye,b=m[15];E[0]=m[12]/b,E[1]=m[13]/b,E[2]=m[14]/b;var g=this.computedCenter,A=Math.exp(this.computedRadius[0]);for(f=0;f<3;++f)g[f]=E[f]-s[2+4*f]*A}},_.idle=function(e){if(!(e<this.lastT())){for(var t=this._components,i=t.length-16,r=0;r<16;++r)t.push(t[i++]);this._time.push(e)}},_.flush=function(e){var t=r.gt(this._time,e)-2;t<0||(this._time.splice(0,t),this._components.splice(0,16*t))},_.lastT=function(){return this._time[this._time.length-1]},_.lookAt=function(e,t,i,r){this.recalcMatrix(e),this.setMatrix(e,f(this.computedMatrix,t=t||this.computedEye,i=i||l,r=r||this.computedUp));for(var n=0,a=0;a<3;++a)n+=Math.pow(i[a]-t[a],2);n=Math.log(Math.sqrt(n)),this.computedRadius[0]=n},_.rotate=function(e,t,i,r){this.recalcMatrix(e);var n=this.computedInverse;t&&o(n,n,t),i&&s(n,n,i),r&&c(n,n,r),this.setMatrix(e,a(this.computedMatrix,n))};var p=[0,0,0];_.pan=function(e,t,i,r){p[0]=-(t||0),p[1]=-(i||0),p[2]=-(r||0),this.recalcMatrix(e);var n=this.computedInverse;h(n,n,p),this.setMatrix(e,a(n,n))},_.translate=function(e,t,i,r){p[0]=t||0,p[1]=i||0,p[2]=r||0,this.recalcMatrix(e);var n=this.computedMatrix;h(n,n,p),this.setMatrix(e,n)},_.setMatrix=function(e,t){if(!(e<this.lastT())){this._time.push(e);for(var i=0;i<16;++i)this._components.push(t[i])}},_.setDistance=function(e,t){this.computedRadius[0]=t},_.setDistanceLimits=function(e,t){var i=this._limits;i[0]=e,i[1]=t},_.getDistanceLimits=function(e){var t=this._limits;return e?(e[0]=t[0],e[1]=t[1],e):t}},{"binary-search-bounds":3,"gl-mat4/invert":34,"gl-mat4/lookAt":35,"gl-mat4/rotateX":41,"gl-mat4/rotateY":42,"gl-mat4/rotateZ":43,"gl-mat4/scale":44,"gl-mat4/translate":46,"gl-vec3/normalize":55,"mat4-interpolate":62}],65:[function(e,t,i){"use strict";t.exports=function(e,t){t||(t=e,e=window);var i=0,n=0,a=0,s={shift:!1,alt:!1,control:!1,meta:!1},o=!1;function c(e){var t=!1;return"altKey"in e&&(t=t||e.altKey!==s.alt,s.alt=!!e.altKey),"shiftKey"in e&&(t=t||e.shiftKey!==s.shift,s.shift=!!e.shiftKey),"ctrlKey"in e&&(t=t||e.ctrlKey!==s.control,s.control=!!e.ctrlKey),"metaKey"in e&&(t=t||e.metaKey!==s.meta,s.meta=!!e.metaKey),t}function f(e,o){var f=r.x(o),h=r.y(o);"buttons"in o&&(e=0|o.buttons),(e!==i||f!==n||h!==a||c(o))&&(i=0|e,n=f||0,a=h||0,t&&t(i,n,a,s))}function h(e){f(0,e)}function u(){(i||n||a||s.shift||s.alt||s.meta||s.control)&&(n=a=0,i=0,s.shift=s.alt=s.control=s.meta=!1,t&&t(0,0,0,s))}function l(e){c(e)&&t&&t(i,n,a,s)}function d(e){0===r.buttons(e)?f(0,e):f(i,e)}function _(e){f(i|r.buttons(e),e)}function p(e){f(i&~r.buttons(e),e)}function m(){o||(o=!0,e.addEventListener("mousemove",d),e.addEventListener("mousedown",_),e.addEventListener("mouseup",p),e.addEventListener("mouseleave",h),e.addEventListener("mouseenter",h),e.addEventListener("mouseout",h),e.addEventListener("mouseover",h),e.addEventListener("blur",u),e.addEventListener("keyup",l),e.addEventListener("keydown",l),e.addEventListener("keypress",l),e!==window&&(window.addEventListener("blur",u),window.addEventListener("keyup",l),window.addEventListener("keydown",l),window.addEventListener("keypress",l)))}m();var E={element:e};return Object.defineProperties(E,{enabled:{get:function(){return o},set:function(t){t?m():o&&(o=!1,e.removeEventListener("mousemove",d),e.removeEventListener("mousedown",_),e.removeEventListener("mouseup",p),e.removeEventListener("mouseleave",h),e.removeEventListener("mouseenter",h),e.removeEventListener("mouseout",h),e.removeEventListener("mouseover",h),e.removeEventListener("blur",u),e.removeEventListener("keyup",l),e.removeEventListener("keydown",l),e.removeEventListener("keypress",l),e!==window&&(window.removeEventListener("blur",u),window.removeEventListener("keyup",l),window.removeEventListener("keydown",l),window.removeEventListener("keypress",l)))},enumerable:!0},buttons:{get:function(){return i},enumerable:!0},x:{get:function(){return n},enumerable:!0},y:{get:function(){return a},enumerable:!0},mods:{get:function(){return s},enumerable:!0}}),E};var r=e("mouse-event")},{"mouse-event":67}],66:[function(e,t,i){var r={left:0,top:0};t.exports=function(e,t,i){t=t||e.currentTarget||e.srcElement,Array.isArray(i)||(i=[0,0]);var n=e.clientX||0,a=e.clientY||0,s=(o=t,o===window||o===document||o===document.body?r:o.getBoundingClientRect());var o;return i[0]=n-s.left,i[1]=a-s.top,i}},{}],67:[function(e,t,i){"use strict";function r(e){return e.target||e.srcElement||window}i.buttons=function(e){if("object"==typeof e){if("buttons"in e)return e.buttons;if("which"in e){if(2===(t=e.which))return 4;if(3===t)return 2;if(t>0)return 1<<t-1}else if("button"in e){var t;if(1===(t=e.button))return 4;if(2===t)return 2;if(t>=0)return 1<<t}}return 0},i.element=r,i.x=function(e){if("object"==typeof e){if("offsetX"in e)return e.offsetX;var t=r(e).getBoundingClientRect();return e.clientX-t.left}return 0},i.y=function(e){if("object"==typeof e){if("offsetY"in e)return e.offsetY;var t=r(e).getBoundingClientRect();return e.clientY-t.top}return 0}},{}],68:[function(e,t,i){"use strict";var r=e("to-px");t.exports=function(e,t,i){"function"==typeof e&&(i=!!t,t=e,e=window);var n=r("ex",e),a=function(e){i&&e.preventDefault();var r=e.deltaX||0,a=e.deltaY||0,s=e.deltaZ||0,o=e.deltaMode,c=1;switch(o){case 1:c=n;break;case 2:c=window.innerHeight}if(a*=c,s*=c,(r*=c)||a||s)return t(r,a,s,e)};return e.addEventListener("wheel",a),a}},{"to-px":81}],69:[function(e,t,i){"use strict";t.exports=function(e,t,i,r,n,a,s,o,c,f){var h=t+a+f;if(u>0){var u=Math.sqrt(h+1);e[0]=.5*(s-c)/u,e[1]=.5*(o-r)/u,e[2]=.5*(i-a)/u,e[3]=.5*u}else{var l=Math.max(t,a,f),u=Math.sqrt(2*l-h+1);t>=l?(e[0]=.5*u,e[1]=.5*(n+i)/u,e[2]=.5*(o+r)/u,e[3]=.5*(s-c)/u):a>=l?(e[0]=.5*(i+n)/u,e[1]=.5*u,e[2]=.5*(c+s)/u,e[3]=.5*(o-r)/u):(e[0]=.5*(r+o)/u,e[1]=.5*(s+c)/u,e[2]=.5*u,e[3]=.5*(i-n)/u)}return e}},{}],70:[function(e,t,i){"use strict";t.exports=function(e){var t=(e=e||{}).center||[0,0,0],i=e.rotation||[0,0,0,1],r=e.radius||1;t=[].slice.call(t,0,3),h(i=[].slice.call(i,0,4),i);var n=new u(i,t,Math.log(r));n.setDistanceLimits(e.zoomMin,e.zoomMax),("eye"in e||"up"in e)&&n.lookAt(0,e.eye,e.center,e.up);return n};var r=e("filtered-vector"),n=e("gl-mat4/lookAt"),a=e("gl-mat4/fromQuat"),s=e("gl-mat4/invert"),o=e("./lib/quatFromFrame");function c(e,t,i){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(i,2))}function f(e,t,i,r){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(i,2)+Math.pow(r,2))}function h(e,t){var i=t[0],r=t[1],n=t[2],a=t[3],s=f(i,r,n,a);s>1e-6?(e[0]=i/s,e[1]=r/s,e[2]=n/s,e[3]=a/s):(e[0]=e[1]=e[2]=0,e[3]=1)}function u(e,t,i){this.radius=r([i]),this.center=r(t),this.rotation=r(e),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var l=u.prototype;l.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},l.recalcMatrix=function(e){this.radius.curve(e),this.center.curve(e),this.rotation.curve(e);var t=this.computedRotation;h(t,t);var i=this.computedMatrix;a(i,t);var r=this.computedCenter,n=this.computedEye,s=this.computedUp,o=Math.exp(this.computedRadius[0]);n[0]=r[0]+o*i[2],n[1]=r[1]+o*i[6],n[2]=r[2]+o*i[10],s[0]=i[1],s[1]=i[5],s[2]=i[9];for(var c=0;c<3;++c){for(var f=0,u=0;u<3;++u)f+=i[c+4*u]*n[u];i[12+c]=-f}},l.getMatrix=function(e,t){this.recalcMatrix(e);var i=this.computedMatrix;if(t){for(var r=0;r<16;++r)t[r]=i[r];return t}return i},l.idle=function(e){this.center.idle(e),this.radius.idle(e),this.rotation.idle(e)},l.flush=function(e){this.center.flush(e),this.radius.flush(e),this.rotation.flush(e)},l.pan=function(e,t,i,r){t=t||0,i=i||0,r=r||0,this.recalcMatrix(e);var n=this.computedMatrix,a=n[1],s=n[5],o=n[9],f=c(a,s,o),h=n[0],u=n[4],l=n[8],d=h*(a/=f)+u*(s/=f)+l*(o/=f),_=c(h-=a*d,u-=s*d,l-=o*d),p=n[2],m=n[6],E=n[10],b=p*a+m*s+E*o,g=p*(h/=_)+m*(u/=_)+E*(l/=_),A=c(p-=b*a+g*h,m-=b*s+g*u,E-=b*o+g*l);p/=A,m/=A,E/=A,this.center.move(e,h*t+a*i,u*t+s*i,l*t+o*i);var R=Math.exp(this.computedRadius[0]);R=Math.max(1e-4,R+r),this.radius.set(e,Math.log(R))},l.rotate=function(e,t,i,r){this.recalcMatrix(e);var n=this.computedMatrix,a=n[2],s=n[6],o=n[10],h=(t=t||0)*n[0]+(i=i||0)*n[1],u=t*n[4]+i*n[5],l=t*n[8]+i*n[9],d=-(s*l-o*u),_=-(o*h-a*l),p=-(a*u-s*h),m=Math.sqrt(Math.max(0,1-Math.pow(d,2)-Math.pow(_,2)-Math.pow(p,2))),E=f(d,_,p,m);E>1e-6?(d/=E,_/=E,p/=E,m/=E):(d=_=p=0,m=1);var b=this.computedRotation,g=b[0],A=b[1],R=b[2],T=b[3],v=g*m+T*d+A*p-R*_,S=A*m+T*_+R*d-g*p,y=R*m+T*p+g*_-A*d,M=T*m-g*d-A*_-R*p;if(r){d=a,_=s,p=o;var x=Math.sin(r)/c(d,_,p);d*=x,_*=x,p*=x,M=M*(m=Math.cos(t))-(v=v*m+M*d+S*p-y*_)*d-(S=S*m+M*_+y*d-v*p)*_-(y=y*m+M*p+v*_-S*d)*p}var N=f(v,S,y,M);N>1e-6?(v/=N,S/=N,y/=N,M/=N):(v=S=y=0,M=1),this.rotation.set(e,v,S,y,M)},l.lookAt=function(e,t,i,r){this.recalcMatrix(e);var a=this.computedMatrix;n(a,t=t||this.computedEye,i=i||this.computedCenter,r=r||this.computedUp);var s=this.computedRotation;o(s,a[0],a[1],a[2],a[4],a[5],a[6],a[8],a[9],a[10]),h(s,s),this.rotation.set(e,s[0],s[1],s[2],s[3]);for(var c=0,f=0;f<3;++f)c+=Math.pow(i[f]-t[f],2);this.radius.set(e,.5*Math.log(Math.max(c,1e-6))),this.center.set(e,i[0],i[1],i[2])},l.translate=function(e,t,i,r){this.center.move(e,t||0,i||0,r||0)},l.setMatrix=function(e,t){var i=this.computedRotation;o(i,t[0],t[1],t[2],t[4],t[5],t[6],t[8],t[9],t[10]),h(i,i),this.rotation.set(e,i[0],i[1],i[2],i[3]);var r=this.computedMatrix;s(r,t);var n=r[15];if(Math.abs(n)>1e-6){var a=r[12]/n,c=r[13]/n,f=r[14]/n;this.recalcMatrix(e);var u=Math.exp(this.computedRadius[0]);this.center.set(e,a-r[2]*u,c-r[6]*u,f-r[10]*u),this.radius.idle(e)}else this.center.idle(e),this.radius.idle(e)},l.setDistance=function(e,t){t>0&&this.radius.set(e,Math.log(t))},l.setDistanceLimits=function(e,t){e=e>0?Math.log(e):-Infinity,t=t>0?Math.log(t):Infinity,t=Math.max(t,e),this.radius.bounds[0][0]=e,this.radius.bounds[1][0]=t},l.getDistanceLimits=function(e){var t=this.radius.bounds;return e?(e[0]=Math.exp(t[0][0]),e[1]=Math.exp(t[1][0]),e):[Math.exp(t[0][0]),Math.exp(t[1][0])]},l.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},l.fromJSON=function(e){var t=this.lastT(),i=e.center;i&&this.center.set(t,i[0],i[1],i[2]);var r=e.rotation;r&&this.rotation.set(t,r[0],r[1],r[2],r[3]);var n=e.distance;n&&n>0&&this.radius.set(t,Math.log(n)),this.setDistanceLimits(e.zoomMin,e.zoomMax)}},{"./lib/quatFromFrame":69,"filtered-vector":17,"gl-mat4/fromQuat":23,"gl-mat4/invert":34,"gl-mat4/lookAt":35}],71:[function(e,t,i){t.exports=function(e,t){t||(t=[0,""]),e=String(e);var i=parseFloat(e,10);return t[0]=i,t[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},{}],72:[function(e,t,i){var r,n;r=window,n=function(){return function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);const r={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,COLOR:6144,DEPTH:6145,STENCIL:6146,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,MAX_3D_TEXTURE_SIZE:32883,UNSIGNED_INT_2_10_10_10_REV:33640,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,MAX_TEXTURE_LOD_BIAS:34045,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,VERTEX_ATTRIB_ARRAY_INTEGER:35069,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,UNSIGNED_INT_10F_11F_11F_REV:35899,RGB9_E5:35901,UNSIGNED_INT_5_9_9_9_REV:35902,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,RASTERIZER_DISCARD:35977,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,UNSIGNED_INT_24_8:34042,DEPTH24_STENCIL8:35056,UNSIGNED_NORMALIZED:35863,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,MAX_SAMPLES:36183,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,VERTEX_ARRAY_BINDING:34229,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,SIGNED_NORMALIZED:36764,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,INVALID_INDEX:4294967295,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,SAMPLER_BINDING:35097,RGB10_A2UI:36975,INT_2_10_10_10_REV:36255,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,TEXTURE_IMMUTABLE_FORMAT:37167,MAX_ELEMENT_INDEX:36203,TEXTURE_IMMUTABLE_LEVELS:33503,TIMEOUT_IGNORED:-1,MAX_CLIENT_WAIT_TIMEOUT_WEBGL:37447,QUERY_COUNTER_BITS_EXT:34916,TIME_ELAPSED_EXT:35007,TIMESTAMP_EXT:36392,GPU_DISJOINT_EXT:36795,TEXTURE_MAX_ANISOTROPY_EXT:34046,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,UNMASKED_VENDOR_WEBGL:37445,UNMASKED_RENDERER_WEBGL:37446,COMPLETION_STATUS_KHR:37297,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_SRGB_S3TC_DXT1_EXT:35916,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT:35919,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGBA_ASTC_4x4_KHR:37808,COMPRESSED_RGBA_ASTC_5x4_KHR:37809,COMPRESSED_RGBA_ASTC_5x5_KHR:37810,COMPRESSED_RGBA_ASTC_6x5_KHR:37811,COMPRESSED_RGBA_ASTC_6x6_KHR:37812,COMPRESSED_RGBA_ASTC_8x5_KHR:37813,COMPRESSED_RGBA_ASTC_8x6_KHR:37814,COMPRESSED_RGBA_ASTC_8x8_KHR:37815,COMPRESSED_RGBA_ASTC_10x5_KHR:37816,COMPRESSED_RGBA_ASTC_10x6_KHR:37817,COMPRESSED_RGBA_ASTC_10x8_KHR:37818,COMPRESSED_RGBA_ASTC_10x10_KHR:37819,COMPRESSED_RGBA_ASTC_12x10_KHR:37820,COMPRESSED_RGBA_ASTC_12x12_KHR:37821,COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:37847,COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:37853},n={[r.BYTE]:1,[r.UNSIGNED_BYTE]:1,[r.SHORT]:2,[r.UNSIGNED_SHORT]:2,[r.INT]:4,[r.UNSIGNED_INT]:4,[r.FLOAT]:4},a={[r.R8]:[r.RED,r.UNSIGNED_BYTE],[r.R8_SNORM]:[r.RED,r.BYTE],[r.R16F]:[r.RED,r.FLOAT],[r.R32F]:[r.RED,r.FLOAT],[r.R8UI]:[r.RED_INTEGER,r.UNSIGNED_BYTE],[r.R8I]:[r.RED_INTEGER,r.BYTE],[r.R16UI]:[r.RED_INTEGER,r.UNSIGNED_SHORT],[r.R16I]:[r.RED_INTEGER,r.SHORT],[r.R32UI]:[r.RED_INTEGER,r.UNSIGNED_INT],[r.R32I]:[r.RED_INTEGER,r.INT],[r.RG8]:[r.RG,r.UNSIGNED_BYTE],[r.RG8_SNORM]:[r.RG,r.BYTE],[r.RG16F]:[r.RG,r.FLOAT],[r.RG32F]:[r.RG,r.FLOAT],[r.RG8UI]:[r.RG_INTEGER,r.UNSIGNED_BYTE],[r.RG8I]:[r.RG_INTEGER,r.BYTE],[r.RG16UI]:[r.RG_INTEGER,r.UNSIGNED_SHORT],[r.RG16I]:[r.RG_INTEGER,r.SHORT],[r.RG32UI]:[r.RG_INTEGER,r.UNSIGNED_INT],[r.RG32I]:[r.RG_INTEGER,r.INT],[r.RGB8]:[r.RGB,r.UNSIGNED_BYTE],[r.SRGB8]:[r.RGB,r.UNSIGNED_BYTE],[r.RGB565]:[r.RGB,r.UNSIGNED_SHORT_5_6_5],[r.RGB8_SNORM]:[r.RGB,r.BYTE],[r.R11F_G11F_B10F]:[r.RGB,r.UNSIGNED_INT_10F_11F_11F_REV],[r.RGB9_E5]:[r.RGB,r.UNSIGNED_INT_5_9_9_9_REV],[r.RGB16F]:[r.RGB,r.FLOAT],[r.RGB32F]:[r.RGB,r.FLOAT],[r.RGB8UI]:[r.RGB_INTEGER,r.UNSIGNED_BYTE],[r.RGB8I]:[r.RGB_INTEGER,r.BYTE],[r.RGB16UI]:[r.RGB_INTEGER,r.UNSIGNED_SHORT],[r.RGB16I]:[r.RGB_INTEGER,r.SHORT],[r.RGB32UI]:[r.RGB_INTEGER,r.UNSIGNED_INT],[r.RGB32I]:[r.RGB_INTEGER,r.INT],[r.RGBA8]:[r.RGBA,r.UNSIGNED_BYTE],[r.SRGB8_ALPHA8]:[r.RGBA,r.UNSIGNED_BYTE],[r.RGBA8_SNORM]:[r.RGBA,r.BYTE],[r.RGB5_A1]:[r.RGBA,r.UNSIGNED_SHORT_5_5_5_1],[r.RGBA4]:[r.RGBA,r.UNSIGNED_SHORT_4_4_4_4],[r.RGB10_A2]:[r.RGBA,r.UNSIGNED_INT_2_10_10_10_REV],[r.RGBA16F]:[r.RGBA,r.FLOAT],[r.RGBA32F]:[r.RGBA,r.FLOAT],[r.RGBA8UI]:[r.RGBA_INTEGER,r.UNSIGNED_BYTE],[r.RGBA8I]:[r.RGBA_INTEGER,r.BYTE],[r.RGB10_A2UI]:[r.RGBA_INTEGER,r.UNSIGNED_INT_2_10_10_10_REV],[r.RGBA16UI]:[r.RGBA_INTEGER,r.UNSIGNED_SHORT],[r.RGBA16I]:[r.RGBA_INTEGER,r.SHORT],[r.RGBA32I]:[r.RGBA_INTEGER,r.INT],[r.RGBA32UI]:[r.RGBA_INTEGER,r.UNSIGNED_INT],[r.DEPTH_COMPONENT16]:[r.DEPTH_COMPONENT,r.UNSIGNED_SHORT],[r.DEPTH_COMPONENT24]:[r.DEPTH_COMPONENT,r.UNSIGNED_INT],[r.DEPTH_COMPONENT32F]:[r.DEPTH_COMPONENT,r.FLOAT],[r.DEPTH24_STENCIL8]:[r.DEPTH_STENCIL,r.UNSIGNED_INT_24_8],[r.DEPTH32F_STENCIL8]:[r.DEPTH_STENCIL,r.FLOAT_32_UNSIGNED_INT_24_8_REV]},s={[r.COMPRESSED_RGB_S3TC_DXT1_EXT]:!0,[r.COMPRESSED_RGBA_S3TC_DXT1_EXT]:!0,[r.COMPRESSED_RGBA_S3TC_DXT3_EXT]:!0,[r.COMPRESSED_RGBA_S3TC_DXT5_EXT]:!0,[r.COMPRESSED_SRGB_S3TC_DXT1_EXT]:!0,[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]:!0,[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]:!0,[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]:!0,[r.COMPRESSED_R11_EAC]:!0,[r.COMPRESSED_SIGNED_R11_EAC]:!0,[r.COMPRESSED_RG11_EAC]:!0,[r.COMPRESSED_SIGNED_RG11_EAC]:!0,[r.COMPRESSED_RGB8_ETC2]:!0,[r.COMPRESSED_SRGB8_ETC2]:!0,[r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]:!0,[r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]:!0,[r.COMPRESSED_RGBA8_ETC2_EAC]:!0,[r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]:!0,[r.COMPRESSED_RGBA_ASTC_4x4_KHR]:!0,[r.COMPRESSED_RGBA_ASTC_5x4_KHR]:!0,[r.COMPRESSED_RGBA_ASTC_5x5_KHR]:!0,[r.COMPRESSED_RGBA_ASTC_6x5_KHR]:!0,[r.COMPRESSED_RGBA_ASTC_6x6_KHR]:!0,[r.COMPRESSED_RGBA_ASTC_8x5_KHR]:!0,[r.COMPRESSED_RGBA_ASTC_8x6_KHR]:!0,[r.COMPRESSED_RGBA_ASTC_8x8_KHR]:!0,[r.COMPRESSED_RGBA_ASTC_10x5_KHR]:!0,[r.COMPRESSED_RGBA_ASTC_10x6_KHR]:!0,[r.COMPRESSED_RGBA_ASTC_10x8_KHR]:!0,[r.COMPRESSED_RGBA_ASTC_10x10_KHR]:!0,[r.COMPRESSED_RGBA_ASTC_12x10_KHR]:!0,[r.COMPRESSED_RGBA_ASTC_12x12_KHR]:!0,[r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR]:!0,[r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR]:!0,[r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR]:!0,[r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR]:!0,[r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR]:!0,[r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR]:!0,[r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR]:!0,[r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR]:!0,[r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR]:!0,[r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR]:!0,[r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR]:!0,[r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR]:!0,[r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR]:!0,[r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR]:!0,[r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]:!0,[r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]:!0,[r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]:!0,[r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]:!0},o={},c=new Array(1),f={},h={[r.UNSIGNED_BYTE]:{[r.RED]:r.R8,[r.RG]:r.RG8,[r.RGB]:r.RGB8,[r.RGBA]:r.RGBA8},[r.UNSIGNED_SHORT]:{[r.DEPTH_COMPONENT]:r.DEPTH_COMPONENT16},[r.FLOAT]:{[r.RED]:r.R16F,[r.RG]:r.RG16F,[r.RGB]:r.RGB16F,[r.RGBA]:r.RGBA16F,[r.DEPTH_COMPONENT]:r.DEPTH_COMPONENT32F}};class u{constructor(e,t,i){if(this.gl=e,this.texture=null,this.appState=t,this.compressed=s[i.internalFormat],void 0!==i.format&&(console.warn("Cubemap option 'format' is deprecated and will be removed. Use 'internalFormat' with a sized format instead."),this.compressed=Boolean(s[i.format]),void 0===i.type&&(i.type=i.format===r.DEPTH_COMPONENT?r.UNSIGNED_SHORT:r.UNSIGNED_BYTE),void 0===i.internalFormat&&(i.internalFormat=this.compressed?i.format:h[i.type][i.format])),this.compressed)this.internalFormat=i.internalFormat,this.format=i.internalFormat,this.type=r.UNSIGNED_BYTE;else{this.internalFormat=void 0!==i.internalFormat?i.internalFormat:r.RGBA8;let e=a[this.internalFormat];this.format=e[0],this.type=void 0!==i.type?i.type:e[1]}this.currentUnit=-1;let n=Array.isArray(i.negX),c=n?i.negX[0]:i.negX,{width:f=c.width,height:u=c.height,flipY:l=!1,premultiplyAlpha:d=!1,minFilter:_=(c?r.LINEAR_MIPMAP_NEAREST:r.NEAREST),magFilter:p=(c?r.LINEAR:r.NEAREST),wrapS:m=r.REPEAT,wrapT:E=r.REPEAT,compareMode:b=r.NONE,compareFunc:g=r.LEQUAL,minLOD:A=null,maxLOD:R=null,baseLevel:T=null,maxLevel:v=null,maxAnisotropy:S=1}=i;this.width=f,this.height=u,this.flipY=l,this.premultiplyAlpha=d,this.minFilter=_,this.magFilter=p,this.wrapS=m,this.wrapT=E,this.compareMode=b,this.compareFunc=g,this.minLOD=A,this.maxLOD=R,this.baseLevel=T,this.maxLevel=v,this.maxAnisotropy=Math.min(S,o.MAX_TEXTURE_ANISOTROPY),this.mipmaps=_===r.LINEAR_MIPMAP_NEAREST||_===r.LINEAR_MIPMAP_LINEAR,this.miplevelsProvided=n&&i.negX.length>1,this.levels=this.mipmaps?Math.floor(Math.log2(Math.min(this.width,this.height)))+1:1,this.restore(i)}restore(e=f){this.texture=this.gl.createTexture(),-1!==this.currentUnit&&(this.appState.textures[this.currentUnit]=null),this.bind(0),this.gl.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,this.flipY),this.gl.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),this.gl.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MAG_FILTER,this.magFilter),this.gl.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MIN_FILTER,this.minFilter),this.gl.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_WRAP_S,this.wrapS),this.gl.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_WRAP_T,this.wrapT),this.gl.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_COMPARE_FUNC,this.compareFunc),this.gl.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_COMPARE_MODE,this.compareMode),null!==this.baseLevel&&this.gl.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_BASE_LEVEL,this.baseLevel),null!==this.maxLevel&&this.gl.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MAX_LEVEL,this.maxLevel),null!==this.minLOD&&this.gl.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MIN_LOD,this.minLOD),null!==this.maxLOD&&this.gl.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MAX_LOD,this.maxLOD),this.maxAnisotropy>1&&this.gl.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MAX_ANISOTROPY_EXT,this.maxAnisotropy),this.gl.texStorage2D(r.TEXTURE_CUBE_MAP,this.levels,this.internalFormat,this.width,this.height);let{negX:t,posX:i,negY:n,posY:a,negZ:s,posZ:o}=e;return t&&(this.faceData(r.TEXTURE_CUBE_MAP_NEGATIVE_X,t),this.faceData(r.TEXTURE_CUBE_MAP_POSITIVE_X,i),this.faceData(r.TEXTURE_CUBE_MAP_NEGATIVE_Y,n),this.faceData(r.TEXTURE_CUBE_MAP_POSITIVE_Y,a),this.faceData(r.TEXTURE_CUBE_MAP_NEGATIVE_Z,s),this.faceData(r.TEXTURE_CUBE_MAP_POSITIVE_Z,o)),this.mipmaps&&!this.miplevelsProvided&&this.gl.generateMipmap(r.TEXTURE_CUBE_MAP),this}delete(){return this.texture&&(this.gl.deleteTexture(this.texture),this.texture=null,this.appState.textures[this.currentUnit]=null,this.currentUnit=-1),this}faceData(e,t){Array.isArray(t)||(c[0]=t,t=c);let i,r=this.mipmaps?t.length:1,n=this.width,a=this.height;if(this.compressed)for(i=0;i<r;++i)this.gl.compressedTexSubImage2D(e,i,0,0,n,a,this.format,t[i]),n=Math.max(n>>1,1),a=Math.max(a>>1,1);else for(i=0;i<r;++i)this.gl.texSubImage2D(e,i,0,0,n,a,this.format,this.type,t[i]),n=Math.max(n>>1,1),a=Math.max(a>>1,1);return this}bind(e){let t=this.appState.textures[e];return t!==this&&(t&&(t.currentUnit=-1),-1!==this.currentUnit&&(this.appState.textures[this.currentUnit]=null),this.gl.activeTexture(r.TEXTURE0+e),this.gl.bindTexture(r.TEXTURE_CUBE_MAP,this.texture),this.appState.textures[e]=this,this.currentUnit=e),this}}class l{constructor(e,t,i,n=null,a){this.gl=e,this.currentProgram=i,this.drawPrimitive=r.TRIANGLES,this.currentVertexArray=n,this.currentTransformFeedback=null,this.appState=t,this.uniformIndices={},this.uniformNames=new Array(o.MAX_UNIFORMS),this.uniformValues=new Array(o.MAX_UNIFORMS),this.uniformCount=0,this.uniformBuffers=new Array(o.MAX_UNIFORM_BUFFERS),this.uniformBlockNames=new Array(o.MAX_UNIFORM_BUFFERS),this.uniformBlockCount=0,this.textures=new Array(o.MAX_TEXTURE_UNITS),this.textureCount=0,this.offsets=new Int32Array(1),this.numElements=new Int32Array(1),this.numInstances=new Int32Array(1),this.currentVertexArray&&(this.numElements[0]=this.currentVertexArray.numElements,this.numInstances[0]=this.currentVertexArray.numInstances),this.numDraws=1,void 0!==a&&(console.warn("Primitive argument to 'App.createDrawCall' is deprecated and will be removed. Use 'DrawCall.primitive' instead."),this.primitive(a))}primitive(e){return this.drawPrimitive=e,this}transformFeedback(e){return this.currentTransformFeedback=e,this}uniform(e,t){let i=this.uniformIndices[e];return void 0===i&&(i=this.uniformCount++,this.uniformIndices[e]=i,this.uniformNames[i]=e),this.uniformValues[i]=t,this}texture(e,t){return this.textures[this.currentProgram.samplers[e]]=t,this}uniformBlock(e,t){return this.uniformBuffers[this.currentProgram.uniformBlocks[e]]=t,this}drawRanges(...e){this.numDraws=e.length,this.offsets.length<this.numDraws&&(this.offsets=new Int32Array(this.numDraws)),this.numElements.length<this.numDraws&&(this.numElements=new Int32Array(this.numDraws)),this.numInstances.length<this.numDraws&&(this.numInstances=new Int32Array(this.numDraws));for(let t=0;t<this.numDraws;++t){let i=e[t];this.offsets[t]=i[0],this.numElements[t]=i[1],this.numInstances[t]=i[2]||1}return this}draw(){let e=this.uniformNames,t=this.uniformValues,i=this.uniformBuffers,n=this.currentProgram.uniformBlockCount,a=this.textures,s=this.currentProgram.samplerCount,c=!1;this.currentProgram.bind(),this.currentVertexArray&&(this.currentVertexArray.bind(),c=this.currentVertexArray.indexed);for(let i=0;i<this.uniformCount;++i)this.currentProgram.uniform(e[i],t[i]);for(let e=0;e<n;++e)i[e].bind(e);for(let e=0;e<s;++e)a[e].bind(e);if(this.currentTransformFeedback?(this.currentTransformFeedback.bind(),this.gl.beginTransformFeedback(this.drawPrimitive)):this.appState.transformFeedback&&(this.gl.bindTransformFeedback(r.TRANSFORM_FEEDBACK,null),this.appState.transformFeedback=null),o.MULTI_DRAW_INSTANCED){let e=this.appState.extensions.multiDrawInstanced;c?e.multiDrawElementsInstancedWEBGL(this.drawPrimitive,this.numElements,0,this.currentVertexArray.indexType,this.offsets,0,this.numInstances,0,this.numDraws):e.multiDrawArraysInstancedWEBGL(this.drawPrimitive,this.offsets,0,this.numElements,0,this.numInstances,0,this.numDraws)}else if(c)for(let e=0;e<this.numDraws;++e)this.gl.drawElementsInstanced(this.drawPrimitive,this.numElements[e],this.currentVertexArray.indexType,this.offsets[e],this.numInstances[e]);else for(let e=0;e<this.numDraws;++e)this.gl.drawArraysInstanced(this.drawPrimitive,this.offsets[e],this.numElements[e],this.numInstances[e]);return this.currentTransformFeedback&&this.gl.endTransformFeedback(),this}}class d{constructor(e,t,i,n,c=n.width,u=n.height,l,d,_=f){if(this.gl=e,this.binding=i,this.texture=null,this.width=c||0,this.height=u||0,this.depth=l||0,this.is3D=d,this.appState=t,this.compressed=Boolean(s[_.internalFormat]),void 0!==_.format&&(console.warn("Texture option 'format' is deprecated and will be removed. Use 'internalFormat' with a sized format instead."),this.compressed=Boolean(s[_.format]),void 0===_.type&&(_.type=_.format===r.DEPTH_COMPONENT?r.UNSIGNED_SHORT:r.UNSIGNED_BYTE),void 0===_.internalFormat&&(_.internalFormat=this.compressed?_.format:h[_.type][_.format])),this.compressed)this.internalFormat=_.internalFormat,this.format=this.internalFormat,this.type=r.UNSIGNED_BYTE;else{this.internalFormat=void 0!==_.internalFormat?_.internalFormat:r.RGBA8;let e=a[this.internalFormat];this.format=e[0],this.type=void 0!==_.type?_.type:e[1]}this.currentUnit=-1;let{minFilter:p=(n?r.LINEAR_MIPMAP_NEAREST:r.NEAREST),magFilter:m=(n?r.LINEAR:r.NEAREST),wrapS:E=r.REPEAT,wrapT:b=r.REPEAT,wrapR:g=r.REPEAT,compareMode:A=r.NONE,compareFunc:R=r.LEQUAL,minLOD:T=null,maxLOD:v=null,baseLevel:S=null,maxLevel:y=null,maxAnisotropy:M=1,flipY:x=!1,premultiplyAlpha:N=!1}=_;this.minFilter=p,this.magFilter=m,this.wrapS=E,this.wrapT=b,this.wrapR=g,this.compareMode=A,this.compareFunc=R,this.minLOD=T,this.maxLOD=v,this.baseLevel=S,this.maxLevel=y,this.maxAnisotropy=Math.min(M,o.MAX_TEXTURE_ANISOTROPY),this.flipY=x,this.premultiplyAlpha=N,this.mipmaps=p===r.LINEAR_MIPMAP_NEAREST||p===r.LINEAR_MIPMAP_LINEAR,this.restore(n)}restore(e){return this.texture=null,this.resize(this.width,this.height,this.depth),e&&this.data(e),this}resize(e,t,i){if(i=i||0,this.texture&&e===this.width&&t===this.height&&i===this.depth)return this;let n;return this.gl.deleteTexture(this.texture),-1!==this.currentUnit&&(this.appState.textures[this.currentUnit]=null),this.texture=this.gl.createTexture(),this.bind(Math.max(this.currentUnit,0)),this.width=e,this.height=t,this.depth=i,this.gl.texParameteri(this.binding,r.TEXTURE_MIN_FILTER,this.minFilter),this.gl.texParameteri(this.binding,r.TEXTURE_MAG_FILTER,this.magFilter),this.gl.texParameteri(this.binding,r.TEXTURE_WRAP_S,this.wrapS),this.gl.texParameteri(this.binding,r.TEXTURE_WRAP_T,this.wrapT),this.gl.texParameteri(this.binding,r.TEXTURE_WRAP_R,this.wrapR),this.gl.texParameteri(this.binding,r.TEXTURE_COMPARE_FUNC,this.compareFunc),this.gl.texParameteri(this.binding,r.TEXTURE_COMPARE_MODE,this.compareMode),this.gl.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,this.flipY),this.gl.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),null!==this.minLOD&&this.gl.texParameterf(this.binding,r.TEXTURE_MIN_LOD,this.minLOD),null!==this.maxLOD&&this.gl.texParameterf(this.binding,r.TEXTURE_MAX_LOD,this.maxLOD),null!==this.baseLevel&&this.gl.texParameteri(this.binding,r.TEXTURE_BASE_LEVEL,this.baseLevel),null!==this.maxLevel&&this.gl.texParameteri(this.binding,r.TEXTURE_MAX_LEVEL,this.maxLevel),this.maxAnisotropy>1&&this.gl.texParameteri(this.binding,r.TEXTURE_MAX_ANISOTROPY_EXT,this.maxAnisotropy),this.is3D?(n=this.mipmaps?Math.floor(Math.log2(Math.max(Math.max(this.width,this.height),this.depth)))+1:1,this.gl.texStorage3D(this.binding,n,this.internalFormat,this.width,this.height,this.depth)):(n=this.mipmaps?Math.floor(Math.log2(Math.max(this.width,this.height)))+1:1,this.gl.texStorage2D(this.binding,n,this.internalFormat,this.width,this.height)),this}data(e){Array.isArray(e)||(c[0]=e,e=c);let t,i=this.mipmaps?e.length:1,r=this.width,n=this.height,a=this.depth,s=this.mipmaps&&1===e.length;if(this.bind(Math.max(this.currentUnit,0)),this.compressed)if(this.is3D)for(t=0;t<i;++t)this.gl.compressedTexSubImage3D(this.binding,t,0,0,0,r,n,a,this.format,e[t]),r=Math.max(r>>1,1),n=Math.max(n>>1,1),a=Math.max(a>>1,1);else for(t=0;t<i;++t)this.gl.compressedTexSubImage2D(this.binding,t,0,0,r,n,this.format,e[t]),r=Math.max(r>>1,1),n=Math.max(n>>1,1);else if(this.is3D)for(t=0;t<i;++t)this.gl.texSubImage3D(this.binding,t,0,0,0,r,n,a,this.format,this.type,e[t]),r=Math.max(r>>1,1),n=Math.max(n>>1,1),a=Math.max(a>>1,1);else for(t=0;t<i;++t)this.gl.texSubImage2D(this.binding,t,0,0,r,n,this.format,this.type,e[t]),r=Math.max(r>>1,1),n=Math.max(n>>1,1);return s&&this.gl.generateMipmap(this.binding),this}delete(){return this.texture&&(this.gl.deleteTexture(this.texture),this.texture=null,-1!==this.currentUnit&&this.appState.textures[this.currentUnit]===this&&(this.appState.textures[this.currentUnit]=null,this.currentUnit=-1)),this}bind(e){let t=this.appState.textures[e];return t!==this&&(t&&(t.currentUnit=-1),-1!==this.currentUnit&&(this.appState.textures[this.currentUnit]=null),this.gl.activeTexture(r.TEXTURE0+e),this.gl.bindTexture(this.binding,this.texture),this.appState.textures[e]=this,this.currentUnit=e),this}}class _{constructor(e,t,i,r,n=0){this.gl=e,this.renderbuffer=null,this.width=t,this.height=i,this.internalFormat=r,this.samples=n,this.restore()}restore(){return this.renderbuffer=this.gl.createRenderbuffer(),this.resize(this.width,this.height),this}resize(e,t){return this.width=e,this.height=t,this.gl.bindRenderbuffer(r.RENDERBUFFER,this.renderbuffer),this.gl.renderbufferStorageMultisample(r.RENDERBUFFER,this.samples,this.internalFormat,this.width,this.height),this.gl.bindRenderbuffer(r.RENDERBUFFER,null),this}delete(){return this.gl.deleteRenderbuffer(this.renderbuffer),this.renderbuffer=null,this}}class p{constructor(e,t){this.gl=e,this.framebuffer=null,this.appState=t,this.numColorTargets=0,this.colorAttachments=[],this.colorAttachmentEnums=[],this.colorAttachmentTargets=[],this.depthAttachment=null,this.depthAttachmentTarget=null,this.width=0,this.height=0,this.restore()}restore(){return this.appState.drawFramebuffer===this&&(this.appState.drawFramebuffer=null),this.appState.readFramebuffer===this&&(this.appState.readFramebuffer=null),this.framebuffer=this.gl.createFramebuffer(),this}colorTarget(e,t,i=(t.is3D?0:r.TEXTURE_2D)){if(e>=this.numColorTargets){let t=e+1;this.colorAttachmentEnums.length=t,this.colorAttachments.length=t,this.colorAttachmentTargets.length=t;for(let e=this.numColorTargets;e<t-1;++e)this.colorAttachmentEnums[e]=r.NONE,this.colorAttachments[e]=null,this.colorAttachmentTargets[e]=0;this.numColorTargets=t}this.colorAttachmentEnums[e]=r.COLOR_ATTACHMENT0+e,this.colorAttachments[e]=t,this.colorAttachmentTargets[e]=i;let n=this.bindAndCaptureState();return t instanceof _?this.gl.framebufferRenderbuffer(r.DRAW_FRAMEBUFFER,this.colorAttachmentEnums[e],r.RENDERBUFFER,t.renderbuffer):t.is3D?this.gl.framebufferTextureLayer(r.DRAW_FRAMEBUFFER,this.colorAttachmentEnums[e],t.texture,0,i):this.gl.framebufferTexture2D(r.DRAW_FRAMEBUFFER,this.colorAttachmentEnums[e],i,t.texture,0),this.gl.drawBuffers(this.colorAttachmentEnums),this.width=t.width,this.height=t.height,this.restoreState(n),this}depthTarget(e,t=(e.is3D?0:r.TEXTURE_2D)){let i=this.bindAndCaptureState();return this.depthAttachment=e,this.depthAttachmentTarget=t,e instanceof _?this.gl.framebufferRenderbuffer(r.DRAW_FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,e.renderbuffer):e.is3D?this.gl.framebufferTextureLayer(r.DRAW_FRAMEBUFFER,r.DEPTH_ATTACHMENT,e.texture,0,t):this.gl.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.DEPTH_ATTACHMENT,t,e.texture,0),this.width=e.width,this.height=e.height,this.restoreState(i),this}resize(e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight){let i=this.bindAndCaptureState();for(let i=0;i<this.numColorTargets;++i){let n=this.colorAttachments[i];n&&(n.resize(e,t),n instanceof d&&(n.is3D?this.gl.framebufferTextureLayer(r.DRAW_FRAMEBUFFER,this.colorAttachmentEnums[i],n.texture,0,this.colorAttachmentTargets[i]):this.gl.framebufferTexture2D(r.DRAW_FRAMEBUFFER,this.colorAttachmentEnums[i],this.colorAttachmentTargets[i],n.texture,0)))}return this.depthAttachment&&(this.depthAttachment.resize(e,t),this.depthAttachment instanceof d&&(this.depthAttachment.is3D?this.gl.framebufferTextureLayer(r.DRAW_FRAMEBUFFER,r.DEPTH_ATTACHMENT,this.depthAttachment.texture,0,this.depthAttachmentTarget):this.gl.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.DEPTH_ATTACHMENT,this.depthAttachmentTarget,this.depthAttachment.texture,0))),this.width=e,this.height=t,this.restoreState(i),this}delete(){return this.framebuffer&&(this.gl.deleteFramebuffer(this.framebuffer),this.framebuffer=null,this.appState.drawFramebuffer===this&&(this.gl.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),this.appState.drawFramebuffer=null),this.appState.readFramebuffer===this&&(this.gl.bindFramebuffer(r.READ_FRAMEBUFFER,null),this.appState.readFramebuffer=null)),this}getStatus(){let e=this.bindAndCaptureState(),t=this.gl.checkFramebufferStatus(r.DRAW_FRAMEBUFFER);return this.restoreState(e),t}bindForDraw(){return this.appState.drawFramebuffer!==this&&(this.gl.bindFramebuffer(r.DRAW_FRAMEBUFFER,this.framebuffer),this.appState.drawFramebuffer=this),this}bindForRead(){return this.appState.readFramebuffer!==this&&(this.gl.bindFramebuffer(this.gl.READ_FRAMEBUFFER,this.framebuffer),this.appState.readFramebuffer=this),this}bindAndCaptureState(){let e=this.appState.drawFramebuffer;return e!==this&&this.gl.bindFramebuffer(r.DRAW_FRAMEBUFFER,this.framebuffer),e}restoreState(e){return e!==this&&this.gl.bindFramebuffer(r.DRAW_FRAMEBUFFER,e?e.framebuffer:null),this}get colorTextures(){return console.error("Framebuffer.colorTextures is deprecated and will be removed. Please use Framebuffer.colorAttachments."),this.colorAttachments}get depthTexture(){return console.error("Framebuffer.depthTexture is deprecated and will be removed. Please use Framebuffer.depthAttachment."),this.depthAttachment}}class m{constructor(e,t,i,r){this.gl=e,this.appState=t,this.shader=null,this.type=i,this.source=r,this.restore()}restore(){return this.shader=this.gl.createShader(this.type),this.gl.shaderSource(this.shader,this.source),this.gl.compileShader(this.shader),this}translatedSource(){return o.DEBUG_SHADERS?this.appState.extensions.debugShaders.getTranslatedShaderSource(this.shader):"(Unavailable)"}delete(){return this.shader&&(this.gl.deleteShader(this.shader),this.shader=null),this}checkCompilation(){if(!this.gl.getShaderParameter(this.shader,r.COMPILE_STATUS)){let e,t;for(console.error(this.gl.getShaderInfoLog(this.shader)),t=this.source.split("\n"),e=0;e<t.length;++e)console.error(`${e+1}: ${t[e]}`)}return this}}const E={};E[r.BOOL]="uniform1i",E[r.INT]="uniform1i",E[r.SAMPLER_2D]="uniform1i",E[r.INT_SAMPLER_2D]="uniform1i",E[r.UNSIGNED_INT_SAMPLER_2D]="uniform1i",E[r.SAMPLER_2D_SHADOW]="uniform1i",E[r.SAMPLER_2D_ARRAY]="uniform1i",E[r.INT_SAMPLER_2D_ARRAY]="uniform1i",E[r.UNSIGNED_INT_SAMPLER_2D_ARRAY]="uniform1i",E[r.SAMPLER_2D_ARRAY_SHADOW]="uniform1i",E[r.SAMPLER_CUBE]="uniform1i",E[r.INT_SAMPLER_CUBE]="uniform1i",E[r.UNSIGNED_INT_SAMPLER_CUBE]="uniform1i",E[r.SAMPLER_CUBE_SHADOW]="uniform1i",E[r.SAMPLER_3D]="uniform1i",E[r.INT_SAMPLER_3D]="uniform1i",E[r.UNSIGNED_INT_SAMPLER_3D]="uniform1i",E[r.UNSIGNED_INT]="uniform1ui",E[r.FLOAT]="uniform1f",E[r.FLOAT_VEC2]="uniform2f",E[r.FLOAT_VEC3]="uniform3f",E[r.FLOAT_VEC4]="uniform4f",E[r.INT_VEC2]="uniform2i",E[r.INT_VEC3]="uniform3i",E[r.INT_VEC4]="uniform4i",E[r.UNSIGNED_INT_VEC2]="uniform2ui",E[r.UNSIGNED_INT_VEC3]="uniform3ui",E[r.UNSIGNED_INT_VEC4]="uniform4ui",E[r.BOOL_VEC2]="uniform2i",E[r.BOOL_VEC3]="uniform3i",E[r.BOOL_VEC4]="uniform4i",E[r.FLOAT_MAT2]="uniformMatrix2fv",E[r.FLOAT_MAT3]="uniformMatrix3fv",E[r.FLOAT_MAT4]="uniformMatrix4fv",E[r.FLOAT_MAT2x3]="uniformMatrix2x3fv",E[r.FLOAT_MAT2x4]="uniformMatrix2x4fv",E[r.FLOAT_MAT3x2]="uniformMatrix3x2fv",E[r.FLOAT_MAT3x4]="uniformMatrix3x4fv",E[r.FLOAT_MAT4x2]="uniformMatrix4x2fv",E[r.FLOAT_MAT4x3]="uniformMatrix4x3fv";const b={};b[r.BOOL]=1,b[r.INT]=1,b[r.SAMPLER_2D]=1,b[r.INT_SAMPLER_2D]=1,b[r.UNSIGNED_INT_SAMPLER_2D]=1,b[r.SAMPLER_2D_SHADOW]=1,b[r.SAMPLER_2D_ARRAY]=1,b[r.INT_SAMPLER_2D_ARRAY]=1,b[r.UNSIGNED_INT_SAMPLER_2D_ARRAY]=1,b[r.SAMPLER_2D_ARRAY_SHADOW]=1,b[r.SAMPLER_CUBE]=1,b[r.INT_SAMPLER_CUBE]=1,b[r.UNSIGNED_INT_SAMPLER_CUBE]=1,b[r.SAMPLER_CUBE_SHADOW]=1,b[r.SAMPLER_3D]=1,b[r.INT_SAMPLER_3D]=1,b[r.UNSIGNED_INT_SAMPLER_3D]=1,b[r.UNSIGNED_INT]=1,b[r.FLOAT]=1,b[r.FLOAT_VEC2]=2,b[r.FLOAT_VEC3]=3,b[r.FLOAT_VEC4]=4,b[r.INT_VEC2]=2,b[r.INT_VEC3]=3,b[r.INT_VEC4]=4,b[r.UNSIGNED_INT_VEC2]=2,b[r.UNSIGNED_INT_VEC3]=3,b[r.UNSIGNED_INT_VEC4]=4,b[r.BOOL_VEC2]=2,b[r.BOOL_VEC3]=3,b[r.BOOL_VEC4]=4,b[r.FLOAT_MAT2]=4,b[r.FLOAT_MAT3]=9,b[r.FLOAT_MAT4]=16,b[r.FLOAT_MAT2x3]=6,b[r.FLOAT_MAT2x4]=8,b[r.FLOAT_MAT3x2]=6,b[r.FLOAT_MAT3x4]=12,b[r.FLOAT_MAT4x2]=8,b[r.FLOAT_MAT4x3]=12;const g={};g[r.INT]=Int32Array,g[r.SAMPLER_2D]=Int32Array,g[r.INT_SAMPLER_2D]=Int32Array,g[r.UNSIGNED_INT_SAMPLER_2D]=Int32Array,g[r.SAMPLER_2D_SHADOW]=Int32Array,g[r.SAMPLER_2D_ARRAY]=Int32Array,g[r.INT_SAMPLER_2D_ARRAY]=Int32Array,g[r.UNSIGNED_INT_SAMPLER_2D_ARRAY]=Int32Array,g[r.SAMPLER_2D_ARRAY_SHADOW]=Int32Array,g[r.SAMPLER_CUBE]=Int32Array,g[r.INT_SAMPLER_CUBE]=Int32Array,g[r.UNSIGNED_INT_SAMPLER_CUBE]=Int32Array,g[r.SAMPLER_CUBE_SHADOW]=Int32Array,g[r.SAMPLER_3D]=Int32Array,g[r.INT_SAMPLER_3D]=Int32Array,g[r.UNSIGNED_INT_SAMPLER_3D]=Int32Array,g[r.UNSIGNED_INT]=Uint32Array,g[r.FLOAT]=Float32Array,g[r.FLOAT_VEC2]=Float32Array,g[r.FLOAT_VEC3]=Float32Array,g[r.FLOAT_VEC4]=Float32Array,g[r.INT_VEC2]=Int32Array,g[r.INT_VEC3]=Int32Array,g[r.INT_VEC4]=Int32Array,g[r.UNSIGNED_INT_VEC2]=Uint32Array,g[r.UNSIGNED_INT_VEC3]=Uint32Array,g[r.UNSIGNED_INT_VEC4]=Uint32Array;class A{constructor(e,t,i){this.gl=e,this.handle=t,this.glFuncName=E[i],this.cache=i!==r.BOOL&&0}set(e){this.cache!==e&&(this.gl[this.glFuncName](this.handle,e),this.cache=e)}}class R{constructor(e,t,i,r){this.gl=e,this.handle=t,this.glFuncName=E[i]+"v",this.count=r,this.cache=new g[i](b[i]*r)}set(e){for(let t=0,i=e.length;t<i;++t)if(this.cache[t]!==e[t])return this.gl[this.glFuncName](this.handle,e),void this.cache.set(e)}}class T{constructor(e,t,i,r){this.gl=e,this.handle=t,this.glFuncName=E[i]+"v",this.count=r,this.cache=new Array(b[i]*r).fill(!1)}set(e){for(let t=0,i=e.length;t<i;++t)if(this.cache[t]!==e[t]){this.gl[this.glFuncName](this.handle,e);for(let r=t;r<i;r++)this.cache[r]=e[r];return}}}class v{constructor(e,t,i,r){this.gl=e,this.handle=t,this.glFuncName=E[i],this.count=r,this.cache=new Float32Array(b[i]*r)}set(e){for(let t=0,i=e.length;t<i;++t)if(this.cache[t]!==e[t])return this.gl[this.glFuncName](this.handle,!1,e),void this.cache.set(e)}}class S{constructor(e,t,i,r,n){this.gl=e,this.appState=t,this.program=null,this.transformFeedbackVaryings=n||null,this.uniforms={},this.uniformBlocks={},this.uniformBlockCount=0,this.samplers={},this.samplerCount=0,this.vertexSource=null,this.vertexShader=null,this.fragmentSource=null,this.fragmentShader=null,this.linked=!1,"string"==typeof i?this.vertexSource=i:this.vertexShader=i,"string"==typeof r?this.fragmentSource=r:this.fragmentShader=r,this.initialize()}restore(){return this.initialize(),this.link(),this.checkLinkage(),this}translatedVertexSource(){if(this.vertexShader)return this.vertexShader.translatedSource();{let e=new m(this.gl,this.appState,r.VERTEX_SHADER,this.vertexSource),t=e.translatedSource();return e.delete(),t}}translatedFragmentSource(){if(this.fragmentShader)return this.fragmentShader.translatedSource();{let e=new m(this.gl,this.appState,r.FRAGMENT_SHADER,this.fragmentSource),t=e.translatedSource();return e.delete(),t}}delete(){return this.program&&(this.gl.deleteProgram(this.program),this.program=null,this.appState.program===this&&(this.gl.useProgram(null),this.appState.program=null)),this}initialize(){return this.appState.program===this&&(this.gl.useProgram(null),this.appState.program=null),this.linked=!1,this.uniformBlockCount=0,this.samplerCount=0,this.vertexSource&&(this.vertexShader=new m(this.gl,this.appState,r.VERTEX_SHADER,this.vertexSource)),this.fragmentSource&&(this.fragmentShader=new m(this.gl,this.appState,r.FRAGMENT_SHADER,this.fragmentSource)),this.program=this.gl.createProgram(),this}link(){return this.gl.attachShader(this.program,this.vertexShader.shader),this.gl.attachShader(this.program,this.fragmentShader.shader),this.transformFeedbackVaryings&&this.gl.transformFeedbackVaryings(this.program,this.transformFeedbackVaryings,r.SEPARATE_ATTRIBS),this.gl.linkProgram(this.program),this}checkCompletion(){return!o.PARALLEL_SHADER_COMPILE||this.gl.getProgramParameter(this.program,r.COMPLETION_STATUS_KHR)}checkLinkage(){return this.linked?this:(this.gl.getProgramParameter(this.program,r.LINK_STATUS)?(this.linked=!0,this.initVariables()):(console.error(this.gl.getProgramInfoLog(this.program)),this.vertexShader.checkCompilation(),this.fragmentShader.checkCompilation()),this.vertexSource&&(this.vertexShader.delete(),this.vertexShader=null),this.fragmentSource&&(this.fragmentShader.delete(),this.fragmentShader=null),this)}initVariables(){this.bind();let e,t=this.gl.getProgramParameter(this.program,r.ACTIVE_UNIFORMS);for(let i=0;i<t;++i){let t=this.gl.getActiveUniform(this.program,i),n=this.gl.getUniformLocation(this.program,t.name),a=null,s=t.type,o=t.size;switch(s){case r.SAMPLER_2D:case r.INT_SAMPLER_2D:case r.UNSIGNED_INT_SAMPLER_2D:case r.SAMPLER_2D_SHADOW:case r.SAMPLER_2D_ARRAY:case r.INT_SAMPLER_2D_ARRAY:case r.UNSIGNED_INT_SAMPLER_2D_ARRAY:case r.SAMPLER_2D_ARRAY_SHADOW:case r.SAMPLER_CUBE:case r.INT_SAMPLER_CUBE:case r.UNSIGNED_INT_SAMPLER_CUBE:case r.SAMPLER_CUBE_SHADOW:case r.SAMPLER_3D:case r.INT_SAMPLER_3D:case r.UNSIGNED_INT_SAMPLER_3D:e=this.samplerCount++,this.samplers[t.name]=e,this.gl.uniform1i(n,e);break;case r.INT:case r.UNSIGNED_INT:case r.FLOAT:a=o>1?R:A;break;case r.BOOL:a=o>1?T:A;break;case r.FLOAT_VEC2:case r.INT_VEC2:case r.UNSIGNED_INT_VEC2:case r.FLOAT_VEC3:case r.INT_VEC3:case r.UNSIGNED_INT_VEC3:case r.FLOAT_VEC4:case r.INT_VEC4:case r.UNSIGNED_INT_VEC4:a=R;break;case r.BOOL_VEC2:case r.BOOL_VEC3:case r.BOOL_VEC4:a=T;break;case r.FLOAT_MAT2:case r.FLOAT_MAT3:case r.FLOAT_MAT4:case r.FLOAT_MAT2x3:case r.FLOAT_MAT2x4:case r.FLOAT_MAT3x2:case r.FLOAT_MAT3x4:case r.FLOAT_MAT4x2:case r.FLOAT_MAT4x3:a=v;break;default:console.error("Unrecognized type for uniform ",t.name)}a&&(this.uniforms[t.name]=new a(this.gl,n,s,o))}let i=this.gl.getProgramParameter(this.program,r.ACTIVE_UNIFORM_BLOCKS);for(let e=0;e<i;++e){let t=this.gl.getActiveUniformBlockName(this.program,e),i=this.gl.getUniformBlockIndex(this.program,t),r=this.uniformBlockCount++;this.gl.uniformBlockBinding(this.program,i,r),this.uniformBlocks[t]=r}}uniform(e,t){return this.uniforms[e]&&this.uniforms[e].set(t),this}bind(){return this.appState.program!==this&&(this.gl.useProgram(this.program),this.appState.program=this),this}}class y{constructor(e,t){this.gl=e,this.query=null,this.target=t,this.active=!1,this.result=null,this.restore()}restore(){return this.query=this.gl.createQuery(),this.active=!1,this.result=null,this}begin(){return this.active||(this.gl.beginQuery(this.target,this.query),this.result=null),this}end(){return this.active||(this.gl.endQuery(this.target),this.active=!0),this}ready(){return!(!this.active||!this.gl.getQueryParameter(this.query,r.QUERY_RESULT_AVAILABLE)||(this.active=!1,this.result=Number(this.gl.getQueryParameter(this.query,r.QUERY_RESULT)),0))}delete(){return this.query&&(this.gl.deleteQuery(this.query),this.query=null),this}}class M{constructor(e){this.gl=e,this.cpuTimer=window.performance||window.Date,this.gpuTimerQuery=null,this.cpuStartTime=0,this.cpuTime=0,this.gpuTime=0,this.restore()}restore(){return o.GPU_TIMER&&(this.gpuTimerQuery?this.gpuTimerQuery.restore():this.gpuTimerQuery=new y(this.gl,r.TIME_ELAPSED_EXT)),this.cpuStartTime=0,this.cpuTime=0,this.gpuTime=0,this}start(){return o.GPU_TIMER?this.gpuTimerQuery.active||(this.gpuTimerQuery.begin(),this.cpuStartTime=this.cpuTimer.now()):this.cpuStartTime=this.cpuTimer.now(),this}end(){return o.GPU_TIMER?this.gpuTimerQuery.active||(this.gpuTimerQuery.end(),this.cpuTime=this.cpuTimer.now()-this.cpuStartTime):this.cpuTime=this.cpuTimer.now()-this.cpuStartTime,this}ready(){if(o.GPU_TIMER){if(!this.gpuTimerQuery.active)return!1;var e=this.gpuTimerQuery.ready(),t=this.gl.getParameter(r.GPU_DISJOINT_EXT);return!(!e||t||(this.gpuTime=this.gpuTimerQuery.result/1e6,0))}return Boolean(this.cpuStartTime)}delete(){return this.gpuTimerQuery&&(this.gpuTimerQuery.delete(),this.gpuTimerQuery=null),this}}class x{constructor(e,t){this.gl=e,this.appState=t,this.transformFeedback=null,this.restore()}restore(){return this.appState.transformFeedback===this&&(this.appState.transformFeedback=null),this.transformFeedback=this.gl.createTransformFeedback(),this}feedbackBuffer(e,t){return this.gl.bindTransformFeedback(r.TRANSFORM_FEEDBACK,this.transformFeedback),this.gl.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,e,t.buffer),this.gl.bindTransformFeedback(r.TRANSFORM_FEEDBACK,null),this.gl.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,e,null),this}delete(){return this.transformFeedback&&(this.gl.deleteTransformFeedback(this.transformFeedback),this.transformFeedback=null,this.appState.transformFeedback===this&&(this.gl.bindTransformFeedback(r.TRANSFORM_FEEDBACK,null),this.appState.transformFeedback=null)),this}bind(){return this.appState.transformFeedback!==this&&(this.gl.bindTransformFeedback(r.TRANSFORM_FEEDBACK,this.transformFeedback),this.appState.transformFeedback=this),this}}class N{constructor(e,t,i,n=e.DYNAMIC_DRAW){this.gl=e,this.buffer=null,this.dataViews={},this.offsets=new Array(i.length),this.sizes=new Array(i.length),this.types=new Array(i.length),this.size=0,this.usage=n,this.appState=t,this.currentBase=-1;for(let e=0,t=i.length;e<t;++e){let t=i[e];switch(t){case r.FLOAT:case r.INT:case r.UNSIGNED_INT:case r.BOOL:this.offsets[e]=this.size,this.sizes[e]=1,this.types[e]=t===r.INT?r.INT:t===r.UNSIGNED_INT?r.UNSIGNED_INT:r.FLOAT,this.size++;break;case r.FLOAT_VEC2:case r.INT_VEC2:case r.UNSIGNED_INT_VEC2:case r.BOOL_VEC2:this.size+=this.size%2,this.offsets[e]=this.size,this.sizes[e]=2,this.types[e]=t===r.INT_VEC2?r.INT:t===r.UNSIGNED_INT_VEC2?r.UNSIGNED_INT:r.FLOAT,this.size+=2;break;case r.FLOAT_VEC3:case r.INT_VEC3:case r.UNSIGNED_INT_VEC3:case r.BOOL_VEC3:case r.FLOAT_VEC4:case r.INT_VEC4:case r.UNSIGNED_INT_VEC4:case r.BOOL_VEC4:this.size+=(4-this.size%4)%4,this.offsets[e]=this.size,this.sizes[e]=4,this.types[e]=t===r.INT_VEC4||t===r.INT_VEC3?r.INT:t===r.UNSIGNED_INT_VEC4||t===r.UNSIGNED_INT_VEC3?r.UNSIGNED_INT:r.FLOAT,this.size+=4;break;case r.FLOAT_MAT2:case r.FLOAT_MAT2x3:case r.FLOAT_MAT2x4:this.size+=(4-this.size%4)%4,this.offsets[e]=this.size,this.sizes[e]=8,this.types[e]=r.FLOAT,this.size+=8;break;case r.FLOAT_MAT3:case r.FLOAT_MAT3x2:case r.FLOAT_MAT3x4:this.size+=(4-this.size%4)%4,this.offsets[e]=this.size,this.sizes[e]=12,this.types[e]=r.FLOAT,this.size+=12;break;case r.FLOAT_MAT4:case r.FLOAT_MAT4x2:case r.FLOAT_MAT4x3:this.size+=(4-this.size%4)%4,this.offsets[e]=this.size,this.sizes[e]=16,this.types[e]=r.FLOAT,this.size+=16;break;default:console.error("Unsupported type for uniform buffer.")}}this.size+=(4-this.size%4)%4,this.data=new Float32Array(this.size),this.dataViews[r.FLOAT]=this.data,this.dataViews[r.INT]=new Int32Array(this.data.buffer),this.dataViews[r.UNSIGNED_INT]=new Uint32Array(this.data.buffer),this.dirtyStart=this.size,this.dirtyEnd=0,this.restore()}restore(){return-1!==this.currentBase&&this.appState.uniformBuffers[this.currentBase]===this&&(this.appState.uniformBuffers[this.currentBase]=null),this.buffer=this.gl.createBuffer(),this.gl.bindBuffer(r.UNIFORM_BUFFER,this.buffer),this.gl.bufferData(r.UNIFORM_BUFFER,4*this.size,this.usage),this.gl.bindBuffer(r.UNIFORM_BUFFER,null),this}set(e,t){let i=this.dataViews[this.types[e]],r=this.offsets[e],n=this.sizes[e];return 1===this.sizes[e]?i[r]=t:i.set(t,r),r<this.dirtyStart&&(this.dirtyStart=r),this.dirtyEnd<r+n&&(this.dirtyEnd=r+n),this}update(){if(this.dirtyStart>=this.dirtyEnd)return this;let e=this.data.subarray(this.dirtyStart,this.dirtyEnd),t=4*this.dirtyStart;return this.gl.bindBuffer(this.gl.UNIFORM_BUFFER,this.buffer),this.gl.bufferSubData(this.gl.UNIFORM_BUFFER,t,e),this.gl.bindBuffer(this.gl.UNIFORM_BUFFER,null),this.dirtyStart=this.size,this.dirtyEnd=0,this}delete(){return this.buffer&&(this.gl.deleteBuffer(this.buffer),this.buffer=null,-1!==this.currentBase&&this.appState.uniformBuffers[this.currentBase]===this&&(this.appState.uniformBuffers[this.currentBase]=null)),this}bind(e){let t=this.appState.uniformBuffers[e];return t!==this&&(t&&(t.currentBase=-1),-1!==this.currentBase&&(this.appState.uniformBuffers[this.currentBase]=null),this.gl.bindBufferBase(this.gl.UNIFORM_BUFFER,e,this.buffer),this.appState.uniformBuffers[e]=this,this.currentBase=e),this}}class w{constructor(e,t){this.gl=e,this.appState=t,this.vertexArray=null,this.indexType=null,this.indexed=!1,this.numElements=0,this.numInstances=1,this.offsets=0,this.numDraws=1}restore(){return this.appState.vertexArray===this&&(this.appState.vertexArray=null),null!==this.vertexArray&&(this.vertexArray=this.gl.createVertexArray()),this}vertexAttributeBuffer(e,t,i=f){return this.attributeBuffer(e,t,i,!1),this}instanceAttributeBuffer(e,t,i=f){return this.attributeBuffer(e,t,i,!0),this}indexBuffer(e){return null===this.vertexArray&&(this.vertexArray=this.gl.createVertexArray()),this.bind(),this.gl.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.buffer),this.numElements=3*e.numItems,this.indexType=e.type,this.indexed=!0,this}delete(){return this.vertexArray&&(this.gl.deleteVertexArray(this.vertexArray),this.vertexArray=null,this.appState.vertexArray===this&&(this.gl.bindVertexArray(null),this.appState.vertexArray=null)),this}bind(){return this.appState.vertexArray!==this&&(this.gl.bindVertexArray(this.vertexArray),this.appState.vertexArray=this),this}attributeBuffer(e,t,i={},a){null===this.vertexArray&&(this.vertexArray=this.gl.createVertexArray()),this.bind(),this.gl.bindBuffer(r.ARRAY_BUFFER,t.buffer);let{type:s=t.type,size:o=t.itemSize,stride:c=0,offset:f=0,normalized:h=!1,integer:u=Boolean(t.integer&&!h)}=i,l=t.numColumns;0===c&&(c=l*o*n[s]);for(let t=0;t<l;++t)u?this.gl.vertexAttribIPointer(e+t,o,s,c,f+t*o*n[s]):this.gl.vertexAttribPointer(e+t,o,s,h,c,f+t*o*n[s]),a&&this.gl.vertexAttribDivisor(e+t,1),this.gl.enableVertexAttribArray(e+t);return 1===this.numDraws&&(a?this.numInstances=t.numItems:this.numElements=this.numElements||t.numItems),this.gl.bindBuffer(r.ARRAY_BUFFER,null),this}}const C={[r.BYTE]:!0,[r.UNSIGNED_BYTE]:!0,[r.SHORT]:!0,[r.UNSIGNED_SHORT]:!0,[r.INT]:!0,[r.UNSIGNED_INT]:!0};class I{constructor(e,t,i,a,s,o=e.STATIC_DRAW,c){let f,h,u;switch(i){case r.FLOAT_MAT4:case r.FLOAT_MAT4x2:case r.FLOAT_MAT4x3:f=4;break;case r.FLOAT_MAT3:case r.FLOAT_MAT3x2:case r.FLOAT_MAT3x4:f=3;break;case r.FLOAT_MAT2:case r.FLOAT_MAT2x3:case r.FLOAT_MAT2x4:f=2;break;default:f=1}switch(i){case r.FLOAT_MAT4:case r.FLOAT_MAT3x4:case r.FLOAT_MAT2x4:a=4,i=r.FLOAT;break;case r.FLOAT_MAT3:case r.FLOAT_MAT4x3:case r.FLOAT_MAT2x3:a=3,i=r.FLOAT;break;case r.FLOAT_MAT2:case r.FLOAT_MAT3x2:case r.FLOAT_MAT4x2:a=2,i=r.FLOAT}"number"==typeof s?(h=s,i&&(s*=n[i]),u=s):(h=s.length,u=s.byteLength),this.gl=e,this.buffer=null,this.appState=t,this.type=i,this.itemSize=a,this.numItems=i?h/(a*f):u/a,this.numColumns=f,this.byteLength=u,this.usage=o,this.indexArray=Boolean(c),this.integer=Boolean(C[this.type]),this.binding=this.indexArray?r.ELEMENT_ARRAY_BUFFER:r.ARRAY_BUFFER,this.restore(s)}restore(e){return e||(e=this.byteLength),this.appState.vertexArray&&(this.gl.bindVertexArray(null),this.appState.vertexArray=null),this.buffer=this.gl.createBuffer(),this.gl.bindBuffer(this.binding,this.buffer),this.gl.bufferData(this.binding,e,this.usage),this.gl.bindBuffer(this.binding,null),this}data(e){return this.appState.vertexArray&&(this.gl.bindVertexArray(null),this.appState.vertexArray=null),this.gl.bindBuffer(this.binding,this.buffer),this.gl.bufferSubData(this.binding,0,e),this.gl.bindBuffer(this.binding,null),this}delete(){return this.buffer&&(this.gl.deleteBuffer(this.buffer),this.buffer=null),this}}class F{constructor(e,t){this.canvas=t,this.gl=e,this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this.viewportX=0,this.viewportY=0,this.viewportWidth=0,this.viewportHeight=0,this.currentDrawCalls=null,this.emptyFragmentShader=null,this.state={program:null,vertexArray:null,transformFeedback:null,activeTexture:-1,textures:new Array(o.MAX_TEXTURE_UNITS),uniformBuffers:new Array(o.MAX_UNIFORM_BUFFERS),freeUniformBufferBases:[],drawFramebuffer:null,readFramebuffer:null,extensions:{}},this.clearBits=this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT,this.cpuTime=0,this.gpuTime=0,this.viewport(0,0,this.width,this.height),this.contextLostExt=null,this.contextRestoredHandler=null,this.initExtensions(),this.canvas.addEventListener("webglcontextlost",e=>{e.preventDefault()}),this.canvas.addEventListener("webglcontextrestored",()=>{this.initExtensions(),this.contextRestoredHandler&&this.contextRestoredHandler()})}loseContext(){return this.contextLostExt&&this.contextLostExt.loseContext(),this}restoreContext(){return this.contextLostExt&&this.contextLostExt.restoreContext(),this}onContextRestored(e){return this.contextRestoredHandler=e,this}colorMask(e,t,i,r){return this.gl.colorMask(e,t,i,r),this}clearColor(e,t,i,r){return this.gl.clearColor(e,t,i,r),this}clearMask(e){return this.clearBits=e,this}clear(){return this.gl.clear(this.clearBits),this}drawFramebuffer(e){return e.bindForDraw(),this}readFramebuffer(e){return e.bindForRead(),this}defaultDrawFramebuffer(){return null!==this.state.drawFramebuffer&&(this.gl.bindFramebuffer(this.gl.DRAW_FRAMEBUFFER,null),this.state.drawFramebuffer=null),this}defaultReadFramebuffer(){return null!==this.state.readFramebuffer&&(this.gl.bindFramebuffer(this.gl.READ_FRAMEBUFFER,null),this.state.readFramebuffer=null),this}blitFramebuffer(e,t=f){let i=this.state.readFramebuffer,n=this.state.drawFramebuffer,a=i?i.width:this.width,s=i?i.height:this.height,o=n?n.width:this.width,c=n?n.height:this.height,{srcStartX:h=0,srcStartY:u=0,srcEndX:l=a,srcEndY:d=s,dstStartX:_=0,dstStartY:p=0,dstEndX:m=o,dstEndY:E=c,filter:b=r.NEAREST}=t;return this.gl.blitFramebuffer(h,u,l,d,_,p,m,E,e,b),this}depthRange(e,t){return this.gl.depthRange(e,t),this}depthTest(){return this.gl.enable(this.gl.DEPTH_TEST),this}noDepthTest(){return this.gl.disable(this.gl.DEPTH_TEST),this}depthMask(e){return this.gl.depthMask(e),this}depthFunc(e){return this.gl.depthFunc(e),this}blend(){return this.gl.enable(this.gl.BLEND),this}noBlend(){return this.gl.disable(this.gl.BLEND),this}blendFunc(e,t){return this.gl.blendFunc(e,t),this}blendFuncSeparate(e,t,i,r){return this.gl.blendFuncSeparate(e,t,i,r),this}blendEquation(e){return this.gl.blendEquation(e),this}stencilTest(){return this.gl.enable(this.gl.STENCIL_TEST),this}noStencilTest(){return this.gl.disable(this.gl.STENCIL_TEST),this}scissorTest(){return this.gl.enable(this.gl.SCISSOR_TEST),this}noScissorTest(){return this.gl.disable(this.gl.SCISSOR_TEST),this}scissor(e,t,i,r){return this.gl.scissor(e,t,i,r),this}stencilMask(e){return this.gl.stencilMask(e),this}stencilMaskSeparate(e,t){return this.gl.stencilMaskSeparate(e,t),this}stencilFunc(e,t,i){return this.gl.stencilFunc(e,t,i),this}stencilFuncSeparate(e,t,i,r){return this.gl.stencilFuncSeparate(e,t,i,r),this}stencilOp(e,t,i){return this.gl.stencilOp(e,t,i),this}stencilOpSeparate(e,t,i,r){return this.gl.stencilOpSeparate(e,t,i,r),this}rasterize(){return this.gl.disable(this.gl.RASTERIZER_DISCARD),this}noRasterize(){return this.gl.enable(this.gl.RASTERIZER_DISCARD),this}cullBackfaces(){return this.gl.enable(this.gl.CULL_FACE),this}drawBackfaces(){return this.gl.disable(this.gl.CULL_FACE),this}readPixel(e,t,i,n=f){let{format:a=r.RGBA,type:s=r.UNSIGNED_BYTE}=n;return this.gl.readPixels(e,t,1,1,a,s,i),this}viewport(e,t,i,r){return this.viewportWidth===i&&this.viewportHeight===r&&this.viewportX===e&&this.viewportY===t||(this.viewportX=e,this.viewportY=t,this.viewportWidth=i,this.viewportHeight=r,this.gl.viewport(e,t,this.viewportWidth,this.viewportHeight)),this}defaultViewport(){return this.viewport(0,0,this.width,this.height),this}resize(e,t){return this.canvas.width=e,this.canvas.height=t,this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this.viewport(0,0,this.width,this.height),this}createProgram(e,t,i){return new S(this.gl,this.state,e,t,i).link().checkLinkage()}createPrograms(...e){return new Promise((t,i)=>{let r=e.length,n=new Array(r),a=new Array(r),s=r;for(let t=0;t<r;++t){let i=e[t];n[t]=new S(this.gl,this.state,i[0],i[1],i[2]),a[t]=n[t]}for(let e=0;e<r;++e)n[e].link();let o=()=>{let e=0;for(let t=0;t<s;++t)if(a[t].checkCompletion()){if(a[t].checkLinkage(),!a[t].linked)return void i(new Error("Program linkage failed"));++e}else a[t-e]=a[t];0==(s-=e)?t(n):requestAnimationFrame(o)};o()})}restorePrograms(...e){return new Promise((t,i)=>{let r=e.length,n=e.slice(),a=r;for(let t=0;t<r;++t)e[t].initialize();for(let t=0;t<r;++t)e[t].link();for(let t=0;t<r;++t)e[t].checkCompletion();let s=()=>{let e=0;for(let t=0;t<a;++t)if(n[t].checkCompletion()){if(n[t].checkLinkage(),!n[t].linked)return void i(new Error("Program linkage failed"));++e}else n[t-e]=n[t];0==(a-=e)?t():requestAnimationFrame(s)};s()})}createShader(e,t){return new m(this.gl,this.state,e,t)}createVertexArray(){return new w(this.gl,this.state)}createTransformFeedback(){return new x(this.gl,this.state)}createVertexBuffer(e,t,i,r){return new I(this.gl,this.state,e,t,i,r)}createMatrixBuffer(e,t,i){return new I(this.gl,this.state,e,0,t,i)}createInterleavedBuffer(e,t,i){return new I(this.gl,this.state,null,e,t,i)}createIndexBuffer(e,t,i,r){return new I(this.gl,this.state,e,t,i,r,!0)}createUniformBuffer(e,t){return new N(this.gl,this.state,e,t)}createTexture2D(e,t,i,r){return"number"==typeof e?(r=i,i=t,t=e,e=null):void 0===i&&(r=t,t=e.width,i=e.height),new d(this.gl,this.state,this.gl.TEXTURE_2D,e,t,i,void 0,!1,r)}createTextureArray(e,t,i,r,n){return"number"==typeof e&&(n=r,r=i,i=t,t=e,e=null),new d(this.gl,this.state,this.gl.TEXTURE_2D_ARRAY,e,t,i,r,!0,n)}createTexture3D(e,t,i,r,n){return"number"==typeof e&&(n=r,r=i,i=t,t=e,e=null),new d(this.gl,this.state,this.gl.TEXTURE_3D,e,t,i,r,!0,n)}createCubemap(e){return new u(this.gl,this.state,e)}createRenderbuffer(e,t,i,r=0){return new _(this.gl,e,t,i,r)}createFramebuffer(){return new p(this.gl,this.state)}createQuery(e){return new y(this.gl,e)}createTimer(){return new M(this.gl)}createDrawCall(e,t,i){return new l(this.gl,this.state,e,t,i)}initExtensions(){this.gl.getExtension("EXT_color_buffer_float"),this.gl.getExtension("OES_texture_float_linear"),this.gl.getExtension("WEBGL_compressed_texture_s3tc"),this.gl.getExtension("WEBGL_compressed_texture_s3tc_srgb"),this.gl.getExtension("WEBGL_compressed_texture_etc"),this.gl.getExtension("WEBGL_compressed_texture_astc"),this.gl.getExtension("WEBGL_compressed_texture_pvrtc"),this.gl.getExtension("EXT_disjoint_timer_query_webgl2"),this.gl.getExtension("EXT_disjoint_timer_query"),this.gl.getExtension("EXT_texture_filter_anisotropic"),this.state.extensions.debugShaders=this.gl.getExtension("WEBGL_debug_shaders"),this.contextLostExt=this.gl.getExtension("WEBGL_lose_context"),this.gl.getExtension("KHR_parallel_shader_compile"),this.state.extensions.multiDrawInstanced=this.gl.getExtension("WEBGL_multi_draw_instanced")}}i.d(t,"PicoGL",function(){return D});let O=!1;const D=Object.assign({version:"0.15.0",WEBGL_INFO:o,createApp(e,t){let i=e.getContext("webgl2",t);return O||(o.MAX_TEXTURE_UNITS=i.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS),o.MAX_UNIFORM_BUFFERS=i.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS),o.MAX_UNIFORMS=Math.min(i.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),i.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS)),o.SAMPLES=i.getParameter(r.SAMPLES),o.VENDOR="(Unknown)",o.RENDERER="(Unknown)",o.FLOAT_RENDER_TARGETS=Boolean(i.getExtension("EXT_color_buffer_float")),o.LINEAR_FLOAT_TEXTURES=Boolean(i.getExtension("OES_texture_float_linear")),o.S3TC_TEXTURES=Boolean(i.getExtension("WEBGL_compressed_texture_s3tc")),o.S3TC_SRGB_TEXTURES=Boolean(i.getExtension("WEBGL_compressed_texture_s3tc_srgb")),o.ETC_TEXTURES=Boolean(i.getExtension("WEBGL_compressed_texture_etc")),o.ASTC_TEXTURES=Boolean(i.getExtension("WEBGL_compressed_texture_astc")),o.PVRTC_TEXTURES=Boolean(i.getExtension("WEBGL_compressed_texture_pvrtc")),o.LOSE_CONTEXT=Boolean(i.getExtension("WEBGL_lose_context")),o.DEBUG_SHADERS=Boolean(i.getExtension("WEBGL_debug_shaders")),o.GPU_TIMER=Boolean(i.getExtension("EXT_disjoint_timer_query_webgl2")||i.getExtension("EXT_disjoint_timer_query")),o.TEXTURE_ANISOTROPY=Boolean(i.getExtension("EXT_texture_filter_anisotropic")),o.MAX_TEXTURE_ANISOTROPY=o.TEXTURE_ANISOTROPY?i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1,o.DEBUG_RENDERER_INFO=Boolean(i.getExtension("WEBGL_debug_renderer_info")),o.DEBUG_RENDERER_INFO&&(o.VENDOR=i.getParameter(r.UNMASKED_VENDOR_WEBGL),o.RENDERER=i.getParameter(r.UNMASKED_RENDERER_WEBGL)),o.PARALLEL_SHADER_COMPILE=Boolean(i.getExtension("KHR_parallel_shader_compile")),o.MULTI_DRAW_INSTANCED=Boolean(i.getExtension("WEBGL_multi_draw_instanced")),O=!0),new F(i,e)}},r)}]).PicoGL},"object"==typeof i&&"object"==typeof t?t.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof i?i.PicoGL=n():r.PicoGL=n()},{}],73:[function(e,t,i){var r=e("icosphere"),n=e("gl-vec3/normalize"),a=e("gl-vec3/scale"),s=e("./lib/fix-wrapped-uvs"),o=e("./lib/fix-pole-uvs");t.exports=function(e,t){e=void 0!==e?e:1;var i,c,f=r(void 0!==(t=t||{}).subdivisions?t.subdivisions:2),h=[],u=[];for(i=0;i<f.positions.length;i++){c=f.positions[i];var l=.5*(-Math.atan2(c[2],-c[0])/Math.PI+1),d=.5+Math.asin(c[1])/Math.PI;u.push([1-l,1-d])}var _={positions:f.positions,cells:f.cells,uvs:u,normals:h};for(o(_),s(_),i=0;i<_.positions.length;i++){var p=n([0,0,0],c=_.positions[i]);h.push(p),a(c,c,e)}return _}},{"./lib/fix-pole-uvs":74,"./lib/fix-wrapped-uvs":75,"gl-vec3/normalize":55,"gl-vec3/scale":56,icosphere:58}],74:[function(e,t,i){function r(e,t){for(var i=0;i<e.length;i++){if(Math.abs(e[i][1]-t)<=1e-4)return i}return-1}t.exports=function(e){var t=e.positions,i=e.cells,n=e.uvs,a=r(t,1),s=r(t,-1);if(-1===a||-1===s)return;for(var o=t.slice(),c=n.slice(),f=o.length-1,h=0;h<i.length;h++){var u=i[h],l=u[0],d=u[1],_=u[2];l===a?p(u,a,d,_):l===s&&p(u,s,d,_)}function p(e,i,r,a){var s=n[r],h=n[a];n[i][0]=(s[0]+h[0])/2,f++,o.push(t[i].slice()),c.push(n[i].slice()),e[0]=f}e.positions=o,e.uvs=c}},{}],75:[function(e,t,i){var r=e("./is-uv-seam"),n=.25,a=.75;t.exports=function(e){for(var t=e.positions,i=e.cells,s=e.uvs,o=t.slice(),c=s.slice(),f={},h=0;h<i.length;h++){var u=i[h],l=u[0],d=u[1],_=u[2];if(r(s,l,d,_)){var p=t[l],m=t[d],E=t[_],b=s[l],g=s[d],A=s[_];b[0]<n&&(l=R(f,l,b,p)),g[0]<n&&(d=R(f,d,g,m)),A[0]<n&&(_=R(f,_,A,E)),u[0]=l,u[1]=d,u[2]=_}}function R(e,t,i,r){if(t in e)return e[t];o.push(r.slice()),c.push(i.slice());var n=o.length-1;return e[t]=n,n}(function(e,t){for(var i=0;i<e.length;i++){var r=e[i],s=t[r[0]],o=t[r[1]],c=t[r[2]],f=Math.max(s[0],o[0],c[0]),h=Math.min(s[0],o[0],c[0]);f>a&&h<n&&(s[0]<n&&(s[0]+=1),o[0]<n&&(o[0]+=1),c[0]<n&&(c[0]+=1))}})(i,c),e.positions=o,e.uvs=c}},{"./is-uv-seam":76}],76:[function(e,t,i){var r=e("gl-vec2/cross"),n=e("gl-vec2/subtract"),a=[0,0,0],s=[0,0,0];t.exports=function(e,t,i,o){var c=e[t],f=e[o];return n(a,e[i],c),n(s,f,c),r(a,a,s),a[2]<0}},{"gl-vec2/cross":49,"gl-vec2/subtract":50}],77:[function(e,t,i){t.exports=e("gl-quat/slerp")},{"gl-quat/slerp":48}],78:[function(e,t,i){(function(e){t.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],79:[function(e,t,i){(function(e){"use strict";var i=256,r=[],n=void 0===e?window:e,a=Math.pow(i,6),s=Math.pow(2,52),o=2*s,c=i-1,f=Math.random;function h(e){var t,r=e.length,n=this,a=0,s=n.i=n.j=0,o=n.S=[];for(r||(e=[r++]);a<i;)o[a]=a++;for(a=0;a<i;a++)o[a]=o[s=c&s+e[a%r]+(t=o[a])],o[s]=t;(n.g=function(e){for(var t,r=0,a=n.i,s=n.j,o=n.S;e--;)t=o[a=c&a+1],r=r*i+o[c&(o[a]=o[s=c&s+t])+(o[s]=t)];return n.i=a,n.j=s,r})(i)}function u(e,t){for(var i,r=e+"",n=0;n<r.length;)t[c&n]=c&(i^=19*t[c&n])+r.charCodeAt(n++);return l(t)}function l(e){return String.fromCharCode.apply(0,e)}t.exports=function(e,c){if(c&&!0===c.global)return c.global=!1,Math.random=t.exports(e,c),c.global=!0,Math.random;var f=[],d=(u(function e(t,i){var r,n=[],a=(typeof t)[0];if(i&&"o"==a)for(r in t)try{n.push(e(t[r],i-1))}catch(e){}return n.length?n:"s"==a?t:t+"\0"}(c&&c.entropy||!1?[e,l(r)]:0 in arguments?e:function(e){try{return n.crypto.getRandomValues(e=new Uint8Array(i)),l(e)}catch(e){return[+new Date,n,n.navigator&&n.navigator.plugins,n.screen,l(r)]}}(),3),f),new h(f));return u(l(d.S),r),function(){for(var e=d.g(6),t=a,r=0;e<s;)e=(e+r)*i,t*=i,r=d.g(1);for(;e>=o;)e/=2,t/=2,r>>>=1;return(e+r)/t}},t.exports.resetGlobal=function(){Math.random=f},u(Math.random(),r)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],80:[function(e,t,i){!function(){"use strict";var e=.5*(Math.sqrt(3)-1),r=(3-Math.sqrt(3))/6,n=1/6,a=(Math.sqrt(5)-1)/4,s=(5-Math.sqrt(5))/20;function o(e){var t;t="function"==typeof e?e:e?function(){var e=0,t=0,i=0,r=1,n=(a=4022871197,function(e){e=e.toString();for(var t=0;t<e.length;t++){var i=.02519603282416938*(a+=e.charCodeAt(t));i-=a=i>>>0,a=(i*=a)>>>0,a+=4294967296*(i-=a)}return 2.3283064365386963e-10*(a>>>0)});var a;e=n(" "),t=n(" "),i=n(" ");for(var s=0;s<arguments.length;s++)(e-=n(arguments[s]))<0&&(e+=1),(t-=n(arguments[s]))<0&&(t+=1),(i-=n(arguments[s]))<0&&(i+=1);return n=null,function(){var n=2091639*e+2.3283064365386963e-10*r;return e=t,t=i,i=n-(r=0|n)}}(e):Math.random,this.p=c(t),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var i=0;i<512;i++)this.perm[i]=this.p[255&i],this.permMod12[i]=this.perm[i]%12}function c(e){var t,i=new Uint8Array(256);for(t=0;t<256;t++)i[t]=t;for(t=0;t<255;t++){var r=t+~~(e()*(256-t)),n=i[t];i[t]=i[r],i[r]=n}return i}o.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(t,i){var n,a,s=this.permMod12,o=this.perm,c=this.grad3,f=0,h=0,u=0,l=(t+i)*e,d=Math.floor(t+l),_=Math.floor(i+l),p=(d+_)*r,m=t-(d-p),E=i-(_-p);m>E?(n=1,a=0):(n=0,a=1);var b=m-n+r,g=E-a+r,A=m-1+2*r,R=E-1+2*r,T=255&d,v=255&_,S=.5-m*m-E*E;if(S>=0){var y=3*s[T+o[v]];f=(S*=S)*S*(c[y]*m+c[y+1]*E)}var M=.5-b*b-g*g;if(M>=0){var x=3*s[T+n+o[v+a]];h=(M*=M)*M*(c[x]*b+c[x+1]*g)}var N=.5-A*A-R*R;if(N>=0){var w=3*s[T+1+o[v+1]];u=(N*=N)*N*(c[w]*A+c[w+1]*R)}return 70*(f+h+u)},noise3D:function(e,t,i){var r,a,s,o,c,f,h,u,l,d,_=this.permMod12,p=this.perm,m=this.grad3,E=(e+t+i)*(1/3),b=Math.floor(e+E),g=Math.floor(t+E),A=Math.floor(i+E),R=(b+g+A)*n,T=e-(b-R),v=t-(g-R),S=i-(A-R);T>=v?v>=S?(c=1,f=0,h=0,u=1,l=1,d=0):T>=S?(c=1,f=0,h=0,u=1,l=0,d=1):(c=0,f=0,h=1,u=1,l=0,d=1):v<S?(c=0,f=0,h=1,u=0,l=1,d=1):T<S?(c=0,f=1,h=0,u=0,l=1,d=1):(c=0,f=1,h=0,u=1,l=1,d=0);var y=T-c+n,M=v-f+n,x=S-h+n,N=T-u+2*n,w=v-l+2*n,C=S-d+2*n,I=T-1+.5,F=v-1+.5,O=S-1+.5,D=255&b,B=255&g,L=255&A,P=.6-T*T-v*v-S*S;if(P<0)r=0;else{var U=3*_[D+p[B+p[L]]];r=(P*=P)*P*(m[U]*T+m[U+1]*v+m[U+2]*S)}var G=.6-y*y-M*M-x*x;if(G<0)a=0;else{var k=3*_[D+c+p[B+f+p[L+h]]];a=(G*=G)*G*(m[k]*y+m[k+1]*M+m[k+2]*x)}var H=.6-N*N-w*w-C*C;if(H<0)s=0;else{var X=3*_[D+u+p[B+l+p[L+d]]];s=(H*=H)*H*(m[X]*N+m[X+1]*w+m[X+2]*C)}var V=.6-I*I-F*F-O*O;if(V<0)o=0;else{var Y=3*_[D+1+p[B+1+p[L+1]]];o=(V*=V)*V*(m[Y]*I+m[Y+1]*F+m[Y+2]*O)}return 32*(r+a+s+o)},noise4D:function(e,t,i,r){var n,o,c,f,h,u,l,d,_,p,m,E,b,g,A,R,T,v=this.perm,S=this.grad4,y=(e+t+i+r)*a,M=Math.floor(e+y),x=Math.floor(t+y),N=Math.floor(i+y),w=Math.floor(r+y),C=(M+x+N+w)*s,I=e-(M-C),F=t-(x-C),O=i-(N-C),D=r-(w-C),B=0,L=0,P=0,U=0;I>F?B++:L++,I>O?B++:P++,I>D?B++:U++,F>O?L++:P++,F>D?L++:U++,O>D?P++:U++;var G=I-(u=B>=3?1:0)+s,k=F-(l=L>=3?1:0)+s,H=O-(d=P>=3?1:0)+s,X=D-(_=U>=3?1:0)+s,V=I-(p=B>=2?1:0)+2*s,Y=F-(m=L>=2?1:0)+2*s,K=O-(E=P>=2?1:0)+2*s,z=D-(b=U>=2?1:0)+2*s,W=I-(g=B>=1?1:0)+3*s,j=F-(A=L>=1?1:0)+3*s,q=O-(R=P>=1?1:0)+3*s,Q=D-(T=U>=1?1:0)+3*s,Z=I-1+4*s,J=F-1+4*s,$=O-1+4*s,ee=D-1+4*s,te=255&M,ie=255&x,re=255&N,ne=255&w,ae=.6-I*I-F*F-O*O-D*D;if(ae<0)n=0;else{var se=v[te+v[ie+v[re+v[ne]]]]%32*4;n=(ae*=ae)*ae*(S[se]*I+S[se+1]*F+S[se+2]*O+S[se+3]*D)}var oe=.6-G*G-k*k-H*H-X*X;if(oe<0)o=0;else{var ce=v[te+u+v[ie+l+v[re+d+v[ne+_]]]]%32*4;o=(oe*=oe)*oe*(S[ce]*G+S[ce+1]*k+S[ce+2]*H+S[ce+3]*X)}var fe=.6-V*V-Y*Y-K*K-z*z;if(fe<0)c=0;else{var he=v[te+p+v[ie+m+v[re+E+v[ne+b]]]]%32*4;c=(fe*=fe)*fe*(S[he]*V+S[he+1]*Y+S[he+2]*K+S[he+3]*z)}var ue=.6-W*W-j*j-q*q-Q*Q;if(ue<0)f=0;else{var le=v[te+g+v[ie+A+v[re+R+v[ne+T]]]]%32*4;f=(ue*=ue)*ue*(S[le]*W+S[le+1]*j+S[le+2]*q+S[le+3]*Q)}var de=.6-Z*Z-J*J-$*$-ee*ee;if(de<0)h=0;else{var _e=v[te+1+v[ie+1+v[re+1+v[ne+1]]]]%32*4;h=(de*=de)*de*(S[_e]*Z+S[_e+1]*J+S[_e+2]*$+S[_e+3]*ee)}return 27*(n+o+c+f+h)}},o._buildPermutationTable=c,"undefined"!=typeof define&&define.amd&&define(function(){return o}),void 0!==i?i.SimplexNoise=o:"undefined"!=typeof window&&(window.SimplexNoise=o),void 0!==t&&(t.exports=o)}()},{}],81:[function(e,t,i){"use strict";var r=e("parse-unit");t.exports=o;var n=s("in",document.body);function a(e,t){var i=r(getComputedStyle(e).getPropertyValue(t));return i[0]*o(i[1],e)}function s(e,t){var i=document.createElement("div");i.style.height="128"+e,t.appendChild(i);var r=a(i,"height")/128;return t.removeChild(i),r}function o(e,t){if(!e)return null;switch(t=t||document.body,e=(e+""||"px").trim().toLowerCase(),t!==window&&t!==document||(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return s(e,t);case"em":return a(t,"font-size");case"rem":return a(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return n;case"cm":return n/2.54;case"mm":return n/25.4;case"pt":return n/72;case"pc":return n/6;case"px":return 1}var i=r(e);if(!isNaN(i[0])&&i[1]){var c=o(i[1],t);return"number"==typeof c?i[0]*c:null}return null}},{"parse-unit":71}],82:[function(e,t,i){"use strict";t.exports=function(e){var t=(e=e||{}).center||[0,0,0],i=e.up||[0,1,0],r=e.right||u(i),n=e.radius||1,a=e.theta||0,h=e.phi||0;if(t=[].slice.call(t,0,3),i=[].slice.call(i,0,3),o(i,i),r=[].slice.call(r,0,3),o(r,r),"eye"in e){var d=e.eye,_=[d[0]-t[0],d[1]-t[1],d[2]-t[2]];s(r,_,i),f(r[0],r[1],r[2])<1e-6?r=u(i):o(r,r),n=f(_[0],_[1],_[2]);var p=c(i,_)/n,m=c(r,_)/n;h=Math.acos(p),a=Math.acos(m)}return n=Math.log(n),new l(e.zoomMin,e.zoomMax,t,i,r,n,a,h)};var r=e("filtered-vector"),n=e("gl-mat4/invert"),a=e("gl-mat4/rotate"),s=e("gl-vec3/cross"),o=e("gl-vec3/normalize"),c=e("gl-vec3/dot");function f(e,t,i){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(i,2))}function h(e){return Math.min(1,Math.max(-1,e))}function u(e){var t=Math.abs(e[0]),i=Math.abs(e[1]),r=Math.abs(e[2]),n=[0,0,0];t>Math.max(i,r)?n[2]=1:i>Math.max(t,r)?n[0]=1:n[1]=1;for(var a=0,s=0,c=0;c<3;++c)a+=e[c]*e[c],s+=n[c]*e[c];for(c=0;c<3;++c)n[c]-=s/a*e[c];return o(n,n),n}function l(e,t,i,n,a,s,o,c){this.center=r(i),this.up=r(n),this.right=r(a),this.radius=r([s]),this.angle=r([o,c]),this.angle.bounds=[[-Infinity,-Math.PI/2],[Infinity,Math.PI/2]],this.setDistanceLimits(e,t),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var f=0;f<16;++f)this.computedMatrix[f]=.5;this.recalcMatrix(0)}var d=l.prototype;d.setDistanceLimits=function(e,t){e=e>0?Math.log(e):-Infinity,t=t>0?Math.log(t):Infinity,t=Math.max(t,e),this.radius.bounds[0][0]=e,this.radius.bounds[1][0]=t},d.getDistanceLimits=function(e){var t=this.radius.bounds[0];return e?(e[0]=Math.exp(t[0][0]),e[1]=Math.exp(t[1][0]),e):[Math.exp(t[0][0]),Math.exp(t[1][0])]},d.recalcMatrix=function(e){this.center.curve(e),this.up.curve(e),this.right.curve(e),this.radius.curve(e),this.angle.curve(e);for(var t=this.computedUp,i=this.computedRight,r=0,n=0,a=0;a<3;++a)n+=t[a]*i[a],r+=t[a]*t[a];var c=Math.sqrt(r),h=0;for(a=0;a<3;++a)i[a]-=t[a]*n/r,h+=i[a]*i[a],t[a]/=c;var u=Math.sqrt(h);for(a=0;a<3;++a)i[a]/=u;var l=this.computedToward;s(l,t,i),o(l,l);var d=Math.exp(this.computedRadius[0]),_=this.computedAngle[0],p=this.computedAngle[1],m=Math.cos(_),E=Math.sin(_),b=Math.cos(p),g=Math.sin(p),A=this.computedCenter,R=m*b,T=E*b,v=g,S=-m*g,y=-E*g,M=b,x=this.computedEye,N=this.computedMatrix;for(a=0;a<3;++a){var w=R*i[a]+T*l[a]+v*t[a];N[4*a+1]=S*i[a]+y*l[a]+M*t[a],N[4*a+2]=w,N[4*a+3]=0}var C=N[1],I=N[5],F=N[9],O=N[2],D=N[6],B=N[10],L=I*B-F*D,P=F*O-C*B,U=C*D-I*O,G=f(L,P,U);P/=G,U/=G,N[0]=L/=G,N[4]=P,N[8]=U;for(a=0;a<3;++a)x[a]=A[a]+N[2+4*a]*d;for(a=0;a<3;++a){h=0;for(var k=0;k<3;++k)h+=N[a+4*k]*x[k];N[12+a]=-h}N[15]=1},d.getMatrix=function(e,t){this.recalcMatrix(e);var i=this.computedMatrix;if(t){for(var r=0;r<16;++r)t[r]=i[r];return t}return i};var _=[0,0,0];d.rotate=function(e,t,i,r){if(this.angle.move(e,t,i),r){this.recalcMatrix(e);var n=this.computedMatrix;_[0]=n[2],_[1]=n[6],_[2]=n[10];for(var s=this.computedUp,o=this.computedRight,c=this.computedToward,f=0;f<3;++f)n[4*f]=s[f],n[4*f+1]=o[f],n[4*f+2]=c[f];a(n,n,r,_);for(f=0;f<3;++f)s[f]=n[4*f],o[f]=n[4*f+1];this.up.set(e,s[0],s[1],s[2]),this.right.set(e,o[0],o[1],o[2])}},d.pan=function(e,t,i,r){t=t||0,i=i||0,r=r||0,this.recalcMatrix(e);var n=this.computedMatrix,a=(Math.exp(this.computedRadius[0]),n[1]),s=n[5],o=n[9],c=f(a,s,o),h=n[0],u=n[4],l=n[8],d=h*(a/=c)+u*(s/=c)+l*(o/=c),_=f(h-=a*d,u-=s*d,l-=o*d);this.center.move(e,(h/=_)*t+a*i,(u/=_)*t+s*i,(l/=_)*t+o*i);var p=Math.exp(this.computedRadius[0]);p=Math.max(1e-4,p+r),this.radius.set(e,Math.log(p))},d.translate=function(e,t,i,r){this.center.move(e,t||0,i||0,r||0)},d.setMatrix=function(e,t,i,r){var a=1;"number"==typeof i&&(a=0|i),(a<0||a>3)&&(a=1);var s=(a+2)%3;t||(this.recalcMatrix(e),t=this.computedMatrix);var o=t[a],c=t[a+4],u=t[a+8];if(r){var l=Math.abs(o),d=Math.abs(c),_=Math.abs(u),p=Math.max(l,d,_);l===p?(o=o<0?-1:1,c=u=0):_===p?(u=u<0?-1:1,o=c=0):(c=c<0?-1:1,o=u=0)}else{var m=f(o,c,u);o/=m,c/=m,u/=m}var E,b,g=t[s],A=t[s+4],R=t[s+8],T=g*o+A*c+R*u,v=f(g-=o*T,A-=c*T,R-=u*T),S=c*(R/=v)-u*(A/=v),y=u*(g/=v)-o*R,M=o*A-c*g,x=f(S,y,M);if(S/=x,y/=x,M/=x,this.center.jump(e,X,V,Y),this.radius.idle(e),this.up.jump(e,o,c,u),this.right.jump(e,g,A,R),2===a){var N=t[1],w=t[5],C=t[9];E=D<0?-Math.PI/2:Math.PI/2,b=Math.atan2(N*S+w*y+C*M,N*g+w*A+C*R)}else{var I=t[2],F=t[6],O=t[10],D=I*o+F*c+O*u,B=I*g+F*A+O*R,L=I*S+F*y+O*M;E=Math.asin(h(D)),b=Math.atan2(L,B)}this.angle.jump(e,b,E),this.recalcMatrix(e);var P=t[2],U=t[6],G=t[10],k=this.computedMatrix;n(k,t);var H=k[15],X=k[12]/H,V=k[13]/H,Y=k[14]/H,K=Math.exp(this.computedRadius[0]);this.center.jump(e,X-P*K,V-U*K,Y-G*K)},d.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},d.idle=function(e){this.center.idle(e),this.up.idle(e),this.right.idle(e),this.radius.idle(e),this.angle.idle(e)},d.flush=function(e){this.center.flush(e),this.up.flush(e),this.right.flush(e),this.radius.flush(e),this.angle.flush(e)},d.setDistance=function(e,t){t>0&&this.radius.set(e,Math.log(t))},d.lookAt=function(e,t,i,r){this.recalcMatrix(e),t=t||this.computedEye,i=i||this.computedCenter;var n=(r=r||this.computedUp)[0],a=r[1],s=r[2],o=f(n,a,s);if(!(o<1e-6)){n/=o,a/=o,s/=o;var c=t[0]-i[0],u=t[1]-i[1],l=t[2]-i[2],d=f(c,u,l);if(!(d<1e-6)){c/=d,u/=d,l/=d;var _=this.computedRight,p=_[0],m=_[1],E=_[2],b=n*p+a*m+s*E,g=f(p-=b*n,m-=b*a,E-=b*s);if(!(g<.01&&(g=f(p=a*l-s*u,m=s*c-n*l,E=n*u-a*c))<1e-6)){p/=g,m/=g,E/=g,this.up.set(e,n,a,s),this.right.set(e,p,m,E),this.center.set(e,i[0],i[1],i[2]),this.radius.set(e,Math.log(d));var A=a*E-s*m,R=s*p-n*E,T=n*m-a*p,v=f(A,R,T),S=p*c+m*u+E*l,y=(A/=v)*c+(R/=v)*u+(T/=v)*l,M=Math.asin(h(n*c+a*u+s*l)),x=Math.atan2(y,S),N=this.angle._state,w=N[N.length-1],C=N[N.length-2];w%=2*Math.PI;var I=Math.abs(w+2*Math.PI-x),F=Math.abs(w-x),O=Math.abs(w-2*Math.PI-x);I<F&&(w+=2*Math.PI),O<F&&(w-=2*Math.PI),this.angle.jump(this.angle.lastT(),w,C),this.angle.set(e,x,M)}}}}},{"filtered-vector":17,"gl-mat4/invert":34,"gl-mat4/rotate":40,"gl-vec3/cross":51,"gl-vec3/dot":52,"gl-vec3/normalize":55}],83:[function(e,t,i){t.exports=function(e){for(var t=0,i=0;i<e.length;i++)t+=e[i]*e[i];if(0===(t=Math.sqrt(t)))return Array.apply(null,new Array(e.length)).map(Number.prototype.valueOf,0);for(var i=0;i<e.length;i++)e[i]/=t;return e}},{}],84:[function(e,t,i){const r=e("canvas-sketch"),n=e("canvas-fit"),a=e("gl-mat4"),s=e("3d-view-controls"),o=e("picogl"),c=e("canvas-sketch-util/random"),{GUI:f}=e("dat-gui"),h=e("primitive-icosphere"),{interpolateCool:u}=e("d3-scale-chromatic"),{rgb:l}=e("d3-color"),d=document.body.appendChild(document.createElement("canvas"));window.addEventListener("resize",n(d),!1);const _=o.createApp(d).clearColor(.13,.13,.13,1).depthTest().blend().blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE);window.PicoGL=o,window.pico=_;const p={seed:1,subdivisions:3,colorNoiseMultiplier:.05,size:31,wireframeThreshold:.045},m=new f;let E,b,g;m.add(p,"seed",0,9999).step(1).onChange(M),m.add(p,"subdivisions",0,5).step(1).onChange(M),m.add(p,"colorNoiseMultiplier",.001,2).onChange(M),m.add(p,"size",0,100),m.add(p,"wireframeThreshold",0,.334);const A=[],R=s(d,{zoomSpeed:4});R.lookAt([50,50,50],[0,0,0],[0,0,1]);const T=_.createProgram("#version 300 es\nprecision highp float;\n\nlayout(location=0) in vec3 position;\nlayout(location=1) in vec3 color;\nlayout(location=2) in vec3 bary;\n\nlayout(std140) uniform VertexUniforms {\n  mat4 projection;\n  mat4 view;\n  float size;\n};\n\nout vec3 vColor;\nout vec3 vBary;\n\nvoid main() {\n  vColor = color;\n  vBary = bary;\n  gl_Position = projection * view * vec4(position * size, 1);\n  gl_PointSize = 4.0;\n}","#version 300 es\nprecision highp float;\n\nin vec3 vColor;\nin vec3 vBary;\n\nlayout(std140) uniform FragmentUniforms {\n  float wireframeThreshold;\n};\n\nout vec4 fragColor;\n\nvoid main() {\n  float minComponent = min(vBary.x, min(vBary.y, vBary.z));\n  float afwidth = fwidth(minComponent) * 0.5;\n  if (minComponent < wireframeThreshold + afwidth) {\n    float alpha = 1.0 - smoothstep(wireframeThreshold - afwidth, wireframeThreshold + afwidth, minComponent);\n    fragColor = vec4(vColor, alpha);\n  } else {\n    discard;\n  }\n}"),v=_.createVertexArray(),S=_.createUniformBuffer([o.FLOAT_MAT4,o.FLOAT_MAT4,o.FLOAT]),y=_.createUniformBuffer([o.FLOAT]);function M(){E=c.createRandom(p.seed);const e=h(1,{subdivisions:p.subdivisions}),t=_.createVertexBuffer(o.FLOAT,3,function(e){let t=0;const i=new Float32Array(3*e.cells.length*3);for(const r of e.cells)for(const n of r)i[t++]=e.positions[n][0],i[t++]=e.positions[n][1],i[t++]=e.positions[n][2];return i}(e)),i=_.createVertexBuffer(o.FLOAT,3,function(e){let t=0;const i=new Float32Array(3*e.cells.length*3),r=[];for(const n of e.cells)for(const a of n){let n=r[a];if(!n){const t=E.noise3D(e.positions[a][0]*p.colorNoiseMultiplier,e.positions[a][1]*p.colorNoiseMultiplier,e.positions[a][2]*p.colorNoiseMultiplier),{r:i,g:s,b:o}=l(u(.5*t+.5));n=r[a]=[i/255,s/255,o/255]}i[t++]=n[0],i[t++]=n[1],i[t++]=n[2]}return i}(e)),r=_.createVertexBuffer(o.FLOAT,3,function(e){let t=0;const i=new Float32Array(3*e.cells.length*3);for(const r of e.cells)i[t++]=1,i[t++]=0,i[t++]=0,i[t++]=0,i[t++]=1,i[t++]=0,i[t++]=0,i[t++]=0,i[t++]=1;return i}(e));v.vertexAttributeBuffer(0,t).vertexAttributeBuffer(1,i).vertexAttributeBuffer(2,r),b=_.createDrawCall(T,v),g=3*e.cells.length}r(()=>(M(),({time:e})=>{R.center=[70*Math.sin(e/10),70*Math.cos(e/10),70*Math.cos(e/8)],R.tick(),_.clear(),_.viewport(0,0,d.width,d.height),S.set(0,a.perspective(A,Math.PI/4,d.width/d.height,.01,1e3)).set(1,R.matrix).set(2,p.size).update(),y.set(0,p.wireframeThreshold).update(),b.uniformBlock("VertexUniforms",S).uniformBlock("FragmentUniforms",y).primitive(o.TRIANGLES).drawRanges([0,g]).draw()}),{canvas:d,context:"webgl2",animate:!0})},{"3d-view-controls":1,"canvas-fit":4,"canvas-sketch":6,"canvas-sketch-util/random":5,"d3-color":9,"d3-scale-chromatic":11,"dat-gui":12,"gl-mat4":33,picogl:72,"primitive-icosphere":73}],85:[function(e,t,i){(function(e){e.CANVAS_SKETCH_DEFAULT_STORAGE_KEY=window.location.href}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[84,85]);</script>